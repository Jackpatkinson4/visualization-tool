{"version":3,"sources":["serviceWorker.js","anim/SingleAnimation.js","anim/UndoFunctions.js","anim/CustomEvents.js","anim/AnimatedObject.js","anim/AnimatedBTreeNode.js","anim/AnimatedCircle.js","anim/AnimatedCircularlyLinkedListNode.js","anim/AnimatedDoublyLinkedListNode.js","anim/AnimatedHighlightCircle.js","anim/AnimatedLabel.js","anim/AnimatedLine.js","anim/AnimatedLinkedListNode.js","anim/AnimatedRectangle.js","anim/AnimatedSkipListNode.js","anim/ObjectManager.js","anim/AnimationMain.js","components/Footer.js","components/Header.js","algo/Algorithm.js","algo/AVL.js","algo/ArrayList.js","algo/util/GraphValues.js","algo/Graph.js","algo/BFS.js","algo/BST.js","algo/BTree.js","algo/BoyerMoore.js","algo/BruteForce.js","algo/BubbleSort.js","algo/CircularlyLinkedList.js","algo/Hash.js","algo/ClosedHash.js","algo/CocktailSort.js","algo/DFS.js","algo/LCS.js","algo/DequeArray.js","algo/DequeLL.js","algo/util/PriorityQueue.js","algo/Dijkstras.js","algo/DoublyLinkedList.js","algo/Floyd.js","algo/Heap.js","algo/InsertionSort.js","algo/KMP.js","algo/Kruskals.js","algo/LSDRadix.js","algo/LinkedList.js","algo/MergeSort.js","algo/OpenHash.js","algo/Prims.js","algo/QueueArray.js","algo/QueueLL.js","algo/QuickSelect.js","algo/QuickSort.js","algo/RabinKarp.js","algo/SelectionSort.js","algo/SkipList.js","algo/SplayTree.js","AlgoList.js","algo/StackArray.js","algo/StackLL.js","examples/ExampleModals.js","screens/AlgoScreen.js","screens/AboutScreen.js","screens/HomeScreen.js","App.js","index.js"],"names":["Boolean","window","location","hostname","match","SingleAnimation","id","fromX","fromY","toX","toY","this","objectID","UndoBlock","UndoMove","fmX","fmy","tx","ty","animationList","nextAnim","push","UndoCreate","world","removeObject","UndoHighlight","val","color","highlightValue","setHighlight","UndoSetHeight","height","setHeight","UndoSetWidth","width","setWidth","UndoSetNumElements","obj","newNumElems","sizeBeforeChange","getNumElements","sizeAfterChange","labels","Array","colors","i","getText","getTextColor","setNumElements","setText","setTextColor","UndoSetAlpha","alph","alphaVal","setAlpha","UndoSetNull","nv","nullVal","setNull","UndoSetPrevNull","setPrevNull","UndoSetNextNull","setNextNull","UndoSetForegroundColor","setForegroundColor","UndoSetBackgroundColor","setBackgroundColor","UndoSetHighlightIndex","index","setHighlightIndex","UndoSetText","str","newText","labelIndex","UndoSetTextColor","UndoHighlightEdge","from","to","fromID","toID","setEdgeHighlight","UndoSetEdgeThickness","thickness","setEdgeThickness","UndoSetEdgeColor","oldColor","setEdgeColor","UndoSetEdgeAlpha","oldAplha","alpha","setEdgeAlpha","UndoSetPosition","x","y","setNodePosition","UndoSetAlwaysOnTop","onTop","setAlwaysOnTop","UndoSetRectangleEdgeThickness","thicknessArray","setRectangleEdgeThickness","EventListener","events","kind","scope","func","scopeFunctions","length","functions","splice","undefined","event","objects","functs","j","call","AnimatedObject","backgroundColor","foregroundColor","highlighted","label","labelColor","layer","minHeightDiff","range","highlightIndex","highlightIndexDirty","addedToScene","newColor","newAlpha","value","highlightColor","Error","otherObject","right","getWidth","centerY","left","centerX","top","getHeight","bottom","xDelta","yDelta","xPos","yPos","frameNum","frameMod","delta","Math","abs","highlightDiff","hlIndex","AnimatedBTreeNode","widthPerElement","h","numLabels","labelColors","newNumElements","context","startX","isNaN","startY","strokeStyle","fillStyle","beginPath","moveTo","lineTo","closePath","stroke","fill","textAlign","textBaseline","labelX","labelY","fillText","anchor","textIndex","UndoDeleteBTreeNode","addBTreeNode","setLayer","AnimatedCircle","radius","getHeadPointerAttachPos","newWidth","xVec","yVec","len","sqrt","globalAlpha","arc","PI","lineWidth","font","strList","split","leftWidth","measureText","substring","centerWidth","textWidth","startingXForHighlight","leftStr","highlightStr","rightStr","mid","UndoDeleteCircle","addCircleObject","AnimatedCircularlyLinkedListNode","w","linkPercent","nullPointer","labelPosX","labelPosY","np","getClosestCardinalPoint","resetTextPosition","UndoDeleteCircularlyLinkedList","addCircularlyLinkedListObject","AnimatedDoublyLinkedListNode","prevNullPointer","nextNullPointer","closest","UndoDeleteDoublyLinkedList","pnp","nnp","addDoublyLinkedListObject","AnimatedHighlightCircle","UndoDeleteHighlightCircle","addHighlightCircleObject","AnimatedLabel","centered","initialWidth","strokeText","offset","indexOf","UndoDeleteLabel","addLabelObject","AnimatedLine","curve","directed","edgeLabel","anchorPoint","dirty","arrowHeight","arrowWidth","highlightVal","LINE_MAX_HEIGHT_DIFF","n","fromPos","getTailPointerAttachPos","toPos","deltaX","deltaY","midX","midY","controlX","controlY","quadraticCurveTo","midLen","sign","drawArrow","UndoConnect","createConnection","connectEdge","disconnect","AnimatedLinkedListNode","vertical","linkPosEnd","UndoDeleteLinkedList","addLinkedListObject","AnimatedRectangle","xJustify","yJustify","textColor","UndoDeleteRectangle","addRectangleObject","AnimatedSkipListNode","UndoDeleteSkipList","addSkipListObject","ObjectManager","canvasRef","nodes","edges","backEdges","activeLayers","ctx","current","getContext","framenum","statusReport","clearRect","alwaysOnTop","draw","pulseHighlight","shown","layers","resetLayers","objectColor","String","newNode","oldAlpha","nodeID","getAlpha","nextEdge","getHighlight","getHighlightIndex","objectIDfrom","objectIDto","undo","createUndoConnect","pop","deleted","undoStack","node2ID","identifier","len2","node1ID","oldObject","objectLabel","text","max","getTextWidth","lab","connectionPoint","fromObj","toObj","l","getNull","getLeftNull","getRightNull","setColor","id1","id2","alignTop","alignLeft","alignRight","getAlignRightPos","getAlignLeftPos","alignBottom","oldTop","oldHighlight","oldThickness","setThickness","oldEdgeThickness","getEdgeThickness","centering","newLabel","nodeLabel","linkPer","verticalOrientation","numElems","widthPerElem","newX","newY","getCookie","cookieName","cookies","document","cookie","substr","replace","unescape","setCookie","expireDays","exDate","Date","setDate","getDate","ANIMATION_SPEED_DEFAULT","addControlToAnimationBar","animBarRef","type","name","callback","element","createElement","setAttribute","onclick","onkeydown","tableEntry","appendChild","addDivisorToAnimationBar","divisorLeft","divisorRight","AnimationManager","objectManager","animatedObjects","animationPaused","awaitingStep","currentlyAnimating","animationSteps","currentAnimation","previousAnimationSteps","currFrame","animationBlockLength","currentBlock","doingUndo","undoAnimationStepIndices","undoAnimationStepIndicesStack","paused","canvas","skipBackButton","skipBack","stepBackButton","stepBack","playPauseBackButton","doPlayPause","stepForwardButton","step","skipForwardButton","skipForward","speed","parseInt","slider","Slider","defaultValue","onChange","e","setSpeed","controlBar","getElementById","newTable","midLevel","bottomLevel","ReactDOM","render","align","txtNode","createTextNode","heightEntry","field","changeSize","innerWidth","intOnly","maxSize","size","keyASCII","keyCode","which","controlKey","sizeButton","addListener","animStarted","animEnded","animWaiting","animUndoUnavailable","percent","pausedValue","uppercase","toUpperCase","clr","charAt","newSpeed","floor","fireEvent","undoBlock","stopTimer","update","foundBreak","anyAnimations","act","params","commands","startNextBlock","startTimer","undoLastBlock","keepUndoing","finishUndoBlock","clearHistory","clearAllObjects","runFast","undoInitialStep","animateNext","addUndoAnimation","setAllLayers","lerp","getNodeX","getNodeY","disabled","timer","setTimeout","timeout","setPaused","clearInterval","move","removedEdges","deleteIncident","concat","getObject","createUndoDelete","connect","connectNext","connectPrev","connectCurve","connectSkipList","undoConnect","createCircle","createHighlightCircle","createRectangle","createLabel","createLinkedListNode","isArray","map","createDoublyLinkedListNode","createCircularlyLinkedListNode","createSkipListNode","createBTreeNode","oldText","oldThicknessArray","oldHeight","oldWidth","oldNull","oldElem","setPosition","oldX","oldY","oldIndex","bringToTop","moveToAlignRight","newXY","Footer","className","href","Header","state","menuVisible","toggleMenu","setState","Fragment","onClick","null","true","false","React","Component","addLabelToAlgorithmBar","labelName","group","addCheckboxToAlgorithmBar","boxLabel","checked","span","addRadioButtonGroupToAlgorithmBar","buttonNames","groupName","buttonList","button","topLevelTableEntry","addControlToAlgorithmBar","addDivisorToAlgorithmBar","addGroupToAlgorithmBar","horizontal","parentGroup","Algorithm","am","animationManager","disableUI","enableUI","canvasWidth","canvasHeight","actionHistory","recordAnimation","code","start_x","start_y","line_height","standard_color","codeID","nextIndex","cmd","reset","args","next","retVal","startNewAnimation","input","maxLen","test","funct","maxsize","newHeight","prototype","returnSubmitFloat","addReturnSubmit","action","returnSubmit","AVL","first_print_pos_y","PRINT_VERTICAL_GAP","print_max","startingX","addControls","EXPLANITORY_TEXT_X","EXPLANITORY_TEXT_Y","controls","insertField","insertCallback","bind","insertButton","deleteField","deleteCallback","deleteButton","findField","findCallback","findButton","printButton","printCallback","clearButton","clearCallback","predSuccButtonList","predButton","succButton","predSucc","treeRoot","insertedValue","normalizeNumber","implementAction","add","deletedValue","remove","findValue","findElement","printTree","clear","highlightID","firstLabel","HIGHLIGHT_COLOR","xPosOfNextLabel","FIRST_PRINT_POS_X","yPosOfNextLabel","printTreeRec","tree","nextLabelID","data","PRINT_COLOR","PRINT_HORIZONTAL_GAP","doFind","graphicID","curr","LINK_COLOR","remakeTree","addH","resizeTree","treeNodeID","heightLabelID","bfLabelID","STARTING_Y","FOREGROUND_COLOR","BACKGROUND_COLOR","HEIGHT_LABEL_COLOR","AVLNode","parent","connectSmart","balance","some","updateHeightAndBF","bf","HIGHLIGHT_LABEL_COLOR","singleRotateRight","singleRotateLeft","B","A","t2","isLeftChild","removeH","deleteNode","dummy","removeSucc","removePred","startingPoint","resizeWidths","rightWidth","setNewPositions","animateNewPositions","xPosition","yPosition","side","heightLabelX","bfLabelX","heightLabelY","bfLabelY","HEIGHT_DELTA","WIDTH_DELTA","recClear","hid","bfid","initialX","initialY","node","r","HIGHLIGHT_LINK_COLOR","HIGHLIGHT_CIRCLE_COLOR","ArrayList","setup","addVerticalGroup","addTopHorizontalGroup","addBottomHorizontalGroup","addValueField","addIndexCallback","addIndexField","addFrontButton","addFrontCallback","addBackButton","addBackCallback","addIndexButton","removeVerticalGroup","removeTopHorizontalGroup","removeBottomHorizontalGroup","removeField","removeIndexCallback","removeIndexButton","removeFrontButton","removeFrontCallback","removeBackButton","removeBackCallback","arrayData","arrayID","arrayLabelID","xpos","ypos","highlight1ID","addVal","clearAll","elemToAdd","labPushID","labPushValID","presentID","labPopValID","LARGE_ALLOWED","LARGE_CURVE","LARGE_X_POS_LOGICAL","LARGE_Y_POS_LOGICAL","SMALL_ALLLOWED","SMALL_CURVE","SMALL_X_POS_LOGICAL","SMALL_Y_POS_LOGICAL","BFS_DFS_ADJ_LIST","row","DIJKSTRAS_ADJ_LIST","Number","PRIMS_KRUSKALS_ADJ_LIST","KRUSKALS_DS_COLORS","Graph","defaultEdges","dir","dag","costs","currentLayer","isDAG","showEdgeCosts","setup_small","addDirection","verticalGroup","newGraphButton","newGraphCallback","defaultGraphButton","defaultGraphCallback","radioButtonList","undirectedGraphButton","directedGraphCallback","directedGraphButton","smallGraphButton","smallGraphCallback","largeGraphButton","largeGraphCallback","logicalButton","graphRepChangedCallback","adjacencyListButton","adjacencyMatrixButton","newDirected","resetAll","setup_large","newLayer","adj_matrix","adj_list_edges","adj_matrixID","circleID","highlightCircleL","x_pos_logical","y_pos_logical","highlightCircleAL","adj_list_x_start","adj_list_width","adj_list_y_start","adj_list_height","highlightCircleAM","adj_matrix_x_start","adj_matrix_width","adj_matrix_y_start","adj_matrix_height","clearEdges","buildEdges","adjustCurveForDirectedEdges","allowed","adj_list_elem_width","adj_list_elem_height","adj_list_spacing_after_list","adj_list_spacing_between_nodes","isLarge","bidirectional","toStr","edgePercent","random","buildAdjList","buildAdjMatrix","adj_matrix_index_x","adj_matrix_index_y","adj_list_list","adj_list_index","lastElem","nextXPos","hasEdges","vertex","fromCharCode","control","BFS","startField","startCallback","startButton","adjMatrix","messageID","visited","queueID","listID","visitedID","infoLabelID","VISITED_START_X","VISITED_START_Y","LIST_START_X","LIST_START_Y","QUEUE_START_X","QUEUE_START_Y","lastIndex","startvalue","charCodeAt","doBFS","startVetex","queue","rebuildEdges","shift","visitVertex","neighbor","highlightEdge","leaveVertex","BST","BSTNode","MESSAGE_X","MESSAGE_Y","BTree","starting_x","preemptiveSplit","max_keys","min_keys","split_index","max_degree","moveLabel1ID","moveLabel2ID","ignoreInputs","newMaxDegree","changeDegree","insertElement","deleteElement","clearTree","premptiveSplitBox","changePreemtiveSplit","newValue","isLeaf","numKeys","keys","getLabelX","children","deleteTree","degree","newDegree","maxDegreeRadioButtons","findInTree","BTreeNode","insertNotFull","insert","insertValue","insertIndex","findIndex","newTree","insertRepair","rightNode","currentParent","parentIndex","risingNode","leftNode","doDeleteNotEmpty","doDelete","nextNode","stealFromLeft","mergeRight","stealFromRight","maxNode","minNode","repairAfterDelete","parentNode","rightSib","fromParentIndex","tmpLabel1","tmpLabel2","leftSib","WIDTH_PER_ELEM","leftEdge","priorWidth","widths","treeWidth","BoyerMoore","textField","patternField","blotButton","buildLastOccurrenceTableCallback","textRowID","comparisonMatrixID","patternTableLabelID","patternTableCharacterID","patternTableIndexID","lastTableLabelID","lastTableCharacterID","lastTableValueID","pattern","find","onlyBuildLastOccurrenceTable","maxRows","getMaxRows","cellSize","col","lastTable","buildLastTable","iPointerID","jPointerID","k","textLength","labelsX","PATTERN_START_Y","LAST_TABLE_START_Y","patternTableStartX","lotStartX","lotPointerID","Object","char","BruteForce","lastSwapEnabled","BubbleSort","listField","sortCallback","lastSwapCheckbox","toggleLastSwap","displayData","list","sort","filter","slice","elemCounts","Map","letterMap","count","has","get","set","toString","currChar","ARRAY_START_X","sorted","end","lastSwapped","movePointers","swap","iXPos","jXPos","iLabelID","jLabelID","temp","CircularlyLinkedList","initialIndex","linkedListElemID","leftoverLabelID","resetNodePositions","labCopiedValID","copiedData","firstNodeID","lastX","lastY","LINKED_LIST_ELEM_HEIGHT","nextX","nextY","labPopID","nodePosX","LINKED_LIST_START_X","secondNodeY","LINKED_LIST_START_Y","removedNodeIndex","Hash","hashingIntegers","hashIntegerButton","changeHashTypeCallback","hashStringButton","newHashingIntegers","changeHashType","newHashingIntegerValue","labelID1","labelID2","table_size","currHash","HASH_LABEL_X","indexXPos","indexYPos","label1","wordToHashID","wordToHash","digits","hashValue","nextByte","nextByteID","resultDigits","floatingDigits","floatingVals","operatorID","barID","nextChar","carry","HASH_NUMBER_START_X","label2","HASH_NUMBER_START_Y","ARRAY_ELEM_WIDTH","ClosedHash","elements_per_row","linearProblingButton","linearProbeCallback","quadraticProbingButton","quadraticProbeCallback","doubleHashingButton","doubleHashingCallback","currentHashingTypeButtonState","newProbingType","skipDist","changeProbeType","elem","ExplainLabel","doHash","getEmptyIndex","labID","hashTableVisual","hashTableValues","empty","labelID","skipVal","resetSkipDist","foundIndex","candidateIndex","getElemIndex","hashTableIndices","nextID","nextYPos","resetIndex","CocktailSort","start","DFS","physicalStack","recursiveStackButton","stackCallback","physicalStackButton","stackID","stackLabelID","physical","doDFSStack","doDFSRecursive","startVertex","stack","stackStartY","stackSpacing","vertexID","recursionSpacingX","recursionSpacingY","currentID","dfsVisit","currVertex","messageX","nextMessage","LCS","S1Field","runCallback","S2Field","tableButton","oldIDs","run","str1","str2","clearOldIDs","buildTable","moveID","tableID","tableVals","S1TableID","S2TableID","tableXPos","tableYPos","buildLCSFromTable","TABLE_START_Y","TABLE_START_X","currX","currY","sequence","header","SEQUENCE_START_Y","topThick","leftThick","nextSequenceID","DequeArray","addField","addFirstButton","addFirstCallBack","addLastButton","addLastCallback","removeFirstButton","removeFirstCallback","removeLastButton","removeLastCallback","frontID","frontLabelID","sizeID","sizeLabelID","front","highlight2ID","pushVal","addLast","removeFirst","removeLast","addFirst","elemToaddLast","labaddLastID","labaddLastValID","addIndex","labelAddID","QUEUE_LABEL_X","labremoveFirstID","labremoveFirstValID","removeFirstdVal","adjustIfEmpty","remLabelID","remLabelValID","remIndex","removedVal","DequeLL","addFirstCallback","PriorityQueue","backingArray","priority","a","b","Dijkstras","distance","distanceID","pq","tableEntryHeight","comparisonMessageID","doDijkstra","enqueue","includes","dequeue","pqIDs","getIDs","curDist","edgDist","newDist","oldDist","oldDistStr","newPqIDs","DoublyLinkedList","Floyd","costTable","pathTable","alwaysUseINF","cost_table_width","cost_table_height","cost_table_start_x","cost_table_start_y","path_table_width","path_table_height","path_table_start_x","path_table_start_y","node_1_x_pos","node_1_y_pos","node_2_x_pos","node_2_y_pos","node_3_x_pos","node_3_y_pos","message_x","message_y","costTableID","pathTableID","pathIndexXID","pathIndexYID","costIndexXID","costIndexYID","node3ID","costTableHeader","pathTableHeader","getCostLabel","doFloydWarshall","HEAP_X_POSITIONS","HEAP_Y_POSITIONS","Heap","createArray","removeButton","removeCallback","horizontalGroup","buildHeapField","buildHeapCallback","buildHeapButton","minMaxButtonList","minHeapButton","minHeapCallback","maxHeapButton","maxHeapCallback","isMinHeap","arrayLabels","arrayRects","circleObjs","arrayXPositions","currentHeapSize","swapLabel1","swapLabel2","swapLabel3","swapLabel4","descriptLabel1","descriptLabel2","buildHeap","index1","index2","tmp","childIndex","setIndexHighlight","downheapCheckRightChild","downheapCompare","pushDown","unshift","nextElem","ARRAY_SIZE","currentIndex","upheapCompare","InsertionSort","KMP","bftButton","buildFailureTableCallback","failureTableLabelID","failureTableCharacterID","failureTableValueID","onlyBuildFailureTable","failureTable","buildFailureTable","nextAlignment","FAILURE_TABLE_START_Y","tableStartX","Kruskals","setID","setIndexID","setData","edgesListLeftID","edgesListRightID","SET_ARRAY_START_X","messageLabelID","SET_ARRAY_START_Y","edgesListLeft","edgesListRight","doKruskal","recolorGraph","EDGE_LIST_START_X","tmpLeftID","tmpRightID","tmpLeft","tmpRight","edgeCount","findLabelLeft","findLabelRight","highlightCircle1","highlightCircle2","highlightCircle3","edgesAdded","nextListIndex","CURRENT_LABEL_X","CURRENT_LABEL_Y","newPos","leftRoot","rightRoot","minRoot","min","maxRoot","firstMatch","LSDRadix","arrayDisplay","bucketsData","bucketsID","bucketsDisplay","greatest","log10","longData","display","digit","nthDigit","idBucket","dataBucket","displayBucket","BUCKETS_START_Y","pow","LinkedList","MergeSort","kPointerID","ceil","leftHelper","rightHelper","merge","prevOffset","tempArrayID","drawArrayAndCopy","extraOffset","copyData","currOffset","leftOffset","rightOffset","currArrayID","tempArray","tempDisplay","bottomYPos","kXPos","topYPos","movePointer","fromIndex","toIndex","fromOffset","toOffset","fromRow","toRow","cellID","pointerID","fromXPos","fromYPos","toXPos","toYPos","POINTER_ARRAY_ELEM_WIDTH","OpenHash","POINTER_ARRAY_ELEM_Y","LinkedListNode","found","compareIndex","repositionList","tmpPrev","Prims","doPrim","weight","edge","edgeID","edgeStr","QueueArray","enqueueField","enqueueCallback","enqueueButton","dequeueButton","dequeueCallback","headID","headLabelID","tailID","tailLabelID","head","tail","elemToEnqueue","labEnqueueID","labEnqueueValID","labDequeueID","labDequeueValID","dequeuedVal","QueueLL","tail_pos_y","tail_label_y","elemToPush","resetLinkedListPositions","worstPivotEnabled","firstPivotEnabled","QuickSelect","kField","togglesGroup","worstPivotToggle","toggleWorstPivot","firstPivotToggle","toggleFirstPivot","pPointerID","listStr","helper","pivot","pXPos","swapPivot","other","moveJ","lLabelID","lXPos","pLabelID","QuickSort","RabinKarp","baseLabelID","characterValuesLabelID","textHashLabelID","textHashCalculationID","patternHashLabelID","patternHashCalculationID","toLowerCase","textCalculation","textHash","patternCalculation","patternHash","calculationsX","SelectionSort","smallest","SkipList","topHorizontalGroup","bottomHorizontalGroup","addRandomlyCallback","headsField","addWithHeadsCallback","addRandomlyButton","addWithHeadsButton","getField","getCallback","getButton","NEGATIVE_INFINITY","POSITIVE_INFINITY","SKIP_LIST_START_X","heads","valueLabelId","valueStringId","cfLabelId","cfStringId","headsString","rightPhantomsCol","newCol","foundDuplicate","nextCol","getNextCol","shiftColumns","prevCol","getPrevCol","removedCol","maxHeight","leftPhantomID","rightPhantomID","SplayTree","splay","zigZigRight","doubleRotateRight","zigZigLeft","doubleRotateLeft","treeRot","splayUp","insertElem","treeDelete","valueToDelete","inTree","oldGraphicID","largestLeft","findMax","C","t3","algoMap","algos","StackArray","pushField","pushCallback","pushButton","popButton","popCallback","topID","topLabelID","clearData","StackLL","Dijkstra","Prim","Kruskal","algoList","AlgoScreen","props","updateDimensions","console","log","animManag","toggleExamples","examplesEnabled","algoName","pathname","createRef","currentAlg","addEventListener","removeEventListener","modals","ref","AboutScreen","HomeScreen","exact","path","idx","key","App","basename","component","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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sB,KAAK8iB,UAAY5gB,EACnClC,KAAK+iB,IAAI7G,GAAI5Z,QAAStC,KAAKksB,QAAQhqB,EAAI,GAAIlC,KAAKisB,UAAU/pB,IAC1DlC,KAAK+iB,IAAI7G,GAAG,OAAS0Q,GAEtB5sB,KAAK+iB,IAAI7G,GAAIpD,MAEb,IAAK,IAAI5W,EAAIuB,EAAOvB,EAAIlC,KAAKya,KAAMvY,IAClClC,KAAKisB,UAAU/pB,GAAKlC,KAAKisB,UAAU/pB,EAAI,GAIxC,OADAlC,KAAKya,KAAOza,KAAKya,KAAO,EACjBza,KAAKoc,W,iCAIZpc,KAAKoc,SAAW,GAChB,IAAK,IAAIla,EAAI,EAAGA,EAAIlC,KAAKya,KAAMvY,IAC9BlC,KAAK+iB,IAAI7G,GAAI5Z,QAAStC,KAAKksB,QAAQhqB,GAAI,IAGxC,OADAlC,KAAKya,KAAO,EACLza,KAAKoc,W,kCAIZ,IAAK,IAAIla,EAAI,EAAGA,EAAIlC,KAAKwkB,SAASxe,OAAQ9D,IACzClC,KAAKwkB,SAAStiB,GAAGkb,UAAW,I,iCAK7B,IAAK,IAAIlb,EAAI,EAAGA,EAAIlC,KAAKwkB,SAASxe,OAAQ9D,IACzClC,KAAKwkB,SAAStiB,GAAGkb,UAAW,M,GAlXQ2E,I,QChDjC+K,GAAgB,CACrB,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,G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","file":"static/js/main.1ad5ac4f.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\n/* global process */\n/* eslint-disable no-console */\n\nconst isLocalhost = Boolean(\n\twindow.location.hostname === 'localhost' ||\n\t\t// [::1] is the IPv6 localhost address.\n\t\twindow.location.hostname === '[::1]' ||\n\t\t// 127.0.0.1/8 is considered localhost for IPv4.\n\t\twindow.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/),\n);\n\nexport function register(config) {\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\n\t\t\treturn;\n\t\t}\n\n\t\twindow.addEventListener('load', () => {\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\n\t\t\t\t\t\t\t'worker. To learn more, visit https://bit.ly/CRA-PWA',\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Is not localhost. Just register service worker\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction registerValidSW(swUrl, config) {\n\tnavigator.serviceWorker\n\t\t.register(swUrl)\n\t\t.then(registration => {\n\t\t\tregistration.onupdatefound = () => {\n\t\t\t\tconst installingWorker = registration.installing;\n\t\t\t\tif (installingWorker == null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\t\tif (installingWorker.state === 'installed') {\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\n\t\t\t\t\t\t\t// content until all client tabs are closed.\n\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t'New content is available and will be used when all ' +\n\t\t\t\t\t\t\t\t\t'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.error('Error during service worker registration:', error);\n\t\t});\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n\t// Check if the service worker can be found. If it can't reload the page.\n\tfetch(swUrl)\n\t\t.then(response => {\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\t\tconst contentType = response.headers.get('content-type');\n\t\t\tif (\n\t\t\t\tresponse.status === 404 ||\n\t\t\t\t(contentType != null && contentType.indexOf('javascript') === -1)\n\t\t\t) {\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\t\tnavigator.serviceWorker.ready.then(registration => {\n\t\t\t\t\tregistration.unregister().then(() => {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Service worker found. Proceed as normal.\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t})\n\t\t.catch(() => {\n\t\t\tconsole.log('No internet connection found. App is running in offline mode.');\n\t\t});\n}\n\nexport function unregister() {\n\tif ('serviceWorker' in navigator) {\n\t\tnavigator.serviceWorker.ready.then(registration => {\n\t\t\tregistration.unregister();\n\t\t});\n\t}\n}\n","export default class SingleAnimation {\n\tconstructor(id, fromX, fromY, toX, toY) {\n\t\tthis.objectID = id;\n\t\tthis.fromX = fromX;\n\t\tthis.fromY = fromY;\n\t\tthis.toX = toX;\n\t\tthis.toY = toY;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\n// Base \"class\": UndoBlock\n\nimport SingleAnimation from './SingleAnimation';\n\nexport class UndoBlock {\n\taddUndoAnimation() {\n\t\treturn false;\n\t}\n\n\tundoInitialStep() {}\n}\n\nexport class UndoMove extends UndoBlock {\n\tconstructor(id, fmX, fmy, tx, ty) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.fromX = fmX;\n\t\tthis.fromY = fmy;\n\t\tthis.toX = tx;\n\t\tthis.toY = ty;\n\t}\n\n\taddUndoAnimation(animationList) {\n\t\tconst nextAnim = new SingleAnimation(\n\t\t\tthis.objectID,\n\t\t\tthis.fromX,\n\t\t\tthis.fromY,\n\t\t\tthis.toX,\n\t\t\tthis.toY,\n\t\t);\n\t\tanimationList.push(nextAnim);\n\t\treturn true;\n\t}\n}\n\nexport class UndoCreate extends UndoBlock {\n\tconstructor(id) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.removeObject(this.objectID);\n\t}\n}\n\nexport class UndoHighlight extends UndoBlock {\n\tconstructor(id, val, color) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.highlightValue = val;\n\t\tthis.color = color;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setHighlight(this.objectID, this.highlightValue, this.color);\n\t}\n}\n\nexport class UndoSetHeight extends UndoBlock {\n\tconstructor(id, val) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.height = val;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setHeight(this.objectID, this.height);\n\t}\n}\n\nexport class UndoSetWidth extends UndoBlock {\n\tconstructor(id, val) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.width = val;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setWidth(this.objectID, this.width);\n\t}\n}\n\nexport class UndoSetNumElements extends UndoBlock {\n\tconstructor(obj, newNumElems) {\n\t\tsuper();\n\t\tthis.objectID = obj.objectID;\n\t\tthis.sizeBeforeChange = obj.getNumElements();\n\t\tthis.sizeAfterChange = newNumElems;\n\t\tif (this.sizeBeforeChange > this.sizeAfterChange) {\n\t\t\tthis.labels = new Array(this.sizeBeforeChange - this.sizeAfterChange);\n\t\t\tthis.colors = new Array(this.sizeBeforeChange - this.sizeAfterChange);\n\t\t\tfor (let i = 0; i < this.sizeBeforeChange - this.sizeAfterChange; i++) {\n\t\t\t\tthis.labels[i] = obj.getText(i + this.sizeAfterChange);\n\t\t\t\tthis.colors[i] = obj.getTextColor(i + this.sizeAfterChange);\n\t\t\t}\n\t\t}\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setNumElements(this.objectID, this.sizeBeforeChange);\n\t\tif (this.sizeBeforeChange > this.sizeAfterChange) {\n\t\t\tfor (let i = 0; i < this.sizeBeforeChange - this.sizeAfterChange; i++) {\n\t\t\t\tworld.setText(this.objectID, this.labels[i], i + this.sizeAfterChange);\n\t\t\t\tworld.setTextColor(this.objectID, this.colors[i], i + this.sizeAfterChange);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport class UndoSetAlpha extends UndoBlock {\n\tconstructor(id, alph) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.alphaVal = alph;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setAlpha(this.objectID, this.alphaVal);\n\t}\n}\n\nexport class UndoSetNull extends UndoBlock {\n\tconstructor(id, nv) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.nullVal = nv;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setNull(this.objectID, this.nullVal);\n\t}\n}\n\nexport class UndoSetPrevNull extends UndoBlock {\n\tconstructor(id, nv) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.nullVal = nv;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setPrevNull(this.objectID, this.nullVal);\n\t}\n}\n\nexport class UndoSetNextNull extends UndoBlock {\n\tconstructor(id, nv) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.nullVal = nv;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setNextNull(this.objectID, this.nullVal);\n\t}\n}\n\nexport class UndoSetForegroundColor extends UndoBlock {\n\tconstructor(id, color) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.color = color;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setForegroundColor(this.objectID, this.color);\n\t}\n}\n\nexport class UndoSetBackgroundColor extends UndoBlock {\n\tconstructor(id, color) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.color = color;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setBackgroundColor(this.objectID, this.color);\n\t}\n}\n\nexport class UndoSetHighlightIndex extends UndoBlock {\n\tconstructor(id, index) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.index = index;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setHighlightIndex(this.objectID, this.index);\n\t}\n}\n\nexport class UndoSetText extends UndoBlock {\n\tconstructor(id, str, index) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.newText = str;\n\t\tthis.labelIndex = index;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setText(this.objectID, this.newText, this.labelIndex);\n\t}\n}\n\nexport class UndoSetTextColor extends UndoBlock {\n\tconstructor(id, color, index) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.color = color;\n\t\tthis.index = index;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setTextColor(this.objectID, this.color, this.index);\n\t}\n}\n\nexport class UndoHighlightEdge extends UndoBlock {\n\tconstructor(from, to, val) {\n\t\tsuper();\n\t\tthis.fromID = from;\n\t\tthis.toID = to;\n\t\tthis.highlightValue = val;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setEdgeHighlight(this.fromID, this.toID, this.highlightValue);\n\t}\n}\n\nexport class UndoSetEdgeThickness extends UndoBlock {\n\tconstructor(from, to, val) {\n\t\tsuper();\n\t\tthis.fromID = from;\n\t\tthis.toID = to;\n\t\tthis.thickness = val;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setEdgeThickness(this.fromID, this.toID, this.thickness);\n\t}\n}\n\nexport class UndoSetEdgeColor extends UndoBlock {\n\tconstructor(from, to, oldColor) {\n\t\tsuper();\n\t\tthis.fromID = from;\n\t\tthis.toID = to;\n\t\tthis.color = oldColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setEdgeColor(this.fromID, this.toID, this.color);\n\t}\n}\n\nexport class UndoSetEdgeAlpha extends UndoBlock {\n\tconstructor(from, to, oldAplha) {\n\t\tsuper();\n\t\tthis.fromID = from;\n\t\tthis.toID = to;\n\t\tthis.alpha = oldAplha;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setEdgeAlpha(this.fromID, this.toID, this.alpha);\n\t}\n}\n\nexport class UndoSetPosition extends UndoBlock {\n\tconstructor(id, x, y) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t}\n}\n\nexport class UndoSetAlwaysOnTop extends UndoBlock {\n\tconstructor(id, onTop) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.onTop = onTop;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setAlwaysOnTop(this.objectID, this.onTop);\n\t}\n}\n\nexport class UndoSetRectangleEdgeThickness extends UndoBlock {\n\tconstructor(id, thicknessArray) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.thicknessArray = thicknessArray;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setRectangleEdgeThickness(this.objectID, this.thicknessArray);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nexport default class EventListener {\n\tconstructor() {\n\t\tthis.events = [];\n\t}\n\n\tremoveListener(kind, scope, func) {\n\t\tif (this.events[kind] == null) {\n\t\t\treturn;\n\t\t}\n\t\tlet scopeFunctions = null;\n\t\tlet i;\n\t\tfor (i = 0; i < this.events[kind].length; i++) {\n\t\t\tif (this.events[kind][i].scope === scope) {\n\t\t\t\tscopeFunctions = this.events[kind][i];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (scopeFunctions == null) {\n\t\t\treturn;\n\t\t}\n\t\tfor (i = 0; i < scopeFunctions.functions.length; i++) {\n\t\t\tif (scopeFunctions.functions[i] === func) {\n\t\t\t\tscopeFunctions.functions.splice(i, 1);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\taddListener(kind, scope, func) {\n\t\tif (this.events[kind] === undefined) {\n\t\t\tthis.events[kind] = [];\n\t\t}\n\t\tlet i;\n\t\tlet scopeFunctions = null;\n\t\tfor (i = 0; i < this.events[kind].length; i++) {\n\t\t\tif (this.events[kind][i].scope === scope) {\n\t\t\t\tscopeFunctions = this.events[kind][i];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (scopeFunctions === null) {\n\t\t\tthis.events[kind].push({ scope: scope, functions: [] });\n\t\t\tscopeFunctions = this.events[kind][this.events[kind].length - 1];\n\t\t}\n\t\tfor (i = 0; i < scopeFunctions.functions.length; i++) {\n\t\t\tif (scopeFunctions.functions[i] === func) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tscopeFunctions.functions.push(func);\n\t}\n\n\tfireEvent(kind, event) {\n\t\t// TODO:  Should add a deep clone here ...\n\t\tif (this.events[kind] !== undefined) {\n\t\t\tfor (let i = 0; i < this.events[kind].length; i++) {\n\t\t\t\tconst objects = this.events[kind][i];\n\t\t\t\tconst functs = objects.functions;\n\t\t\t\tconst scope = objects.scope;\n\t\t\t\tfor (let j = 0; j < functs.length; j++) {\n\t\t\t\t\tconst func = functs[j];\n\t\t\t\t\tfunc.call(scope, event);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nexport default class AnimatedObject {\n\tconstructor() {\n\t\tthis.objectID = -1;\n\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\n\t\tthis.backgroundColor = '#FFFFFF';\n\t\tthis.foregroundColor = '#000000';\n\t\tthis.highlighted = false;\n\n\t\tthis.label = '';\n\t\tthis.labelColor = '#000000';\n\n\t\tthis.layer = 0;\n\t\tthis.alpha = 1.0;\n\t\tthis.minHeightDiff = 3;\n\t\tthis.range = 5;\n\n\t\tthis.highlightIndex = -1;\n\t\tthis.highlightIndexDirty = true;\n\n\t\tthis.addedToScene = true;\n\t}\n\n\tsetBackgroundColor(newColor) {\n\t\tthis.backgroundColor = newColor;\n\t}\n\n\tsetNull() {}\n\n\tgetNull() {\n\t\treturn false;\n\t}\n\n\tsetAlpha(newAlpha) {\n\t\tthis.alpha = newAlpha;\n\t}\n\n\tgetAlpha() {\n\t\treturn this.alpha;\n\t}\n\n\tsetForegroundColor(newColor) {\n\t\tthis.foregroundColor = newColor;\n\t\tthis.labelColor = newColor;\n\t}\n\n\tgetHighlight() {\n\t\treturn this.highlighted;\n\t}\n\n\tgetWidth() {\n\t\t// TODO:  Do we want to throw here?  Should always override this ...\n\t\treturn 0;\n\t}\n\n\tgetHeight() {\n\t\t// TODO:  Do we want to throw here?  Should always override this ...\n\t\treturn 0;\n\t}\n\n\tsetHighlight(value, color) {\n\t\tthis.highlighted = value;\n\t\tthis.highlightColor = color || '#ff0000';\n\t}\n\n\tcenterX() {\n\t\treturn this.x;\n\t}\n\n\tsetWidth() {\n\t\tthrow new Error('setWidth() should be implemented in a base class');\n\t}\n\n\tcenterY() {\n\t\treturn this.y;\n\t}\n\n\tgetAlignLeftPos(otherObject) {\n\t\treturn [otherObject.right() + this.getWidth() / 2, otherObject.centerY()];\n\t}\n\n\tgetAlignRightPos(otherObject) {\n\t\treturn [otherObject.left() - this.getWidth() / 2, otherObject.centerY()];\n\t}\n\n\tgetAlignTopPos(otherObject) {\n\t\treturn [otherObject.centerX(), otherObject.top() - this.getHeight() / 2];\n\t}\n\n\tgetAlignBottomPos(otherObject) {\n\t\treturn [otherObject.centerX(), otherObject.bottom() + this.getHeight() / 2];\n\t}\n\n\talignLeft(otherObject) {\n\t\t// Assuming centering.  Overridden method could modify if not centered\n\t\t//  (See AnimatedLabel, for instance)\n\t\tthis.y = otherObject.centerY();\n\t\tthis.x = otherObject.right() + this.getWidth() / 2;\n\t}\n\n\talignRight(otherObject) {\n\t\t// Assuming centering.  Overridden method could modify if not centered\n\t\t//  (See AnimatedLabel, for instance)\n\t\tthis.y = otherObject.centerY();\n\t\tthis.x = otherObject.left() - this.getWidth() / 2;\n\t}\n\n\talignTop(otherObject) {\n\t\t// Assuming centering.  Overridden method could modify if not centered\n\t\tthis.x = otherObject.centerX();\n\t\tthis.y = otherObject.top() - this.getHeight() / 2;\n\t}\n\n\talignBottom(otherObject) {\n\t\tthis.x = otherObject.centerX();\n\t\tthis.y = otherObject.bottom() + this.getHeight() / 2;\n\t}\n\n\tgetClosestCardinalPoint(fromX, fromY) {\n\t\tlet xDelta;\n\t\tlet yDelta;\n\t\tlet xPos;\n\t\tlet yPos;\n\n\t\tif (fromX < this.left()) {\n\t\t\txDelta = this.left() - fromX;\n\t\t\txPos = this.left();\n\t\t} else if (fromX > this.right()) {\n\t\t\txDelta = fromX - this.right();\n\t\t\txPos = this.right();\n\t\t} else {\n\t\t\txDelta = 0;\n\t\t\txPos = this.centerX();\n\t\t}\n\n\t\tif (fromY < this.top()) {\n\t\t\tyDelta = this.top() - fromY;\n\t\t\tyPos = this.top();\n\t\t} else if (fromY > this.bottom()) {\n\t\t\tyDelta = fromY - this.bottom();\n\t\t\tyPos = this.bottom();\n\t\t} else {\n\t\t\tyDelta = 0;\n\t\t\tyPos = this.centerY();\n\t\t}\n\n\t\tif (yDelta > xDelta) {\n\t\t\txPos = this.centerX();\n\t\t} else {\n\t\t\tyPos = this.centerY();\n\t\t}\n\n\t\treturn [xPos, yPos];\n\t}\n\n\tcentered() {\n\t\treturn false;\n\t}\n\n\tpulseHighlight(frameNum) {\n\t\tif (this.highlighted) {\n\t\t\tconst frameMod = frameNum / 7.0;\n\t\t\tconst delta = Math.abs((frameMod % (2 * this.range - 2)) - this.range + 1);\n\t\t\tthis.highlightDiff = delta + this.minHeightDiff;\n\t\t}\n\t}\n\n\tgetTailPointerAttachPos() {\n\t\treturn [this.x, this.y];\n\t}\n\n\tgetHeadPointerAttachPos() {\n\t\treturn [this.x, this.y];\n\t}\n\n\tidentifier() {\n\t\treturn this.objectID;\n\t}\n\n\tgetText() {\n\t\treturn this.label;\n\t}\n\n\tgetTextColor() {\n\t\treturn this.labelColor;\n\t}\n\n\tsetTextColor(color) {\n\t\tthis.labelColor = color;\n\t}\n\n\tsetText(newText) {\n\t\tthis.label = newText;\n\t}\n\n\tsetHighlightIndex(hlIndex) {\n\t\tthis.highlightIndex = hlIndex;\n\t\tthis.highlightIndexDirty = true;\n\t}\n\n\tgetHighlightIndex() {\n\t\treturn this.highlightIndex;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport AnimatedObject from './AnimatedObject.js';\nimport { UndoBlock } from './UndoFunctions.js';\n\nconst MIN_WIDTH = 10;\nconst EDGE_POINTER_DISPLACEMENT = 5;\n\nexport default class AnimatedBTreeNode extends AnimatedObject {\n\tconstructor(objectID, widthPerElement, h, numLabels, backgroundColor, foregroundColor) {\n\t\tsuper();\n\n\t\tthis.objectID = objectID;\n\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\n\t\tthis.widthPerElement = widthPerElement;\n\t\tthis.h = h;\n\t\tthis.numLabels = numLabels;\n\t\tthis.labels = [];\n\t\tthis.labelColors = [];\n\t\tfor (let i = 0; i < this.numLabels; i++) {\n\t\t\tthis.labelColors[i] = this.foregroundColor;\n\t\t}\n\t}\n\n\tgetNumElements() {\n\t\treturn this.numLabels;\n\t}\n\n\tgetWidth() {\n\t\tif (this.numLabels > 0) {\n\t\t\treturn this.widthPerElement * this.numLabels;\n\t\t} else {\n\t\t\treturn MIN_WIDTH;\n\t\t}\n\t}\n\n\tsetNumElements(newNumElements) {\n\t\tif (this.numLabels < newNumElements) {\n\t\t\tfor (let i = this.numLabels; i < newNumElements; i++) {\n\t\t\t\tthis.labels[i] = '';\n\t\t\t\tthis.labelColors[i] = this.foregroundColor;\n\t\t\t}\n\t\t\tthis.numLabels = newNumElements;\n\t\t} else if (this.numLabels > newNumElements) {\n\t\t\tfor (let i = newNumElements; i < this.numLabels; i++) {\n\t\t\t\tthis.labels[i] = null;\n\t\t\t}\n\t\t\tthis.numLabels = newNumElements;\n\t\t}\n\t}\n\n\tleft() {\n\t\treturn this.x - this.getWidth() / 2.0;\n\t}\n\n\tright() {\n\t\treturn this.x + this.getWidth() / 2.0;\n\t}\n\n\ttop() {\n\t\treturn this.y - this.h / 2.0;\n\t}\n\n\tbottom() {\n\t\treturn this.y + this.h / 2.0;\n\t}\n\n\tdraw(context) {\n\t\tlet startX;\n\n\t\tstartX = this.left();\n\t\tif (isNaN(startX)) {\n\t\t\tstartX = 0;\n\t\t}\n\t\tconst startY = this.top();\n\n\t\tif (this.highlighted) {\n\t\t\tcontext.strokeStyle = '#FF0000';\n\t\t\tcontext.fillStyle = '#FF0000';\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(\n\t\t\t\tstartX + this.getWidth() + this.highlightDiff,\n\t\t\t\tstartY - this.highlightDiff,\n\t\t\t);\n\t\t\tcontext.lineTo(\n\t\t\t\tstartX + this.getWidth() + this.highlightDiff,\n\t\t\t\tstartY + this.h + this.highlightDiff,\n\t\t\t);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY + this.h + this.highlightDiff);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t\tcontext.fill();\n\t\t}\n\n\t\tcontext.strokeStyle = this.foregroundColor;\n\t\tcontext.fillStyle = this.backgroundColor;\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(startX, startY);\n\t\tcontext.lineTo(startX + this.getWidth(), startY);\n\t\tcontext.lineTo(startX + this.getWidth(), startY + this.h);\n\t\tcontext.lineTo(startX, startY + this.h);\n\t\tcontext.lineTo(startX, startY);\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\t\tcontext.fill();\n\n\t\tcontext.textAlign = 'center';\n\t\tcontext.textBaseline = 'middle';\n\n\t\tfor (let i = 0; i < this.numLabels; i++) {\n\t\t\tconst labelX =\n\t\t\t\tthis.x -\n\t\t\t\t(this.widthPerElement * this.numLabels) / 2 +\n\t\t\t\tthis.widthPerElement / 2 +\n\t\t\t\ti * this.widthPerElement;\n\t\t\tconst labelY = this.y;\n\n\t\t\tcontext.fillStyle = this.labelColors[i];\n\t\t\tcontext.fillText(this.labels[i], labelX, labelY);\n\t\t}\n\t}\n\n\tgetHeight() {\n\t\treturn this.h;\n\t}\n\n\tsetForegroundColor(newColor) {\n\t\tthis.foregroundColor = newColor;\n\t\tfor (let i = 0; i < this.numLabels; i++) {\n\t\t\tthis.labelColor[i] = newColor;\n\t\t}\n\t}\n\n\tgetTailPointerAttachPos(fromX, fromY, anchor) {\n\t\tif (anchor === 0) {\n\t\t\treturn [this.left() + EDGE_POINTER_DISPLACEMENT, this.y];\n\t\t} else if (anchor === this.numLabels) {\n\t\t\treturn [this.right() - EDGE_POINTER_DISPLACEMENT, this.y];\n\t\t} else {\n\t\t\treturn [this.left() + anchor * this.widthPerElement, this.y];\n\t\t}\n\t}\n\n\tgetHeadPointerAttachPos(fromX, fromY) {\n\t\tif (fromY < this.y - this.h / 2) {\n\t\t\treturn [this.x, this.y - this.h / 2];\n\t\t} else if (this.fromY > this.y + this.h / 2) {\n\t\t\treturn [this.x, this.y + this.h / 2];\n\t\t} else if (fromX < this.x - this.getWidth() / 2) {\n\t\t\treturn [this.x - this.getWidth() / 2, this.y];\n\t\t} else {\n\t\t\treturn [this.x + this.getWidth() / 2, this.y];\n\t\t}\n\t}\n\n\tgetTextColor(textIndex) {\n\t\ttextIndex = textIndex || 0;\n\t\treturn this.labelColors[textIndex];\n\t}\n\n\tgetText(index) {\n\t\tindex = index || 0;\n\t\treturn this.labels[index];\n\t}\n\n\tsetTextColor(color, textIndex) {\n\t\ttextIndex = textIndex || 0;\n\t\tthis.labelColors[textIndex] = color;\n\t}\n\n\tsetText(newText, textIndex) {\n\t\ttextIndex = textIndex || 0;\n\t\tthis.labels[textIndex] = newText;\n\t}\n\n\tcreateUndoDelete() {\n\t\treturn new UndoDeleteBTreeNode(\n\t\t\tthis.objectID,\n\t\t\tthis.numLabels,\n\t\t\tthis.labels,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.widthPerElement,\n\t\t\tthis.h,\n\t\t\tthis.labelColors,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t\tthis.layer,\n\t\t\tthis.highlighted,\n\t\t\tthis.highlightColor,\n\t\t);\n\t}\n}\n\nclass UndoDeleteBTreeNode extends UndoBlock {\n\tconstructor(\n\t\tobjectID,\n\t\tnumLabels,\n\t\tlabels,\n\t\tx,\n\t\ty,\n\t\twidthPerElement,\n\t\th,\n\t\tlabelColors,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t\tlayer,\n\t\thighlighted,\n\t\thighlightColor,\n\t) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.numLabels = numLabels;\n\t\tthis.labels = labels;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.widthPerElement = widthPerElement;\n\t\tthis.h = h;\n\t\tthis.labelColors = labelColors;\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.layer = layer;\n\t\tthis.highlighted = highlighted;\n\t\tthis.highlightColor = highlightColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.addBTreeNode(\n\t\t\tthis.objectID,\n\t\t\tthis.widthPerElement,\n\t\t\tthis.h,\n\t\t\tthis.numLabels,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t);\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t\tfor (let i = 0; i < this.numLabels; i++) {\n\t\t\tworld.setText(this.objectID, this.labels[i], i);\n\t\t\tworld.setTextColor(this.objectID, this.labelColors[i], i);\n\t\t}\n\t\tworld.setLayer(this.objectID, this.layer);\n\t\tworld.setHighlight(this.objectID, this.highlighted, this.highlightColor);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport AnimatedObject from './AnimatedObject';\nimport { UndoBlock } from './UndoFunctions';\n\nexport default class AnimatedCircle extends AnimatedObject {\n\tconstructor(objectID, label) {\n\t\tsuper();\n\n\t\tthis.objectID = objectID;\n\n\t\tthis.label = label;\n\n\t\tthis.radius = 20;\n\t\tthis.thickness = 3;\n\t\tthis.highlightIndex = -1;\n\t}\n\n\tgetTailPointerAttachPos(fromX, fromY) {\n\t\treturn this.getHeadPointerAttachPos(fromX, fromY);\n\t}\n\n\tgetWidth() {\n\t\treturn this.radius * 2;\n\t}\n\n\tsetWidth(newWidth) {\n\t\tthis.radius = newWidth / 2;\n\t}\n\n\tgetHeadPointerAttachPos(fromX, fromY) {\n\t\tconst xVec = fromX - this.x;\n\t\tconst yVec = fromY - this.y;\n\t\tconst len = Math.sqrt(xVec * xVec + yVec * yVec);\n\t\tif (len === 0) return [this.x, this.y];\n\t\treturn [this.x + (xVec / len) * this.radius, this.y + (yVec / len) * this.radius];\n\t}\n\n\tsetHighlightIndex(hlIndex) {\n\t\tthis.highlightIndex = hlIndex;\n\t\tthis.highlightIndexDirty = true;\n\t}\n\n\tdraw(context) {\n\t\tcontext.globalAlpha = this.alpha;\n\n\t\tif (this.highlighted) {\n\t\t\tcontext.fillStyle = this.highlightColor;\n\t\t\tcontext.beginPath();\n\t\t\tcontext.arc(this.x, this.y, this.radius + this.highlightDiff, 0, Math.PI * 2, true);\n\t\t\tcontext.closePath();\n\t\t\tcontext.fill();\n\t\t}\n\n\t\tcontext.fillStyle = this.backgroundColor;\n\t\tcontext.strokeStyle = this.foregroundColor;\n\t\tcontext.lineWidth = 1.2;\n\t\tcontext.beginPath();\n\t\tcontext.arc(this.x, this.y, this.radius, 0, Math.PI * 2, true);\n\t\tcontext.closePath();\n\t\tcontext.fill();\n\t\tcontext.stroke();\n\n\t\tcontext.textAlign = 'center';\n\t\tcontext.font = '12px Arial';\n\t\tcontext.textBaseline = 'middle';\n\t\tcontext.lineWidth = 2;\n\t\tcontext.fillStyle = this.foregroundColor;\n\t\tconst strList = this.label.split('\\n');\n\t\tif (strList.length === 1) {\n\t\t\tif (this.highlightIndexDirty && this.highlightIndex !== -1) {\n\t\t\t\tthis.leftWidth = context.measureText(\n\t\t\t\t\tthis.label.substring(0, this.highlightIndex),\n\t\t\t\t).width;\n\t\t\t\tthis.centerWidth = context.measureText(\n\t\t\t\t\tthis.label.substring(this.highlightIndex, this.highlightIndex + 1),\n\t\t\t\t).width;\n\t\t\t\tthis.textWidth = context.measureText(this.label).width;\n\t\t\t\tthis.highlightIndexDirty = false;\n\t\t\t}\n\t\t\tif (this.highlightIndex !== -1 && this.highlightIndex < this.label.length) {\n\t\t\t\tconst startingXForHighlight = this.x - this.textWidth / 2;\n\t\t\t\tcontext.textAlign = 'left';\n\t\t\t\tconst leftStr = this.label.substring(0, this.highlightIndex);\n\t\t\t\tconst highlightStr = this.label.substring(\n\t\t\t\t\tthis.highlightIndex,\n\t\t\t\t\tthis.highlightIndex + 1,\n\t\t\t\t);\n\t\t\t\tconst rightStr = this.label.substring(this.highlightIndex + 1);\n\t\t\t\tcontext.fillText(leftStr, startingXForHighlight, this.y);\n\t\t\t\tcontext.strokeStyle = '#FF0000';\n\t\t\t\tcontext.fillStyle = '#FF0000';\n\t\t\t\tcontext.fillText(highlightStr, startingXForHighlight + this.leftWidth, this.y);\n\n\t\t\t\tcontext.strokeStyle = this.labelColor;\n\t\t\t\tcontext.fillStyle = this.labelColor;\n\t\t\t\tcontext.fillText(\n\t\t\t\t\trightStr,\n\t\t\t\t\tstartingXForHighlight + this.leftWidth + this.centerWidth,\n\t\t\t\t\tthis.y,\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tcontext.fillText(this.label, this.x, this.y);\n\t\t\t}\n\t\t} else if (strList.length % 2 === 0) {\n\t\t\tconst mid = strList.length / 2;\n\t\t\tfor (let i = 0; i < strList.length / 2; i++) {\n\t\t\t\tcontext.fillText(strList[mid - i - 1], this.x, this.y - (i + 0.5) * 12);\n\t\t\t\tcontext.fillText(strList[mid + i], this.x, this.y + (i + 0.5) * 12);\n\t\t\t}\n\t\t} else {\n\t\t\tconst mid = (strList.length - 1) / 2;\n\t\t\tcontext.fillText(strList[mid], this.x, this.y);\n\t\t\tfor (let i = 0; i < mid; i++) {\n\t\t\t\tcontext.fillText(strList[mid - (i + 1)], this.x, this.y - (i + 1) * 12);\n\t\t\t\tcontext.fillText(strList[mid + (i + 1)], this.x, this.y + (i + 1) * 12);\n\t\t\t}\n\t\t}\n\t}\n\n\tcreateUndoDelete() {\n\t\treturn new UndoDeleteCircle(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.foregroundColor,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.layer,\n\t\t\tthis.radius,\n\t\t\tthis.highlighted,\n\t\t\tthis.highlightColor,\n\t\t);\n\t}\n}\n\nclass UndoDeleteCircle extends UndoBlock {\n\tconstructor(\n\t\tobjectID,\n\t\tlabel,\n\t\tx,\n\t\ty,\n\t\tforegroundColor,\n\t\tbackgroundColor,\n\t\tlayer,\n\t\tradius,\n\t\thighlighted,\n\t\thighlightColor,\n\t) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.label = label;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.layer = layer;\n\t\tthis.radius = radius;\n\t\tthis.highlighted = highlighted;\n\t\tthis.highlightColor = highlightColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.addCircleObject(this.objectID, this.label);\n\t\tworld.setWidth(this.objectID, this.radius * 2);\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t\tworld.setForegroundColor(this.objectID, this.foregroundColor);\n\t\tworld.setBackgroundColor(this.objectID, this.backgroundColor);\n\t\tworld.setLayer(this.objectID, this.layer);\n\t\tworld.setHighlight(this.objectID, this.highlighted, this.highlightColor);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport AnimatedObject from './AnimatedObject.js';\nimport { UndoBlock } from './UndoFunctions.js';\n\nexport default class AnimatedCircularlyLinkedListNode extends AnimatedObject {\n\tconstructor(objectID, label, w, h, linkPercent, backgroundColor, foregroundColor) {\n\t\tsuper();\n\n\t\tthis.objectID = objectID;\n\n\t\tthis.w = w;\n\t\tthis.h = h;\n\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.highlighted = false;\n\n\t\tthis.linkPercent = linkPercent;\n\t\tthis.nullPointer = false;\n\n\t\tthis.label = label;\n\t\tthis.labelPosX = 0;\n\t\tthis.labelPosY = 0;\n\t\tthis.labelColor = foregroundColor;\n\t}\n\n\tsetNull(np) {\n\t\tif (this.nullPointer !== np) {\n\t\t\tthis.nullPointer = np;\n\t\t}\n\t}\n\n\tgetNull() {\n\t\treturn this.nullPointer;\n\t}\n\n\tleft() {\n\t\treturn this.x - (this.w * (1 - this.linkPercent)) / 2;\n\t}\n\n\tright() {\n\t\treturn this.x + (this.w * (this.linkPercent + 1)) / 2;\n\t}\n\n\ttop() {\n\t\treturn this.y - this.h / 2.0;\n\t}\n\n\tbottom() {\n\t\treturn this.y + this.h / 2.0;\n\t}\n\n\tresetTextPosition() {\n\t\tthis.labelPosX = this.x;\n\t\tthis.labelPosY = this.y;\n\t}\n\n\tgetTailPointerAttachPos() {\n\t\treturn [this.x + this.w / 2.0, this.y];\n\t}\n\n\tgetHeadPointerAttachPos(fromX, fromY) {\n\t\tif (fromX < this.x) {\n\t\t\treturn this.getClosestCardinalPoint(fromX, fromY); // Normal anchor\n\t\t} else {\n\t\t\treturn [this.x, this.bottom()]; // Curved pointer coming from the right, connect to bottom\n\t\t}\n\t}\n\n\tsetWidth(w) {\n\t\tthis.w = w;\n\t\tthis.resetTextPosition();\n\t}\n\n\tsetHeight(h) {\n\t\tthis.h = h;\n\t\tthis.resetTextPosition();\n\t}\n\n\tgetWidth() {\n\t\treturn this.w;\n\t}\n\n\tgetHeight() {\n\t\treturn this.h;\n\t}\n\n\tdraw(context) {\n\t\tcontext.lineWidth = 2;\n\n\t\tlet startX;\n\t\tlet startY;\n\n\t\tstartX = this.left();\n\t\tstartY = this.top();\n\n\t\tif (this.highlighted) {\n\t\t\tcontext.strokeStyle = '#FF0000';\n\t\t\tcontext.fillStyle = '#FF0000';\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(startX + this.w + this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(\n\t\t\t\tstartX + this.w + this.highlightDiff,\n\t\t\t\tstartY + this.h + this.highlightDiff,\n\t\t\t);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY + this.h + this.highlightDiff);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t\tcontext.fill();\n\t\t}\n\t\tcontext.strokeStyle = this.foregroundColor;\n\t\tcontext.fillStyle = this.backgroundColor;\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(startX, startY);\n\t\tcontext.lineTo(startX + this.w, startY);\n\t\tcontext.lineTo(startX + this.w, startY + this.h);\n\t\tcontext.lineTo(startX, startY + this.h);\n\t\tcontext.lineTo(startX, startY);\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\t\tcontext.fill();\n\n\t\tstartX = this.right() - this.w * this.linkPercent;\n\t\tstartY = this.top();\n\n\t\tcontext.lineWidth = 1;\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(startX, startY + this.h);\n\t\tcontext.lineTo(startX, startY);\n\t\tif (this.nullPointer) {\n\t\t\tcontext.lineTo(this.right(), startY + this.h);\n\t\t}\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\n\t\tcontext.textAlign = 'center';\n\t\tcontext.font = '12px Arial';\n\t\tcontext.textBaseline = 'middle';\n\t\tcontext.lineWidth = 2;\n\n\t\tthis.resetTextPosition();\n\t\tcontext.fillStyle = this.labelColor;\n\t\tcontext.fillText(this.label, this.labelPosX, this.labelPosY);\n\t}\n\n\tsetTextColor(color) {\n\t\tthis.labelColor = color;\n\t}\n\n\tgetTextColor() {\n\t\treturn this.labelColor;\n\t}\n\n\tgetText() {\n\t\treturn this.label;\n\t}\n\n\tsetText(newText) {\n\t\tthis.label = newText;\n\t\tthis.resetTextPosition();\n\t}\n\n\tsetHighlight(value) {\n\t\tif (value !== this.highlighted) {\n\t\t\tthis.highlighted = value;\n\t\t}\n\t}\n\n\tcreateUndoDelete() {\n\t\treturn new UndoDeleteCircularlyLinkedList(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.linkPercent,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t\tthis.labelColor,\n\t\t\tthis.layer,\n\t\t\tthis.nullPointer,\n\t\t\tthis.highlighted,\n\t\t\tthis.highlightColor,\n\t\t);\n\t}\n}\n\nclass UndoDeleteCircularlyLinkedList extends UndoBlock {\n\tconstructor(\n\t\tobjectID,\n\t\tlabel,\n\t\tw,\n\t\th,\n\t\tx,\n\t\ty,\n\t\tlinkPercent,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t\tlabelColor,\n\t\tlayer,\n\t\tnullPointer,\n\t\thighlighted,\n\t\thighlightColor,\n\t) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.label = label;\n\t\tthis.w = w;\n\t\tthis.h = h;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.linkPercent = linkPercent;\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.labelColor = labelColor;\n\t\tthis.layer = layer;\n\t\tthis.nullPointer = nullPointer;\n\t\tthis.highlighted = highlighted;\n\t\tthis.highlightColor = highlightColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.addCircularlyLinkedListObject(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.linkPercent,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t);\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t\tworld.setLayer(this.objectID, this.layer);\n\t\tworld.setNull(this.objectID, this.nullPointer);\n\t\tworld.setTextColor(this.objectID, this.labelColor);\n\t\tworld.setHighlight(this.objectID, this.highlighted, this.highlightColor);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport AnimatedObject from './AnimatedObject.js';\nimport { UndoBlock } from './UndoFunctions.js';\n\nexport default class AnimatedDoublyLinkedListNode extends AnimatedObject {\n\tconstructor(objectID, label, w, h, linkPercent, backgroundColor, foregroundColor) {\n\t\tsuper();\n\n\t\tthis.objectID = objectID;\n\n\t\tthis.w = w;\n\t\tthis.h = h;\n\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.highlighted = false;\n\n\t\tthis.linkPercent = linkPercent;\n\t\tthis.prevNullPointer = false;\n\t\tthis.nextNullPointer = false;\n\n\t\tthis.label = label;\n\t\tthis.labelPosX = 0;\n\t\tthis.labelPosY = 0;\n\t\tthis.labelColor = foregroundColor;\n\t}\n\n\tsetPrevNull(np) {\n\t\tif (this.prevNullPointer !== np) {\n\t\t\tthis.prevNullPointer = np;\n\t\t}\n\t}\n\n\tsetNextNull(np) {\n\t\tif (this.nextNullPointer !== np) {\n\t\t\tthis.nextNullPointer = np;\n\t\t}\n\t}\n\n\tgetLeftNull() {\n\t\treturn this.prevNullPointer;\n\t}\n\n\tgetRightNull() {\n\t\treturn this.nextNullPointer;\n\t}\n\n\tleft() {\n\t\treturn this.x - (this.w * (1 - this.linkPercent)) / 2;\n\t}\n\n\tright() {\n\t\treturn this.x + (this.w * (this.linkPercent + 1)) / 2;\n\t}\n\n\ttop() {\n\t\treturn this.y - this.h / 2.0;\n\t}\n\n\tbottom() {\n\t\treturn this.y + this.h / 2.0;\n\t}\n\n\tresetTextPosition() {\n\t\tthis.labelPosY = this.y;\n\t\tthis.labelPosX = this.left() + this.w * (this.linkPercent * 2);\n\t}\n\n\tgetTailPointerAttachPos(fromX, fromY, anchor) {\n\t\tif (anchor === 0) {\n\t\t\treturn [this.x + this.w / 2.0, this.y - this.h * 0.2];\n\t\t} else {\n\t\t\treturn [this.left() + (this.w * this.linkPercent) / 2, this.y + this.h * 0.2];\n\t\t}\n\t}\n\n\tgetHeadPointerAttachPos(fromX, fromY) {\n\t\tconst closest = this.getClosestCardinalPoint(fromX, fromY);\n\t\tif (closest[1] === this.y) {\n\t\t\tif (closest[0] === this.left()) {\n\t\t\t\treturn [closest[0], this.y - this.h * 0.2];\n\t\t\t} else {\n\t\t\t\treturn [closest[0], this.y + this.h * 0.2];\n\t\t\t}\n\t\t} else {\n\t\t\treturn [closest[0], closest[1]];\n\t\t}\n\t}\n\n\tsetWidth(w) {\n\t\tthis.w = w;\n\t\tthis.resetTextPosition();\n\t}\n\n\tsetHeight(h) {\n\t\tthis.h = h;\n\t\tthis.resetTextPosition();\n\t}\n\n\tgetWidth() {\n\t\treturn this.w;\n\t}\n\n\tgetHeight() {\n\t\treturn this.h;\n\t}\n\n\tdraw(context) {\n\t\tcontext.lineWidth = 2;\n\n\t\tlet startX;\n\t\tlet startY;\n\n\t\tstartX = this.left();\n\t\tstartY = this.top();\n\n\t\t// Highlighted edges\n\t\tif (this.highlighted) {\n\t\t\tcontext.strokeStyle = '#FF0000';\n\t\t\tcontext.fillStyle = '#FF0000';\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(startX + this.w + this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(\n\t\t\t\tstartX + this.w + this.highlightDiff,\n\t\t\t\tstartY + this.h + this.highlightDiff,\n\t\t\t);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY + this.h + this.highlightDiff);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t\tcontext.fill();\n\t\t}\n\n\t\t// Node edges\n\t\tcontext.strokeStyle = this.foregroundColor;\n\t\tcontext.fillStyle = this.backgroundColor;\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(startX, startY);\n\t\tcontext.lineTo(startX + this.w, startY);\n\t\tcontext.lineTo(startX + this.w, startY + this.h);\n\t\tcontext.lineTo(startX, startY + this.h);\n\t\tcontext.lineTo(startX, startY);\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\t\tcontext.fill();\n\n\t\tcontext.lineWidth = 1;\n\t\t// Left inner line between node and pointer area\n\t\tstartX = this.left() + this.w * this.linkPercent;\n\t\tstartY = this.top();\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(startX, startY + this.h);\n\t\tcontext.lineTo(startX, startY);\n\t\tif (this.prevNullPointer) {\n\t\t\t// Left null marker\n\t\t\tcontext.moveTo(this.left(), startY);\n\t\t\tcontext.lineTo(this.left() + this.w * this.linkPercent, startY + this.h);\n\t\t}\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\n\t\t// Right inner line between node and pointer area\n\t\tstartX = this.right() - this.w * this.linkPercent;\n\t\tstartY = this.top();\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(startX, startY + this.h);\n\t\tcontext.lineTo(startX, startY);\n\t\tif (this.nextNullPointer) {\n\t\t\t// Right null marker\n\t\t\tcontext.moveTo(this.right() - this.w * this.linkPercent, startY);\n\t\t\tcontext.lineTo(this.right(), startY + this.h);\n\t\t}\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\n\t\t// Label\n\t\tcontext.textAlign = 'center';\n\t\tcontext.font = '12px Arial';\n\t\tcontext.textBaseline = 'middle';\n\t\tcontext.lineWidth = 2;\n\t\tthis.resetTextPosition();\n\t\tcontext.fillStyle = this.labelColor;\n\t\tcontext.fillText(this.label, this.labelPosX, this.labelPosY);\n\t}\n\n\tsetTextColor(color) {\n\t\tthis.labelColors = color;\n\t}\n\n\tgetTextColor() {\n\t\treturn this.labelColors;\n\t}\n\n\tgetText() {\n\t\treturn this.label;\n\t}\n\n\tsetText(newText) {\n\t\tthis.label = newText;\n\t\tthis.resetTextPosition();\n\t}\n\n\tsetHighlight(value) {\n\t\tif (value !== this.highlighted) {\n\t\t\tthis.highlighted = value;\n\t\t}\n\t}\n\n\tcreateUndoDelete() {\n\t\treturn new UndoDeleteDoublyLinkedList(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.linkPercent,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t\tthis.labelColor,\n\t\t\tthis.layer,\n\t\t\tthis.prevNullPointer,\n\t\t\tthis.nextNullPointer,\n\t\t\tthis.highlighted,\n\t\t\tthis.highlightColor,\n\t\t);\n\t}\n}\n\nclass UndoDeleteDoublyLinkedList extends UndoBlock {\n\tconstructor(\n\t\tobjectID,\n\t\tlabel,\n\t\tw,\n\t\th,\n\t\tx,\n\t\ty,\n\t\tlinkPercent,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t\tlabelColor,\n\t\tlayer,\n\t\tpnp,\n\t\tnnp,\n\t\thighlighted,\n\t\thighlightColor,\n\t) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.label = label;\n\t\tthis.w = w;\n\t\tthis.h = h;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.linkPercent = linkPercent;\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.labelColors = labelColor;\n\t\tthis.layer = layer;\n\t\tthis.prevNullPointer = pnp;\n\t\tthis.nextNullPointer = nnp;\n\t\tthis.highlighted = highlighted;\n\t\tthis.highlightColor = highlightColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.addDoublyLinkedListObject(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.linkPercent,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t);\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t\tworld.setLayer(this.objectID, this.layer);\n\t\tworld.setPrevNull(this.objectID, this.prevNullPointer);\n\t\tworld.setNextNull(this.objectID, this.nextNullPointer);\n\t\tworld.setTextColor(this.objectID, this.labelColor);\n\t\tworld.setHighlight(this.objectID, this.highlighted, this.highlightColor);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\n// \"Class\" animatedCircle\n\nimport AnimatedObject from './AnimatedObject.js';\nimport { UndoBlock } from './UndoFunctions.js';\n\nexport default class AnimatedHighlightCircle extends AnimatedObject {\n\tconstructor(objectID, foregroundColor, radius) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.radius = radius;\n\t\tthis.thickness = 4;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t}\n\n\tdraw(context) {\n\t\tcontext.globalAlpha = this.alpha;\n\t\tcontext.strokeStyle = this.foregroundColor;\n\t\tcontext.lineWidth = this.thickness;\n\t\tcontext.beginPath();\n\t\tcontext.arc(this.x, this.y, this.radius, 0, Math.PI * 2, true);\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\t}\n\n\tcreateUndoDelete() {\n\t\treturn new UndoDeleteHighlightCircle(\n\t\t\tthis.objectID,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.foregroundColor,\n\t\t\tthis.radius,\n\t\t\tthis.layer,\n\t\t\tthis.alpha,\n\t\t\tthis.highlighted,\n\t\t\tthis.highlightColor,\n\t\t);\n\t}\n}\n\nclass UndoDeleteHighlightCircle extends UndoBlock {\n\tconstructor(\n\t\tobjectID,\n\t\tx,\n\t\ty,\n\t\tforegroundColor,\n\t\tradius,\n\t\tlayer,\n\t\talpha,\n\t\thighlighted,\n\t\thighlightColor,\n\t) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.radius = radius;\n\t\tthis.layer = layer;\n\t\tthis.alpha = alpha;\n\t\tthis.highlighted = highlighted;\n\t\tthis.highlightColor = highlightColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.addHighlightCircleObject(this.objectID, this.foregroundColor, this.radius);\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t\tworld.setLayer(this.objectID, this.layer);\n\t\tworld.setAlpha(this.objectID, this.alpha);\n\t\tworld.setHighlight(this.objectID, this.highlighted, this.highlightColor);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport AnimatedObject from './AnimatedObject.js';\nimport { UndoBlock } from './UndoFunctions.js';\n\nexport default class AnimatedLabel extends AnimatedObject {\n\tconstructor(objectID, label, centered, initialWidth) {\n\t\tsuper();\n\n\t\tthis.objectID = objectID;\n\n\t\tthis.textWidth = initialWidth || 0;\n\n\t\tthis.label = label;\n\t\tthis.labelColor = '#000000';\n\t\tthis.highlighted = false;\n\t\tthis.centered = centered;\n\n\t\tthis.leftWidth = -1;\n\t\tthis.centerWidth = -1;\n\t\tthis.highlightIndex = -1;\n\t}\n\n\tcentered() {\n\t\treturn this.centered;\n\t}\n\n\tdraw(context) {\n\t\tif (!this.addedToScene) return;\n\n\t\tcontext.globalAlpha = this.alpha;\n\t\tcontext.font = '12px Arial';\n\n\t\tlet startingXForHighlight = this.x;\n\n\t\tif (this.highlightIndex >= this.label.length) {\n\t\t\tthis.highlightIndex = -1;\n\t\t}\n\t\tif (this.highlightIndexDirty && this.highlightIndex !== -1) {\n\t\t\tthis.leftWidth = context.measureText(\n\t\t\t\tthis.label.substring(0, this.highlightIndex),\n\t\t\t).width;\n\t\t\tthis.centerWidth = context.measureText(\n\t\t\t\tthis.label.substring(this.highlightIndex, this.highlightIndex + 1),\n\t\t\t).width;\n\t\t\tthis.highlightIndexDirty = false;\n\t\t}\n\n\t\tif (this.centered) {\n\t\t\tif (this.highlightIndex !== -1) {\n\t\t\t\tstartingXForHighlight = this.x - this.width / 2;\n\t\t\t\tcontext.textAlign = 'left';\n\t\t\t\tcontext.textBaseline = 'middle';\n\t\t\t} else {\n\t\t\t\tcontext.textAlign = 'center';\n\t\t\t\tcontext.textBaseline = 'middle';\n\t\t\t}\n\t\t} else {\n\t\t\tcontext.textAlign = 'left';\n\t\t\tcontext.textBaseline = 'top';\n\t\t}\n\t\tif (this.highlighted) {\n\t\t\tcontext.strokeStyle = '#FFAAAA';\n\t\t\tcontext.fillStyle = '#FF0000';\n\t\t\tcontext.lineWidth = this.highlightDiff;\n\t\t\tcontext.strokeText(this.label, this.x, this.y);\n\t\t}\n\t\tcontext.strokeStyle = this.labelColor;\n\t\tcontext.fillStyle = this.labelColor;\n\t\tcontext.lineWidth = 2;\n\t\tconst strList = this.label.split('\\n');\n\t\tif (strList.length === 1) {\n\t\t\tif (this.highlightIndex === -1) {\n\t\t\t\tcontext.fillText(this.label, this.x, this.y);\n\t\t\t} else {\n\t\t\t\tconst leftStr = this.label.substring(0, this.highlightIndex);\n\t\t\t\tconst highlightStr = this.label.substring(\n\t\t\t\t\tthis.highlightIndex,\n\t\t\t\t\tthis.highlightIndex + 1,\n\t\t\t\t);\n\t\t\t\tconst rightStr = this.label.substring(this.highlightIndex + 1);\n\t\t\t\tcontext.fillText(leftStr, startingXForHighlight, this.y);\n\t\t\t\tcontext.strokeStyle = '#FF0000';\n\t\t\t\tcontext.fillStyle = '#FF0000';\n\t\t\t\tcontext.fillText(highlightStr, startingXForHighlight + this.leftWidth, this.y);\n\n\t\t\t\tcontext.strokeStyle = this.labelColor;\n\t\t\t\tcontext.fillStyle = this.labelColor;\n\t\t\t\tcontext.fillText(\n\t\t\t\t\trightStr,\n\t\t\t\t\tstartingXForHighlight + this.leftWidth + this.centerWidth,\n\t\t\t\t\tthis.y,\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\tconst offset = this.centered ? (1.0 - strList.length) / 2.0 : 0;\n\t\t\tfor (let i = 0; i < strList.length; i++) {\n\t\t\t\tcontext.fillText(strList[i], this.x, this.y + offset + i * 12);\n\t\t\t}\n\t\t}\n\t\tcontext.closePath();\n\t}\n\n\tgetAlignLeftPos(otherObject) {\n\t\tif (this.centered) {\n\t\t\treturn [otherObject.left() - this.textWidth / 2, (this.y = otherObject.centerY())];\n\t\t} else {\n\t\t\treturn [otherObject.left() - this.textWidth, otherObject.centerY() - 5];\n\t\t}\n\t}\n\n\talignLeft(otherObject) {\n\t\tif (this.centered) {\n\t\t\tthis.y = otherObject.centerY();\n\t\t\tthis.x = otherObject.left() - this.textWidth / 2;\n\t\t} else {\n\t\t\tthis.y = otherObject.centerY() - 5;\n\t\t\tthis.x = otherObject.left() - this.textWidth;\n\t\t}\n\t}\n\n\talignRight(otherObject) {\n\t\tif (this.centered) {\n\t\t\tthis.y = otherObject.centerY();\n\t\t\tthis.x = otherObject.right() + this.textWidth / 2;\n\t\t} else {\n\t\t\tthis.y = otherObject.centerY() - 5;\n\t\t\tthis.x = otherObject.right();\n\t\t}\n\t}\n\n\tgetAlignRightPos(otherObject) {\n\t\tif (this.centered) {\n\t\t\treturn [otherObject.right() + this.textWidth / 2, otherObject.centerY()];\n\t\t} else {\n\t\t\treturn [otherObject.right(), otherObject.centerY() - 5];\n\t\t}\n\t}\n\n\talignTop(otherObject) {\n\t\tif (this.centered) {\n\t\t\tthis.y = otherObject.top() - 5;\n\t\t\tthis.x = otherObject.centerX();\n\t\t} else {\n\t\t\tthis.y = otherObject.top() - 10;\n\t\t\tthis.x = otherObject.centerX() - this.textWidth / 2;\n\t\t}\n\t}\n\n\tgetAlignTopPos(otherObject) {\n\t\tif (this.centered) {\n\t\t\treturn [otherObject.centerX(), otherObject.top() - 5];\n\t\t} else {\n\t\t\treturn [otherObject.centerX() - this.textWidth / 2, otherObject.top() - 10];\n\t\t}\n\t}\n\n\talignBottom(otherObject) {\n\t\tif (this.centered) {\n\t\t\tthis.y = otherObject.bottom() + 5;\n\t\t\tthis.x = otherObject.centerX();\n\t\t} else {\n\t\t\tthis.y = otherObject.bottom();\n\t\t\tthis.x = otherObject.centerX() - this.textWidth / 2;\n\t\t}\n\t}\n\n\tgetAlignBottomPos(otherObject) {\n\t\tif (this.centered) {\n\t\t\treturn [otherObject.centerX(), otherObject.bottom() + 5];\n\t\t} else {\n\t\t\treturn [otherObject.centerX() - this.textWidth / 2, otherObject.bottom()];\n\t\t}\n\t}\n\n\tgetWidth() {\n\t\treturn this.textWidth;\n\t}\n\n\tgetHeight() {\n\t\treturn 10; // HACK!  HACK!  HACK!  HACK!\n\t}\n\n\tsetHighlight(value) {\n\t\tthis.highlighted = value;\n\t}\n\n\tcenterX() {\n\t\tif (this.centered) {\n\t\t\treturn this.x;\n\t\t} else {\n\t\t\treturn this.x + this.textWidth;\n\t\t}\n\t}\n\n\tcenterY() {\n\t\tif (this.centered) {\n\t\t\treturn this.y;\n\t\t} else {\n\t\t\treturn this.y + 5;\n\t\t}\n\t}\n\n\ttop() {\n\t\tif (this.centered) {\n\t\t\treturn this.y - 5; //TODO: Un-Hardwire\n\t\t} else {\n\t\t\treturn this.y;\n\t\t}\n\t}\n\n\tbottom() {\n\t\tif (this.centered) {\n\t\t\treturn this.y + 5; // TODO: + height / 2;\n\t\t} else {\n\t\t\treturn this.y + 10; // TODO: + hieght;\n\t\t}\n\t}\n\n\tright() {\n\t\tif (this.centered) {\n\t\t\treturn this.x + this.textWidth / 2; // TODO: + width / 2;\n\t\t} else {\n\t\t\treturn this.x + this.textWidth; // TODO: + width;\n\t\t}\n\t}\n\n\tleft() {\n\t\tif (this.centered) {\n\t\t\treturn this.x - this.textWidth / 2;\n\t\t} else {\n\t\t\treturn this.x; // TODO:  - a little?\n\t\t}\n\t}\n\n\tsetHighlightIndex(hlIndex) {\n\t\t// Only allow highlight index for labels that don't have End-Of-Line\n\t\tif (this.label.indexOf('\\n') === -1 && this.label.length > hlIndex) {\n\t\t\tthis.highlightIndex = hlIndex;\n\t\t\tthis.highlightIndexDirty = true;\n\t\t} else {\n\t\t\tthis.highlightIndex = -1;\n\t\t}\n\t}\n\n\tgetTailPointerAttachPos(fromX, fromY) {\n\t\treturn this.getClosestCardinalPoint(fromX, fromY);\n\t}\n\n\tgetHeadPointerAttachPos(fromX, fromY) {\n\t\treturn this.getClosestCardinalPoint(fromX, fromY);\n\t}\n\n\tsetText(newText, textIndex, initialWidth) {\n\t\tthis.label = newText;\n\t\tif (initialWidth != null) {\n\t\t\tthis.textWidth = initialWidth;\n\t\t}\n\t}\n\n\tcreateUndoDelete() {\n\t\treturn new UndoDeleteLabel(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.centered,\n\t\t\tthis.labelColor,\n\t\t\tthis.layer,\n\t\t\tthis.highlightIndex,\n\t\t\tthis.highlighted,\n\t\t\tthis.highlightColor,\n\t\t);\n\t}\n}\n\nclass UndoDeleteLabel extends UndoBlock {\n\tconstructor(\n\t\tobjectID,\n\t\tlabel,\n\t\tx,\n\t\ty,\n\t\tcentered,\n\t\tlabelColor,\n\t\tlayer,\n\t\thighlightIndex,\n\t\thighlighted,\n\t\thighlightColor,\n\t) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.label = label;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.centered = centered;\n\t\tthis.labelColor = labelColor;\n\t\tthis.layer = layer;\n\t\tthis.highlightIndex = highlightIndex;\n\t\tthis.highlighted = highlighted;\n\t\tthis.highlightColor = highlightColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.addLabelObject(this.objectID, this.label, this.centered);\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t\tworld.setForegroundColor(this.objectID, this.labelColor);\n\t\tworld.setLayer(this.objectID, this.layer);\n\t\tworld.setHighlight(this.objectID, this.highlighted, this.highlightColor);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\n// This class handles links between vertices in graphs, pointers in linked lists, and so on.\n\nconst LINE_MAX_HEIGHT_DIFF = 5;\nconst LINE_MIN_HEIGHT_DIFF = 3;\nconst LINE_RANGE = LINE_MAX_HEIGHT_DIFF - LINE_MIN_HEIGHT_DIFF + 1;\n\nexport default class AnimatedLine {\n\tconstructor(fromID, toID, color, curve, directed, edgeLabel, anchorPoint, thickness) {\n\t\tthis.fromID = fromID;\n\t\tthis.toID = toID;\n\n\t\tthis.foregroundColor = color;\n\t\tthis.edgeLabel = edgeLabel;\n\t\tthis.highlighted = false;\n\t\tthis.highlightDiff = 0;\n\n\t\tthis.dirty = false;\n\t\tthis.directed = directed;\n\t\tthis.anchorPoint = anchorPoint;\n\n\t\tthis.alpha = 1.0;\n\t\tthis.thickness = thickness;\n\t\tthis.arrowHeight = 8;\n\t\tthis.arrowWidth = 4;\n\t\tthis.curve = curve;\n\t}\n\n\tcolor() {\n\t\treturn this.foregroundColor;\n\t}\n\n\tsetColor(newColor) {\n\t\tthis.foregroundColor = newColor;\n\t\tthis.dirty = true;\n\t}\n\n\tsetHighlight(highlightVal) {\n\t\tthis.highlighted = highlightVal;\n\t}\n\n\tsetThickness(thickness) {\n\t\tthis.thickness = thickness;\n\t}\n\n\tpulseHighlight(frameNum) {\n\t\tif (this.highlighted) {\n\t\t\tconst frameMod = frameNum / 14.0;\n\t\t\tconst delta = Math.abs((frameMod % (2 * LINE_RANGE - 2)) - LINE_RANGE + 1);\n\t\t\tthis.highlightDiff = delta + this.thickness + LINE_MIN_HEIGHT_DIFF;\n\t\t\tthis.dirty = true;\n\t\t}\n\t}\n\n\thasNode(n) {\n\t\treturn this.fromID === n || this.toID === n;\n\t}\n\n\tsign(n) {\n\t\tif (n > 0) {\n\t\t\treturn 1;\n\t\t} else {\n\t\t\treturn -1;\n\t\t}\n\t}\n\n\tdrawArrow(thickness, color, context) {\n\t\tcontext.strokeStyle = color;\n\t\tcontext.fillStyle = color;\n\t\tcontext.lineWidth = thickness;\n\n\t\tconst fromPos = this.fromID.getTailPointerAttachPos(\n\t\t\tthis.toID.x,\n\t\t\tthis.toID.y,\n\t\t\tthis.anchorPoint,\n\t\t);\n\t\tconst toPos = this.toID.getHeadPointerAttachPos(this.fromID.x, this.fromID.y);\n\n\t\tconst deltaX = toPos[0] - fromPos[0];\n\t\tconst deltaY = toPos[1] - fromPos[1];\n\t\tconst midX = deltaX / 2.0 + fromPos[0];\n\t\tconst midY = deltaY / 2.0 + fromPos[1];\n\t\tconst controlX = midX - deltaY * this.curve;\n\n\t\tconst controlY = midY + deltaX * this.curve;\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(fromPos[0], fromPos[1]);\n\t\tcontext.quadraticCurveTo(controlX, controlY, toPos[0], toPos[1]);\n\t\tcontext.stroke();\n\n\t\t// Position of the edge label:  First, we will place it right along the\n\t\t// middle of the curve (or the middle of the line, for curve == 0)\n\t\tlet labelPosX = 0.25 * fromPos[0] + 0.5 * controlX + 0.25 * toPos[0];\n\t\tlet labelPosY = 0.25 * fromPos[1] + 0.5 * controlY + 0.25 * toPos[1];\n\n\t\t// Next, we push the edge position label out just a little in the direction of\n\t\t// the curve, so that the label doesn't intersect the cuve (as long as the label\n\t\t// is only a few characters, that is)\n\t\tconst midLen = Math.sqrt(deltaY * deltaY + deltaX * deltaX);\n\t\tif (midLen !== 0) {\n\t\t\tlabelPosX += ((-deltaY * this.sign(this.curve)) / midLen) * 10;\n\t\t\tlabelPosY += ((deltaX * this.sign(this.curve)) / midLen) * 10;\n\t\t}\n\n\t\tcontext.textAlign = 'center';\n\t\tcontext.font = '12px Arial';\n\t\tcontext.textBaseline = 'middle';\n\t\tcontext.fillText(this.edgeLabel, labelPosX, labelPosY);\n\n\t\tif (this.directed) {\n\t\t\tlet xVec = controlX - toPos[0];\n\t\t\tlet yVec = controlY - toPos[1];\n\t\t\tconst len = Math.sqrt(xVec * xVec + yVec * yVec);\n\n\t\t\tif (len > 0) {\n\t\t\t\txVec = xVec / len;\n\t\t\t\tyVec = yVec / len;\n\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.moveTo(toPos[0], toPos[1]);\n\t\t\t\tcontext.lineTo(\n\t\t\t\t\ttoPos[0] + xVec * this.arrowHeight - yVec * this.arrowWidth,\n\t\t\t\t\ttoPos[1] + yVec * this.arrowHeight + xVec * this.arrowWidth,\n\t\t\t\t);\n\t\t\t\tcontext.lineTo(\n\t\t\t\t\ttoPos[0] + xVec * this.arrowHeight + yVec * this.arrowWidth,\n\t\t\t\t\ttoPos[1] + yVec * this.arrowHeight - xVec * this.arrowWidth,\n\t\t\t\t);\n\t\t\t\tcontext.lineTo(toPos[0], toPos[1]);\n\t\t\t\tcontext.closePath();\n\t\t\t\tcontext.stroke();\n\t\t\t\tcontext.fill();\n\t\t\t}\n\t\t}\n\t}\n\n\tdraw(context) {\n\t\tcontext.globalAlpha = this.alpha;\n\n\t\tif (this.highlighted) this.drawArrow(this.highlightDiff, '#FF0000', context);\n\t\tthis.drawArrow(this.thickness, this.foregroundColor, context);\n\t}\n\n\tcreateUndoConnect() {\n\t\treturn new UndoConnect(\n\t\t\tthis.fromID.objectID,\n\t\t\tthis.toID.objectID,\n\t\t\ttrue,\n\t\t\tthis.foregroundColor,\n\t\t\tthis.curve,\n\t\t\tthis.directed,\n\t\t\tthis.edgeLabel,\n\t\t\tthis.anchorPoint,\n\t\t\tthis.thickness,\n\t\t\tthis.highlighted,\n\t\t);\n\t}\n}\n\nexport class UndoConnect {\n\tconstructor(\n\t\tfromID,\n\t\ttoID,\n\t\tcreateConnection,\n\t\tcolor,\n\t\tcurve,\n\t\tdirected,\n\t\tedgeLabel,\n\t\tanchorPoint,\n\t\tthickness,\n\t\thighlighted,\n\t) {\n\t\tthis.fromID = fromID;\n\t\tthis.toID = toID;\n\t\tthis.createConnection = createConnection;\n\t\tthis.color = color;\n\t\tthis.curve = curve;\n\t\tthis.directed = directed;\n\t\tthis.edgeLabel = edgeLabel;\n\t\tthis.anchorPoint = anchorPoint;\n\t\tthis.thickness = thickness;\n\t\tthis.highlighted = highlighted;\n\t}\n\n\tundoInitialStep(world) {\n\t\tif (this.createConnection) {\n\t\t\tworld.connectEdge(\n\t\t\t\tthis.fromID,\n\t\t\t\tthis.toID,\n\t\t\t\tthis.color,\n\t\t\t\tthis.curve,\n\t\t\t\tthis.directed,\n\t\t\t\tthis.edgeLabel,\n\t\t\t\tthis.anchorPoint,\n\t\t\t\tthis.thickness,\n\t\t\t);\n\t\t\tworld.setEdgeHighlight(this.fromID, this.toID, this.highlighted);\n\t\t} else {\n\t\t\tworld.disconnect(this.fromID, this.toID);\n\t\t}\n\t}\n\n\taddUndoAnimation() {\n\t\treturn false;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport AnimatedObject from './AnimatedObject.js';\nimport { UndoBlock } from './UndoFunctions.js';\n\nexport default class AnimatedLinkedListNode extends AnimatedObject {\n\tconstructor(\n\t\tobjectID,\n\t\tlabels,\n\t\tw,\n\t\th,\n\t\tlinkPercent,\n\t\tvertical,\n\t\tlinkPosEnd,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t) {\n\t\tsuper();\n\n\t\tthis.objectID = objectID;\n\n\t\tthis.w = w;\n\t\tthis.h = h;\n\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.highlighted = false;\n\n\t\tthis.vertical = vertical;\n\t\tthis.linkPosEnd = linkPosEnd;\n\t\tthis.linkPercent = linkPercent;\n\t\tthis.nullPointer = false;\n\n\t\tthis.labels = labels;\n\t\tthis.labelPosX = [0];\n\t\tthis.labelPosY = [0];\n\t\tthis.labelColors = [foregroundColor];\n\t}\n\n\tleft() {\n\t\tif (this.vertical) {\n\t\t\treturn this.x - this.w / 2.0;\n\t\t} else if (this.linkPosEnd) {\n\t\t\treturn this.x - (this.w * (1 - this.linkPercent)) / 2;\n\t\t} else {\n\t\t\treturn this.x - (this.w * (this.linkPercent + 1)) / 2;\n\t\t}\n\t}\n\n\tsetNull(np) {\n\t\tif (this.nullPointer !== np) {\n\t\t\tthis.nullPointer = np;\n\t\t}\n\t}\n\n\tgetNull() {\n\t\treturn this.nullPointer;\n\t}\n\n\tright() {\n\t\tif (this.vertical) {\n\t\t\treturn this.x + this.w / 2.0;\n\t\t} else if (this.linkPosEnd) {\n\t\t\treturn this.x + (this.w * (this.linkPercent + 1)) / 2;\n\t\t} else {\n\t\t\treturn this.x + (this.w * (1 - this.linkPercent)) / 2;\n\t\t}\n\t}\n\n\ttop() {\n\t\tif (!this.vertical) {\n\t\t\treturn this.y - this.h / 2.0;\n\t\t} else if (this.linkPosEnd) {\n\t\t\treturn this.y - (this.h * (1 - this.linkPercent)) / 2;\n\t\t} else {\n\t\t\treturn this.y - (this.h * (1 + this.linkPercent)) / 2;\n\t\t}\n\t}\n\n\tbottom() {\n\t\tif (!this.vertical) {\n\t\t\treturn this.y + this.h / 2.0;\n\t\t} else if (this.linkPosEnd) {\n\t\t\treturn this.y + (this.h * (1 + this.linkPercent)) / 2;\n\t\t} else {\n\t\t\treturn this.y + (this.h * (1 - this.linkPercent)) / 2;\n\t\t}\n\t}\n\n\tgetTailPointerAttachPos(fromX, fromY, anchor) {\n\t\tif (this.vertical && this.linkPosEnd) {\n\t\t\treturn [this.x, this.y + this.h / 2.0];\n\t\t} else if (this.vertical && !this.linkPosEnd) {\n\t\t\treturn [this.x, this.y - this.h / 2.0];\n\t\t} else if (!this.vertical && this.linkPosEnd) {\n\t\t\treturn [this.x + this.w / 2.0, this.y];\n\t\t} else {\n\t\t\t// !this.vertical && !this.linkPosEnd\n\t\t\treturn [this.x - this.w / 2.0, this.y];\n\t\t}\n\t}\n\n\tgetHeadPointerAttachPos(fromX, fromY) {\n\t\treturn this.getClosestCardinalPoint(fromX, fromY);\n\t}\n\n\tsetWidth(w) {\n\t\tthis.w = w;\n\t}\n\n\tsetHeight(h) {\n\t\tthis.h = h;\n\t}\n\n\tgetWidth() {\n\t\treturn this.w;\n\t}\n\n\tgetHeight() {\n\t\treturn this.h;\n\t}\n\n\tdraw(context) {\n\t\tcontext.lineWidth = 2;\n\n\t\tlet startX;\n\t\tlet startY;\n\n\t\tstartX = this.left();\n\t\tstartY = this.top();\n\n\t\tif (this.highlighted) {\n\t\t\tcontext.strokeStyle = '#ff0000';\n\t\t\tcontext.fillStyle = '#ff0000';\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(startX + this.w + this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(\n\t\t\t\tstartX + this.w + this.highlightDiff,\n\t\t\t\tstartY + this.h + this.highlightDiff,\n\t\t\t);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY + this.h + this.highlightDiff);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t\tcontext.fill();\n\t\t}\n\t\tcontext.strokeStyle = this.foregroundColor;\n\t\tcontext.fillStyle = this.backgroundColor;\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(startX, startY);\n\t\tcontext.lineTo(startX + this.w, startY);\n\t\tcontext.lineTo(startX + this.w, startY + this.h);\n\t\tcontext.lineTo(startX, startY + this.h);\n\t\tcontext.lineTo(startX, startY);\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\t\tcontext.fill();\n\n\t\tif (this.vertical) {\n\t\t\tstartX = this.left();\n\t\t\tfor (let i = 1; i < this.labels.length; i++) {\n\t\t\t\tstartY = this.y + this.h * (1 - this.linkPercent) * (i / this.labels.length - 0.5);\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.moveTo(startX, startY);\n\t\t\t\tcontext.lineTo(startX + this.w, startY);\n\t\t\t\tcontext.closePath();\n\t\t\t\tcontext.stroke();\n\t\t\t}\n\t\t} else {\n\t\t\tstartY = this.top();\n\t\t\tfor (let i = 1; i < this.labels.length; i++) {\n\t\t\t\tstartX = this.x + this.w * (1 - this.linkPercent) * (i / this.labels.length - 0.5);\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.moveTo(startX, startY);\n\t\t\t\tcontext.lineTo(startX, startY + this.h);\n\t\t\t\tcontext.closePath();\n\t\t\t\tcontext.stroke();\n\t\t\t}\n\t\t}\n\n\t\tcontext.lineWidth = 1;\n\t\tif (this.vertical && this.linkPosEnd) {\n\t\t\tstartX = this.left();\n\t\t\tstartY = this.bottom() - this.h * this.linkPercent;\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX + this.w, startY);\n\t\t\tcontext.lineTo(startX, startY);\n\t\t\tif (this.nullPointer) {\n\t\t\t\tcontext.lineTo(this.startX + this.w, this.bottom());\n\t\t\t}\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t} else if (this.vertical && !this.linkPosEnd) {\n\t\t\tstartX = this.left();\n\t\t\tstartY = this.top() + this.h * this.linkPercent;\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX + this.w, startY);\n\t\t\tcontext.lineTo(startX, startY);\n\t\t\tif (this.nullPointer) {\n\t\t\t\tcontext.lineTo(startX + this.w, this.top());\n\t\t\t}\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t} else if (!this.vertical && this.linkPosEnd) {\n\t\t\tstartX = this.right() - this.w * this.linkPercent;\n\t\t\tstartY = this.top();\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX, startY + this.h);\n\t\t\tcontext.lineTo(startX, startY);\n\t\t\tif (this.nullPointer) {\n\t\t\t\tcontext.lineTo(this.right(), startY + this.h);\n\t\t\t}\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t} else {\n\t\t\t// !vertical && !linkPosEnd\n\t\t\tstartX = this.left() + this.w * this.linkPercent;\n\t\t\tstartY = this.top();\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX, startY + this.h);\n\t\t\tcontext.lineTo(startX, startY);\n\t\t\tif (this.nullPointer) {\n\t\t\t\tcontext.lineTo(this.left(), startY);\n\t\t\t}\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t}\n\n\t\tcontext.textAlign = 'center';\n\t\tcontext.font = '12px Arial';\n\t\tcontext.textBaseline = 'middle';\n\t\tcontext.lineWidth = 2;\n\n\t\tif (this.vertical) {\n\t\t\tthis.labelPosX[0] = this.x;\n\t\t\tthis.labelPosY[0] =\n\t\t\t\tthis.y + ((this.h * (1 - this.linkPercent)) / 2) * (1 / this.labels.length - 1);\n\t\t\tfor (let i = 1; i < this.labels.length; i++) {\n\t\t\t\tthis.labelPosX[i] = this.x;\n\t\t\t\tthis.labelPosY[i] =\n\t\t\t\t\tthis.labelPosY[i - 1] + (this.h * (1 - this.linkPercent)) / this.labels.length;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.labelPosY[0] = this.y;\n\t\t\tthis.labelPosX[0] =\n\t\t\t\tthis.x + ((this.w * (1 - this.linkPercent)) / 2) * (1 / this.labels.length - 1);\n\t\t\tfor (let i = 1; i < this.labels.length; i++) {\n\t\t\t\tthis.labelPosY[i] = this.y;\n\t\t\t\tthis.labelPosX[i] =\n\t\t\t\t\tthis.labelPosX[i - 1] + (this.w * (1 - this.linkPercent)) / this.labels.length;\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = 0; i < this.labels.length; i++) {\n\t\t\tcontext.fillStyle = this.labelColors[i];\n\t\t\tcontext.fillText(this.labels[i], this.labelPosX[i], this.labelPosY[i]);\n\t\t}\n\t}\n\n\tsetTextColor(color, index) {\n\t\tthis.labelColors[index] = color;\n\t}\n\n\tgetTextColor(index) {\n\t\treturn this.labelColors[index];\n\t}\n\n\tgetText(index) {\n\t\treturn this.labels[index];\n\t}\n\n\tsetText(newText, index) {\n\t\tthis.labels[index] = newText;\n\t}\n\n\tsetHighlight(value) {\n\t\tif (value !== this.highlighted) {\n\t\t\tthis.highlighted = value;\n\t\t}\n\t}\n\n\tcreateUndoDelete() {\n\t\treturn new UndoDeleteLinkedList(\n\t\t\tthis.objectID,\n\t\t\tthis.labels,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.linkPercent,\n\t\t\tthis.vertical,\n\t\t\tthis.linkPosEnd,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t\tthis.labelColors,\n\t\t\tthis.layer,\n\t\t\tthis.nullPointer,\n\t\t\tthis.highlighted,\n\t\t\tthis.highlightColor,\n\t\t);\n\t}\n}\n\nclass UndoDeleteLinkedList extends UndoBlock {\n\tconstructor(\n\t\tobjectID,\n\t\tlabels,\n\t\tw,\n\t\th,\n\t\tx,\n\t\ty,\n\t\tlinkPercent,\n\t\tvertical,\n\t\tlinkPosEnd,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t\tlabelColors,\n\t\tlayer,\n\t\tnullPointer,\n\t\thighlighted,\n\t\thighlightColor,\n\t) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.labels = labels;\n\t\tthis.w = w;\n\t\tthis.h = h;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.linkPercent = linkPercent;\n\t\tthis.vertical = vertical;\n\t\tthis.linkPosEnd = linkPosEnd;\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.labelColors = labelColors;\n\t\tthis.layer = layer;\n\t\tthis.nullPointer = nullPointer;\n\t\tthis.highlighted = highlighted;\n\t\tthis.highlightColor = highlightColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.addLinkedListObject(\n\t\t\tthis.objectID,\n\t\t\tthis.labels,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.linkPercent,\n\t\t\tthis.vertical,\n\t\t\tthis.linkPosEnd,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t);\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t\tworld.setLayer(this.objectID, this.layer);\n\t\tworld.setNull(this.objectID, this.nullPointer);\n\t\tfor (let i = 0; i < this.labels.length; i++) {\n\t\t\tworld.setTextColor(this.objectID, this.labelColors[i], i);\n\t\t}\n\t\tworld.setHighlight(this.objectID, this.highlighted, this.highlightColor);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.a\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\n// Values for xJust / yJust:  \"center\", \"left\", \"right\", \"top\", \"bottom\"\n\nimport AnimatedObject from './AnimatedObject.js';\nimport { UndoBlock } from './UndoFunctions.js';\n\nexport default class AnimatedRectangle extends AnimatedObject {\n\tconstructor(objectID, label, w, h, xJustify, yJustify, backgroundColor, foregroundColor) {\n\t\tsuper();\n\n\t\tthis.objectID = objectID;\n\n\t\tthis.w = w;\n\t\tthis.h = h;\n\t\tthis.xJustify = xJustify;\n\t\tthis.yJustify = yJustify;\n\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.textColor = foregroundColor;\n\t\tthis.highlighted = false;\n\t\tthis.thicknessArray = [false, false, false, false];\n\n\t\tthis.label = label;\n\n\t\tthis.nullPointer = false;\n\t}\n\n\tsetNull(np) {\n\t\tthis.nullPointer = np;\n\t}\n\n\tgetNull() {\n\t\treturn this.nullPointer;\n\t}\n\n\tleft() {\n\t\tif (this.xJustify === 'left') {\n\t\t\treturn this.x;\n\t\t} else if (this.xJustify === 'center') {\n\t\t\treturn this.x - this.w / 2.0;\n\t\t} else {\n\t\t\t// right\n\t\t\treturn this.x - this.w;\n\t\t}\n\t}\n\n\tcenterX() {\n\t\tif (this.xJustify === 'center') {\n\t\t\treturn this.x;\n\t\t} else if (this.xJustify === 'left') {\n\t\t\treturn this.x + this.w / 2.0;\n\t\t} else {\n\t\t\t// right\n\t\t\treturn this.x - this.w / 2.0;\n\t\t}\n\t}\n\n\tcenterY() {\n\t\tif (this.yJustify === 'center') {\n\t\t\treturn this.y;\n\t\t} else if (this.yJustify === 'top') {\n\t\t\treturn this.y + this.h / 2.0;\n\t\t} else {\n\t\t\t// bottom\n\t\t\treturn this.y - this.w / 2.0;\n\t\t}\n\t}\n\n\ttop() {\n\t\tif (this.yJustify === 'top') {\n\t\t\treturn this.y;\n\t\t} else if (this.yJustify === 'center') {\n\t\t\treturn this.y - this.h / 2.0;\n\t\t} else {\n\t\t\t// bottom\n\t\t\treturn this.y - this.h;\n\t\t}\n\t}\n\n\tbottom() {\n\t\tif (this.yJustify === 'top') {\n\t\t\treturn this.y + this.h;\n\t\t} else if (this.yJustify === 'center') {\n\t\t\treturn this.y + this.h / 2.0;\n\t\t} else {\n\t\t\t// bottom\n\t\t\treturn this.y;\n\t\t}\n\t}\n\n\tright() {\n\t\tif (this.xJustify === 'left') {\n\t\t\treturn this.x + this.w;\n\t\t} else if (this.xJustify === 'center') {\n\t\t\treturn this.x + this.w / 2.0;\n\t\t} else {\n\t\t\t// right\n\t\t\treturn this.x;\n\t\t}\n\t}\n\n\tgetHeadPointerAttachPos(fromX, fromY) {\n\t\treturn this.getClosestCardinalPoint(fromX, fromY);\n\t}\n\n\tgetTailPointerAttachPos(fromX, fromY, anchor) {\n\t\tswitch (anchor) {\n\t\t\tcase 0: // Default\n\t\t\t\treturn this.getClosestCardinalPoint(fromX, fromY);\n\t\t\tcase 1: // Top\n\t\t\t\treturn [this.x, this.top()];\n\t\t\tcase 2: // Bottom\n\t\t\t\treturn [this.x, this.bottom()];\n\t\t\tcase 3: // Left\n\t\t\t\treturn [this.left(), this.y];\n\t\t\tcase 4: // Right\n\t\t\t\treturn [this.right(), this.y];\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n\n\tsetWidth(w) {\n\t\tthis.w = w;\n\t}\n\n\tsetHeight(h) {\n\t\tthis.h = h;\n\t}\n\n\tgetWidth() {\n\t\treturn this.w;\n\t}\n\n\tgetHeight() {\n\t\treturn this.h;\n\t}\n\n\tdraw(context) {\n\t\tif (!this.addedToScene) return;\n\n\t\tcontext.globalAlpha = this.alpha;\n\t\tcontext.lineWidth = 2;\n\n\t\tlet startX;\n\t\tlet startY;\n\n\t\tif (this.xJustify === 'left') {\n\t\t\tstartX = this.x;\n\t\t} else if (this.xJustify === 'center') {\n\t\t\tstartX = this.x - this.w / 2.0;\n\t\t} else if (this.xJustify === 'right') {\n\t\t\tstartX = this.x - this.w;\n\t\t}\n\t\tif (this.yJustify === 'top') {\n\t\t\tstartY = this.y;\n\t\t} else if (this.yJustify === 'center') {\n\t\t\tstartY = this.y - this.h / 2.0;\n\t\t} else if (this.yJustify === 'bottom') {\n\t\t\tstartY = this.y - this.h;\n\t\t}\n\n\t\tcontext.lineWidth = 2;\n\n\t\tif (this.highlighted) {\n\t\t\tcontext.strokeStyle = '#ff0000';\n\t\t\tcontext.fillStyle = '#ff0000';\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(startX + this.w + this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(\n\t\t\t\tstartX + this.w + this.highlightDiff,\n\t\t\t\tstartY + this.h + this.highlightDiff,\n\t\t\t);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY + this.h + this.highlightDiff);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t\tcontext.fill();\n\t\t}\n\t\tcontext.strokeStyle = this.foregroundColor;\n\t\tcontext.fillStyle = this.backgroundColor;\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(startX, startY);\n\t\tcontext.lineTo(startX + this.w, startY);\n\t\tcontext.lineTo(startX + this.w, startY + this.h);\n\t\tcontext.lineTo(startX, startY + this.h);\n\t\tcontext.lineTo(startX, startY);\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\t\tcontext.fill();\n\n\t\t// Thick edges\n\t\t// Top edge\n\t\tif (this.thicknessArray[0]) {\n\t\t\tcontext.lineWidth = 3;\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX, startY);\n\t\t\tcontext.lineTo(startX + this.w, startY);\n\t\t\tcontext.stroke();\n\t\t\tcontext.closePath();\n\t\t}\n\t\t// Right edge\n\t\tif (this.thicknessArray[1]) {\n\t\t\tcontext.lineWidth = 3;\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX + this.w, startY);\n\t\t\tcontext.lineTo(startX + this.w, startY + this.h);\n\t\t\tcontext.stroke();\n\t\t\tcontext.closePath();\n\t\t}\n\t\t// Bottom edge\n\t\tif (this.thicknessArray[2]) {\n\t\t\tcontext.lineWidth = 3;\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX + this.w, startY + this.h);\n\t\t\tcontext.lineTo(startX, startY + this.h);\n\t\t\tcontext.stroke();\n\t\t\tcontext.closePath();\n\t\t}\n\t\t// Left edge\n\t\tif (this.thicknessArray[3]) {\n\t\t\tcontext.lineWidth = 3;\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX, startY + this.h);\n\t\t\tcontext.lineTo(startX, startY);\n\t\t\tcontext.stroke();\n\t\t\tcontext.closePath();\n\t\t}\n\n\t\tcontext.lineWidth = 1.2;\n\t\tif (this.nullPointer) {\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX, startY);\n\t\t\tcontext.lineTo(startX + this.w, startY + this.h);\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t}\n\n\t\tcontext.fillStyle = this.textColor;\n\t\tcontext.textAlign = 'center';\n\t\tcontext.font = '12px Arial';\n\t\tcontext.textBaseline = 'middle';\n\t\tcontext.lineWidth = 2;\n\t\tcontext.fillText(this.label, this.x, this.y);\n\t}\n\n\tsetText(newText) {\n\t\tthis.label = newText;\n\t}\n\n\tsetTextColor(color) {\n\t\tthis.textColor = color;\n\t}\n\n\tgetTextColor() {\n\t\treturn this.textColor;\n\t}\n\n\tsetHighlight(value) {\n\t\tthis.highlighted = value;\n\t}\n\n\tsetEdgeThickness(thicknessArray) {\n\t\tthis.thicknessArray = thicknessArray;\n\t}\n\n\tgetEdgeThickness() {\n\t\treturn this.thicknessArray;\n\t}\n\n\tcreateUndoDelete() {\n\t\treturn new UndoDeleteRectangle(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.xJustify,\n\t\t\tthis.yJustify,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t\tthis.layer,\n\t\t\tthis.highlighted,\n\t\t\tthis.highlightColor,\n\t\t);\n\t}\n}\n\nclass UndoDeleteRectangle extends UndoBlock {\n\tconstructor(\n\t\tobjectID,\n\t\tlabel,\n\t\tx,\n\t\ty,\n\t\tw,\n\t\th,\n\t\txJustify,\n\t\tyJustify,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t\tlayer,\n\t\thighlighted,\n\t\thighlightColor,\n\t) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.label = label;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.w = w;\n\t\tthis.h = h;\n\t\tthis.xJustify = xJustify;\n\t\tthis.yJustify = yJustify;\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.layer = layer;\n\t\tthis.highlighted = highlighted;\n\t\tthis.highlightColor = highlightColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.addRectangleObject(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.xJustify,\n\t\t\tthis.yJustify,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t);\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t\tworld.setLayer(this.objectID, this.layer);\n\t\tworld.setHighlight(this.objectID, this.highlighted, this.highlightColor);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport AnimatedObject from './AnimatedObject.js';\nimport { UndoBlock } from './UndoFunctions.js';\n\nconst NINF = '\\u2212\\u221E'; // Negative infinity\nconst PINF = '\\u221E'; // Positive infinity\n\nexport default class AnimatedSkipListNode extends AnimatedObject {\n\tconstructor(objectID, label, w, h, backgroundColor, foregroundColor) {\n\t\tsuper();\n\n\t\tthis.objectID = objectID;\n\n\t\tthis.w = w;\n\t\tthis.h = h;\n\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.highlighted = false;\n\n\t\tthis.label = label;\n\t\tthis.labelPosX = 0;\n\t\tthis.labelPosY = 0;\n\t\tthis.labelColor = foregroundColor;\n\t}\n\n\tleft() {\n\t\treturn this.x - this.w / 2;\n\t}\n\n\tright() {\n\t\treturn this.x + this.w / 2;\n\t}\n\n\ttop() {\n\t\treturn this.y - this.h / 2;\n\t}\n\n\tbottom() {\n\t\treturn this.y + this.h / 2;\n\t}\n\n\tresetTextPosition() {\n\t\tthis.labelPosY = this.y;\n\t\tthis.labelPosX = this.x;\n\t}\n\n\tgetTailPointerAttachPos(fromX, fromY, anchor) {\n\t\tswitch (anchor) {\n\t\t\tcase 0: // Top\n\t\t\t\treturn [this.x, this.top()];\n\t\t\tcase 1: // Bottom\n\t\t\t\treturn [this.x, this.bottom()];\n\t\t\tcase 2: // Left\n\t\t\t\treturn [this.left(), this.y];\n\t\t\tcase 3: // Right\n\t\t\t\treturn [this.right(), this.y];\n\t\t\tdefault:\n\t\t\t\treturn this.getClosestCardinalPoint(fromX, fromY);\n\t\t}\n\t}\n\n\tgetHeadPointerAttachPos(fromX, fromY) {\n\t\treturn this.getClosestCardinalPoint(fromX, fromY); // Normal anchor\n\t}\n\n\tsetWidth(w) {\n\t\tthis.w = w;\n\t\tthis.resetTextPosition();\n\t}\n\n\tsetHeight(h) {\n\t\tthis.h = h;\n\t\tthis.resetTextPosition();\n\t}\n\n\tgetWidth() {\n\t\treturn this.w;\n\t}\n\n\tgetHeight() {\n\t\treturn this.h;\n\t}\n\n\tdraw(context) {\n\t\tconst startX = this.left();\n\t\tconst startY = this.top();\n\n\t\tif (this.highlighted) {\n\t\t\tcontext.strokeStyle = '#ff0000';\n\t\t\tcontext.fillStyle = '#ff0000';\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(startX + this.w + this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(\n\t\t\t\tstartX + this.w + this.highlightDiff,\n\t\t\t\tstartY + this.h + this.highlightDiff,\n\t\t\t);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY + this.h + this.highlightDiff);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t\tcontext.fill();\n\t\t}\n\t\tcontext.strokeStyle = this.foregroundColor;\n\t\tcontext.fillStyle = this.backgroundColor;\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(startX, startY);\n\t\tcontext.lineTo(startX + this.w, startY);\n\t\tcontext.lineTo(startX + this.w, startY + this.h);\n\t\tcontext.lineTo(startX, startY + this.h);\n\t\tcontext.lineTo(startX, startY);\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\t\tcontext.fill();\n\n\t\tcontext.textAlign = 'center';\n\t\tcontext.font = '12px Arial';\n\t\tcontext.textBaseline = 'middle';\n\t\tcontext.lineWidth = 2;\n\n\t\tthis.resetTextPosition();\n\t\tcontext.fillStyle = this.labelColor;\n\t\tif (this.label === NINF || this.label === PINF) {\n\t\t\tcontext.font = '18px sans-serif';\n\t\t}\n\t\tcontext.fillText(this.label, this.labelPosX, this.labelPosY);\n\t}\n\n\tsetTextColor(color) {\n\t\tthis.labelColor = color;\n\t}\n\n\tgetTextColor() {\n\t\treturn this.labelColor;\n\t}\n\n\tgetText() {\n\t\treturn this.label;\n\t}\n\n\tsetText(newText) {\n\t\tthis.label = newText;\n\t\tthis.resetTextPosition();\n\t}\n\n\tsetHighlight(value) {\n\t\tif (value !== this.highlighted) {\n\t\t\tthis.highlighted = value;\n\t\t}\n\t}\n\n\tcreateUndoDelete() {\n\t\treturn new UndoDeleteSkipList(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.labelColor,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t\tthis.layer,\n\t\t\tthis.highlighted,\n\t\t\tthis.highlightColor,\n\t\t);\n\t}\n}\n\nclass UndoDeleteSkipList extends UndoBlock {\n\tconstructor(\n\t\tobjectID,\n\t\tlabel,\n\t\tw,\n\t\th,\n\t\tx,\n\t\ty,\n\t\tlabelColor,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t\tlayer,\n\t\thighlighted,\n\t\thighlightColor,\n\t) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.label = label;\n\t\tthis.w = w;\n\t\tthis.h = h;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.labelColor = labelColor;\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.layer = layer;\n\t\tthis.highlighted = highlighted;\n\t\tthis.highlightColor = highlightColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.addSkipListObject(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t);\n\t\tworld.setTextColor(this.objectID, this.labelColor);\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t\tworld.setLayer(this.objectID, this.layer);\n\t\tworld.setHighlight(this.objectID, this.highlighted, this.highlightColor);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\n// Object Manager\n//\n// Manage all of our animated objects.  Control any animated object should occur through\n// this interface (not language enforced, because enforcing such things in Javascript is\n// problematic.)\n//\n// This class is only accessed through:\n//\n//  AnimationMain\n//  Undo objects (which are themselves controlled by AnimationMain)\n\nimport AnimatedBTreeNode from './AnimatedBTreeNode';\nimport AnimatedCircle from './AnimatedCircle';\nimport AnimatedCircularlyLinkedListNode from './AnimatedCircularlyLinkedListNode';\nimport AnimatedDoublyLinkedListNode from './AnimatedDoublyLinkedListNode';\nimport AnimatedHighlightCircle from './AnimatedHighlightCircle';\nimport AnimatedLabel from './AnimatedLabel';\nimport AnimatedLine from './AnimatedLine';\nimport AnimatedLinkedListNode from './AnimatedLinkedListNode';\nimport AnimatedRectangle from './AnimatedRectangle';\nimport AnimatedSkipListNode from './AnimatedSkipListNode';\n\nexport default class ObjectManager {\n\tconstructor(canvasRef) {\n\t\tthis.nodes = [];\n\t\tthis.edges = [];\n\t\tthis.backEdges = [];\n\t\tthis.activeLayers = [];\n\t\tthis.activeLayers[0] = true;\n\t\tthis.ctx = canvasRef.current.getContext('2d');\n\t\tthis.framenum = 0;\n\t\tthis.width = 0;\n\t\tthis.height = 0;\n\t\tthis.statusReport = new AnimatedLabel(-1, 'XXX', false, 30);\n\t\tthis.statusReport.x = 30;\n\t}\n\n\tdraw() {\n\t\tthis.framenum++;\n\t\tif (this.framenum > 1000) this.framenum = 0;\n\n\t\tthis.ctx.clearRect(0, 0, this.width, this.height); // clear canvas\n\t\tthis.statusReport.y = this.height - 15;\n\n\t\tlet i;\n\t\tlet j;\n\t\tfor (i = 0; i < this.nodes.length; i++) {\n\t\t\tif (\n\t\t\t\tthis.nodes[i] != null &&\n\t\t\t\t!this.nodes[i].highlighted &&\n\t\t\t\tthis.nodes[i].addedToScene &&\n\t\t\t\t!this.nodes[i].alwaysOnTop\n\t\t\t) {\n\t\t\t\tthis.nodes[i].draw(this.ctx);\n\t\t\t}\n\t\t}\n\t\tfor (i = 0; i < this.nodes.length; i++) {\n\t\t\tif (\n\t\t\t\tthis.nodes[i] != null &&\n\t\t\t\tthis.nodes[i].highlighted &&\n\t\t\t\t!this.nodes[i].alwaysOnTop &&\n\t\t\t\tthis.nodes[i].addedToScene\n\t\t\t) {\n\t\t\t\tthis.nodes[i].pulseHighlight(this.framenum);\n\t\t\t\tthis.nodes[i].draw(this.ctx);\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < this.nodes.length; i++) {\n\t\t\tif (\n\t\t\t\tthis.nodes[i] != null &&\n\t\t\t\t!this.nodes[i].highlighted &&\n\t\t\t\tthis.nodes[i].alwaysOnTop &&\n\t\t\t\tthis.nodes[i].addedToScene\n\t\t\t) {\n\t\t\t\tthis.nodes[i].draw(this.ctx);\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < this.nodes.length; i++) {\n\t\t\tif (\n\t\t\t\tthis.nodes[i] != null &&\n\t\t\t\tthis.nodes[i].highlighted &&\n\t\t\t\tthis.nodes[i].alwaysOnTop &&\n\t\t\t\tthis.nodes[i].addedToScene\n\t\t\t) {\n\t\t\t\tthis.nodes[i].pulseHighlight(this.framenum);\n\t\t\t\tthis.nodes[i].draw(this.ctx);\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < this.edges.length; i++) {\n\t\t\tif (this.edges[i] != null) {\n\t\t\t\tfor (j = 0; j < this.edges[i].length; j++) {\n\t\t\t\t\tif (this.edges[i][j].addedToScene) {\n\t\t\t\t\t\tthis.edges[i][j].pulseHighlight(this.framenum);\n\t\t\t\t\t\tthis.edges[i][j].draw(this.ctx);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.statusReport.draw(this.ctx);\n\t}\n\n\tupdate() {}\n\n\tsetLayers(shown, layers) {\n\t\tfor (let i = 0; i < layers.length; i++) {\n\t\t\tthis.activeLayers[layers[i]] = shown;\n\t\t}\n\t\tthis.resetLayers();\n\t}\n\n\taddHighlightCircleObject(objectID, objectColor, radius) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthrow new Error(\n\t\t\t\t'addHighlightCircleObject: object with same ID (' +\n\t\t\t\t\tString(objectID) +\n\t\t\t\t\t') already exists!',\n\t\t\t);\n\t\t}\n\t\tconst newNode = new AnimatedHighlightCircle(objectID, objectColor, radius);\n\t\tthis.nodes[objectID] = newNode;\n\t}\n\n\tsetEdgeAlpha(fromID, toID, alphaVal) {\n\t\tlet oldAlpha = 1.0;\n\t\tif (this.edges[fromID] != null && this.edges[fromID] !== undefined) {\n\t\t\tconst len = this.edges[fromID].length;\n\t\t\tfor (let i = len - 1; i >= 0; i--) {\n\t\t\t\tif (\n\t\t\t\t\tthis.edges[fromID][i] != null &&\n\t\t\t\t\tthis.edges[fromID][i] !== undefined &&\n\t\t\t\t\tthis.edges[fromID][i].toID === this.nodes[toID]\n\t\t\t\t) {\n\t\t\t\t\toldAlpha = this.edges[fromID][i].alpha;\n\t\t\t\t\tthis.edges[fromID][i].alpha = alphaVal;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn oldAlpha;\n\t}\n\n\tsetAlpha(nodeID, alphaVal) {\n\t\tif (this.nodes[nodeID] != null && this.nodes[nodeID] !== undefined) {\n\t\t\tthis.nodes[nodeID].setAlpha(alphaVal);\n\t\t}\n\t}\n\n\tgetAlpha(nodeID) {\n\t\tif (this.nodes[nodeID] != null && this.nodes[nodeID] !== undefined) {\n\t\t\treturn this.nodes[nodeID].getAlpha();\n\t\t} else {\n\t\t\treturn -1;\n\t\t}\n\t}\n\n\tgetTextColor(nodeID, index) {\n\t\tif (this.nodes[nodeID] != null && this.nodes[nodeID] !== undefined) {\n\t\t\treturn this.nodes[nodeID].getTextColor(index);\n\t\t} else {\n\t\t\treturn '#000000';\n\t\t}\n\t}\n\n\tsetTextColor(nodeID, color, index) {\n\t\tif (this.nodes[nodeID] != null && this.nodes[nodeID] !== undefined) {\n\t\t\tthis.nodes[nodeID].setTextColor(color, index);\n\t\t}\n\t}\n\n\tsetHighlightIndex(nodeID, index) {\n\t\tif (this.nodes[nodeID] != null && this.nodes[nodeID] !== undefined) {\n\t\t\tthis.nodes[nodeID].setHighlightIndex(index);\n\t\t}\n\t}\n\n\tsetAllLayers(layers) {\n\t\tthis.activeLayers = [];\n\t\tfor (let i = 0; i < layers.length; i++) {\n\t\t\tthis.activeLayers[layers[i]] = true;\n\t\t}\n\t\tthis.resetLayers();\n\t}\n\n\tresetLayers() {\n\t\tlet i;\n\t\tfor (i = 0; i < this.nodes.length; i++) {\n\t\t\tif (this.nodes[i] != null && this.nodes[i] !== undefined) {\n\t\t\t\tthis.nodes[i].addedToScene = this.activeLayers[this.nodes[i].layer] === true;\n\t\t\t}\n\t\t}\n\t\tfor (i = this.edges.length - 1; i >= 0; i--) {\n\t\t\tif (this.edges[i] != null && this.edges[i] !== undefined) {\n\t\t\t\tfor (let j = 0; j < this.edges[i].length; j++) {\n\t\t\t\t\tif (this.edges[i][j] != null && this.edges[i][j] !== undefined) {\n\t\t\t\t\t\tthis.edges[i][j].addedToScene =\n\t\t\t\t\t\t\tthis.activeLayers[this.edges[i][j].fromID.layer] === true &&\n\t\t\t\t\t\t\tthis.activeLayers[this.edges[i][j].toID.layer] === true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tsetLayer(objectID, layer) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthis.nodes[objectID].layer = layer;\n\t\t\tif (this.activeLayers[layer]) {\n\t\t\t\tthis.nodes[objectID].addedToScene = true;\n\t\t\t} else {\n\t\t\t\tthis.nodes[objectID].addedToScene = false;\n\t\t\t}\n\t\t\tif (this.edges[objectID] != null && this.edges[objectID] !== undefined) {\n\t\t\t\tfor (let i = 0; i < this.edges[objectID].length; i++) {\n\t\t\t\t\tconst nextEdge = this.edges[objectID][i];\n\t\t\t\t\tif (nextEdge != null && nextEdge !== undefined) {\n\t\t\t\t\t\tnextEdge.addedToScene =\n\t\t\t\t\t\t\tnextEdge.fromID.addedToScene && nextEdge.toID.addedToScene;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.backEdges[objectID] != null && this.backEdges[objectID] !== undefined) {\n\t\t\t\tfor (let i = 0; i < this.backEdges[objectID].length; i++) {\n\t\t\t\t\tconst nextEdge = this.backEdges[objectID][i];\n\t\t\t\t\tif (nextEdge != null && nextEdge !== undefined) {\n\t\t\t\t\t\tnextEdge.addedToScene =\n\t\t\t\t\t\t\tnextEdge.fromID.addedToScene && nextEdge.toID.addedToScene;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tclearAllObjects() {\n\t\tthis.nodes = [];\n\t\tthis.edges = [];\n\t\tthis.backEdges = [];\n\t}\n\n\tsetForegroundColor(objectID, color) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthis.nodes[objectID].setForegroundColor(color);\n\t\t}\n\t}\n\n\tsetBackgroundColor(objectID, color) {\n\t\tif (this.nodes[objectID] != null) {\n\t\t\tthis.nodes[objectID].setBackgroundColor(color);\n\t\t}\n\t}\n\n\tsetHighlight(nodeID, val, color) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\t// TODO:  Error here?\n\t\t\treturn;\n\t\t}\n\t\tthis.nodes[nodeID].setHighlight(val, color);\n\t}\n\n\tgetHighlight(nodeID) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\t// TODO:  Error here?\n\t\t\treturn false;\n\t\t}\n\t\treturn this.nodes[nodeID].getHighlight();\n\t}\n\n\tgetHighlightIndex(nodeID) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\t// TODO:  Error here?\n\t\t\treturn false;\n\t\t}\n\t\treturn this.nodes[nodeID].getHighlightIndex();\n\t}\n\n\tsetWidth(nodeID, val) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\t// TODO:  Error here?\n\t\t\treturn;\n\t\t}\n\t\tthis.nodes[nodeID].setWidth(val);\n\t}\n\n\tsetHeight(nodeID, val) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\t// TODO:  Error here?\n\t\t\treturn;\n\t\t}\n\t\tthis.nodes[nodeID].setHeight(val);\n\t}\n\n\tgetHeight(nodeID) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\t// TODO:  Error here?\n\t\t\treturn -1;\n\t\t}\n\t\treturn this.nodes[nodeID].getHeight();\n\t}\n\n\tgetWidth(nodeID) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\t// TODO:  Error here?\n\t\t\treturn -1;\n\t\t}\n\t\treturn this.nodes[nodeID].getWidth();\n\t}\n\n\tbackgroundColor(objectID) {\n\t\tif (this.nodes[objectID] != null) {\n\t\t\treturn this.nodes[objectID].backgroundColor;\n\t\t} else {\n\t\t\treturn '#000000';\n\t\t}\n\t}\n\n\tforegroundColor(objectID) {\n\t\tif (this.nodes[objectID] != null) {\n\t\t\treturn this.nodes[objectID].foregroundColor;\n\t\t} else {\n\t\t\treturn '#000000';\n\t\t}\n\t}\n\n\tdisconnect(objectIDfrom, objectIDto) {\n\t\tlet undo = null;\n\t\tlet len;\n\t\tlet deleted;\n\t\tif (this.edges[objectIDfrom] != null) {\n\t\t\tlen = this.edges[objectIDfrom].length;\n\t\t\tfor (let i = len - 1; i >= 0; i--) {\n\t\t\t\tif (\n\t\t\t\t\tthis.edges[objectIDfrom][i] != null &&\n\t\t\t\t\tthis.edges[objectIDfrom][i].toID === this.nodes[objectIDto]\n\t\t\t\t) {\n\t\t\t\t\tdeleted = this.edges[objectIDfrom][i];\n\t\t\t\t\tundo = deleted.createUndoConnect();\n\t\t\t\t\tthis.edges[objectIDfrom][i] = this.edges[objectIDfrom][len - 1];\n\t\t\t\t\tlen -= 1;\n\t\t\t\t\tthis.edges[objectIDfrom].pop();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (this.backEdges[objectIDto] != null) {\n\t\t\tlen = this.backEdges[objectIDto].length;\n\t\t\tfor (let i = len - 1; i >= 0; i--) {\n\t\t\t\tif (\n\t\t\t\t\tthis.backEdges[objectIDto][i] != null &&\n\t\t\t\t\tthis.backEdges[objectIDto][i].fromID === this.nodes[objectIDfrom]\n\t\t\t\t) {\n\t\t\t\t\tdeleted = this.backEdges[objectIDto][i];\n\t\t\t\t\t// Note:  Don't need to remove this child, did it above on the regular edge\n\t\t\t\t\tthis.backEdges[objectIDto][i] = this.backEdges[objectIDto][len - 1];\n\t\t\t\t\tlen -= 1;\n\t\t\t\t\tthis.backEdges[objectIDto].pop();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn undo;\n\t}\n\n\tdeleteIncident(objectID) {\n\t\tconst undoStack = [];\n\t\tlet len;\n\t\tlet deleted;\n\t\tif (this.edges[objectID] != null) {\n\t\t\tlen = this.edges[objectID].length;\n\t\t\tfor (let i = len - 1; i >= 0; i--) {\n\t\t\t\tdeleted = this.edges[objectID][i];\n\t\t\t\tconst node2ID = deleted.toID.identifier();\n\t\t\t\tundoStack.push(deleted.createUndoConnect());\n\n\t\t\t\tlet len2 = this.backEdges[node2ID].length;\n\t\t\t\tfor (let j = len2 - 1; j >= 0; j--) {\n\t\t\t\t\tif (this.backEdges[node2ID][j] === deleted) {\n\t\t\t\t\t\tthis.backEdges[node2ID][j] = this.backEdges[node2ID][len2 - 1];\n\t\t\t\t\t\tlen2 -= 1;\n\t\t\t\t\t\tthis.backEdges[node2ID].pop();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.edges[objectID] = null;\n\t\t}\n\t\tif (this.backEdges[objectID] != null) {\n\t\t\tlen = this.backEdges[objectID].length;\n\t\t\tfor (let i = len - 1; i >= 0; i--) {\n\t\t\t\tdeleted = this.backEdges[objectID][i];\n\t\t\t\tconst node1ID = deleted.fromID.identifier();\n\t\t\t\tundoStack.push(deleted.createUndoConnect());\n\n\t\t\t\tlet len2 = this.edges[node1ID].length;\n\t\t\t\tfor (let j = len2 - 1; j >= 0; j--) {\n\t\t\t\t\tif (this.edges[node1ID][j] === deleted) {\n\t\t\t\t\t\tthis.edges[node1ID][j] = this.edges[node1ID][len2 - 1];\n\t\t\t\t\t\tlen2 -= 1;\n\t\t\t\t\t\tthis.edges[node1ID].pop();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.backEdges[objectID] = null;\n\t\t}\n\t\treturn undoStack;\n\t}\n\n\tremoveObject(objectID) {\n\t\tconst oldObject = this.nodes[objectID];\n\t\tif (objectID === this.nodes.length - 1) {\n\t\t\tthis.nodes.pop();\n\t\t} else {\n\t\t\tthis.nodes[objectID] = null;\n\t\t}\n\t\treturn oldObject;\n\t}\n\n\tgetObject(objectID) {\n\t\tif (this.nodes[objectID] == null || this.nodes[objectID] === undefined) {\n\t\t\tthrow new Error('getObject:Object with ID (' + String(objectID) + ') does not exist');\n\t\t}\n\t\treturn this.nodes[objectID];\n\t}\n\n\taddCircleObject(objectID, objectLabel) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthrow new Error(\n\t\t\t\t'addCircleObject: object with same ID (' + String(objectID) + ') already exists!',\n\t\t\t);\n\t\t}\n\t\tconst newNode = new AnimatedCircle(objectID, objectLabel);\n\t\tthis.nodes[objectID] = newNode;\n\t}\n\n\tgetNodeX(nodeID) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\tthrow new Error('Getting x position of an object that does not exist');\n\t\t}\n\t\treturn this.nodes[nodeID].x;\n\t}\n\n\tgetTextWidth(text) {\n\t\t// TODO:  Need to make fonts more flexible, and less hardwired.\n\t\tthis.ctx.font = '12px Arial';\n\t\tconst strList = text.split('\\n');\n\t\tlet width = 0;\n\t\tif (strList.length === 1) {\n\t\t\twidth = this.ctx.measureText(text).width;\n\t\t} else {\n\t\t\tfor (let i = 0; i < strList.length; i++) {\n\t\t\t\twidth = Math.max(width, this.ctx.measureText(strList[i]).width);\n\t\t\t}\n\t\t}\n\n\t\treturn width;\n\t}\n\n\tsetText(nodeID, text, index) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\tthrow new Error('setting text of an object that does not exist');\n\t\t}\n\t\tthis.nodes[nodeID].setText(text, index, this.getTextWidth(text));\n\t}\n\n\tgetText(nodeID, index) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\tthrow new Error('getting text of an object that does not exist');\n\t\t}\n\t\treturn this.nodes[nodeID].getText(index);\n\t}\n\n\tgetNodeY(nodeID) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\tthrow new Error('getting y position of an object that does not exist');\n\t\t}\n\t\treturn this.nodes[nodeID].y;\n\t}\n\n\tconnectEdge(objectIDfrom, objectIDto, color, curve, directed, lab, connectionPoint, thickness) {\n\t\tconst fromObj = this.nodes[objectIDfrom];\n\t\tconst toObj = this.nodes[objectIDto];\n\t\tif (fromObj == null || toObj == null) {\n\t\t\tthrow new Error(\"Tried to connect two nodes, one didn't exist!\");\n\t\t}\n\t\tconst l = new AnimatedLine(\n\t\t\tfromObj,\n\t\t\ttoObj,\n\t\t\tcolor,\n\t\t\tcurve,\n\t\t\tdirected,\n\t\t\tlab,\n\t\t\tconnectionPoint,\n\t\t\tthickness,\n\t\t);\n\t\tif (this.edges[objectIDfrom] == null) {\n\t\t\tthis.edges[objectIDfrom] = [];\n\t\t}\n\t\tif (this.backEdges[objectIDto] == null) {\n\t\t\tthis.backEdges[objectIDto] = [];\n\t\t}\n\t\tl.addedToScene = fromObj.addedToScene && toObj.addedToScene;\n\t\tthis.edges[objectIDfrom].push(l);\n\t\tthis.backEdges[objectIDto].push(l);\n\t}\n\n\tsetNull(objectID, nullVal) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthis.nodes[objectID].setNull(nullVal);\n\t\t}\n\t}\n\n\tsetPrevNull(objectID, nullVal) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthis.nodes[objectID].setPrevNull(nullVal);\n\t\t}\n\t}\n\n\tsetNextNull(objectID, nullVal) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthis.nodes[objectID].setNextNull(nullVal);\n\t\t}\n\t}\n\n\tgetNull(objectID) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\treturn this.nodes[objectID].getNull();\n\t\t}\n\t\treturn false; // TODO:  Error here?\n\t}\n\n\tgetLeftNull(objectID) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\treturn this.nodes[objectID].getLeftNull();\n\t\t}\n\t\treturn false; // TODO:  Error here?\n\t}\n\n\tgetRightNull(objectID) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\treturn this.nodes[objectID].getRightNull();\n\t\t}\n\t\treturn false; // TODO:  Error here?\n\t}\n\n\tsetEdgeColor(\n\t\tfromID,\n\t\ttoID,\n\t\tcolor, // returns old color\n\t) {\n\t\tlet oldColor = '#000000';\n\t\tif (this.edges[fromID] != null && this.edges[fromID] !== undefined) {\n\t\t\tconst len = this.edges[fromID].length;\n\t\t\tfor (let i = len - 1; i >= 0; i--) {\n\t\t\t\tif (\n\t\t\t\t\tthis.edges[fromID][i] != null &&\n\t\t\t\t\tthis.edges[fromID][i] !== undefined &&\n\t\t\t\t\tthis.edges[fromID][i].toID === this.nodes[toID]\n\t\t\t\t) {\n\t\t\t\t\toldColor = this.edges[fromID][i].color();\n\t\t\t\t\tthis.edges[fromID][i].setColor(color);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn oldColor;\n\t}\n\n\talignTop(id1, id2) {\n\t\tif (\n\t\t\tthis.nodes[id1] == null ||\n\t\t\tthis.nodes[id1] === undefined ||\n\t\t\tthis.nodes[id2] == null ||\n\t\t\tthis.nodes[id2] === undefined\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t\"Trying to align two nodes, one doesn't exist: \" + String(id1) + ',' + String(id2),\n\t\t\t);\n\t\t}\n\t\tthis.nodes[id1].alignTop(this.nodes[id2]);\n\t}\n\n\talignLeft(id1, id2) {\n\t\tif (\n\t\t\tthis.nodes[id1] == null ||\n\t\t\tthis.nodes[id1] === undefined ||\n\t\t\tthis.nodes[id2] == null ||\n\t\t\tthis.nodes[id2] === undefined\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t\"Trying to align two nodes, one doesn't exist: \" + String(id1) + ',' + String(id2),\n\t\t\t);\n\t\t}\n\t\tthis.nodes[id1].alignLeft(this.nodes[id2]);\n\t}\n\n\talignRight(id1, id2) {\n\t\tif (\n\t\t\tthis.nodes[id1] == null ||\n\t\t\tthis.nodes[id1] === undefined ||\n\t\t\tthis.nodes[id2] == null ||\n\t\t\tthis.nodes[id2] === undefined\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t\"Trying to align two nodes, one doesn't exist: \" + String(id1) + ',' + String(id2),\n\t\t\t);\n\t\t}\n\t\tthis.nodes[id1].alignRight(this.nodes[id2]);\n\t}\n\n\tgetAlignRightPos(id1, id2) {\n\t\tif (\n\t\t\tthis.nodes[id1] == null ||\n\t\t\tthis.nodes[id1] === undefined ||\n\t\t\tthis.nodes[id2] == null ||\n\t\t\tthis.nodes[id2] === undefined\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t\"Trying to align two nodes, one doesn't exist: \" + String(id1) + ',' + String(id2),\n\t\t\t);\n\t\t}\n\t\treturn this.nodes[id1].getAlignRightPos(this.nodes[id2]);\n\t}\n\n\tgetAlignLeftPos(id1, id2) {\n\t\tif (\n\t\t\tthis.nodes[id1] == null ||\n\t\t\tthis.nodes[id1] === undefined ||\n\t\t\tthis.nodes[id2] == null ||\n\t\t\tthis.nodes[id2] === undefined\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t\"Trying to align two nodes, one doesn't exist: \" + String(id1) + ',' + String(id2),\n\t\t\t);\n\t\t}\n\t\treturn this.nodes[id1].getAlignLeftPos(this.nodes[id2]);\n\t}\n\n\talignBottom(id1, id2) {\n\t\tif (\n\t\t\tthis.nodes[id1] == null ||\n\t\t\tthis.nodes[id1] === undefined ||\n\t\t\tthis.nodes[id2] == null ||\n\t\t\tthis.nodes[id2] === undefined\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t\"Trying to align two nodes, one doesn't exist: \" + String(id1) + ',' + String(id2),\n\t\t\t);\n\t\t}\n\t\tthis.nodes[id1].alignBottom(this.nodes[id2]);\n\t}\n\n\tsetAlwaysOnTop(nodeID, onTop) {\n\t\tif (this.nodes[nodeID] != null && this.nodes[nodeID] !== undefined) {\n\t\t\tconst oldTop = this.nodes[nodeID].alwaysOnTop;\n\t\t\tthis.nodes[nodeID].alwaysOnTop = onTop;\n\t\t\treturn oldTop;\n\t\t} else {\n\t\t\tthrow new Error(\"Trying to bring node that doesn't exist to top\");\n\t\t}\n\t}\n\n\tsetEdgeHighlight(fromID, toID, val) {\n\t\tlet oldHighlight = false;\n\t\tif (this.edges[fromID] != null && this.edges[fromID] !== undefined) {\n\t\t\tconst len = this.edges[fromID].length;\n\t\t\tfor (let i = len - 1; i >= 0; i--) {\n\t\t\t\tif (\n\t\t\t\t\tthis.edges[fromID][i] != null &&\n\t\t\t\t\tthis.edges[fromID][i] !== undefined &&\n\t\t\t\t\tthis.edges[fromID][i].toID === this.nodes[toID]\n\t\t\t\t) {\n\t\t\t\t\toldHighlight = this.edges[fromID][i].highlighted;\n\t\t\t\t\tthis.edges[fromID][i].setHighlight(val);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn oldHighlight;\n\t}\n\n\tsetEdgeThickness(fromID, toID, val) {\n\t\tlet oldThickness = 1;\n\t\tif (this.edges[fromID] != null && this.edges[fromID] !== undefined) {\n\t\t\tconst len = this.edges[fromID].length;\n\t\t\tfor (let i = len - 1; i >= 0; i--) {\n\t\t\t\tif (\n\t\t\t\t\tthis.edges[fromID][i] != null &&\n\t\t\t\t\tthis.edges[fromID][i] !== undefined &&\n\t\t\t\t\tthis.edges[fromID][i].toID === this.nodes[toID]\n\t\t\t\t) {\n\t\t\t\t\toldThickness = this.edges[fromID][i].thickness;\n\t\t\t\t\tthis.edges[fromID][i].setThickness(val);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn oldThickness;\n\t}\n\n\tsetRectangleEdgeThickness(nodeID, thicknessArray) {\n\t\tif (this.nodes[nodeID] != null && this.nodes[nodeID] !== undefined) {\n\t\t\tconst oldEdgeThickness = this.nodes[nodeID].getEdgeThickness();\n\t\t\tthis.nodes[nodeID].setEdgeThickness(thicknessArray);\n\t\t\treturn oldEdgeThickness;\n\t\t} else {\n\t\t\tthrow new Error(\"Trying to bring node that doesn't exist to top\");\n\t\t}\n\t}\n\n\taddLabelObject(objectID, objectLabel, centering) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthrow new Error('addLabelObject: object already exists!');\n\t\t}\n\n\t\tconst newLabel = new AnimatedLabel(\n\t\t\tobjectID,\n\t\t\tobjectLabel,\n\t\t\tcentering,\n\t\t\tthis.getTextWidth(objectLabel),\n\t\t);\n\t\tthis.nodes[objectID] = newLabel;\n\t}\n\n\taddLinkedListObject(\n\t\tobjectID,\n\t\tnodeLabel,\n\t\twidth,\n\t\theight,\n\t\tlinkPer,\n\t\tverticalOrientation,\n\t\tlinkPosEnd,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t) {\n\t\tif (this.nodes[objectID] != null) {\n\t\t\tthrow new Error('addLinkedListObject: object with same ID already exists!');\n\t\t}\n\t\tconst newNode = new AnimatedLinkedListNode(\n\t\t\tobjectID,\n\t\t\tnodeLabel,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tlinkPer,\n\t\t\tverticalOrientation,\n\t\t\tlinkPosEnd,\n\t\t\tbackgroundColor,\n\t\t\tforegroundColor,\n\t\t);\n\t\tthis.nodes[objectID] = newNode;\n\t}\n\n\taddDoublyLinkedListObject(\n\t\tobjectID,\n\t\tnodeLabel,\n\t\twidth,\n\t\theight,\n\t\tlinkPer,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t) {\n\t\tif (this.nodes[objectID] != null) {\n\t\t\tthrow new Error('addDoublyLinkedListObject: object with same ID already exists!');\n\t\t}\n\t\tconst newNode = new AnimatedDoublyLinkedListNode(\n\t\t\tobjectID,\n\t\t\tnodeLabel,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tlinkPer,\n\t\t\tbackgroundColor,\n\t\t\tforegroundColor,\n\t\t);\n\t\tthis.nodes[objectID] = newNode;\n\t}\n\n\taddCircularlyLinkedListObject(\n\t\tobjectID,\n\t\tnodeLabel,\n\t\twidth,\n\t\theight,\n\t\tlinkPer,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t) {\n\t\tif (this.nodes[objectID] != null) {\n\t\t\tthrow new Error('addCircularlyLinkedListObject: object with same ID already exists!');\n\t\t}\n\t\tconst newNode = new AnimatedCircularlyLinkedListNode(\n\t\t\tobjectID,\n\t\t\tnodeLabel,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tlinkPer,\n\t\t\tbackgroundColor,\n\t\t\tforegroundColor,\n\t\t);\n\t\tthis.nodes[objectID] = newNode;\n\t}\n\n\taddSkipListObject(objectID, nodeLabel, width, height, backgroundColor, foregroundColor) {\n\t\tif (this.nodes[objectID] != null) {\n\t\t\tthrow new Error('addSkipListObject: object with same ID already exists!');\n\t\t}\n\t\tconst newNode = new AnimatedSkipListNode(\n\t\t\tobjectID,\n\t\t\tnodeLabel,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tbackgroundColor,\n\t\t\tforegroundColor,\n\t\t);\n\t\tthis.nodes[objectID] = newNode;\n\t}\n\n\tgetNumElements(objectID) {\n\t\treturn this.nodes[objectID].getNumElements();\n\t}\n\n\tsetNumElements(objectID, numElems) {\n\t\tthis.nodes[objectID].setNumElements(numElems);\n\t}\n\n\taddBTreeNode(objectID, widthPerElem, height, numElems, backgroundColor, foregroundColor) {\n\t\tbackgroundColor = backgroundColor === undefined ? '#FFFFFF' : backgroundColor;\n\t\tforegroundColor = foregroundColor === undefined ? '#FFFFFF' : foregroundColor;\n\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthrow new Error('addBTreeNode: object with same ID already exists!');\n\t\t}\n\n\t\tconst newNode = new AnimatedBTreeNode(\n\t\t\tobjectID,\n\t\t\twidthPerElem,\n\t\t\theight,\n\t\t\tnumElems,\n\t\t\tbackgroundColor,\n\t\t\tforegroundColor,\n\t\t);\n\t\tthis.nodes[objectID] = newNode;\n\t}\n\n\taddRectangleObject(\n\t\tobjectID,\n\t\tnodeLabel,\n\t\twidth,\n\t\theight,\n\t\txJustify,\n\t\tyJustify,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthrow new Error('addRectangleObject: object with same ID already exists!');\n\t\t}\n\t\tconst newNode = new AnimatedRectangle(\n\t\t\tobjectID,\n\t\t\tnodeLabel,\n\t\t\twidth,\n\t\t\theight,\n\t\t\txJustify,\n\t\t\tyJustify,\n\t\t\tbackgroundColor,\n\t\t\tforegroundColor,\n\t\t);\n\t\tthis.nodes[objectID] = newNode;\n\t}\n\n\tsetNodePosition(nodeID, newX, newY) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\t// TODO:  Error here?\n\t\t\treturn;\n\t\t}\n\t\tif (newX === undefined || newY === undefined) {\n\t\t\treturn;\n\t\t}\n\t\tthis.nodes[nodeID].x = newX;\n\t\tthis.nodes[nodeID].y = newY;\n\t\t/* Don't need to dirty anything, since we repaint everything every frame\n\t\t (TODO:  Revisit if we do conditional redraws) */\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\n// Global timer used for doing animation callbacks.\n//  TODO:  Make this an instance variable of Animation Manager.\n\n/* global canvas */\n\nimport {\n\tUndoCreate,\n\tUndoHighlight,\n\tUndoHighlightEdge,\n\tUndoMove,\n\tUndoSetAlpha,\n\tUndoSetAlwaysOnTop,\n\tUndoSetBackgroundColor,\n\tUndoSetEdgeAlpha,\n\tUndoSetEdgeColor,\n\tUndoSetEdgeThickness,\n\tUndoSetForegroundColor,\n\tUndoSetHeight,\n\tUndoSetHighlightIndex,\n\tUndoSetNextNull,\n\tUndoSetNull,\n\tUndoSetNumElements,\n\tUndoSetPosition,\n\tUndoSetPrevNull,\n\tUndoSetRectangleEdgeThickness,\n\tUndoSetText,\n\tUndoSetTextColor,\n\tUndoSetWidth,\n} from './UndoFunctions.js';\nimport EventListener from './CustomEvents.js';\nimport ObjectManager from './ObjectManager.js';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport SingleAnimation from './SingleAnimation.js';\nimport { Slider } from '@material-ui/core';\nimport { UndoConnect } from './AnimatedLine.js';\n\n// Utility function to read a cookie\nfunction getCookie(cookieName) {\n\tlet i, x, y;\n\tconst cookies = document.cookie.split(';');\n\tfor (i = 0; i < cookies.length; i++) {\n\t\tx = cookies[i].substr(0, cookies[i].indexOf('='));\n\t\ty = cookies[i].substr(cookies[i].indexOf('=') + 1);\n\t\tx = x.replace(/^\\s+|\\s+$/g, '');\n\t\tif (x === cookieName) {\n\t\t\treturn unescape(y);\n\t\t}\n\t}\n}\n\n// Utility function to write a cookie\nfunction setCookie(cookieName, value, expireDays) {\n\tconst exDate = new Date();\n\texDate.setDate(exDate.getDate() + expireDays);\n\tdocument.cookie = cookieName + '=' + value;\n}\n\nconst ANIMATION_SPEED_DEFAULT = 75;\n\n// TODO:  Move these out of global space into animation manager?\n\nfunction controlKey(keyASCII) {\n\treturn (\n\t\tkeyASCII === 8 ||\n\t\tkeyASCII === 9 ||\n\t\tkeyASCII === 37 ||\n\t\tkeyASCII === 38 ||\n\t\tkeyASCII === 39 ||\n\t\tkeyASCII === 40 ||\n\t\tkeyASCII === 46\n\t);\n}\n\nfunction returnSubmit(field, func, maxSize, intOnly) {\n\tif (maxSize !== undefined) {\n\t\tfield.size = maxSize;\n\t}\n\treturn function (event) {\n\t\tlet keyASCII = 0;\n\t\tif (window.event) {\n\t\t\t// IE\n\t\t\tkeyASCII = event.keyCode;\n\t\t} else if (event.which) {\n\t\t\t// Netscape/Firefox/Opera\n\t\t\tkeyASCII = event.which;\n\t\t}\n\n\t\tif (keyASCII === 13) {\n\t\t\tfunc();\n\t\t\treturn false;\n\t\t} else if (\n\t\t\tkeyASCII === 59 ||\n\t\t\tkeyASCII === 45 ||\n\t\t\tkeyASCII === 46 ||\n\t\t\tkeyASCII === 190 ||\n\t\t\tkeyASCII === 173\n\t\t) {\n\t\t\treturn false;\n\t\t} else if (\n\t\t\t(maxSize !== undefined && field.value.length >= maxSize) ||\n\t\t\t(intOnly && (keyASCII < 48 || keyASCII > 57))\n\t\t) {\n\t\t\tif (!controlKey(keyASCII)) return false;\n\t\t}\n\t\treturn true;\n\t};\n}\n\nfunction addControlToAnimationBar(animBarRef, type, name, callback) {\n\tconst element = document.createElement('input');\n\n\telement.setAttribute('type', type);\n\telement.setAttribute('value', name);\n\tif (type === 'Button') {\n\t\telement.onclick = callback;\n\t} else if (type === 'Text') {\n\t\telement.onkeydown = callback;\n\t}\n\n\tconst tableEntry = document.createElement('td');\n\n\ttableEntry.appendChild(element);\n\n\tanimBarRef.current.appendChild(tableEntry);\n\treturn element;\n}\n\nfunction addDivisorToAnimationBar(animBarRef) {\n\tconst divisorLeft = document.createElement('td');\n\tdivisorLeft.setAttribute('class', 'divisorLeft');\n\n\tconst divisorRight = document.createElement('td');\n\tdivisorRight.setAttribute('class', 'divisorRight');\n\n\tanimBarRef.current.appendChild(divisorLeft);\n\tanimBarRef.current.appendChild(divisorRight);\n}\n\nexport default class AnimationManager extends EventListener {\n\tconstructor(canvasRef, animBarRef) {\n\t\tsuper();\n\n\t\tthis.objectManager = new ObjectManager(canvasRef);\n\t\t// Holder for all animated objects.\n\t\t// All animation is done by manipulating objects in\n\t\t// this container\n\t\tthis.animatedObjects = this.objectManager;\n\n\t\t// Control variables for stopping / starting animation\n\t\tthis.animationPaused = false;\n\t\tthis.awaitingStep = false;\n\t\tthis.currentlyAnimating = false;\n\n\t\t// Array holding the code for the animation.  This is\n\t\t// an array of strings, each of which is an animation command\n\t\t// currentAnimation is an index into this array\n\t\tthis.animationSteps = [];\n\t\tthis.currentAnimation = 0;\n\n\t\tthis.previousAnimationSteps = [];\n\n\t\t// Control variables for where we are in the current animation block.\n\t\t// currFrame holds the frame number of the current animation block,\n\t\t// while animationBlockLength holds the length of the current animation\n\t\t// block (in frame numbers).\n\t\tthis.currFrame = 0;\n\t\tthis.animationBlockLength = 0;\n\n\t\t//  The animation block that is currently running.  Array of singleAnimations\n\t\tthis.currentBlock = null;\n\n\t\t////////////////////////////////////\n\t\t// Variables for handling undo.\n\t\t////////////////////////////////////\n\t\t//  A stack of UndoBlock objects (subclassed, UndoBlock is an abstract base class)\n\t\t//  each of which can undo a single animation element\n\t\tthis.undoStack = [];\n\t\tthis.doingUndo = false;\n\n\t\t// A stack containing the beginning of each animation block, as an index\n\t\t// into the animationSteps array\n\t\tthis.undoAnimationStepIndices = [];\n\t\tthis.undoAnimationStepIndicesStack = [];\n\n\t\tthis.animationBlockLength = 10;\n\n\t\tthis.paused = false;\n\n\t\tthis.canvas = canvasRef;\n\n\t\tthis.skipBackButton = addControlToAnimationBar(animBarRef, 'Button', 'Skip Back', () =>\n\t\t\tthis.skipBack(),\n\t\t);\n\t\tthis.stepBackButton = addControlToAnimationBar(animBarRef, 'Button', 'Step Back', () =>\n\t\t\tthis.stepBack(),\n\t\t);\n\t\tthis.playPauseBackButton = addControlToAnimationBar(animBarRef, 'Button', 'Pause', () =>\n\t\t\tthis.doPlayPause(),\n\t\t);\n\t\tthis.playPauseBackButton.setAttribute('style', 'width: 80px');\n\t\tthis.stepForwardButton = addControlToAnimationBar(\n\t\t\tanimBarRef,\n\t\t\t'Button',\n\t\t\t'Step Forward',\n\t\t\t() => this.step(),\n\t\t);\n\t\tthis.skipForwardButton = addControlToAnimationBar(\n\t\t\tanimBarRef,\n\t\t\t'Button',\n\t\t\t'Skip Forward',\n\t\t\t() => this.skipForward(),\n\t\t);\n\n\t\taddDivisorToAnimationBar(animBarRef);\n\n\t\tconst element = document.createElement('div');\n\t\telement.setAttribute('display', 'inline-block');\n\t\telement.setAttribute('float', 'left');\n\n\t\tlet speed = getCookie('VisualizationSpeed');\n\t\tif (speed == null || speed === '') {\n\t\t\tspeed = ANIMATION_SPEED_DEFAULT;\n\t\t} else {\n\t\t\tspeed = parseInt(speed);\n\t\t}\n\n\t\tconst slider = (\n\t\t\t<Slider\n\t\t\t\tdefaultValue={speed}\n\t\t\t\tonChange={(e, val) => {\n\t\t\t\t\tthis.setSpeed(val);\n\t\t\t\t\tsetCookie('VisualizationSpeed', String(val), 30);\n\t\t\t\t}}\n\t\t\t/>\n\t\t);\n\n\t\tlet tableEntry = document.createElement('td');\n\n\t\tconst controlBar = document.getElementById('GeneralAnimationControls');\n\n\t\tconst newTable = document.createElement('table');\n\n\t\tlet midLevel = document.createElement('tr');\n\t\tlet bottomLevel = document.createElement('td');\n\t\tmidLevel.appendChild(bottomLevel);\n\t\tReactDOM.render(slider, bottomLevel);\n\t\tnewTable.appendChild(midLevel);\n\n\t\tmidLevel = document.createElement('tr');\n\t\tbottomLevel = document.createElement('td');\n\t\tbottomLevel.align = 'center';\n\t\tlet txtNode = document.createTextNode('Animation Speed');\n\t\tmidLevel.appendChild(bottomLevel);\n\t\tbottomLevel.appendChild(txtNode);\n\t\tnewTable.appendChild(midLevel);\n\n\t\ttableEntry.appendChild(newTable);\n\n\t\t// Append the element in page (in span)\n\t\tcontrolBar.appendChild(tableEntry);\n\n\t\tthis.setSpeed(speed);\n\n\t\telement.setAttribute('style', 'width:200px');\n\n\t\taddDivisorToAnimationBar(animBarRef);\n\n\t\tlet width = getCookie('VisualizationWidth');\n\t\twidth = width == null || width === '' ? 1500 : parseInt(width);\n\n\t\tlet height = getCookie('VisualizationHeight');\n\t\theight = height == null || height === '' ? 505 : parseInt(height);\n\n\t\tcanvas.width = width;\n\t\tcanvas.height = height;\n\n\t\ttableEntry = document.createElement('td');\n\t\ttxtNode = document.createTextNode('h:');\n\t\ttableEntry.appendChild(txtNode);\n\t\tcontrolBar.appendChild(tableEntry);\n\n\t\tthis.heightEntry = addControlToAnimationBar(animBarRef, 'Text', canvas.height, () =>\n\t\t\treturnSubmit(\n\t\t\t\tthis.heightEntry,\n\t\t\t\t() => this.changeSize(window.innerWidth, parseInt(this.heightEntry.value)),\n\t\t\t\t4,\n\t\t\t\ttrue,\n\t\t\t),\n\t\t);\n\n\t\tthis.heightEntry.size = 4;\n\t\tthis.sizeButton = addControlToAnimationBar(animBarRef, 'Button', 'Change Canvas Size', () =>\n\t\t\tthis.changeSize(),\n\t\t);\n\n\t\tthis.addListener('AnimationStarted', this, this.animStarted);\n\t\tthis.addListener('AnimationEnded', this, this.animEnded);\n\t\tthis.addListener('AnimationWaiting', this, this.animWaiting);\n\t\tthis.addListener('AnimationUndoUnavailable', this, this.animUndoUnavailable);\n\t\tthis.objectManager.width = canvas.width;\n\t\tthis.objectManager.height = canvas.height;\n\t}\n\n\tlerp(from, to, percent) {\n\t\treturn (to - from) * percent + from;\n\t}\n\n\t// Pause / unpause animation\n\tsetPaused(pausedValue) {\n\t\tthis.animationPaused = pausedValue;\n\t\tif (!this.animationPaused) {\n\t\t\tthis.step();\n\t\t}\n\t}\n\n\tparseBool(str) {\n\t\tconst uppercase = str.toUpperCase();\n\t\tconst returnVal = !(\n\t\t\tuppercase === 'False' ||\n\t\t\tuppercase === 'f' ||\n\t\t\tuppercase === ' 0' ||\n\t\t\tuppercase === '0' ||\n\t\t\tuppercase === ''\n\t\t);\n\t\treturn returnVal;\n\t}\n\n\tparseColor(clr) {\n\t\tif (clr.charAt(0) === '#') {\n\t\t\treturn clr;\n\t\t} else if (clr.substring(0, 2) === '0x') {\n\t\t\treturn '#' + clr.substring(2);\n\t\t}\n\t}\n\n\t// Set the speed of the animation, from 0 (slow) to 100 (fast)\n\tsetSpeed(newSpeed) {\n\t\tthis.animationBlockLength = Math.floor((100 - newSpeed) / 2);\n\t}\n\n\tchangeSize(width = window.innerWidth, height = parseInt(this.heightEntry.value)) {\n\t\tif (width > 100) {\n\t\t\tcanvas.width = width;\n\t\t\tthis.animatedObjects.width = width;\n\t\t\tsetCookie('VisualizationWidth', String(width), 30);\n\t\t}\n\t\tif (height > 100) {\n\t\t\tcanvas.height = height;\n\t\t\tthis.animatedObjects.height = height;\n\t\t\tsetCookie('VisualizationHeight', String(height), 30);\n\t\t}\n\t\tthis.heightEntry.value = canvas.height;\n\n\t\tthis.animatedObjects.draw();\n\t\tthis.fireEvent('CanvasSizeChanged', { width: canvas.width, height: canvas.height });\n\t}\n\n\tstartNextBlock() {\n\t\tthis.awaitingStep = false;\n\t\tthis.currentBlock = [];\n\t\tthis.undoBlock = [];\n\t\tif (this.currentAnimation === this.animationSteps.length) {\n\t\t\tthis.currentlyAnimating = false;\n\t\t\tthis.awaitingStep = false;\n\t\t\tthis.fireEvent('AnimationEnded', 'NoData');\n\t\t\tthis.stopTimer();\n\t\t\tthis.animatedObjects.update();\n\t\t\tthis.animatedObjects.draw();\n\t\t\treturn;\n\t\t}\n\t\tthis.undoAnimationStepIndices.push(this.currentAnimation);\n\n\t\tthis.foundBreak = false;\n\t\tthis.anyAnimations = false;\n\n\t\twhile (this.currentAnimation < this.animationSteps.length && !this.foundBreak) {\n\t\t\tconst [act, params] = this.animationSteps[this.currentAnimation];\n\t\t\tact.call(this, params);\n\t\t\tthis.currentAnimation++;\n\t\t}\n\t\tthis.currFrame = 0;\n\n\t\t// Hack:  If there are not any animations, and we are currently paused,\n\t\t// then set the current frame to the end of the animation, so that we will\n\t\t// advance immediately upon the next step button.  If we are not paused, then\n\t\t// animate as normal.\n\t\tif (\n\t\t\t(!this.anyAnimations && this.animationPaused) ||\n\t\t\t(!this.anyAnimations && this.currentAnimation === this.animationSteps.length)\n\t\t) {\n\t\t\tthis.currFrame = this.animationBlockLength;\n\t\t}\n\n\t\tthis.undoStack.push(this.undoBlock);\n\t}\n\n\t//  Start a new animation.  The input parameter commands is an array of strings,\n\t//  which represents the animation to start\n\tstartNewAnimation(commands) {\n\t\tthis.stopTimer();\n\t\tif (this.animationSteps !== null) {\n\t\t\tthis.previousAnimationSteps.push(this.animationSteps);\n\t\t\tthis.undoAnimationStepIndicesStack.push(this.undoAnimationStepIndices);\n\t\t}\n\t\tif (commands === undefined || commands.length === 0) {\n\t\t\tthis.animationSteps = [[act.step, []]];\n\t\t} else {\n\t\t\tthis.animationSteps = commands;\n\t\t}\n\t\tthis.undoAnimationStepIndices = [];\n\t\tthis.currentAnimation = 0;\n\t\tthis.startNextBlock();\n\t\tthis.currentlyAnimating = true;\n\t\tthis.fireEvent('AnimationStarted', 'NoData');\n\t\tthis.startTimer();\n\t}\n\n\t// Step backwards one step.  A no-op if the animation is not currently paused\n\tstepBack() {\n\t\tif (this.awaitingStep && this.undoStack !== null && this.undoStack.length !== 0) {\n\t\t\t//  TODO:  Get events working correctly!\n\t\t\tthis.fireEvent('AnimationStarted', 'NoData');\n\t\t\tthis.stopTimer();\n\n\t\t\tthis.awaitingStep = false;\n\t\t\tthis.undoLastBlock();\n\t\t\t// Re-kick the timer.  The timer may or may not be running at this point,\n\t\t\t// so to be safe we'll kill it and start it again.\n\t\t\tthis.stopTimer();\n\t\t\tthis.startTimer();\n\t\t} else if (\n\t\t\t!this.currentlyAnimating &&\n\t\t\tthis.animationPaused &&\n\t\t\tthis.undoAnimationStepIndices !== null\n\t\t) {\n\t\t\tthis.fireEvent('AnimationStarted', 'NoData');\n\t\t\tthis.currentlyAnimating = true;\n\t\t\tthis.undoLastBlock();\n\t\t\t// Re-kick the timer.  The timer may or may not be running at this point,\n\t\t\t// so to be safe we'll kill it and start it again.\n\t\t\tthis.stopTimer();\n\t\t\tthis.startTimer();\n\t\t}\n\t}\n\n\t// Step forwards one step.  A no-op if the animation is not currently paused\n\tstep() {\n\t\tif (this.awaitingStep) {\n\t\t\tthis.startNextBlock();\n\t\t\tthis.fireEvent('AnimationStarted', 'NoData');\n\t\t\tthis.currentlyAnimating = true;\n\t\t\t// Re-kick the timer.  The timer should be going now, but we've had some difficulty with\n\t\t\t// it timing itself out, so we'll be safe and kick it now.\n\t\t\tthis.stopTimer();\n\t\t\tthis.startTimer();\n\t\t}\n\t}\n\n\t/// WARNING:  Could be dangerous to call while an animation is running ...\n\tclearHistory() {\n\t\tthis.undoStack = [];\n\t\tthis.undoAnimationStepIndices = null;\n\t\tthis.previousAnimationSteps = [];\n\t\tthis.undoAnimationStepIndicesStack = [];\n\t\tthis.animationSteps = null;\n\t\tthis.fireEvent('AnimationUndoUnavailable', 'NoData');\n\t\tthis.stopTimer();\n\t\tthis.animatedObjects.update();\n\t\tthis.animatedObjects.draw();\n\t}\n\n\tskipBack() {\n\t\tlet keepUndoing =\n\t\t\tthis.undoAnimationStepIndices !== null && this.undoAnimationStepIndices.length !== 0;\n\t\tif (keepUndoing) {\n\t\t\tlet i;\n\t\t\tfor (i = 0; this.currentBlock !== null && i < this.currentBlock.length; i++) {\n\t\t\t\tconst objectID = this.currentBlock[i].objectID;\n\t\t\t\tthis.animatedObjects.setNodePosition(\n\t\t\t\t\tobjectID,\n\t\t\t\t\tthis.currentBlock[i].toX,\n\t\t\t\t\tthis.currentBlock[i].toY,\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (this.doingUndo) {\n\t\t\t\tthis.finishUndoBlock(this.undoStack.pop());\n\t\t\t}\n\t\t\twhile (keepUndoing) {\n\t\t\t\tthis.undoLastBlock();\n\t\t\t\tfor (i = 0; i < this.currentBlock.length; i++) {\n\t\t\t\t\tconst objectID = this.currentBlock[i].objectID;\n\t\t\t\t\tthis.animatedObjects.setNodePosition(\n\t\t\t\t\t\tobjectID,\n\t\t\t\t\t\tthis.currentBlock[i].toX,\n\t\t\t\t\t\tthis.currentBlock[i].toY,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tkeepUndoing = this.finishUndoBlock(this.undoStack.pop());\n\t\t\t}\n\t\t\tthis.stopTimer();\n\t\t\tthis.animatedObjects.update();\n\t\t\tthis.animatedObjects.draw();\n\t\t\tif (this.undoStack == null || this.undoStack.length === 0) {\n\t\t\t\tthis.fireEvent('AnimationUndoUnavailable', 'NoData');\n\t\t\t}\n\t\t}\n\t}\n\n\tresetAll() {\n\t\tthis.clearHistory();\n\t\tthis.animatedObjects.clearAllObjects();\n\t\tthis.animatedObjects.draw();\n\t\tthis.stopTimer();\n\t}\n\n\tskipForward() {\n\t\tif (this.currentlyAnimating) {\n\t\t\tthis.animatedObjects.runFast = true;\n\t\t\twhile (\n\t\t\t\tthis.animationSteps !== null &&\n\t\t\t\tthis.currentAnimation < this.animationSteps.length\n\t\t\t) {\n\t\t\t\tfor (let i = 0; this.currentBlock !== null && i < this.currentBlock.length; i++) {\n\t\t\t\t\tconst objectID = this.currentBlock[i].objectID;\n\t\t\t\t\tthis.animatedObjects.setNodePosition(\n\t\t\t\t\t\tobjectID,\n\t\t\t\t\t\tthis.currentBlock[i].toX,\n\t\t\t\t\t\tthis.currentBlock[i].toY,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (this.doingUndo) {\n\t\t\t\t\tthis.finishUndoBlock(this.undoStack.pop());\n\t\t\t\t}\n\t\t\t\tthis.startNextBlock();\n\t\t\t\tfor (let i = 0; i < this.currentBlock.length; i++) {\n\t\t\t\t\tconst objectID = this.currentBlock[i].objectID;\n\t\t\t\t\tthis.animatedObjects.setNodePosition(\n\t\t\t\t\t\tobjectID,\n\t\t\t\t\t\tthis.currentBlock[i].toX,\n\t\t\t\t\t\tthis.currentBlock[i].toY,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.animatedObjects.update();\n\t\t\tthis.currentlyAnimating = false;\n\t\t\tthis.awaitingStep = false;\n\t\t\tthis.doingUndo = false;\n\n\t\t\tthis.animatedObjects.runFast = false;\n\t\t\tthis.fireEvent('AnimationEnded', 'NoData');\n\t\t\tthis.stopTimer();\n\t\t\tthis.animatedObjects.update();\n\t\t\tthis.animatedObjects.draw();\n\t\t}\n\t}\n\n\tfinishUndoBlock(undoBlock) {\n\t\tfor (let i = undoBlock.length - 1; i >= 0; i--) {\n\t\t\tundoBlock[i].undoInitialStep(this.animatedObjects);\n\t\t}\n\t\tthis.doingUndo = false;\n\n\t\t// If we are at the final end of the animation ...\n\t\tif (this.undoAnimationStepIndices.length === 0) {\n\t\t\tthis.awaitingStep = false;\n\t\t\tthis.currentlyAnimating = false;\n\t\t\tthis.undoAnimationStepIndices = this.undoAnimationStepIndicesStack.pop();\n\t\t\tthis.animationSteps = this.previousAnimationSteps.pop();\n\t\t\tthis.fireEvent('AnimationEnded', 'NoData');\n\t\t\tthis.fireEvent('AnimationUndo', 'NoData');\n\t\t\tthis.currentBlock = [];\n\t\t\tif (this.undoStack == null || this.undoStack.length === 0) {\n\t\t\t\tthis.currentlyAnimating = false;\n\t\t\t\tthis.awaitingStep = false;\n\t\t\t\tthis.fireEvent('AnimationUndoUnavailable', 'NoData');\n\t\t\t}\n\n\t\t\tthis.stopTimer();\n\t\t\tthis.animatedObjects.update();\n\t\t\tthis.animatedObjects.draw();\n\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tundoLastBlock() {\n\t\tif (this.undoAnimationStepIndices.length === 0) {\n\t\t\t// Nothing on the undo stack.  Return\n\t\t\treturn;\n\t\t}\n\t\tif (this.undoAnimationStepIndices.length > 0) {\n\t\t\tthis.doingUndo = true;\n\t\t\tlet anyAnimations = false;\n\t\t\tthis.currentAnimation = this.undoAnimationStepIndices.pop();\n\t\t\tthis.currentBlock = [];\n\t\t\tconst undo = this.undoStack[this.undoStack.length - 1];\n\t\t\tlet i;\n\t\t\tfor (i = undo.length - 1; i >= 0; i--) {\n\t\t\t\tconst animateNext = undo[i].addUndoAnimation(this.currentBlock);\n\t\t\t\tanyAnimations = anyAnimations || animateNext;\n\t\t\t}\n\t\t\tthis.currFrame = 0;\n\n\t\t\t// Hack:  If there are not any animations, and we are currently paused,\n\t\t\t// then set the current frame to the end of the animation, so that we will\n\t\t\t// advance immediately upon the next step button.  If we are not paused, then\n\t\t\t// animate as normal.\n\t\t\tif (!anyAnimations && this.animationPaused) {\n\t\t\t\tthis.currFrame = this.animationBlockLength;\n\t\t\t}\n\t\t\tthis.currentlyAnimating = true;\n\t\t}\n\t}\n\n\tsetLayer(shown, layers) {\n\t\tthis.animatedObjects.setLayer(shown, layers);\n\t\t// Drop in an extra draw call here, just in case we are not\n\t\t// in the middle of an update loop when this changes\n\t\tthis.animatedObjects.draw();\n\t}\n\n\tsetAllLayers(layers) {\n\t\tthis.animatedObjects.setAllLayers(layers);\n\t\t// Drop in an extra draw call here, just in case we are not\n\t\t// in the middle of an update loop when this changes\n\t\tthis.animatedObjects.draw();\n\t}\n\n\tupdate() {\n\t\tif (this.currentlyAnimating) {\n\t\t\tthis.currFrame = this.currFrame + 1;\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < this.currentBlock.length; i++) {\n\t\t\t\tif (\n\t\t\t\t\tthis.currFrame === this.animationBlockLength ||\n\t\t\t\t\t(this.currFrame === 1 && this.animationBlockLength === 0)\n\t\t\t\t) {\n\t\t\t\t\tthis.animatedObjects.setNodePosition(\n\t\t\t\t\t\tthis.currentBlock[i].objectID,\n\t\t\t\t\t\tthis.currentBlock[i].toX,\n\t\t\t\t\t\tthis.currentBlock[i].toY,\n\t\t\t\t\t);\n\t\t\t\t} else if (this.currFrame < this.animationBlockLength) {\n\t\t\t\t\tconst objectID = this.currentBlock[i].objectID;\n\t\t\t\t\tconst percent = 1 / (this.animationBlockLength - this.currFrame);\n\t\t\t\t\tconst newX = this.lerp(\n\t\t\t\t\t\tthis.animatedObjects.getNodeX(objectID),\n\t\t\t\t\t\tthis.currentBlock[i].toX,\n\t\t\t\t\t\tpercent,\n\t\t\t\t\t);\n\t\t\t\t\tconst newY = this.lerp(\n\t\t\t\t\t\tthis.animatedObjects.getNodeY(objectID),\n\t\t\t\t\t\tthis.currentBlock[i].toY,\n\t\t\t\t\t\tpercent,\n\t\t\t\t\t);\n\t\t\t\t\tthis.animatedObjects.setNodePosition(objectID, newX, newY);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.currFrame >= this.animationBlockLength) {\n\t\t\t\tif (this.doingUndo) {\n\t\t\t\t\tif (this.finishUndoBlock(this.undoStack.pop())) {\n\t\t\t\t\t\tthis.awaitingStep = true;\n\t\t\t\t\t\tthis.fireEvent('AnimationWaiting', 'NoData');\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.animationPaused &&\n\t\t\t\t\t\tthis.currentAnimation < this.animationSteps.length\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.awaitingStep = true;\n\t\t\t\t\t\tthis.fireEvent('AnimationWaiting', 'NoData');\n\t\t\t\t\t\tthis.currentBlock = [];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.startNextBlock();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.animatedObjects.update();\n\t\t}\n\t}\n\n\tanimWaiting() {\n\t\tthis.stepForwardButton.disabled = false;\n\t\tif (this.skipBackButton.disabled === false) {\n\t\t\tthis.stepBackButton.disabled = false;\n\t\t}\n\t\tthis.objectManager.statusReport.setText('Animation Paused');\n\t\tthis.objectManager.statusReport.setForegroundColor('#FF0000');\n\t}\n\n\tanimStarted() {\n\t\tthis.skipForwardButton.disabled = false;\n\t\tthis.skipBackButton.disabled = false;\n\t\tthis.stepForwardButton.disabled = true;\n\t\tthis.stepBackButton.disabled = true;\n\t\tthis.objectManager.statusReport.setText('Animation Running');\n\t\tthis.objectManager.statusReport.setForegroundColor('#009900');\n\t}\n\n\tanimEnded() {\n\t\tthis.skipForwardButton.disabled = true;\n\t\tthis.stepForwardButton.disabled = true;\n\t\tif (this.skipBackButton.disabled === false && this.paused) {\n\t\t\tthis.stepBackButton.disabled = false;\n\t\t}\n\t\tthis.objectManager.statusReport.setText('Animation Completed');\n\t\tthis.objectManager.statusReport.setForegroundColor('#000000');\n\t}\n\n\tanimUndoUnavailable() {\n\t\tthis.skipBackButton.disabled = true;\n\t\tthis.stepBackButton.disabled = true;\n\t}\n\n\ttimeout() {\n\t\t// We need to set the timeout *first*, otherwise if we\n\t\t// try to clear it later, we get behavior we don't want ...\n\t\tthis.timer = setTimeout(() => this.timeout(), 30);\n\t\tthis.update();\n\t\tthis.objectManager.draw();\n\t}\n\n\tdoPlayPause() {\n\t\tthis.paused = !this.paused;\n\t\tif (this.paused) {\n\t\t\tthis.playPauseBackButton.setAttribute('value', 'Play');\n\t\t\tif (this.skipBackButton.disabled === false) {\n\t\t\t\tthis.stepBackButton.disabled = false;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.playPauseBackButton.setAttribute('value', 'Pause');\n\t\t}\n\t\tthis.setPaused(this.paused);\n\t}\n\n\tstartTimer() {\n\t\tthis.timer = setTimeout(() => this.timeout(), 30);\n\t}\n\n\tstopTimer() {\n\t\tclearInterval(this.timer);\n\t}\n}\n\nexport const act = {\n\tstep() {\n\t\tthis.foundBreak = true;\n\t},\n\tmove(params) {\n\t\t// id, x, y\n\t\tconst nextAnim = new SingleAnimation(\n\t\t\tparams[0],\n\t\t\tthis.animatedObjects.getNodeX(params[0]),\n\t\t\tthis.animatedObjects.getNodeY(params[0]),\n\t\t\tparams[1],\n\t\t\tparams[2],\n\t\t);\n\t\tthis.currentBlock.push(nextAnim);\n\t\tthis.undoBlock.push(\n\t\t\tnew UndoMove(\n\t\t\t\tnextAnim.objectID,\n\t\t\t\tnextAnim.toX,\n\t\t\t\tnextAnim.toY,\n\t\t\t\tnextAnim.fromX,\n\t\t\t\tnextAnim.fromY,\n\t\t\t),\n\t\t);\n\t\tthis.anyAnimations = true;\n\t},\n\tdelete(params) {\n\t\t// id\n\t\tconst removedEdges = this.animatedObjects.deleteIncident(params[0]);\n\t\tif (removedEdges.length > 0) {\n\t\t\tthis.undoBlock = this.undoBlock.concat(removedEdges);\n\t\t}\n\t\tconst obj = this.animatedObjects.getObject(params[0]);\n\t\tif (obj !== null) {\n\t\t\tthis.undoBlock.push(obj.createUndoDelete());\n\t\t\tthis.animatedObjects.removeObject(params[0]);\n\t\t}\n\t},\n\tconnect(params) {\n\t\t// fromID, toID | color, curve, directed, label, anchorPos, thickness\n\t\tparams[2] = params[2] || '#000000';\n\t\tparams[3] = params[3] || 0.0;\n\t\tparams[4] = params[4] !== false && params[4] !== 0;\n\t\tparams[5] = params[5] === undefined ? '' : params[5];\n\t\tparams[6] = params[6] || 0;\n\t\tparams[7] = params[7] === undefined ? 1 : params[7];\n\t\tthis.animatedObjects.connectEdge(\n\t\t\tparams[0],\n\t\t\tparams[1],\n\t\t\tparams[2],\n\t\t\tparams[3],\n\t\t\tparams[4],\n\t\t\tString(params[5]),\n\t\t\tparams[6],\n\t\t\tparams[7],\n\t\t);\n\t\tthis.undoBlock.push(new UndoConnect(params[0], params[1], false));\n\t},\n\tconnectNext(params) {\n\t\t// fromID, toID\n\t\tthis.animatedObjects.connectEdge(params[0], params[1], '#000000', 0.0, true, '', 0);\n\t\tthis.undoBlock.push(new UndoConnect(params[0], params[1], false));\n\t},\n\tconnectPrev(params) {\n\t\t// fromID, toID\n\t\tthis.animatedObjects.connectEdge(params[0], params[1], '#000000', 0.0, true, '', 1);\n\t\tthis.undoBlock.push(new UndoConnect(params[0], params[1], false));\n\t},\n\tconnectCurve(params) {\n\t\t// fromID, toID, curve\n\t\tthis.animatedObjects.connectEdge(params[0], params[1], '#000000', params[2], true, '', 1);\n\t\tthis.undoBlock.push(new UndoConnect(params[0], params[1], false));\n\t},\n\tconnectSkipList(params) {\n\t\t// fromID, toID, anchorPos\n\t\tthis.animatedObjects.connectEdge(\n\t\t\tparams[0],\n\t\t\tparams[1],\n\t\t\t'#000000',\n\t\t\t0.0,\n\t\t\tfalse,\n\t\t\t'',\n\t\t\tparams[2],\n\t\t);\n\t\tthis.undoBlock.push(new UndoConnect(params[0], params[1], false));\n\t},\n\tdisconnect(params) {\n\t\t// fromID, toID\n\t\tconst undoConnect = this.animatedObjects.disconnect(params[0], params[1]);\n\t\tif (undoConnect !== null) this.undoBlock.push(undoConnect);\n\t},\n\tcreateCircle(params) {\n\t\t// id, label | x, y\n\t\tparams[2] = params[2] || 0;\n\t\tparams[3] = params[3] || 0;\n\t\tthis.animatedObjects.addCircleObject(params[0], String(params[1]));\n\t\tthis.animatedObjects.setNodePosition(\n\t\t\tparseInt(params[0]),\n\t\t\tparseInt(params[2]),\n\t\t\tparseInt(params[3]),\n\t\t);\n\t\tthis.undoBlock.push(new UndoCreate(params[0]));\n\t},\n\tcreateHighlightCircle(params) {\n\t\t// id, color | x, y, radius\n\t\tparams[2] = params[2] || 0;\n\t\tparams[3] = params[3] || 0;\n\t\tparams[4] = params[4] === undefined ? 20 : params[4];\n\t\tthis.animatedObjects.addHighlightCircleObject(params[0], params[1], params[4]);\n\t\tthis.animatedObjects.setNodePosition(\n\t\t\tparseInt(params[0]),\n\t\t\tparseInt(params[2]),\n\t\t\tparseInt(params[3]),\n\t\t);\n\t\tthis.undoBlock.push(new UndoCreate(params[0]));\n\t},\n\tcreateRectangle(params) {\n\t\t// id, label, w, h | x, y, xJustify, yJustify, bgColor, fgColor\n\t\tparams[4] = params[4] || 0;\n\t\tparams[5] = params[5] || 0;\n\t\tparams[6] = params[6] || 'center';\n\t\tparams[7] = params[7] || 'center';\n\t\tparams[8] = params[8] || '#FFFFFF';\n\t\tparams[9] = params[9] || '#000000';\n\t\tthis.animatedObjects.addRectangleObject(\n\t\t\tparams[0],\n\t\t\tString(params[1]),\n\t\t\tparams[2],\n\t\t\tparams[3],\n\t\t\tparams[6],\n\t\t\tparams[7],\n\t\t\tparams[8],\n\t\t\tparams[9],\n\t\t);\n\t\tthis.animatedObjects.setNodePosition(params[0], params[4], params[5]);\n\t\tthis.undoBlock.push(new UndoCreate(params[0]));\n\t},\n\tcreateLabel(params) {\n\t\t// id, label | x, y, centered\n\t\tparams[2] = params[2] || 0;\n\t\tparams[3] = params[3] || 0;\n\t\tparams[4] = params[4] !== false && params[4] !== 0;\n\t\tthis.animatedObjects.addLabelObject(params[0], String(params[1]), params[4]);\n\t\tthis.animatedObjects.setNodePosition(params[0], params[2], params[3]);\n\t\tthis.undoBlock.push(new UndoCreate(params[0]));\n\t},\n\tcreateLinkedListNode(params) {\n\t\t// id, label, w, h | x, y, linkPercent, vertical, linkPosEnd, bgColor, fgColor\n\t\tparams[1] = Array.isArray(params[1]) ? params[1].map(x => String(x)) : [String(params[1])];\n\t\tparams[4] = params[4] || 0;\n\t\tparams[5] = params[5] || 0;\n\t\tparams[6] = params[6] === undefined ? 0.25 : params[6];\n\t\tparams[7] = params[7] !== false && params[7] !== 0;\n\t\tparams[8] = params[8] || false;\n\t\tparams[9] = params[9] || '#FFFFFF';\n\t\tparams[10] = params[10] || '#000000';\n\t\tthis.animatedObjects.addLinkedListObject(\n\t\t\tparams[0],\n\t\t\tparams[1],\n\t\t\tparams[2],\n\t\t\tparams[3],\n\t\t\tparams[6],\n\t\t\tparams[7],\n\t\t\tparams[8],\n\t\t\tparams[9],\n\t\t\tparams[10],\n\t\t);\n\t\tthis.animatedObjects.setNodePosition(params[0], params[4], params[5]);\n\t\tthis.undoBlock.push(new UndoCreate(params[0]));\n\t},\n\tcreateDoublyLinkedListNode(params) {\n\t\t// id, label, w, h | x, y, linkPercent, bgColor, fgColor\n\t\tparams[4] = params[4] || 0;\n\t\tparams[5] = params[5] || 0;\n\t\tparams[6] = params[6] === undefined ? 0.25 : params[6];\n\t\tparams[7] = params[7] || '#FFFFFF';\n\t\tparams[8] = params[8] || '#000000';\n\t\tthis.animatedObjects.addDoublyLinkedListObject(\n\t\t\tparams[0],\n\t\t\tString(params[1]),\n\t\t\tparams[2],\n\t\t\tparams[3],\n\t\t\tparams[6],\n\t\t\tparams[7],\n\t\t\tparams[8],\n\t\t);\n\t\tthis.animatedObjects.setNodePosition(params[0], params[4], params[5]);\n\t\tthis.undoBlock.push(new UndoCreate(params[0]));\n\t},\n\tcreateCircularlyLinkedListNode(params) {\n\t\t// id, label, w, h | x, y, linkPercent, bgColor, fgColor\n\t\tparams[4] = params[4] || 0;\n\t\tparams[5] = params[5] || 0;\n\t\tparams[6] = params[6] === undefined ? 0.25 : params[6];\n\t\tparams[7] = params[7] || '#FFFFFF';\n\t\tparams[8] = params[8] || '#000000';\n\t\tthis.animatedObjects.addCircularlyLinkedListObject(\n\t\t\tparams[0],\n\t\t\tString(params[1]),\n\t\t\tparams[2],\n\t\t\tparams[3],\n\t\t\tparams[6],\n\t\t\tparams[7],\n\t\t\tparams[8],\n\t\t);\n\t\tthis.animatedObjects.setNodePosition(params[0], params[4], params[5]);\n\t\tthis.undoBlock.push(new UndoCreate(params[0]));\n\t},\n\tcreateSkipListNode(params) {\n\t\t// id, label, w, h | x, y, bgColor, fgColor\n\t\tparams[4] = params[4] || 0;\n\t\tparams[5] = params[5] || 0;\n\t\tparams[6] = params[6] || '#FFFFFF';\n\t\tparams[7] = params[7] || '#000000';\n\t\tthis.animatedObjects.addSkipListObject(\n\t\t\tparams[0],\n\t\t\tString(params[1]),\n\t\t\tparams[2],\n\t\t\tparams[3],\n\t\t\tparams[6],\n\t\t\tparams[7],\n\t\t);\n\t\tthis.animatedObjects.setNodePosition(params[0], params[4], params[5]);\n\t\tthis.undoBlock.push(new UndoCreate(params[0]));\n\t},\n\tcreateBTreeNode(params) {\n\t\t// id, widthPerElement, height, numLabels, x, y, bgColor, fgColor\n\t\tparams[4] = params[4] || 0;\n\t\tparams[5] = params[5] || 0;\n\t\tparams[6] = params[6] || '#FFFFFF';\n\t\tparams[7] = params[7] || '#000000';\n\t\tthis.animatedObjects.addBTreeNode(\n\t\t\tparams[0],\n\t\t\tparams[1],\n\t\t\tparams[2],\n\t\t\tparams[3],\n\t\t\tparams[6],\n\t\t\tparams[7],\n\t\t);\n\t\tthis.animatedObjects.setNodePosition(params[0], params[4], params[5]);\n\t\tthis.undoBlock.push(new UndoCreate(params[0]));\n\t},\n\tsetText(params) {\n\t\t// id, text | textIndex\n\t\tparams[2] = params[2] || 0;\n\t\tconst oldText = this.animatedObjects.getText(params[0], params[2]);\n\t\tthis.animatedObjects.setText(params[0], String(params[1]), params[2]);\n\t\tif (oldText !== undefined) {\n\t\t\tthis.undoBlock.push(new UndoSetText(params[0], oldText, params[2]));\n\t\t}\n\t},\n\tsetTextColor(params) {\n\t\t// id, color, textIndex\n\t\tparams[2] = params[2] || 0;\n\t\tconst oldColor = this.animatedObjects.getTextColor(params[0], params[2]);\n\t\tthis.animatedObjects.setTextColor(params[0], params[1], params[2]);\n\t\tthis.undoBlock.push(new UndoSetTextColor(params[0], oldColor, params[2]));\n\t},\n\tsetForegroundColor(params) {\n\t\t// id, color\n\t\tconst oldColor = this.animatedObjects.foregroundColor(params[0]);\n\t\tthis.animatedObjects.setForegroundColor(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetForegroundColor(params[0], oldColor));\n\t},\n\tsetBackgroundColor(params) {\n\t\t// id, color\n\t\tconst oldColor = this.animatedObjects.backgroundColor(params[0]);\n\t\tthis.animatedObjects.setBackgroundColor(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetBackgroundColor(params[0], oldColor));\n\t},\n\tsetHighlight(params) {\n\t\t// id, highlight, color\n\t\tthis.animatedObjects.setHighlight(params[0], params[1], params[2]);\n\t\tthis.undoBlock.push(new UndoHighlight(params[0], !params[1], params[2]));\n\t},\n\tsetAlpha(params) {\n\t\t// id, alpha\n\t\tconst oldAlpha = this.animatedObjects.getAlpha(params[0]);\n\t\tthis.animatedObjects.setAlpha(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetAlpha(params[0], oldAlpha));\n\t},\n\tsetEdgeColor(params) {\n\t\t// fromID, toID, newColor\n\t\tconst oldColor = this.animatedObjects.setEdgeColor(params[0], params[1], params[2]);\n\t\tthis.undoBlock.push(new UndoSetEdgeColor(params[0], params[1], oldColor));\n\t},\n\tsetEdgeAlpha(params) {\n\t\t// fromID, toID, alpha\n\t\tconst oldAlpha = this.animatedObjects.setEdgeAlpha(params[0], params[1], params[2]);\n\t\tthis.undoBlock.push(new UndoSetEdgeAlpha(params[0], params[1], oldAlpha));\n\t},\n\tsetEdgeHighlight(params) {\n\t\t// fromID, toID, highlight\n\t\tconst oldHighlight = this.animatedObjects.setEdgeHighlight(params[0], params[1], params[2]);\n\t\tthis.undoBlock.push(new UndoHighlightEdge(params[0], params[1], oldHighlight));\n\t},\n\tsetEdgeThickness(params) {\n\t\t// fromID, toID, thickness\n\t\tconst oldThickness = this.animatedObjects.setEdgeThickness(params[0], params[1], params[2]);\n\t\tthis.undoBlock.push(new UndoSetEdgeThickness(params[0], params[1], oldThickness));\n\t},\n\tsetRectangleEdgeThickness(params) {\n\t\t//id, thicknessArray\n\t\tconst oldThicknessArray = this.animatedObjects.setRectangleEdgeThickness(\n\t\t\tparams[0],\n\t\t\tparams[1],\n\t\t);\n\t\tthis.undoBlock.push(new UndoSetRectangleEdgeThickness(params[0], oldThicknessArray));\n\t},\n\tsetHeight(params) {\n\t\t// id, height\n\t\tconst oldHeight = this.animatedObjects.getHeight(params[0]);\n\t\tthis.animatedObjects.setHeight(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetHeight(params[0], oldHeight));\n\t},\n\tsetWidth(params) {\n\t\t// id, width\n\t\tconst oldWidth = this.animatedObjects.getWidth(params[0]);\n\t\tthis.animatedObjects.setWidth(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetWidth(params[0], oldWidth));\n\t},\n\tsetLayer(params) {\n\t\t// id, height\n\t\tthis.animatedObjects.setLayer(params[0], params[1]);\n\t\t//TODO: Add undo information here\n\t},\n\tsetNull(params) {\n\t\t// id, null\n\t\tconst oldNull = this.animatedObjects.getNull(params[0]);\n\t\tthis.animatedObjects.setNull(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetNull(params[0], oldNull));\n\t},\n\tsetPrevNull(params) {\n\t\t// id, null\n\t\tconst oldNull = this.animatedObjects.getLeftNull(params[0]);\n\t\tthis.animatedObjects.setPrevNull(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetPrevNull(params[0], oldNull));\n\t},\n\tsetNextNull(params) {\n\t\t// id, null\n\t\tconst oldNull = this.animatedObjects.getRightNull(params[0]);\n\t\tthis.animatedObjects.setNextNull(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetNextNull(params[0], oldNull));\n\t},\n\tsetNumElements(params) {\n\t\t// id, numElements\n\t\tconst oldElem = this.animatedObjects.getObject(params[0]);\n\t\tthis.undoBlock.push(new UndoSetNumElements(oldElem, params[1]));\n\t\tthis.animatedObjects.setNumElements(params[0], params[1]);\n\t},\n\tsetPosition(params) {\n\t\t// id, x, y\n\t\tconst oldX = this.animatedObjects.getNodeX(params[0]);\n\t\tconst oldY = this.animatedObjects.getNodeY(params[0]);\n\t\tthis.animatedObjects.setNodePosition(params[0], params[1], params[2]);\n\t\tthis.undoBlock.push(new UndoSetPosition(params[0], oldX, oldY));\n\t},\n\tsetHighlightIndex(params) {\n\t\tconst oldIndex = this.animatedObjects.getHighlightIndex(params[0]);\n\t\tthis.undoBlock.push(new UndoSetHighlightIndex(params[0], oldIndex));\n\t\tthis.animatedObjects.setHighlightIndex(params[0], params[1]);\n\t},\n\talignRight(params) {\n\t\t// id, otherID\n\t\tconst oldX = this.animatedObjects.getNodeX(params[0]);\n\t\tconst oldY = this.animatedObjects.getNodeY(params[0]);\n\t\tthis.animatedObjects.alignRight(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetPosition(params[0], oldX, oldY));\n\t},\n\talignLeft(params) {\n\t\t// id, otherID\n\t\tconst oldX = this.animatedObjects.getNodeX(params[0]);\n\t\tconst oldY = this.animatedObjects.getNodeY(params[0]);\n\t\tthis.animatedObjects.alignLeft(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetPosition(params[0], oldX, oldY));\n\t},\n\talignTop(params) {\n\t\t// id, otherID\n\t\tconst oldX = this.animatedObjects.getNodeX(params[0]);\n\t\tconst oldY = this.animatedObjects.getNodeY(params[0]);\n\t\tthis.animatedObjects.alignTop(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetPosition(params[0], oldX, oldY));\n\t},\n\talignBottom(params) {\n\t\t// id, otherID\n\t\tconst oldX = this.animatedObjects.getNodeX(params[0]);\n\t\tconst oldY = this.animatedObjects.getNodeY(params[0]);\n\t\tthis.animatedObjects.alignBottom(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetPosition(params[0], oldX, oldY));\n\t},\n\tbringToTop(params) {\n\t\tconst oldTop = this.animatedObjects.setAlwaysOnTop(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetAlwaysOnTop(params[0], oldTop));\n\t},\n\tmoveToAlignRight(params) {\n\t\t// id, otherID\n\t\tconst newXY = this.animatedObjects.getAlignRightPos(params[0], params[1]);\n\t\tconst nextAnim = new SingleAnimation(\n\t\t\tparams[0],\n\t\t\tthis.animatedObjects.getNodeX(params[0]),\n\t\t\tthis.animatedObjects.getNodeY(params[0]),\n\t\t\tnewXY[0],\n\t\t\tnewXY[1],\n\t\t);\n\t\tthis.currentBlock.push(nextAnim);\n\t\tthis.undoBlock.push(\n\t\t\tnew UndoMove(\n\t\t\t\tnextAnim.objectID,\n\t\t\t\tnextAnim.toX,\n\t\t\t\tnextAnim.toY,\n\t\t\t\tnextAnim.fromX,\n\t\t\t\tnextAnim.fromY,\n\t\t\t),\n\t\t);\n\t\tthis.anyAnimations = true;\n\t},\n};\n","import React from 'react';\n\nconst Footer = () => (\n\t<div className=\"footer\">\n\t\tCopyright 2019 <a href=\"https://rodrigodlpontes.github.io/website/\">Rodrigo Pontes</a>,\n\t\tCopyright 2011 <a href=\"http://www.cs.usfca.edu/galles\">David Galles</a>\n\t</div>\n);\n\nexport default Footer;\n","import { Link } from 'react-router-dom';\nimport React from 'react';\n\nclass Header extends React.Component {\n\tstate = { menuVisible: null };\n\n\trender() {\n\t\tconst menuClass = { null: '', true: 'show', false: 'hide' };\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className=\"header\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={this.state.menuVisible ? 'selected' : ''}\n\t\t\t\t\t\tonClick={this.toggleMenu}\n\t\t\t\t\t></button>\n\t\t\t\t\t<h1>CS1332 Data Structures and Algorithms Visualizations</h1>\n\t\t\t\t</div>\n\t\t\t\t<div className={`menu ${menuClass[this.state.menuVisible]}`}>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Link to=\"/\" onClick={this.toggleMenu}>\n\t\t\t\t\t\t\t\tHome\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Link to=\"/about\" onClick={this.toggleMenu}>\n\t\t\t\t\t\t\t\tAbout\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a href=\"https://github.com/RodrigoDLPontes/visualization-tool\">\n\t\t\t\t\t\t\t\tSource Code\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n\n\ttoggleMenu = () => this.setState(state => ({ menuVisible: !state.menuVisible }));\n}\n\nexport default Header;\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport { act } from '../anim/AnimationMain';\n\nexport function addLabelToAlgorithmBar(labelName, group) {\n\tconst element = document.createElement('p');\n\telement.appendChild(document.createTextNode(labelName));\n\n\tif (!group) {\n\t\tconst tableEntry = document.createElement('td');\n\t\ttableEntry.appendChild(element);\n\n\t\tconst controlBar = document.getElementById('AlgorithmSpecificControls');\n\t\t// Append the element in page (in span)\n\t\tcontrolBar.appendChild(tableEntry);\n\t} else {\n\t\tgroup.appendChild(element);\n\t\telement.setAttribute('class', 'groupChild');\n\t}\n\n\treturn element;\n}\n\nexport function addCheckboxToAlgorithmBar(boxLabel, checked, group) {\n\tconst element = document.createElement('input');\n\n\telement.setAttribute('type', 'checkbox');\n\telement.setAttribute('id', boxLabel);\n\telement.setAttribute('name', boxLabel);\n\telement.setAttribute('value', boxLabel);\n\tchecked && element.setAttribute('checked', 'true');\n\n\tconst label = document.createElement('label');\n\tlabel.setAttribute('for', boxLabel);\n\tconst txtNode = document.createTextNode(boxLabel);\n\tlabel.appendChild(txtNode);\n\n\tif (!group) {\n\t\tconst tableEntry = document.createElement('td');\n\t\ttableEntry.appendChild(element);\n\t\ttableEntry.appendChild(label);\n\n\t\tconst controlBar = document.getElementById('AlgorithmSpecificControls');\n\t\tcontrolBar.appendChild(tableEntry);\n\t} else {\n\t\tconst span = document.createElement('span');\n\t\tspan.appendChild(element);\n\t\tspan.appendChild(label);\n\n\t\tgroup.appendChild(span);\n\t\tspan.setAttribute('class', 'groupChild');\n\t}\n\n\treturn element;\n}\n\nexport function addRadioButtonGroupToAlgorithmBar(buttonNames, groupName, group) {\n\tconst buttonList = [];\n\tconst newTable = document.createElement('table');\n\n\tfor (let i = 0; i < buttonNames.length; i++) {\n\t\tconst midLevel = document.createElement('tr');\n\t\tconst bottomLevel = document.createElement('td');\n\n\t\tconst button = document.createElement('input');\n\t\tbutton.setAttribute('type', 'radio');\n\t\tbutton.setAttribute('name', groupName);\n\t\tbutton.setAttribute('id', buttonNames[i]);\n\t\tbutton.setAttribute('value', buttonNames[i]);\n\t\tbottomLevel.appendChild(button);\n\t\tmidLevel.appendChild(bottomLevel);\n\t\tconst label = document.createElement('label');\n\t\tlabel.setAttribute('for', buttonNames[i]);\n\t\tconst txtNode = document.createTextNode(' ' + buttonNames[i]);\n\t\tlabel.appendChild(txtNode);\n\t\tbottomLevel.appendChild(label);\n\t\tnewTable.appendChild(midLevel);\n\t\tbuttonList.push(button);\n\t}\n\n\tif (!group) {\n\t\tconst topLevelTableEntry = document.createElement('td');\n\t\ttopLevelTableEntry.appendChild(newTable);\n\n\t\tconst controlBar = document.getElementById('AlgorithmSpecificControls');\n\t\tcontrolBar.appendChild(topLevelTableEntry);\n\t} else {\n\t\tgroup.appendChild(newTable);\n\t\tnewTable.setAttribute('class', 'groupChild');\n\t}\n\n\treturn buttonList;\n}\n\nexport function addControlToAlgorithmBar(type, value, group) {\n\tconst element = document.createElement('input');\n\n\telement.setAttribute('type', type);\n\telement.setAttribute('value', value);\n\n\tif (!group) {\n\t\tconst tableEntry = document.createElement('td');\n\t\ttableEntry.appendChild(element);\n\n\t\tconst controlBar = document.getElementById('AlgorithmSpecificControls');\n\t\tcontrolBar.appendChild(tableEntry);\n\t} else {\n\t\tgroup.appendChild(element);\n\t\telement.setAttribute('class', 'groupChild');\n\t}\n\n\treturn element;\n}\n\nexport function addDivisorToAlgorithmBar() {\n\tconst divisorLeft = document.createElement('td');\n\tdivisorLeft.setAttribute('class', 'divisorLeft');\n\n\tconst divisorRight = document.createElement('td');\n\tdivisorRight.setAttribute('class', 'divisorRight');\n\n\tconst controlBar = document.getElementById('AlgorithmSpecificControls');\n\tcontrolBar.appendChild(divisorLeft);\n\tcontrolBar.appendChild(divisorRight);\n}\n\nexport function addGroupToAlgorithmBar(horizontal, parentGroup) {\n\tconst group = document.createElement('div');\n\n\tgroup.setAttribute('class', horizontal ? 'hgroup' : 'vgroup');\n\n\tif (!parentGroup) {\n\t\tconst tableEntry = document.createElement('td');\n\t\ttableEntry.appendChild(group);\n\n\t\tconst controlBar = document.getElementById('AlgorithmSpecificControls');\n\t\tcontrolBar.appendChild(tableEntry);\n\t} else {\n\t\tparentGroup.appendChild(group);\n\t}\n\n\treturn group;\n}\n\nexport default class Algorithm {\n\tconstructor(am, w, h) {\n\t\tif (am == null) {\n\t\t\treturn;\n\t\t}\n\t\tthis.animationManager = am;\n\t\tam.addListener('AnimationStarted', this, this.disableUI);\n\t\tam.addListener('AnimationEnded', this, this.enableUI);\n\t\tam.addListener('AnimationUndo', this, this.undo);\n\t\tthis.canvasWidth = w;\n\t\tthis.canvasHeight = h;\n\n\t\tthis.actionHistory = [];\n\t\tthis.recordAnimation = true;\n\t\tthis.commands = [];\n\t}\n\n\taddCodeToCanvasBase(code, start_x, start_y, line_height, standard_color, layer) {\n\t\tlayer = typeof layer !== 'undefined' ? layer : 0;\n\t\tconst codeID = Array(code.length);\n\t\tlet i, j;\n\t\tfor (i = 0; i < code.length; i++) {\n\t\t\tcodeID[i] = new Array(code[i].length);\n\t\t\tfor (j = 0; j < code[i].length; j++) {\n\t\t\t\tcodeID[i][j] = this.nextIndex++;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tcodeID[i][j],\n\t\t\t\t\tcode[i][j],\n\t\t\t\t\tstart_x,\n\t\t\t\t\tstart_y + i * line_height,\n\t\t\t\t\t0,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setForegroundColor, codeID[i][j], standard_color);\n\t\t\t\tthis.cmd(act.setLayer, codeID[i][j], layer);\n\t\t\t\tif (j > 0) {\n\t\t\t\t\tthis.cmd(act.alignRight, codeID[i][j], codeID[i][j - 1]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn codeID;\n\t}\n\n\tsetCodeAlpha(code, newAlpha) {\n\t\tfor (let i = 0; i < code.length; i++) {\n\t\t\tfor (let j = 0; j < code[i].length; j++) {\n\t\t\t\tthis.cmd(act.setAlpha, code[i][j], newAlpha);\n\t\t\t}\n\t\t}\n\t}\n\n\tcmd(act, ...params) {\n\t\t// Helper method to add command to stack\n\t\tif (this.recordAnimation) {\n\t\t\tthis.commands.push([act, params]);\n\t\t}\n\t}\n\n\tclearHistory() {\n\t\tthis.actionHistory = [];\n\t}\n\n\tundo() {\n\t\t// Remove the last action (the one that we are going to undo)\n\t\tthis.actionHistory.pop();\n\t\t// Clear out our data structure.  Be sure to implement reset in\n\t\t// every AlgorithmAnimation subclass!\n\t\tthis.reset();\n\t\t//  Redo all actions from the beginning, throwing out the animation\n\t\t//  commands (the animation manager will update the animation on its own).\n\t\t//  Note that if you do something non-deterministic, you might cause problems!\n\t\t//  Be sure if you do anything non-deterministic (that is, calls to a random\n\t\t//  number generator) you clear out the undo stack here and in the animation\n\t\t//  manager.\n\n\t\t//  If this seems horribly inefficient -- it is! However, it seems to work well\n\t\t//  in practice, and you get undo for free for all algorithms, which is a non-trivial\n\t\t//  gain.\n\t\tconst len = this.actionHistory.length;\n\t\tthis.recordAnimation = false;\n\t\tfor (let i = 0; i < len; i++) {\n\t\t\tthis.actionHistory[i][0](this.actionHistory[i][1]);\n\t\t}\n\t\tthis.recordAnimation = true;\n\t}\n\n\timplementAction(func, ...args) {\n\t\tconst next = [func, args];\n\t\tthis.actionHistory.push(next);\n\t\tconst retVal = func(...args);\n\t\tthis.animationManager.startNewAnimation(retVal);\n\t}\n\n\tnormalizeNumber(input, maxLen) {\n\t\tconst isAllDigits = str => !/\\D/.test(str);\n\t\tif (!isAllDigits(input) || input === '') {\n\t\t\treturn input;\n\t\t}\n\t\treturn input.substr(-maxLen);\n\t}\n\n\treturnSubmit(field, funct, maxsize, intOnly) {\n\t\tif (maxsize !== undefined) {\n\t\t\tfield.size = maxsize;\n\t\t}\n\t\treturn function (event) {\n\t\t\tlet keyASCII = 0;\n\t\t\tif (window.event) {\n\t\t\t\t// IE\n\t\t\t\tkeyASCII = event.keyCode;\n\t\t\t} else if (event.which) {\n\t\t\t\t// Netscape/Firefox/Opera\n\t\t\t\tkeyASCII = event.which;\n\t\t\t}\n\n\t\t\tif (keyASCII === 13 && funct != null) {\n\t\t\t\tfunct();\n\t\t\t} else if (\n\t\t\t\tkeyASCII === 190 ||\n\t\t\t\tkeyASCII === 59 ||\n\t\t\t\tkeyASCII === 173 ||\n\t\t\t\tkeyASCII === 189\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t} else if (\n\t\t\t\t(maxsize !== undefined && field.value.length >= maxsize) ||\n\t\t\t\t(intOnly && (keyASCII < 48 || keyASCII > 57))\n\t\t\t) {\n\t\t\t\tif (!controlKey(keyASCII)) return false;\n\t\t\t}\n\t\t};\n\t}\n\n\t// Abstract methods - these should be implemented in the base class\n\n\t// eslint-disable-next-line no-unused-vars\n\tsizeChanged(newWidth, newHeight) {\n\t\tthrow new Error('sizeChanged() should be implemented in base class');\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\tdisableUI(event) {\n\t\tthrow new Error('disableUI() should be implemented in base class');\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\tenableUI(event) {\n\t\tthrow new Error('enableUI() should be implemented in base class');\n\t}\n\n\treset() {\n\t\tthrow new Error('reset() should be implemented in base class');\n\t}\n}\n\nexport function controlKey(keyASCII) {\n\treturn (\n\t\tkeyASCII === 8 ||\n\t\tkeyASCII === 9 ||\n\t\tkeyASCII === 37 ||\n\t\tkeyASCII === 38 ||\n\t\tkeyASCII === 39 ||\n\t\tkeyASCII === 40 ||\n\t\tkeyASCII === 46\n\t);\n}\n\nAlgorithm.prototype.returnSubmitFloat = function (field, funct, maxsize) {\n\tif (maxsize !== undefined) {\n\t\tfield.size = maxsize;\n\t}\n\treturn function (event) {\n\t\tlet keyASCII = 0;\n\t\tif (window.event) {\n\t\t\t// IE\n\t\t\tkeyASCII = event.keyCode;\n\t\t} else if (event.which) {\n\t\t\t// Netscape/Firefox/Opera\n\t\t\tkeyASCII = event.which;\n\t\t}\n\t\t// Submit on return\n\t\tif (keyASCII === 13) {\n\t\t\tfunct();\n\t\t}\n\t\t// Control keys (arrows, del, etc) are always OK\n\t\telse if (controlKey(keyASCII)) {\n\t\t\treturn;\n\t\t}\n\t\t// - (minus sign) only OK at beginning of number\n\t\t//  (For now we will allow anywhere -- hard to see where the beginning of the\n\t\t//   number is ...)\n\t\t//else if (keyASCII == 109 && field.value.length  == 0)\n\t\telse if (keyASCII === 109) {\n\t\t\treturn;\n\t\t}\n\t\t// Digis are OK if we have enough space\n\t\telse if (\n\t\t\t(maxsize !== undefined || field.value.length < maxsize) &&\n\t\t\tkeyASCII >= 48 &&\n\t\t\tkeyASCII <= 57\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\t// . (Decimal point) is OK if we haven't had one yet, and there is space\n\t\telse if (\n\t\t\t(maxsize !== undefined || field.value.length < maxsize) &&\n\t\t\tkeyASCII === 190 &&\n\t\t\tfield.value.indexOf('.') === -1\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\t// Nothing else is OK\n\t\telse {\n\t\t\treturn false;\n\t\t}\n\t};\n};\n\nAlgorithm.prototype.addReturnSubmit = function (field, action) {\n\tfield.onkeydown = this.returnSubmit(field, action, 4, false);\n};\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddRadioButtonGroupToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nexport default class AVL extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\n\t\tthis.first_print_pos_y = h - 2 * AVL.PRINT_VERTICAL_GAP;\n\t\tthis.print_max = w - 10;\n\t\tthis.startingX = w / 2;\n\t\tthis.addControls();\n\t\tthis.nextIndex = 1;\n\t\tthis.commands = [];\n\t\tthis.edges = [];\n\t\tthis.cmd(act.createLabel, 0, '', AVL.EXPLANITORY_TEXT_X, AVL.EXPLANITORY_TEXT_Y, 0);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tthis.insertField = addControlToAlgorithmBar('Text', '');\n\t\tthis.insertField.onkeydown = this.returnSubmit(\n\t\t\tthis.insertField,\n\t\t\tthis.insertCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.insertField);\n\n\t\tthis.insertButton = addControlToAlgorithmBar('Button', 'Insert');\n\t\tthis.insertButton.onclick = this.insertCallback.bind(this);\n\t\tthis.controls.push(this.insertButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.deleteField = addControlToAlgorithmBar('Text', '');\n\t\tthis.deleteField.onkeydown = this.returnSubmit(\n\t\t\tthis.deleteField,\n\t\t\tthis.deleteCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.deleteField);\n\n\t\tthis.deleteButton = addControlToAlgorithmBar('Button', 'Delete');\n\t\tthis.deleteButton.onclick = this.deleteCallback.bind(this);\n\t\tthis.controls.push(this.deleteButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.findField = addControlToAlgorithmBar('Text', '');\n\t\tthis.findField.onkeydown = this.returnSubmit(\n\t\t\tthis.findField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.findField);\n\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Find');\n\t\tthis.findButton.onclick = this.findCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.printButton = addControlToAlgorithmBar('Button', 'Print');\n\t\tthis.printButton.onclick = this.printCallback.bind(this);\n\t\tthis.controls.push(this.printButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst predSuccButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t['Predecessor', 'Successor'],\n\t\t\t'Predecessor/Successor',\n\t\t);\n\n\t\tthis.predButton = predSuccButtonList[0];\n\t\tthis.succButton = predSuccButtonList[1];\n\t\tthis.predButton.onclick = () => (this.predSucc = 'pred');\n\t\tthis.succButton.onclick = () => (this.predSucc = 'succ');\n\t\tthis.succButton.checked = true;\n\t\tthis.predSucc = 'succ';\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 1;\n\t\tthis.treeRoot = null;\n\t\tthis.edges = [];\n\t}\n\n\tinsertCallback() {\n\t\tlet insertedValue = this.insertField.value;\n\t\t// Get text value\n\t\tinsertedValue = this.normalizeNumber(insertedValue, 4);\n\t\tif (insertedValue !== '') {\n\t\t\t// set text value\n\t\t\tthis.insertField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), parseInt(insertedValue));\n\t\t}\n\t}\n\n\tdeleteCallback() {\n\t\tlet deletedValue = this.deleteField.value;\n\t\tif (deletedValue !== '') {\n\t\t\tdeletedValue = this.normalizeNumber(deletedValue, 4);\n\t\t\tthis.deleteField.value = '';\n\t\t\tthis.implementAction(this.remove.bind(this), parseInt(deletedValue));\n\t\t}\n\t}\n\n\tfindCallback() {\n\t\tlet findValue = this.findField.value;\n\t\tif (findValue !== '') {\n\t\t\tfindValue = this.normalizeNumber(findValue, 4);\n\t\t\tthis.findField.value = '';\n\t\t\tthis.implementAction(this.findElement.bind(this), parseInt(findValue));\n\t\t}\n\t}\n\n\tprintCallback() {\n\t\tthis.implementAction(this.printTree.bind(this));\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tsizeChanged(newWidth) {\n\t\tthis.startingX = newWidth / 2;\n\t}\n\n\tprintTree() {\n\t\tthis.commands = [];\n\n\t\tif (this.treeRoot != null) {\n\t\t\tthis.highlightID = this.nextIndex++;\n\t\t\tconst firstLabel = this.nextIndex;\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\tthis.highlightID,\n\t\t\t\tAVL.HIGHLIGHT_COLOR,\n\t\t\t\tthis.treeRoot.x,\n\t\t\t\tthis.treeRoot.y,\n\t\t\t);\n\t\t\tthis.xPosOfNextLabel = AVL.FIRST_PRINT_POS_X;\n\t\t\tthis.yPosOfNextLabel = this.first_print_pos_y;\n\t\t\tthis.printTreeRec(this.treeRoot);\n\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\tthis.cmd(act.step);\n\t\t\tfor (let i = firstLabel; i < this.nextIndex; i++) this.cmd(act.delete, i);\n\t\t\tthis.nextIndex = this.highlightID; /// Reuse objects.  Not necessary.\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tprintTreeRec(tree) {\n\t\tthis.cmd(act.step);\n\t\tif (tree.left != null) {\n\t\t\tthis.cmd(act.move, this.highlightID, tree.left.x, tree.left.y);\n\t\t\tthis.printTreeRec(tree.left);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.x, tree.y);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tconst nextLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, nextLabelID, tree.data, tree.x, tree.y);\n\t\tthis.cmd(act.setForegroundColor, nextLabelID, AVL.PRINT_COLOR);\n\t\tthis.cmd(act.move, nextLabelID, this.xPosOfNextLabel, this.yPosOfNextLabel);\n\t\tthis.cmd(act.step);\n\n\t\tthis.xPosOfNextLabel += AVL.PRINT_HORIZONTAL_GAP;\n\t\tif (this.xPosOfNextLabel > this.print_max) {\n\t\t\tthis.xPosOfNextLabel = AVL.FIRST_PRINT_POS_X;\n\t\t\tthis.yPosOfNextLabel += AVL.PRINT_VERTICAL_GAP;\n\t\t}\n\t\tif (tree.right != null) {\n\t\t\tthis.cmd(act.move, this.highlightID, tree.right.x, tree.right.y);\n\t\t\tthis.printTreeRec(tree.right);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.x, tree.y);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\treturn;\n\t}\n\n\tfindElement(findValue) {\n\t\tthis.commands = [];\n\n\t\tthis.highlightID = this.nextIndex++;\n\n\t\tthis.doFind(this.treeRoot, findValue);\n\n\t\treturn this.commands;\n\t}\n\n\tdoFind(tree, value) {\n\t\tthis.cmd(act.setText, 0, 'Searchiing for ' + value);\n\t\tif (tree != null) {\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\t\tif (tree.data === value) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\t0,\n\t\t\t\t\t'Searching for ' + value + ' : ' + value + ' = ' + value + ' (Element found!)',\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setText, 0, 'Found:' + value);\n\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t} else {\n\t\t\t\tif (tree.data > value) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t'Searching for ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' : ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' < ' +\n\t\t\t\t\t\t\ttree.data +\n\t\t\t\t\t\t\t' (look to left subtree)',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tif (tree.left != null) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createHighlightCircle,\n\t\t\t\t\t\t\tthis.highlightID,\n\t\t\t\t\t\t\tAVL.HIGHLIGHT_COLOR,\n\t\t\t\t\t\t\ttree.x,\n\t\t\t\t\t\t\ttree.y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.move, this.highlightID, tree.left.x, tree.left.y);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\t\t\t}\n\t\t\t\t\tthis.doFind(tree.left, value);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t' Searching for ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' : ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' > ' +\n\t\t\t\t\t\t\ttree.data +\n\t\t\t\t\t\t\t' (look to right subtree)',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tif (tree.right != null) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createHighlightCircle,\n\t\t\t\t\t\t\tthis.highlightID,\n\t\t\t\t\t\t\tAVL.HIGHLIGHT_COLOR,\n\t\t\t\t\t\t\ttree.x,\n\t\t\t\t\t\t\ttree.y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.move, this.highlightID, tree.right.x, tree.right.y);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\t\t\t}\n\t\t\t\t\tthis.doFind(tree.right, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\t0,\n\t\t\t\t' Searching for ' + value + ' : < Empty Tree > (Element not found)',\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, 0, ' Searching for ' + value + ' :  (Element not found)');\n\t\t}\n\t}\n\n\tremakeTree(curr) {\n\t\tif (curr == null) return;\n\t\tif (curr.left != null) {\n\t\t\tthis.cmd(act.connect, curr.graphicID, curr.left.graphicID, AVL.LINK_COLOR);\n\t\t\tthis.remakeTree(curr.left);\n\t\t}\n\t\tif (curr.right != null) {\n\t\t\tthis.cmd(act.connect, curr.graphicID, curr.right.graphicID, AVL.LINK_COLOR);\n\t\t\tthis.remakeTree(curr.right);\n\t\t}\n\t}\n\n\tadd(data) {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, 0, ' Inserting ' + data);\n\t\tthis.treeRoot = this.addH(data, this.treeRoot);\n\t\tthis.resizeTree();\n\t\treturn this.commands;\n\t}\n\n\taddH(data, curr) {\n\t\tif (curr == null) {\n\t\t\tthis.cmd(act.setText, 0, 'Null found, inserting new node');\n\t\t\tconst treeNodeID = this.nextIndex++;\n\t\t\tconst heightLabelID = this.nextIndex++;\n\t\t\tconst bfLabelID = this.nextIndex++;\n\t\t\tthis.cmd(act.createCircle, treeNodeID, data, 30, AVL.STARTING_Y);\n\n\t\t\tthis.cmd(act.setForegroundColor, treeNodeID, AVL.FOREGROUND_COLOR);\n\t\t\tthis.cmd(act.setBackgroundColor, treeNodeID, AVL.BACKGROUND_COLOR);\n\t\t\tthis.cmd(act.createLabel, heightLabelID, 0, 30 - 20, AVL.STARTING_Y - 20);\n\t\t\tthis.cmd(act.setForegroundColor, heightLabelID, AVL.HEIGHT_LABEL_COLOR);\n\n\t\t\tthis.cmd(act.createLabel, bfLabelID, 0, 30 + 20, AVL.STARTING_Y - 20);\n\t\t\tthis.cmd(act.setForegroundColor, bfLabelID, AVL.HEIGHT_LABEL_COLOR);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, 0, '');\n\t\t\treturn new AVLNode(data, treeNodeID, heightLabelID, bfLabelID, 0, 0);\n\t\t}\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 1);\n\t\tif (data < curr.data) {\n\t\t\tthis.cmd(act.setText, 0, `${data} < ${curr.data}. Looking at left subtree`);\n\t\t\tthis.cmd(act.step);\n\t\t\tcurr.left = this.addH(data, curr.left);\n\t\t\tcurr.left.parent = curr;\n\t\t\tthis.resizeTree();\n\t\t\tconst connected = this.connectSmart(curr.graphicID, curr.left.graphicID);\n\t\t\tconnected && this.cmd(act.step);\n\t\t} else if (data > curr.data) {\n\t\t\tthis.cmd(act.setText, 0, `${data} > ${curr.data}. Looking at right subtree`);\n\t\t\tthis.cmd(act.step);\n\t\t\tcurr.right = this.addH(data, curr.right);\n\t\t\tcurr.right.parent = curr;\n\t\t\tthis.resizeTree();\n\t\t\tconst connected = this.connectSmart(curr.graphicID, curr.right.graphicID);\n\t\t\tconnected && this.cmd(act.step);\n\t\t} else {\n\t\t\tthis.cmd(act.setText, 0, `${data} == ${curr.data}. Ignoring duplicate!`);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tcurr = this.balance(curr);\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 0);\n\t\tthis.cmd(act.setText, 0, '');\n\t\treturn curr;\n\t}\n\n\tconnectSmart(id1, id2) {\n\t\tif (!this.edges.some(e => e[0] === id1 && e[1] === id2)) {\n\t\t\tthis.cmd(act.connect, id1, id2, AVL.LINK_COLOR);\n\t\t\tthis.edges.push([id1, id2]);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tbalance(curr) {\n\t\tcurr.updateHeightAndBF();\n\t\tthis.cmd(act.setText, curr.heightLabelID, curr.height);\n\t\tthis.cmd(act.setText, curr.bfLabelID, curr.bf);\n\t\tthis.cmd(act.setText, 0, 'Adjusting height and balance factor after recursive call');\n\t\tthis.cmd(act.step);\n\n\t\tif (curr.bf < -1) {\n\t\t\tthis.cmd(act.setText, 0, 'Balance factor < -1');\n\t\t\tthis.cmd(act.setTextColor, curr.bfLabelID, AVL.HIGHLIGHT_LABEL_COLOR);\n\t\t\tthis.cmd(act.step);\n\t\t\tif (curr.right != null && curr.right.bf > 0) {\n\t\t\t\tthis.cmd(act.setText, 0, 'Right child balance factor > 0');\n\t\t\t\tthis.cmd(act.setTextColor, curr.right.bfLabelID, AVL.HIGHLIGHT_LABEL_COLOR);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setText, 0, 'Right-left rotation');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setTextColor, curr.right.bfLabelID, AVL.HEIGHT_LABEL_COLOR);\n\t\t\t\tcurr.right = this.singleRotateRight(curr.right);\n\t\t\t} else {\n\t\t\t\tif (curr.right != null) {\n\t\t\t\t\tthis.cmd(act.setText, 0, 'Right child balance factor <= 0');\n\t\t\t\t\tthis.cmd(act.setTextColor, curr.right.bfLabelID, AVL.HIGHLIGHT_LABEL_COLOR);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setText, 0, 'No right child');\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.setText, 0, 'Left rotation');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tthis.cmd(act.setTextColor, curr.bfLabelID, AVL.HEIGHT_LABEL_COLOR);\n\t\t\tthis.cmd(act.setTextColor, curr.right.bfLabelID, AVL.HEIGHT_LABEL_COLOR);\n\t\t\tcurr = this.singleRotateLeft(curr);\n\t\t} else if (curr.bf > 1) {\n\t\t\tthis.cmd(act.setText, 0, 'Balance factor > 1');\n\t\t\tthis.cmd(act.setTextColor, curr.bfLabelID, AVL.HIGHLIGHT_LABEL_COLOR);\n\t\t\tthis.cmd(act.step);\n\t\t\tif (curr.left != null && curr.left.bf < 0) {\n\t\t\t\tthis.cmd(act.setText, 0, 'Left child balance factor < 0');\n\t\t\t\tthis.cmd(act.setTextColor, curr.left.bfLabelID, AVL.HIGHLIGHT_LABEL_COLOR);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setText, 0, 'Left-right rotation');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setTextColor, curr.left.bfLabelID, AVL.HEIGHT_LABEL_COLOR);\n\t\t\t\tcurr.left = this.singleRotateLeft(curr.left);\n\t\t\t} else {\n\t\t\t\tif (curr.left != null) {\n\t\t\t\t\tthis.cmd(act.setText, 0, 'Left child balance factor >= 0');\n\t\t\t\t\tthis.cmd(act.setTextColor, curr.left.bfLabelID, AVL.HIGHLIGHT_LABEL_COLOR);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setText, 0, 'No left child');\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.setText, 0, 'Left rotation');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setTextColor, curr.bfLabelID, AVL.HEIGHT_LABEL_COLOR);\n\t\t\t}\n\t\t\tthis.cmd(act.setTextColor, curr.bfLabelID, AVL.HEIGHT_LABEL_COLOR);\n\t\t\tthis.cmd(act.setTextColor, curr.left.bfLabelID, AVL.HEIGHT_LABEL_COLOR);\n\t\t\tcurr = this.singleRotateRight(curr);\n\t\t}\n\t\treturn curr;\n\t}\n\n\tsingleRotateRight(tree) {\n\t\tconst B = tree;\n\t\tconst A = tree.left;\n\t\tconst t2 = A.right;\n\n\t\t// this.cmd(act.setText, 0, 'Single Rotate Right');\n\t\tthis.cmd(act.setEdgeHighlight, B.graphicID, A.graphicID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tif (t2 != null) {\n\t\t\tthis.cmd(act.disconnect, A.graphicID, t2.graphicID);\n\t\t\tthis.cmd(act.connect, B.graphicID, t2.graphicID, AVL.LINK_COLOR);\n\t\t\tt2.parent = B;\n\t\t}\n\t\tthis.cmd(act.disconnect, B.graphicID, A.graphicID);\n\t\tthis.cmd(act.connect, A.graphicID, B.graphicID, AVL.LINK_COLOR);\n\t\tA.parent = B.parent;\n\t\tif (this.treeRoot === B) {\n\t\t\tthis.treeRoot = A;\n\t\t} else {\n\t\t\tthis.cmd(act.disconnect, B.parent.graphicID, B.graphicID, AVL.LINK_COLOR);\n\t\t\tthis.cmd(act.connect, B.parent.graphicID, A.graphicID, AVL.LINK_COLOR);\n\t\t\tif (B.isLeftChild()) {\n\t\t\t\tB.parent.left = A;\n\t\t\t} else {\n\t\t\t\tB.parent.right = A;\n\t\t\t}\n\t\t}\n\t\tA.right = B;\n\t\tB.parent = A;\n\t\tB.left = t2;\n\t\tthis.cmd(act.setHighlight, A.graphicID, 0);\n\t\tthis.cmd(act.setHighlight, B.graphicID, 0);\n\t\tB.updateHeightAndBF();\n\t\tthis.cmd(act.setText, B.heightLabelID, B.height);\n\t\tthis.cmd(act.setText, B.bfLabelID, B.bf);\n\t\tA.updateHeightAndBF();\n\t\tthis.cmd(act.setText, A.heightLabelID, A.height);\n\t\tthis.cmd(act.setText, A.bfLabelID, A.bf);\n\t\tthis.resizeTree();\n\t\treturn A;\n\t}\n\n\tsingleRotateLeft(tree) {\n\t\tconst A = tree;\n\t\tconst B = tree.right;\n\t\tconst t2 = B.left;\n\n\t\t// this.cmd(act.setText, 0, 'Single Rotate Left');\n\t\tthis.cmd(act.setEdgeHighlight, A.graphicID, B.graphicID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tif (t2 != null) {\n\t\t\tthis.cmd(act.disconnect, B.graphicID, t2.graphicID);\n\t\t\tthis.cmd(act.connect, A.graphicID, t2.graphicID, AVL.LINK_COLOR);\n\t\t\tt2.parent = A;\n\t\t}\n\t\tthis.cmd(act.disconnect, A.graphicID, B.graphicID);\n\t\tthis.cmd(act.connect, B.graphicID, A.graphicID, AVL.LINK_COLOR);\n\t\tB.parent = A.parent;\n\t\tif (this.treeRoot === A) {\n\t\t\tthis.treeRoot = B;\n\t\t} else {\n\t\t\tthis.cmd(act.disconnect, A.parent.graphicID, A.graphicID, AVL.LINK_COLOR);\n\t\t\tthis.cmd(act.connect, A.parent.graphicID, B.graphicID, AVL.LINK_COLOR);\n\n\t\t\tif (A.isLeftChild()) {\n\t\t\t\tA.parent.left = B;\n\t\t\t} else {\n\t\t\t\tA.parent.right = B;\n\t\t\t}\n\t\t}\n\t\tB.left = A;\n\t\tA.parent = B;\n\t\tA.right = t2;\n\t\tthis.cmd(act.setHighlight, A.graphicID, 0);\n\t\tthis.cmd(act.setHighlight, B.graphicID, 0);\n\t\tA.updateHeightAndBF();\n\t\tthis.cmd(act.setText, A.heightLabelID, A.height);\n\t\tthis.cmd(act.setText, A.bfLabelID, A.bf);\n\t\tB.updateHeightAndBF();\n\t\tthis.cmd(act.setText, B.heightLabelID, B.height);\n\t\tthis.cmd(act.setText, B.bfLabelID, B.bf);\n\n\t\tthis.resizeTree();\n\t\treturn B;\n\t}\n\n\tgetHeight(tree) {\n\t\tif (tree == null) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn tree.height;\n\t}\n\n\tresetHeight(tree) {\n\t\tif (tree != null) {\n\t\t\tconst newHeight = Math.max(this.getHeight(tree.left), this.getHeight(tree.right)) + 1;\n\t\t\tif (tree.height !== newHeight) {\n\t\t\t\ttree.height = Math.max(this.getHeight(tree.left), this.getHeight(tree.right)) + 1;\n\t\t\t\tthis.cmd(act.setText, tree.heightLabelID, newHeight);\n\t\t\t}\n\t\t}\n\t}\n\n\tdeleteNode(curr) {\n\t\tthis.cmd(act.delete, curr.graphicID);\n\t\tthis.cmd(act.delete, curr.heightLabelID);\n\t\tthis.cmd(act.delete, curr.bfLabelID);\n\t}\n\n\tremove(data) {\n\t\tthis.commands = [];\n\n\t\tthis.cmd(act.setText, 0, `Deleting ${data}`);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, 0, ' ');\n\n\t\tthis.highlightID = this.nextIndex++;\n\t\tthis.treeRoot = this.removeH(this.treeRoot, data);\n\t\tthis.cmd(act.setText, 0, '');\n\t\tthis.resizeTree();\n\t\treturn this.commands;\n\t}\n\n\tremoveH(curr, data) {\n\t\tif (curr == null) {\n\t\t\tthis.cmd(act.setText, 0, `${data} not found in the tree`);\n\t\t\treturn;\n\t\t}\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 1);\n\t\tif (data < curr.data) {\n\t\t\tthis.cmd(act.setText, 0, `${data} < ${curr.data}. Looking left`);\n\t\t\tthis.cmd(act.step);\n\t\t\tcurr.left = this.removeH(curr.left, data);\n\t\t\tif (curr.left != null) {\n\t\t\t\tcurr.left.parent = curr;\n\t\t\t\tthis.connectSmart(curr.graphicID, curr.left.graphicID);\n\t\t\t\tthis.resizeTree();\n\t\t\t}\n\t\t} else if (data > curr.data) {\n\t\t\tthis.cmd(act.setText, 0, `${data} > ${curr.data}. Looking right`);\n\t\t\tthis.cmd(act.step);\n\t\t\tcurr.right = this.removeH(curr.right, data);\n\t\t\tif (curr.right != null) {\n\t\t\t\tcurr.right.parent = curr;\n\t\t\t\tthis.connectSmart(curr.graphicID, curr.right.graphicID);\n\t\t\t\tthis.resizeTree();\n\t\t\t}\n\t\t} else {\n\t\t\tif (curr.left == null && curr.right == null) {\n\t\t\t\tthis.cmd(act.setText, 0, 'Element to delete is a leaf node');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.deleteNode(curr);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\treturn null;\n\t\t\t} else if (curr.left == null) {\n\t\t\t\tthis.cmd(act.setText, 0, `One-child case, replace with right child`);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.deleteNode(curr);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\treturn curr.right;\n\t\t\t} else if (curr.right == null) {\n\t\t\t\tthis.cmd(act.setText, 0, `One-child case, replace with left child`);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.deleteNode(curr);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\treturn curr.left;\n\t\t\t} else {\n\t\t\t\tconst dummy = [];\n\t\t\t\tif (this.predSucc === 'succ') {\n\t\t\t\t\tthis.cmd(act.setText, 0, `Two-child case, replace data with successor`);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tcurr.right = this.removeSucc(curr.right, dummy);\n\t\t\t\t\tcurr.right && this.connectSmart(curr.graphicID, curr.right.graphicID);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setText, 0, `Two-child case, replace data with predecessor`);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tcurr.left = this.removePred(curr.left, dummy);\n\t\t\t\t\tcurr.left && this.connectSmart(curr.graphicID, curr.left.graphicID);\n\t\t\t\t}\n\t\t\t\tthis.resizeTree();\n\t\t\t\tcurr.data = dummy[0];\n\t\t\t\tthis.cmd(act.setText, curr.graphicID, curr.data);\n\t\t\t}\n\t\t}\n\t\tcurr = this.balance(curr);\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 0);\n\t\tthis.cmd(act.setText, 0, '');\n\t\treturn curr;\n\t}\n\n\tremoveSucc(curr, dummy) {\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 1, '#0000ff');\n\t\tthis.cmd(act.step);\n\t\tif (curr.left == null) {\n\t\t\tthis.cmd(act.setText, 0, 'No left child, replace with right child');\n\t\t\tthis.cmd(act.step);\n\t\t\tdummy.push(curr.data);\n\t\t\tthis.deleteNode(curr);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, 0, '');\n\t\t\treturn curr.right;\n\t\t}\n\t\tthis.cmd(act.setText, 0, 'Left child exists, look left');\n\t\tthis.cmd(act.step);\n\t\tcurr.left = this.removeSucc(curr.left, dummy);\n\t\tif (curr.left != null) {\n\t\t\tcurr.left.parent = curr;\n\t\t\tthis.connectSmart(curr.graphicID, curr.left.graphicID);\n\t\t\tthis.resizeTree();\n\t\t}\n\t\tcurr = this.balance(curr);\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 0);\n\t\treturn curr;\n\t}\n\n\tremovePred(curr, dummy) {\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 1, '#0000ff');\n\t\tthis.cmd(act.step);\n\t\tif (curr.right == null) {\n\t\t\tthis.cmd(act.setText, 0, 'No right child, replace with right child');\n\t\t\tthis.cmd(act.step);\n\t\t\tdummy.push(curr.data);\n\t\t\tthis.deleteNode(curr);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, 0, '');\n\t\t\treturn curr.left;\n\t\t}\n\t\tthis.cmd(act.setText, 0, 'Right child exists, look right');\n\t\tthis.cmd(act.step);\n\t\tcurr.right = this.removePred(curr.right, dummy);\n\t\tif (curr.right != null) {\n\t\t\tcurr.right.parent = curr;\n\t\t\tthis.connectSmart(curr.graphicID, curr.right.graphicID);\n\t\t\tthis.resizeTree();\n\t\t}\n\t\tcurr = this.balance(curr);\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 0);\n\t\treturn curr;\n\t}\n\n\tresizeTree() {\n\t\tif (this.treeRoot == null) {\n\t\t\treturn;\n\t\t}\n\t\tlet startingPoint = this.startingX;\n\t\tthis.resizeWidths(this.treeRoot);\n\t\tif (this.treeRoot != null) {\n\t\t\tif (this.treeRoot.leftWidth > startingPoint) {\n\t\t\t\tstartingPoint = this.treeRoot.leftWidth;\n\t\t\t} else if (this.treeRoot.rightWidth > startingPoint) {\n\t\t\t\tstartingPoint = Math.max(\n\t\t\t\t\tthis.treeRoot.leftWidth,\n\t\t\t\t\t2 * startingPoint - this.treeRoot.rightWidth,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.setNewPositions(this.treeRoot, startingPoint, AVL.STARTING_Y, 0);\n\t\t\tthis.animateNewPositions(this.treeRoot);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t}\n\n\tsetNewPositions(tree, xPosition, yPosition, side) {\n\t\tif (tree != null) {\n\t\t\ttree.y = yPosition;\n\t\t\tif (side === -1) {\n\t\t\t\txPosition = xPosition - tree.rightWidth;\n\t\t\t\ttree.heightLabelX = xPosition - 20;\n\t\t\t\ttree.bfLabelX = xPosition + 20;\n\t\t\t} else if (side === 1) {\n\t\t\t\txPosition = xPosition + tree.leftWidth;\n\t\t\t\ttree.heightLabelX = xPosition - 20;\n\t\t\t\ttree.bfLabelX = xPosition + 20;\n\t\t\t} else {\n\t\t\t\ttree.heightLabelX = xPosition - 20;\n\t\t\t\ttree.bfLabelX = xPosition + 20;\n\t\t\t}\n\t\t\ttree.x = xPosition;\n\t\t\ttree.heightLabelY = tree.y - 20;\n\t\t\ttree.bfLabelY = tree.y - 20;\n\t\t\tthis.setNewPositions(tree.left, xPosition, yPosition + AVL.HEIGHT_DELTA, -1);\n\t\t\tthis.setNewPositions(tree.right, xPosition, yPosition + AVL.HEIGHT_DELTA, 1);\n\t\t}\n\t}\n\n\tanimateNewPositions(tree) {\n\t\tif (tree != null) {\n\t\t\tthis.cmd(act.move, tree.graphicID, tree.x, tree.y);\n\t\t\tthis.cmd(act.move, tree.heightLabelID, tree.heightLabelX, tree.heightLabelY);\n\t\t\tthis.cmd(act.move, tree.bfLabelID, tree.bfLabelX, tree.bfLabelY);\n\t\t\tthis.animateNewPositions(tree.left);\n\t\t\tthis.animateNewPositions(tree.right);\n\t\t}\n\t}\n\n\tresizeWidths(tree) {\n\t\tif (tree == null) {\n\t\t\treturn 0;\n\t\t}\n\t\ttree.leftWidth = Math.max(this.resizeWidths(tree.left), AVL.WIDTH_DELTA / 2);\n\t\ttree.rightWidth = Math.max(this.resizeWidths(tree.right), AVL.WIDTH_DELTA / 2);\n\t\treturn tree.leftWidth + tree.rightWidth;\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tthis.recClear(this.treeRoot);\n\t\tthis.treeRoot = null;\n\t\treturn this.commands;\n\t}\n\n\trecClear(curr) {\n\t\tif (curr != null) {\n\t\t\tthis.cmd(act.delete, curr.graphicID);\n\t\t\tthis.cmd(act.delete, curr.heightLabelID);\n\t\t\tthis.cmd(act.delete, curr.bfLabelID);\n\t\t\tthis.recClear(curr.left);\n\t\t\tthis.recClear(curr.right);\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n\nclass AVLNode {\n\tconstructor(val, id, hid, bfid, initialX, initialY) {\n\t\tthis.data = val;\n\t\tthis.x = initialX;\n\t\tthis.y = initialY;\n\t\tthis.heightLabelID = hid;\n\t\tthis.bfLabelID = bfid;\n\t\tthis.height = 0;\n\t\tthis.bf = 0;\n\n\t\tthis.graphicID = id;\n\t\tthis.left = null;\n\t\tthis.right = null;\n\t\tthis.parent = null;\n\t}\n\n\tupdateHeightAndBF() {\n\t\tconst h = node => (node == null ? -1 : node.height);\n\t\tconst l = h(this.left);\n\t\tconst r = h(this.right);\n\t\tthis.height = Math.max(l, r) + 1;\n\t\tthis.bf = l - r;\n\t}\n\n\tisLeftChild() {\n\t\tif (this.parent == null) {\n\t\t\treturn true;\n\t\t}\n\t\treturn this.parent.left === this;\n\t}\n}\n\n// Various constants\n\nAVL.HIGHLIGHT_LABEL_COLOR = '#FF0000';\nAVL.HIGHLIGHT_LINK_COLOR = '#FF0000';\n\nAVL.HIGHLIGHT_COLOR = '#007700';\nAVL.HEIGHT_LABEL_COLOR = '#007700';\n\nAVL.LINK_COLOR = '#00B000';\nAVL.HIGHLIGHT_CIRCLE_COLOR = '#007700';\nAVL.FOREGROUND_COLOR = '#007700';\nAVL.BACKGROUND_COLOR = '#DDFFDD';\nAVL.PRINT_COLOR = AVL.FOREGROUND_COLOR;\n\nAVL.WIDTH_DELTA = 50;\nAVL.HEIGHT_DELTA = 50;\nAVL.STARTING_Y = 50;\n\nAVL.FIRST_PRINT_POS_X = 50;\nAVL.PRINT_VERTICAL_GAP = 20;\nAVL.PRINT_HORIZONTAL_GAP = 50;\nAVL.EXPLANITORY_TEXT_X = 10;\nAVL.EXPLANITORY_TEXT_Y = 10;\n","/* eslint-disable lines-between-class-members */\n// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 200;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nconst ARRRAY_ELEMS_PER_LINE = 15;\nconst ARRAY_LINE_SPACING = 130;\n\nconst PUSH_LABEL_X = 50;\nconst PUSH_LABEL_Y = 30;\nconst PUSH_ELEMENT_X = 120;\nconst PUSH_ELEMENT_Y = 30;\n\nconst SIZE = 10;\n\nexport default class ArrayList extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tconst addVerticalGroup = addGroupToAlgorithmBar(false);\n\t\tconst addTopHorizontalGroup = addGroupToAlgorithmBar(true, addVerticalGroup);\n\t\tconst addBottomHorizontalGroup = addGroupToAlgorithmBar(true, addVerticalGroup);\n\n\t\taddLabelToAlgorithmBar('Add', addTopHorizontalGroup);\n\n\t\t// Add's value text field\n\t\tthis.addValueField = addControlToAlgorithmBar('Text', '', addTopHorizontalGroup);\n\t\tthis.addValueField.onkeydown = this.returnSubmit(\n\t\t\tthis.addValueField,\n\t\t\t() => this.addIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.addValueField);\n\n\t\taddLabelToAlgorithmBar('at index', addTopHorizontalGroup);\n\n\t\t// Add's index text field\n\t\tthis.addIndexField = addControlToAlgorithmBar('Text', '', addTopHorizontalGroup);\n\t\tthis.addIndexField.onkeydown = this.returnSubmit(\n\t\t\tthis.addIndexField,\n\t\t\t() => this.addIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.addIndexField);\n\n\t\t// Add to front button\n\t\tthis.addFrontButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add to Front',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addFrontButton.onclick = this.addFrontCallback.bind(this);\n\t\tthis.controls.push(this.addFrontButton);\n\n\t\t// Add to back button\n\t\tthis.addBackButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add to Back',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addBackButton.onclick = () => this.addBackCallback();\n\t\tthis.controls.push(this.addBackButton);\n\n\t\taddLabelToAlgorithmBar('or', addBottomHorizontalGroup);\n\n\t\t// Add at index button\n\t\tthis.addIndexButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add at Index',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addIndexButton.onclick = this.addIndexCallback.bind(this);\n\t\tthis.controls.push(this.addIndexButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst removeVerticalGroup = addGroupToAlgorithmBar(false);\n\t\tconst removeTopHorizontalGroup = addGroupToAlgorithmBar(true, removeVerticalGroup);\n\t\tconst removeBottomHorizontalGroup = addGroupToAlgorithmBar(true, removeVerticalGroup);\n\n\t\taddLabelToAlgorithmBar('Index', removeTopHorizontalGroup);\n\n\t\t// Remove's index text field\n\t\tthis.removeField = addControlToAlgorithmBar('Text', '', removeTopHorizontalGroup);\n\t\tthis.removeField.onkeydown = this.returnSubmit(\n\t\t\tthis.removeField,\n\t\t\t() => this.removeIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.removeField);\n\n\t\t// Remove from index button\n\t\tthis.removeIndexButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Index',\n\t\t\tremoveTopHorizontalGroup,\n\t\t);\n\t\tthis.removeIndexButton.onclick = () => this.removeIndexCallback();\n\t\tthis.controls.push(this.removeIndexButton);\n\n\t\taddLabelToAlgorithmBar('or', removeBottomHorizontalGroup);\n\n\t\t// Remove from front button\n\t\tthis.removeFrontButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Front',\n\t\t\tremoveBottomHorizontalGroup,\n\t\t);\n\t\tthis.removeFrontButton.onclick = () => this.removeFrontCallback();\n\t\tthis.controls.push(this.removeFrontButton);\n\n\t\t// Remove from back button\n\t\tthis.removeBackButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Back',\n\t\t\tremoveBottomHorizontalGroup,\n\t\t);\n\t\tthis.removeBackButton.onclick = () => this.removeBackCallback();\n\t\tthis.controls.push(this.removeBackButton);\n\n\t\t// Get's index text field\n\t\t// this.getField = addControlToAlgorithmBar(\"Text\", \"\");\n\t\t// this.getField.onkeydown = this.returnSubmit(this.getField, () => this.getCallback(), 4, true);\n\t\t// this.controls.push(this.getField);\n\n\t\t// Get button\n\t\t// this.getButton = addControlToAlgorithmBar(\"Button\", \"Get\");\n\t\t// this.getButton.onclick = () => this.getCallback();\n\t\t// this.controls.push(this.getButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = () => this.clearCallback();\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tsetup() {\n\t\tthis.arrayData = new Array(SIZE);\n\t\tthis.arrayID = new Array(SIZE);\n\t\tthis.arrayLabelID = new Array(SIZE);\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.arrayData[i] = 0;\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelID[i] = this.nextIndex++;\n\t\t}\n\n\t\tthis.size = 0;\n\t\tthis.commands = [];\n\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tconst xpos = (i % ARRRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = Math.floor(i / ARRRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.createLabel, this.arrayLabelID[i], i, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\t\tthis.cmd(act.setForegroundColor, this.arrayLabelID[i], '#0000FF');\n\t\t}\n\n\t\tthis.highlight1ID = this.nextIndex++;\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.size = 0;\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.arrayData[i] = 0;\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelID[i] = this.nextIndex++;\n\t\t}\n\t\tthis.highlight1ID = this.nextIndex++;\n\t}\n\n\taddIndexCallback() {\n\t\tif (\n\t\t\tthis.addValueField.value !== '' &&\n\t\t\tthis.addIndexField.value !== '' &&\n\t\t\tthis.size < SIZE\n\t\t) {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tconst index = parseInt(this.addIndexField.value);\n\t\t\tif (index >= 0 && index <= this.size) {\n\t\t\t\tthis.addValueField.value = '';\n\t\t\t\tthis.addIndexField.value = '';\n\t\t\t\tthis.implementAction(this.add.bind(this), addVal, index);\n\t\t\t}\n\t\t}\n\t}\n\n\taddFrontCallback() {\n\t\tif (this.addValueField.value !== '' && this.size < SIZE) {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tthis.addValueField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, 0);\n\t\t}\n\t}\n\n\taddBackCallback() {\n\t\tif (this.addValueField.value !== '' && this.size < SIZE) {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tthis.addValueField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, this.size);\n\t\t}\n\t}\n\n\tremoveIndexCallback() {\n\t\tif (this.removeField.value !== '') {\n\t\t\tconst index = this.removeField.value;\n\t\t\tif (index >= 0 && index < this.size) {\n\t\t\t\tthis.removeField.value = '';\n\t\t\t\tthis.implementAction(this.remove.bind(this), index);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveFrontCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), 0);\n\t\t}\n\t}\n\n\tremoveBackCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), this.size - 1);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tthis.clearAll();\n\t\treturn this.commands;\n\t}\n\n\tadd(elemToAdd, index) {\n\t\tthis.commands = [];\n\n\t\tconst labPushID = this.nextIndex++;\n\t\tconst labPushValID = this.nextIndex++;\n\n\t\tfor (let i = this.size - 1; i >= index; i--) {\n\t\t\tthis.arrayData[i + 1] = this.arrayData[i];\n\t\t}\n\t\tthis.arrayData[index] = elemToAdd;\n\n\t\tthis.cmd(act.createLabel, labPushID, 'Adding Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPushValID, elemToAdd, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = this.size - 1; i >= index; i--) {\n\t\t\tconst xpos = (i % ARRRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = Math.floor(i / ARRRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\t\t\tconst presentID = this.nextIndex + i;\n\t\t\tthis.cmd(act.createLabel, presentID, this.arrayData[i + 1], xpos, ypos);\n\t\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\t\tthis.cmd(act.move, presentID, xpos + ARRAY_ELEM_WIDTH, ypos);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = this.size - 1; i >= index; i--) {\n\t\t\tconst presentID = this.nextIndex + i;\n\t\t\tthis.cmd(act.setText, this.arrayID[i + 1], this.arrayData[i + 1]);\n\t\t\tthis.cmd(act.delete, presentID);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tthis.nextIndex += this.size - index;\n\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlight1ID,\n\t\t\t'#0000FF',\n\t\t\tPUSH_ELEMENT_X,\n\t\t\tPUSH_ELEMENT_Y,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\tconst xpos = (parseInt(index) % ARRRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(parseInt(index) / ARRRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING +\n\t\t\tARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos);\n\t\tthis.cmd(act.move, labPushValID, xpos, ypos);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.arrayID[index], elemToAdd);\n\t\tthis.cmd(act.delete, labPushValID);\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.delete, labPushID);\n\t\tthis.cmd(act.step);\n\n\t\tthis.size = this.size + 1;\n\t\treturn this.commands;\n\t}\n\n\tremove(index) {\n\t\tthis.commands = [];\n\n\t\tindex = parseInt(index);\n\t\tconst labPopValID = this.nextIndex++;\n\n\t\tconst xpos = (index % ARRRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos = Math.floor(index / ARRRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(act.createHighlightCircle, this.highlight1ID, '#0000FF', xpos, ypos);\n\t\tthis.cmd(act.createLabel, labPopValID, this.arrayData[index], xpos, ypos);\n\t\tthis.cmd(act.setText, this.arrayID[index], '');\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos - 100);\n\t\tthis.cmd(act.move, labPopValID, xpos, ypos - 100);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.delete, labPopValID);\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = index + 1; i < this.size; i++) {\n\t\t\tconst xpos = (i % ARRRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = Math.floor(i / ARRRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\t\t\tconst presentID = this.nextIndex + i;\n\t\t\tthis.cmd(act.createLabel, presentID, this.arrayData[i], xpos, ypos);\n\t\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\t\tthis.cmd(act.move, presentID, xpos - ARRAY_ELEM_WIDTH, ypos);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = index + 1; i < this.size; i++) {\n\t\t\tconst presentID = this.nextIndex + i;\n\t\t\tthis.cmd(act.setText, this.arrayID[i - 1], this.arrayData[i]);\n\t\t\tthis.cmd(act.delete, presentID);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = index; i < this.size; i++) {\n\t\t\tthis.arrayData[i] = this.arrayData[i + 1];\n\t\t}\n\n\t\tthis.size = this.size - 1;\n\t\treturn this.commands;\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\t}\n\t\tthis.size = 0;\n\t\treturn this.commands;\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// General\n\nconst LARGE_ALLOWED = [\n\t[\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t],\n\t[\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t],\n];\n\nconst LARGE_CURVE = [\n\t[0, 0, -0.4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.25, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0.4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.25],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[-0.25, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.4],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0.25, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.4, 0, 0],\n];\n\nconst LARGE_X_POS_LOGICAL = [\n\t600,\n\t700,\n\t800,\n\t900,\n\t650,\n\t750,\n\t850,\n\t600,\n\t700,\n\t800,\n\t900,\n\t650,\n\t750,\n\t850,\n\t600,\n\t700,\n\t800,\n\t900,\n];\n\nconst LARGE_Y_POS_LOGICAL = [\n\t50,\n\t50,\n\t50,\n\t50,\n\t150,\n\t150,\n\t150,\n\t250,\n\t250,\n\t250,\n\t250,\n\t350,\n\t350,\n\t350,\n\t450,\n\t450,\n\t450,\n\t450,\n];\n\nconst SMALL_ALLLOWED = [\n\t[false, true, true, true, true, false, false, false],\n\t[true, false, true, true, false, true, true, false],\n\t[true, true, false, false, true, true, true, false],\n\t[true, true, false, false, false, true, false, true],\n\t[true, false, true, false, false, false, true, true],\n\t[false, true, true, true, false, false, true, true],\n\t[false, true, true, false, true, true, false, true],\n\t[false, false, false, true, true, true, true, false],\n];\n\nconst SMALL_CURVE = [\n\t[0, 0.001, 0, 0.5, -0.5, 0, 0, 0],\n\t[0, 0, 0, 0.001, 0, 0.001, -0.2, 0],\n\t[0, 0.001, 0, 0, 0, 0.2, 0, 0],\n\t[-0.5, 0, 0, 0, 0, 0.001, 0, 0.5],\n\t[0.5, 0, 0, 0, 0, 0, 0, -0.5],\n\t[0, 0, -0.2, 0, 0, 0, 0.001, 0.001],\n\t[0, 0.2, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, -0.5, 0.5, 0, 0, 0],\n];\n\nconst SMALL_X_POS_LOGICAL = [800, 725, 875, 650, 950, 725, 875, 800];\nconst SMALL_Y_POS_LOGICAL = [25, 125, 125, 225, 225, 325, 325, 425];\n\n// BFS / DFS\n\nconst BFS_DFS_ADJ_LIST =\n\t//A     B      C     D      E     F      G      H\n\t/*A*/ [\n\t\t[0, 1, 1, 1, 1, 0, 0, 0],\n\t\t/*B*/ [1, 0, 0, 0, 0, 0, 1, 0],\n\t\t/*C*/ [1, 0, 0, 0, 0, 0, 0, 0],\n\t\t/*D*/ [1, 0, 0, 0, 0, 1, 0, 0],\n\t\t/*E*/ [1, 0, 0, 0, 0, 0, 1, 0],\n\t\t/*F*/ [0, 0, 0, 1, 0, 0, 1, 0],\n\t\t/*G*/ [0, 1, 0, 0, 1, 1, 0, 1],\n\t\t/*H*/ [0, 0, 0, 0, 0, 0, 1, 0],\n\t].map(row => row.map(x => x || -1)); // Turn 0s to -1s\n\n// Dijkstra's\n\nconst DIJKSTRAS_ADJ_LIST =\n\t//A     B      C     D      E     F      G      H\n\t/*A*/ [\n\t\t[0, 8, 2, 5, 0, 0, 0, 0],\n\t\t/*B*/ [8, 0, 1, 1, 0, 0, 7, 0],\n\t\t/*C*/ [2, 1, 0, 0, 3, 0, 0, 0],\n\t\t/*D*/ [5, 1, 0, 0, 0, 4, 0, 0],\n\t\t/*E*/ [0, 0, 3, 0, 0, 0, 2, 0],\n\t\t/*F*/ [0, 0, 0, 4, 0, 0, '0', 1], // Hacky way to get actual 0 in final matrix\n\t\t/*G*/ [0, 7, 0, 0, 2, '0', 0, 1],\n\t\t/*H*/ [0, 0, 0, 0, 0, 1, 1, 0],\n\t].map(row => row.map(x => Number(x || -1))); // '0' is truthy, so we can cast it after the ||\n\n// Prim's / Kruskal's\n\nconst PRIMS_KRUSKALS_ADJ_LIST =\n\t//A     B      C     D      E     F      G      H\n\t/*A*/ [\n\t\t[0, 1, 5, 0, 0, 0, 0, 0],\n\t\t/*B*/ [1, 0, 7, 9, 0, 0, 1, 0],\n\t\t/*C*/ [5, 7, 0, 0, 0, 0, 13, 0],\n\t\t/*D*/ [0, 9, 0, 0, 0, 4, 0, 0],\n\t\t/*E*/ [0, 0, 0, 0, 0, 0, 10, 0],\n\t\t/*F*/ [0, 0, 0, 4, 0, 0, 2, '0'],\n\t\t/*G*/ [0, 1, 13, 0, 10, 2, 0, 3],\n\t\t/*H*/ [0, 0, 0, 0, 0, '0', 3, 0],\n\t].map(row => row.map(x => Number(x || -1)));\n\n// Color coding for Disjoint Set in Kruskal's\n\nconst KRUSKALS_DS_COLORS = [\n\t'#9b9bd4',\n\t'#6aaf6a',\n\t'#f07575',\n\t'#ffe866',\n\t'#b8f9b8',\n\t'#ff99ff',\n\t'#99ffff',\n\t'#ffccd4',\n];\n\nexport {\n\tLARGE_ALLOWED,\n\tLARGE_CURVE,\n\tLARGE_X_POS_LOGICAL,\n\tLARGE_Y_POS_LOGICAL,\n\tSMALL_X_POS_LOGICAL,\n\tSMALL_Y_POS_LOGICAL,\n\tSMALL_ALLLOWED,\n\tSMALL_CURVE,\n\tBFS_DFS_ADJ_LIST,\n\tDIJKSTRAS_ADJ_LIST,\n\tPRIMS_KRUSKALS_ADJ_LIST,\n\tKRUSKALS_DS_COLORS,\n};\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\n// TODO:  UNDO (all the way) is BROKEN.  Redo reset ...\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddRadioButtonGroupToAlgorithmBar,\n} from './Algorithm.js';\nimport {\n\tLARGE_ALLOWED,\n\tLARGE_CURVE,\n\tLARGE_X_POS_LOGICAL,\n\tLARGE_Y_POS_LOGICAL,\n\tSMALL_ALLLOWED,\n\tSMALL_CURVE,\n\tSMALL_X_POS_LOGICAL,\n\tSMALL_Y_POS_LOGICAL,\n} from './util/GraphValues.js';\nimport { act } from '../anim/AnimationMain';\n\nconst SMALL_ADJ_MATRIX_X_START = 700;\nconst SMALL_ADJ_MATRIX_Y_START = 45;\nconst SMALL_ADJ_MATRIX_WIDTH = 30;\nconst SMALL_ADJ_MATRIX_HEIGHT = 30;\n\nconst SMALL_ADJ_LIST_X_START = 600;\nconst SMALL_ADJ_LIST_Y_START = 30;\n\nconst SMALL_ADJ_LIST_ELEM_WIDTH = 80;\nconst SMALL_ADJ_LIST_ELEM_HEIGHT = 30;\n\nconst SMALL_ADJ_LIST_HEIGHT = 36;\nconst SMALL_ADJ_LIST_WIDTH = 36;\n\nconst SMALL_ADJ_LIST_SPACING_AFTER_LIST = 15;\nconst SMALL_ADJ_LIST_SPACING_BETWEEN_NODES = 15;\n\nconst LARGE_ADJ_MATRIX_X_START = 575;\nconst LARGE_ADJ_MATRIX_Y_START = 40;\nconst LARGE_ADJ_MATRIX_WIDTH = 23;\nconst LARGE_ADJ_MATRIX_HEIGHT = 23;\n\nconst LARGE_ADJ_LIST_X_START = 600;\nconst LARGE_ADJ_LIST_Y_START = 30;\n\nconst LARGE_ADJ_LIST_ELEM_WIDTH = 80;\nconst LARGE_ADJ_LIST_ELEM_HEIGHT = 20;\n\nconst LARGE_ADJ_LIST_HEIGHT = 25;\nconst LARGE_ADJ_LIST_WIDTH = 20;\n\nconst LARGE_ADJ_LIST_SPACING_AFTER_LIST = 25;\nconst LARGE_ADJ_LIST_SPACING_BETWEEN_NODES = 15;\n\nexport const VERTEX_INDEX_COLOR = '#0000FF';\nexport const EDGE_COLOR = '#000000';\n\nconst HIGHLIGHT_CIRCLE_COLOR = '#000000';\n\nexport const SMALL_SIZE = 8;\nexport const LARGE_SIZE = 18;\n\nexport default class Graph extends Algorithm {\n\tconstructor(am, w, h, defaultEdges, dir, dag, costs) {\n\t\tsuper(am, w, h);\n\t\tthis.controls = [];\n\t\tdefaultEdges = defaultEdges === [] ? undefined : defaultEdges;\n\t\tdir = dir === undefined ? false : dir;\n\t\tdag = dag === undefined ? false : dag;\n\t\tcosts = costs === undefined ? false : costs;\n\n\t\tthis.nextIndex = 0;\n\n\t\tthis.currentLayer = 1;\n\t\tthis.defaultEdges = defaultEdges;\n\t\tthis.directed = dir;\n\t\tthis.isDAG = dag;\n\t\tthis.showEdgeCosts = costs;\n\t\tthis.currentLayer = 1;\n\n\t\tthis.setup_small(this.defaultEdges);\n\t}\n\n\taddControls(addDirection) {\n\t\tif (addDirection == null) {\n\t\t\taddDirection = true;\n\t\t}\n\n\t\tconst verticalGroup = addGroupToAlgorithmBar(false);\n\t\tthis.newGraphButton = addControlToAlgorithmBar('Button', 'New Graph', verticalGroup);\n\t\tthis.newGraphButton.onclick = this.newGraphCallback.bind(this);\n\t\tthis.controls.push(this.newGraphButton);\n\t\tthis.defaultGraphButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Default Graph',\n\t\t\tverticalGroup,\n\t\t);\n\t\tthis.defaultGraphButton.onclick = this.defaultGraphCallback.bind(this);\n\t\tthis.defaultGraphButton.disabled = true;\n\t\tthis.controls.push(this.defaultGraphButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tif (addDirection) {\n\t\t\tconst radioButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t\t['Undirected Graph', 'Directed Graph'],\n\t\t\t\t'GraphType',\n\t\t\t);\n\n\t\t\tthis.undirectedGraphButton = radioButtonList[0];\n\t\t\tthis.undirectedGraphButton.onclick = this.directedGraphCallback.bind(this, false);\n\t\t\tthis.undirectedGraphButton.checked = !this.directed;\n\t\t\tthis.controls.push(this.undirectedGraphButton);\n\n\t\t\tthis.directedGraphButton = radioButtonList[1];\n\t\t\tthis.directedGraphButton.onclick = this.directedGraphCallback.bind(this, true);\n\t\t\tthis.directedGraphButton.checked = this.directed;\n\t\t\tthis.controls.push(this.directedGraphButton);\n\n\t\t\taddDivisorToAlgorithmBar();\n\t\t}\n\n\t\tlet radioButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t['Small Graph', 'Large Graph'],\n\t\t\t'GraphSize',\n\t\t);\n\n\t\tthis.smallGraphButton = radioButtonList[0];\n\t\tthis.smallGraphButton.onclick = this.smallGraphCallback.bind(this);\n\t\tthis.smallGraphButton.checked = true;\n\t\tthis.controls.push(this.smallGraphButton);\n\n\t\tthis.largeGraphButton = radioButtonList[1];\n\t\tthis.largeGraphButton.onclick = this.largeGraphCallback.bind(this);\n\t\tthis.controls.push(this.largeGraphButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// We are explicitly not adding the buttons below to this.controls\n\t\t// since we don't want them to be disabled\n\t\tradioButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t[\n\t\t\t\t'Logical Representation',\n\t\t\t\t'Adjacency List Representation',\n\t\t\t\t'Adjacency Matrix Representation',\n\t\t\t],\n\t\t\t'GraphRepresentation',\n\t\t);\n\n\t\tthis.logicalButton = radioButtonList[0];\n\t\tthis.logicalButton.onclick = this.graphRepChangedCallback.bind(this, 1);\n\n\t\tthis.adjacencyListButton = radioButtonList[1];\n\t\tthis.adjacencyListButton.onclick = this.graphRepChangedCallback.bind(this, 2);\n\n\t\tthis.adjacencyMatrixButton = radioButtonList[2];\n\t\tthis.adjacencyMatrixButton.onclick = this.graphRepChangedCallback.bind(this, 3);\n\t\tthis.logicalButton.checked = true;\n\t}\n\n\tdirectedGraphCallback(newDirected) {\n\t\tif (newDirected !== this.directed) {\n\t\t\tthis.defaultGraphButton.disabled = newDirected;\n\t\t\tthis.directed = newDirected;\n\t\t\tthis.animationManager.resetAll();\n\t\t\tthis.setup();\n\t\t}\n\t}\n\n\tsmallGraphCallback() {\n\t\tif (this.size !== SMALL_SIZE) {\n\t\t\tthis.animationManager.resetAll();\n\t\t\tthis.setup_small();\n\t\t}\n\t}\n\n\tlargeGraphCallback() {\n\t\tif (this.size !== LARGE_SIZE) {\n\t\t\tthis.animationManager.resetAll();\n\t\t\tthis.setup_large();\n\t\t}\n\t}\n\n\tnewGraphCallback() {\n\t\tthis.animationManager.resetAll();\n\t\tthis.setup();\n\t}\n\n\tdefaultGraphCallback() {\n\t\tthis.animationManager.resetAll();\n\t\tthis.setup(this.defaultEdges);\n\t}\n\n\tgraphRepChangedCallback(newLayer) {\n\t\tthis.animationManager.setAllLayers([0, newLayer]);\n\t\tthis.currentLayer = newLayer;\n\t}\n\n\trecolorGraph() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\tif (this.adj_matrix[i][j] >= 0) {\n\t\t\t\t\tthis.setEdgeColor(i, j, EDGE_COLOR);\n\t\t\t\t\tthis.setEdgeThickness(i, j, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\thighlightEdge(i, j, highlightVal) {\n\t\tthis.cmd(act.setHighlight, this.adj_list_edges[i][j], highlightVal);\n\t\tthis.cmd(act.setHighlight, this.adj_matrixID[i][j], highlightVal);\n\t\tthis.cmd(act.setEdgeHighlight, this.circleID[i], this.circleID[j], highlightVal);\n\t\tif (!this.directed) {\n\t\t\tthis.cmd(act.setEdgeHighlight, this.circleID[j], this.circleID[i], highlightVal);\n\t\t}\n\t}\n\n\tvisitVertex(i) {\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlightCircleL,\n\t\t\tHIGHLIGHT_CIRCLE_COLOR,\n\t\t\tthis.x_pos_logical[i],\n\t\t\tthis.y_pos_logical[i],\n\t\t);\n\t\tthis.cmd(act.setLayer, this.highlightCircleL, 1);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlightCircleAL,\n\t\t\tHIGHLIGHT_CIRCLE_COLOR,\n\t\t\tthis.adj_list_x_start - this.adj_list_width,\n\t\t\tthis.adj_list_y_start + i * this.adj_list_height,\n\t\t);\n\t\tthis.cmd(act.setLayer, this.highlightCircleAL, 2);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlightCircleAM,\n\t\t\tHIGHLIGHT_CIRCLE_COLOR,\n\t\t\tthis.adj_matrix_x_start - this.adj_matrix_width,\n\t\t\tthis.adj_matrix_y_start + i * this.adj_matrix_height,\n\t\t);\n\t\tthis.cmd(act.setLayer, this.highlightCircleAM, 3);\n\t}\n\n\tleaveVertex() {\n\t\tthis.cmd(act.delete, this.highlightCircleL);\n\t\tthis.cmd(act.delete, this.highlightCircleAM);\n\t\tthis.cmd(act.delete, this.highlightCircleAL);\n\t}\n\n\tsetEdgeColor(i, j, color) {\n\t\tthis.cmd(act.setForegroundColor, this.adj_list_edges[i][j], color);\n\t\tthis.cmd(act.setTextColor, this.adj_matrixID[i][j], color);\n\t\tthis.cmd(act.setEdgeColor, this.circleID[i], this.circleID[j], color);\n\t\tif (!this.directed) {\n\t\t\tthis.cmd(act.setEdgeColor, this.circleID[j], this.circleID[i], color);\n\t\t}\n\t}\n\n\tsetEdgeThickness(i, j, thickness) {\n\t\tthis.cmd(act.setEdgeThickness, this.circleID[i], this.circleID[j], thickness);\n\t\tif (!this.directed) {\n\t\t\tthis.cmd(act.setEdgeThickness, this.circleID[j], this.circleID[i], thickness);\n\t\t}\n\t}\n\n\tclearEdges() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\tif (this.adj_matrix[i][j] >= 0) {\n\t\t\t\t\tthis.cmd(act.disconnect, this.circleID[i], this.circleID[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\trebuildEdges() {\n\t\tthis.clearEdges();\n\t\tthis.buildEdges();\n\t}\n\n\tbuildEdges() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\tif (this.adj_matrix[i][j] >= 0) {\n\t\t\t\t\tconst edgeLabel = this.showEdgeCosts ? String(this.adj_matrix[i][j]) : '';\n\t\t\t\t\tif (this.directed) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.connect,\n\t\t\t\t\t\t\tthis.circleID[i],\n\t\t\t\t\t\t\tthis.circleID[j],\n\t\t\t\t\t\t\tEDGE_COLOR,\n\t\t\t\t\t\t\tthis.adjustCurveForDirectedEdges(\n\t\t\t\t\t\t\t\tthis.curve[i][j],\n\t\t\t\t\t\t\t\tthis.adj_matrix[j][i] >= 0,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t\tedgeLabel,\n\t\t\t\t\t\t);\n\t\t\t\t\t} else if (i < j) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.connect,\n\t\t\t\t\t\t\tthis.circleID[i],\n\t\t\t\t\t\t\tthis.circleID[j],\n\t\t\t\t\t\t\tEDGE_COLOR,\n\t\t\t\t\t\t\tthis.curve[i][j],\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\tedgeLabel,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tsetup_small(adj_matrix) {\n\t\tthis.allowed = SMALL_ALLLOWED;\n\t\tthis.curve = SMALL_CURVE;\n\t\tthis.x_pos_logical = SMALL_X_POS_LOGICAL;\n\t\tthis.y_pos_logical = SMALL_Y_POS_LOGICAL;\n\t\tthis.adj_matrix_x_start = SMALL_ADJ_MATRIX_X_START;\n\t\tthis.adj_matrix_y_start = SMALL_ADJ_MATRIX_Y_START;\n\t\tthis.adj_matrix_width = SMALL_ADJ_MATRIX_WIDTH;\n\t\tthis.adj_matrix_height = SMALL_ADJ_MATRIX_HEIGHT;\n\t\tthis.adj_list_x_start = SMALL_ADJ_LIST_X_START;\n\t\tthis.adj_list_y_start = SMALL_ADJ_LIST_Y_START;\n\t\tthis.adj_list_elem_width = SMALL_ADJ_LIST_ELEM_WIDTH;\n\t\tthis.adj_list_elem_height = SMALL_ADJ_LIST_ELEM_HEIGHT;\n\t\tthis.adj_list_height = SMALL_ADJ_LIST_HEIGHT;\n\t\tthis.adj_list_width = SMALL_ADJ_LIST_WIDTH;\n\t\tthis.adj_list_spacing_after_list = SMALL_ADJ_LIST_SPACING_AFTER_LIST;\n\t\tthis.adj_list_spacing_between_nodes = SMALL_ADJ_LIST_SPACING_BETWEEN_NODES;\n\t\tthis.size = SMALL_SIZE;\n\t\tthis.isLarge = false;\n\t\tthis.highlightCircleL = this.nextIndex++;\n\t\tthis.highlightCircleAL = this.nextIndex++;\n\t\tthis.highlightCircleAM = this.nextIndex++;\n\t\tthis.setup(adj_matrix);\n\t}\n\n\tsetup_large() {\n\t\tthis.allowed = LARGE_ALLOWED;\n\t\tthis.curve = LARGE_CURVE;\n\t\tthis.x_pos_logical = LARGE_X_POS_LOGICAL;\n\t\tthis.y_pos_logical = LARGE_Y_POS_LOGICAL;\n\t\tthis.adj_matrix_x_start = LARGE_ADJ_MATRIX_X_START;\n\t\tthis.adj_matrix_y_start = LARGE_ADJ_MATRIX_Y_START;\n\t\tthis.adj_matrix_width = LARGE_ADJ_MATRIX_WIDTH;\n\t\tthis.adj_matrix_height = LARGE_ADJ_MATRIX_HEIGHT;\n\t\tthis.adj_list_x_start = LARGE_ADJ_LIST_X_START;\n\t\tthis.adj_list_y_start = LARGE_ADJ_LIST_Y_START;\n\t\tthis.adj_list_elem_width = LARGE_ADJ_LIST_ELEM_WIDTH;\n\t\tthis.adj_list_elem_height = LARGE_ADJ_LIST_ELEM_HEIGHT;\n\t\tthis.adj_list_height = LARGE_ADJ_LIST_HEIGHT;\n\t\tthis.adj_list_width = LARGE_ADJ_LIST_WIDTH;\n\t\tthis.adj_list_spacing_after_list = LARGE_ADJ_LIST_SPACING_AFTER_LIST;\n\t\tthis.adj_list_spacing_between_nodes = LARGE_ADJ_LIST_SPACING_BETWEEN_NODES;\n\t\tthis.size = LARGE_SIZE;\n\t\tthis.isLarge = true;\n\t\tthis.highlightCircleL = this.nextIndex++;\n\t\tthis.highlightCircleAL = this.nextIndex++;\n\t\tthis.highlightCircleAM = this.nextIndex++;\n\t\tthis.setup();\n\t}\n\n\tadjustCurveForDirectedEdges(curve, bidirectional) {\n\t\tif (!this.directed || !bidirectional || Math.abs(curve) > 0.01) {\n\t\t\treturn curve;\n\t\t} else {\n\t\t\treturn 0.1;\n\t\t}\n\t}\n\n\tsetup(adj_matrix) {\n\t\tthis.commands = [];\n\t\tthis.circleID = new Array(this.size);\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.circleID[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createCircle,\n\t\t\t\tthis.circleID[i],\n\t\t\t\tthis.toStr(i),\n\t\t\t\tthis.x_pos_logical[i],\n\t\t\t\tthis.y_pos_logical[i],\n\t\t\t);\n\t\t\tthis.cmd(act.setTextColor, this.circleID[i], VERTEX_INDEX_COLOR, 0);\n\n\t\t\tthis.cmd(act.setLayer, this.circleID[i], 1);\n\t\t}\n\n\t\tif (adj_matrix) {\n\t\t\tthis.adj_matrix = adj_matrix;\n\t\t\tthis.adj_matrixID = new Array(this.size);\n\t\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\t\tthis.adj_matrixID[i] = new Array(this.size);\n\t\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\t\tthis.adj_matrixID[i][j] = this.nextIndex++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.buildEdges();\n\t\t} else {\n\t\t\tthis.adj_matrix = new Array(this.size);\n\t\t\tthis.adj_matrixID = new Array(this.size);\n\t\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\t\tthis.adj_matrix[i] = new Array(this.size);\n\t\t\t\tthis.adj_matrixID[i] = new Array(this.size);\n\t\t\t}\n\n\t\t\tlet edgePercent;\n\t\t\tif (this.size === SMALL_SIZE) {\n\t\t\t\tif (this.directed) {\n\t\t\t\t\tedgePercent = 0.4;\n\t\t\t\t} else {\n\t\t\t\t\tedgePercent = 0.5;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this.directed) {\n\t\t\t\t\tedgePercent = 0.35;\n\t\t\t\t} else {\n\t\t\t\t\tedgePercent = 0.6;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.directed) {\n\t\t\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\t\t\tthis.adj_matrixID[i][j] = this.nextIndex++;\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tthis.allowed[i][j] &&\n\t\t\t\t\t\t\tMath.random() <= edgePercent &&\n\t\t\t\t\t\t\t(i < j ||\n\t\t\t\t\t\t\t\tMath.abs(this.curve[i][j]) < 0.01 ||\n\t\t\t\t\t\t\t\tthis.adj_matrixID[j][i] === -1) &&\n\t\t\t\t\t\t\t(!this.isDAG || i < j)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tif (this.showEdgeCosts) {\n\t\t\t\t\t\t\t\tthis.adj_matrix[i][j] = Math.floor(Math.random() * 9) + 1;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.adj_matrix[i][j] = 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.adj_matrix[i][j] = -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.buildEdges();\n\t\t\t} else {\n\t\t\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\t\t\tfor (let j = i + 1; j < this.size; j++) {\n\t\t\t\t\t\tthis.adj_matrixID[i][j] = this.nextIndex++;\n\t\t\t\t\t\tthis.adj_matrixID[j][i] = this.nextIndex++;\n\n\t\t\t\t\t\tif (this.allowed[i][j] && Math.random() <= edgePercent) {\n\t\t\t\t\t\t\tif (this.showEdgeCosts) {\n\t\t\t\t\t\t\t\tthis.adj_matrix[i][j] = Math.floor(Math.random() * 9) + 1;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.adj_matrix[i][j] = 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.adj_matrix[j][i] = this.adj_matrix[i][j];\n\t\t\t\t\t\t\tlet edgeLabel;\n\t\t\t\t\t\t\tif (this.showEdgeCosts) {\n\t\t\t\t\t\t\t\tedgeLabel = String(this.adj_matrix[i][j]);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tedgeLabel = '';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.connect,\n\t\t\t\t\t\t\t\tthis.circleID[i],\n\t\t\t\t\t\t\t\tthis.circleID[j],\n\t\t\t\t\t\t\t\tEDGE_COLOR,\n\t\t\t\t\t\t\t\tthis.curve[i][j],\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tedgeLabel,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.adj_matrix[i][j] = -1;\n\t\t\t\t\t\t\tthis.adj_matrix[j][i] = -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.buildEdges();\n\n\t\t\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\t\t\tthis.adj_matrix[i][i] = -1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Create Adj List\n\n\t\tthis.buildAdjList();\n\n\t\t// Create Adj Matrix\n\n\t\tthis.buildAdjMatrix();\n\n\t\tthis.animationManager.setAllLayers([0, this.currentLayer]);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tthis.clearHistory();\n\t}\n\n\tresetAll() {}\n\n\tbuildAdjMatrix() {\n\t\tthis.adj_matrix_index_x = new Array(this.size);\n\t\tthis.adj_matrix_index_y = new Array(this.size);\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.adj_matrix_index_x[i] = this.nextIndex++;\n\t\t\tthis.adj_matrix_index_y[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.adj_matrix_index_x[i],\n\t\t\t\tthis.toStr(i),\n\t\t\t\tthis.adj_matrix_x_start + i * this.adj_matrix_width,\n\t\t\t\tthis.adj_matrix_y_start - this.adj_matrix_height,\n\t\t\t);\n\t\t\tthis.cmd(act.setForegroundColor, this.adj_matrix_index_x[i], VERTEX_INDEX_COLOR);\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.adj_matrix_index_y[i],\n\t\t\t\tthis.toStr(i),\n\t\t\t\tthis.adj_matrix_x_start - this.adj_matrix_width,\n\t\t\t\tthis.adj_matrix_y_start + i * this.adj_matrix_height,\n\t\t\t);\n\t\t\tthis.cmd(act.setForegroundColor, this.adj_matrix_index_y[i], VERTEX_INDEX_COLOR);\n\t\t\tthis.cmd(act.setLayer, this.adj_matrix_index_x[i], 3);\n\t\t\tthis.cmd(act.setLayer, this.adj_matrix_index_y[i], 3);\n\n\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\tthis.adj_matrixID[i][j] = this.nextIndex++;\n\t\t\t\tlet lab;\n\t\t\t\tif (this.adj_matrix[i][j] < 0) {\n\t\t\t\t\tlab = '';\n\t\t\t\t} else {\n\t\t\t\t\tlab = String(this.adj_matrix[i][j]);\n\t\t\t\t}\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.adj_matrixID[i][j],\n\t\t\t\t\tlab,\n\t\t\t\t\tthis.adj_matrix_width,\n\t\t\t\t\tthis.adj_matrix_height,\n\t\t\t\t\tthis.adj_matrix_x_start + j * this.adj_matrix_width,\n\t\t\t\t\tthis.adj_matrix_y_start + i * this.adj_matrix_height,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setLayer, this.adj_matrixID[i][j], 3);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveAdjList() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.delete, this.adj_list_list[i], 'RAL1');\n\t\t\tthis.cmd(act.delete, this.adj_list_index[i], 'RAL2');\n\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\tif (this.adj_matrix[i][j] > 0) {\n\t\t\t\t\tthis.cmd(act.delete, this.adj_list_edges[i][j], 'RAL3');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tbuildAdjList() {\n\t\tthis.adj_list_index = new Array(this.size);\n\t\tthis.adj_list_list = new Array(this.size);\n\t\tthis.adj_list_edges = new Array(this.size);\n\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.adj_list_index[i] = this.nextIndex++;\n\t\t\tthis.adj_list_edges[i] = new Array(this.size);\n\t\t\tthis.adj_list_index[i] = this.nextIndex++;\n\t\t\tthis.adj_list_list[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.adj_list_list[i],\n\t\t\t\t'',\n\t\t\t\tthis.adj_list_width,\n\t\t\t\tthis.adj_list_height,\n\t\t\t\tthis.adj_list_x_start,\n\t\t\t\tthis.adj_list_y_start + i * this.adj_list_height,\n\t\t\t);\n\t\t\tthis.cmd(act.setLayer, this.adj_list_list[i], 2);\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.adj_list_index[i],\n\t\t\t\tthis.toStr(i),\n\t\t\t\tthis.adj_list_x_start - this.adj_list_width,\n\t\t\t\tthis.adj_list_y_start + i * this.adj_list_height,\n\t\t\t);\n\t\t\tthis.cmd(act.setForegroundColor, this.adj_list_index[i], VERTEX_INDEX_COLOR);\n\t\t\tthis.cmd(act.setLayer, this.adj_list_index[i], 2);\n\t\t\tlet lastElem = this.adj_list_list[i];\n\t\t\tlet nextXPos =\n\t\t\t\tthis.adj_list_x_start +\n\t\t\t\tthis.adj_list_width +\n\t\t\t\tthis.adj_list_spacing_after_list +\n\t\t\t\tthis.adj_list_spacing_between_nodes;\n\t\t\tlet hasEdges = false;\n\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\tif (this.adj_matrix[i][j] >= 0) {\n\t\t\t\t\thasEdges = true;\n\t\t\t\t\tthis.adj_list_edges[i][j] = this.nextIndex++;\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLinkedListNode,\n\t\t\t\t\t\tthis.adj_list_edges[i][j],\n\t\t\t\t\t\t[this.toStr(j), this.adj_matrix[i][j]],\n\t\t\t\t\t\tthis.adj_list_elem_width,\n\t\t\t\t\t\tthis.adj_list_elem_height,\n\t\t\t\t\t\tnextXPos,\n\t\t\t\t\t\tthis.adj_list_y_start + i * this.adj_list_height,\n\t\t\t\t\t\t0.25,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t1,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.setNull, this.adj_list_edges[i][j], 1);\n\t\t\t\t\tthis.cmd(act.setTextColor, this.adj_list_edges[i][j], VERTEX_INDEX_COLOR, 0);\n\t\t\t\t\tthis.cmd(act.setLayer, this.adj_list_edges[i][j], 2);\n\n\t\t\t\t\tnextXPos =\n\t\t\t\t\t\tnextXPos + this.adj_list_elem_width + this.adj_list_spacing_between_nodes;\n\t\t\t\t\tthis.cmd(act.connect, lastElem, this.adj_list_edges[i][j]);\n\t\t\t\t\tthis.cmd(act.setNull, lastElem, 0);\n\t\t\t\t\tlastElem = this.adj_list_edges[i][j];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!hasEdges) {\n\t\t\t\tthis.cmd(act.setNull, this.adj_list_list[i], 1);\n\t\t\t}\n\t\t}\n\t}\n\n\t// Should be overwritten in child\n\treset() {\n\t\tthrow new Error('reset() should be implemented in child');\n\t}\n\n\ttoStr(vertex) {\n\t\treturn String.fromCharCode(65 + vertex);\n\t}\n\n\tenableUI() {\n\t\tfor (const control of this.controls) {\n\t\t\tif (\n\t\t\t\tcontrol === this.defaultGraphButton &&\n\t\t\t\t(this.directed || this.isLarge || this.adj_matrix === this.defaultEdges)\n\t\t\t) {\n\t\t\t\tcontrol.disabled = true;\n\t\t\t} else {\n\t\t\t\tcontrol.disabled = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (const control of this.controls) {\n\t\t\tcontrol.disabled = true;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { BFS_DFS_ADJ_LIST } from './util/GraphValues';\nimport Graph from './Graph.js';\nimport { act } from '../anim/AnimationMain';\n\nconst BFS_QUEUE_HEAD_COLOR = '#0000FF';\nconst VISITED_COLOR = '#99CCFF';\n\nconst INFO_MSG_X = 25;\nconst INFO_MSG_Y = 15;\n\nconst LIST_START_X = 30;\nconst LIST_START_Y = 65;\nconst LIST_SPACING = 20;\n\nconst VISITED_START_X = 30;\nconst VISITED_START_Y = 115;\n\nconst CURRENT_VERTEX_LABEL_X = 25;\nconst CURRENT_VERTEX_LABEL_Y = 140;\nconst CURRENT_VERTEX_X = 115;\nconst CURRENT_VERTEX_Y = 146;\n\nconst QUEUE_START_X = 30;\nconst QUEUE_START_Y = 190;\nconst QUEUE_SPACING = 20;\n\nexport default class BFS extends Graph {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h, BFS_DFS_ADJ_LIST);\n\t\tthis.addControls();\n\t}\n\n\taddControls() {\n\t\taddLabelToAlgorithmBar('Start vertex: ');\n\t\tthis.startField = addControlToAlgorithmBar('Text', '');\n\t\tthis.startField.onkeydown = this.returnSubmit(\n\t\t\tthis.startField,\n\t\t\tthis.startCallback.bind(this),\n\t\t\t1,\n\t\t\tfalse,\n\t\t);\n\t\tthis.startField.size = 2;\n\t\tthis.controls.push(this.startField);\n\n\t\tthis.startButton = addControlToAlgorithmBar('Button', 'Run');\n\t\tthis.startButton.onclick = this.startCallback.bind(this);\n\t\tthis.controls.push(this.startButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tsuper.addControls();\n\t}\n\n\tsetup(adjMatrix) {\n\t\tsuper.setup(adjMatrix);\n\t\tthis.commands = [];\n\t\tthis.messageID = [];\n\n\t\tthis.visited = [];\n\n\t\tthis.queueID = [];\n\t\tthis.listID = [];\n\t\tthis.visitedID = [];\n\n\t\tthis.infoLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, this.infoLabelID, '', INFO_MSG_X, INFO_MSG_Y, 0);\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Visited Set:',\n\t\t\tVISITED_START_X - 5,\n\t\t\tVISITED_START_Y - 25,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'List:',\n\t\t\tLIST_START_X - 5,\n\t\t\tLIST_START_Y - 25,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Current vertex:',\n\t\t\tCURRENT_VERTEX_LABEL_X,\n\t\t\tCURRENT_VERTEX_LABEL_Y,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Queue:',\n\t\t\tQUEUE_START_X - 5,\n\t\t\tQUEUE_START_Y - 25,\n\t\t\t0,\n\t\t);\n\t\tthis.animationManager.setAllLayers([0, this.currentLayer]);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tthis.lastIndex = this.nextIndex;\n\t}\n\n\treset() {\n\t\tthis.nextIndex = this.lastIndex;\n\t\tthis.listID = [];\n\t\tthis.messageID = [];\n\t\tthis.visitedID = [];\n\t}\n\n\tstartCallback() {\n\t\tif (this.startField.value !== '') {\n\t\t\tlet startvalue = this.startField.value;\n\t\t\tthis.startField.value = '';\n\t\t\tstartvalue = startvalue.toUpperCase().charCodeAt(0) - 65;\n\t\t\tif (startvalue >= 0 && startvalue < this.size) {\n\t\t\t\tthis.implementAction(this.doBFS.bind(this), startvalue);\n\t\t\t}\n\t\t}\n\t}\n\n\tdoBFS(startVetex) {\n\t\tthis.commands = [];\n\n\t\tthis.clear();\n\n\t\tthis.queue = [];\n\t\tthis.queueID = [];\n\t\tthis.listID = [];\n\t\tthis.visitedID = [];\n\n\t\tthis.rebuildEdges();\n\n\t\tlet vertex = startVetex;\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tthis.infoLabelID,\n\t\t\t'Enqueueing ' + this.toStr(vertex) + ' and adding to visited set',\n\t\t);\n\t\tthis.visited[vertex] = true;\n\t\tthis.visitedID.push(this.nextIndex);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\tthis.toStr(vertex),\n\t\t\tVISITED_START_X,\n\t\t\tVISITED_START_Y,\n\t\t);\n\t\tthis.cmd(act.setBackgroundColor, this.circleID[vertex], VISITED_COLOR);\n\t\tthis.queue.push(vertex);\n\t\tthis.queueID.push(this.nextIndex);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\tthis.toStr(vertex),\n\t\t\tQUEUE_START_X,\n\t\t\tQUEUE_START_Y,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\twhile (this.queue.length > 0 && this.listID.length < this.size) {\n\t\t\tvertex = this.queue.shift();\n\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.infoLabelID,\n\t\t\t\t'Dequeueing ' + this.toStr(vertex) + ' and adding to list',\n\t\t\t);\n\n\t\t\tthis.cmd(act.setTextColor, this.queueID[0], BFS_QUEUE_HEAD_COLOR);\n\t\t\tthis.cmd(act.move, this.queueID[0], CURRENT_VERTEX_X, CURRENT_VERTEX_Y);\n\t\t\tfor (let i = 1; i < this.queueID.length; i++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\tthis.queueID[i],\n\t\t\t\t\tQUEUE_START_X + (i - 1) * QUEUE_SPACING,\n\t\t\t\t\tQUEUE_START_Y,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.listID.push(this.nextIndex);\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.nextIndex++,\n\t\t\t\tthis.toStr(vertex),\n\t\t\t\tLIST_START_X + (this.listID.length - 1) * LIST_SPACING,\n\t\t\t\tLIST_START_Y,\n\t\t\t);\n\n\t\t\tthis.visitVertex(vertex);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tfor (let neighbor = 0; neighbor < this.size; neighbor++) {\n\t\t\t\tif (this.adj_matrix[vertex][neighbor] > 0) {\n\t\t\t\t\tthis.highlightEdge(vertex, neighbor, 1);\n\t\t\t\t\tif (!this.visited[neighbor]) {\n\t\t\t\t\t\tthis.visited[neighbor] = true;\n\t\t\t\t\t\tthis.visitedID.push(this.nextIndex);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t\tthis.toStr(neighbor) +\n\t\t\t\t\t\t\t\t' has not yet been visited, enqueueing and adding to visited set',\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t\t\tthis.toStr(neighbor),\n\t\t\t\t\t\t\tVISITED_START_X + (this.visitedID.length - 1) * LIST_SPACING,\n\t\t\t\t\t\t\tVISITED_START_Y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.setBackgroundColor, this.circleID[neighbor], VISITED_COLOR);\n\t\t\t\t\t\tthis.queue.push(neighbor);\n\t\t\t\t\t\tthis.queueID.push(this.nextIndex);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t\t\tthis.toStr(neighbor),\n\t\t\t\t\t\t\tQUEUE_START_X + (this.queue.length - 1) * QUEUE_SPACING,\n\t\t\t\t\t\t\tQUEUE_START_Y,\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t\tthis.toStr(neighbor) + ' has already been visited, skipping',\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.highlightEdge(vertex, neighbor, 0);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.cmd(act.delete, this.queueID.shift());\n\n\t\t\tthis.leaveVertex();\n\t\t}\n\n\t\tif (this.queue.length > 0) {\n\t\t\tthis.cmd(act.setText, this.infoLabelID, 'All vertices have been visited, done');\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Queue is empty, done');\n\t\t}\n\n\t\treturn this.commands;\n\t}\n\n\tclear() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.circleID[i], '#FFFFFF');\n\t\t\tthis.visited[i] = false;\n\t\t}\n\t\tfor (let i = 0; i < this.listID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.listID[i]);\n\t\t}\n\t\tfor (let i = 0; i < this.visitedID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.visitedID[i]);\n\t\t}\n\t\tif (this.messageID != null) {\n\t\t\tfor (let i = 0; i < this.messageID.length; i++) {\n\t\t\t\tthis.cmd(act.delete, this.messageID[i]);\n\t\t\t}\n\t\t}\n\t\tthis.messageID = [];\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddRadioButtonGroupToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nexport default class BST extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\n\t\tthis.first_print_pos_y = h - 2 * BST.PRINT_VERTICAL_GAP;\n\t\tthis.print_max = w - 10;\n\t\tthis.startingX = w / 2;\n\t\tthis.addControls();\n\t\tthis.nextIndex = 1;\n\t\tthis.commands = [];\n\t\tthis.edges = [];\n\t\tthis.cmd(act.createLabel, 0, '', BST.EXPLANITORY_TEXT_X, BST.EXPLANITORY_TEXT_Y, 0);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tthis.insertField = addControlToAlgorithmBar('Text', '');\n\t\tthis.insertField.onkeydown = this.returnSubmit(\n\t\t\tthis.insertField,\n\t\t\tthis.insertCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.insertField);\n\n\t\tthis.insertButton = addControlToAlgorithmBar('Button', 'Insert');\n\t\tthis.insertButton.onclick = this.insertCallback.bind(this);\n\t\tthis.controls.push(this.insertButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.deleteField = addControlToAlgorithmBar('Text', '');\n\t\tthis.deleteField.onkeydown = this.returnSubmit(\n\t\t\tthis.deleteField,\n\t\t\tthis.deleteCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.deleteField);\n\n\t\tthis.deleteButton = addControlToAlgorithmBar('Button', 'Delete');\n\t\tthis.deleteButton.onclick = this.deleteCallback.bind(this);\n\t\tthis.controls.push(this.deleteButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.findField = addControlToAlgorithmBar('Text', '');\n\t\tthis.findField.onkeydown = this.returnSubmit(\n\t\t\tthis.findField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.findField);\n\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Find');\n\t\tthis.findButton.onclick = this.findCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.printButton = addControlToAlgorithmBar('Button', 'Print');\n\t\tthis.printButton.onclick = this.printCallback.bind(this);\n\t\tthis.controls.push(this.printButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst predSuccButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t['Predecessor', 'Successor'],\n\t\t\t'Predecessor/Successor',\n\t\t);\n\n\t\tthis.predButton = predSuccButtonList[0];\n\t\tthis.succButton = predSuccButtonList[1];\n\t\tthis.predButton.onclick = () => (this.predSucc = 'pred');\n\t\tthis.succButton.onclick = () => (this.predSucc = 'succ');\n\t\tthis.succButton.checked = true;\n\t\tthis.predSucc = 'succ';\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 1;\n\t\tthis.treeRoot = null;\n\t\tthis.edges = [];\n\t}\n\n\tinsertCallback() {\n\t\tconst insertedValue = this.insertField.value;\n\t\t// Get text value\n\t\tif (insertedValue !== '') {\n\t\t\t// set text value\n\t\t\tthis.insertField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), parseInt(insertedValue));\n\t\t}\n\t}\n\n\tdeleteCallback() {\n\t\tconst deletedValue = this.deleteField.value;\n\t\tif (deletedValue !== '') {\n\t\t\tthis.deleteField.value = '';\n\t\t\tthis.implementAction(this.remove.bind(this), parseInt(deletedValue));\n\t\t}\n\t}\n\n\tfindCallback() {\n\t\tconst findValue = this.findField.value;\n\t\tif (findValue !== '') {\n\t\t\tthis.findField.value = '';\n\t\t\tthis.implementAction(this.findElement.bind(this), parseInt(findValue));\n\t\t}\n\t}\n\n\tprintCallback() {\n\t\tthis.implementAction(this.printTree.bind(this));\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tsizeChanged(newWidth) {\n\t\tthis.startingX = newWidth / 2;\n\t}\n\n\tprintTree() {\n\t\tthis.commands = [];\n\n\t\tif (this.treeRoot != null) {\n\t\t\tthis.highlightID = this.nextIndex++;\n\t\t\tconst firstLabel = this.nextIndex;\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\tthis.highlightID,\n\t\t\t\tBST.HIGHLIGHT_COLOR,\n\t\t\t\tthis.treeRoot.x,\n\t\t\t\tthis.treeRoot.y,\n\t\t\t);\n\t\t\tthis.xPosOfNextLabel = BST.FIRST_PRINT_POS_X;\n\t\t\tthis.yPosOfNextLabel = this.first_print_pos_y;\n\t\t\tthis.printTreeRec(this.treeRoot);\n\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\tthis.cmd(act.step);\n\t\t\tfor (let i = firstLabel; i < this.nextIndex; i++) this.cmd(act.delete, i);\n\t\t\tthis.nextIndex = this.highlightID; /// Reuse objects.  Not necessary.\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tprintTreeRec(tree) {\n\t\tthis.cmd(act.step);\n\t\tif (tree.left != null) {\n\t\t\tthis.cmd(act.move, this.highlightID, tree.left.x, tree.left.y);\n\t\t\tthis.printTreeRec(tree.left);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.x, tree.y);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tconst nextLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, nextLabelID, tree.data, tree.x, tree.y);\n\t\tthis.cmd(act.setForegroundColor, nextLabelID, BST.PRINT_COLOR);\n\t\tthis.cmd(act.move, nextLabelID, this.xPosOfNextLabel, this.yPosOfNextLabel);\n\t\tthis.cmd(act.step);\n\n\t\tthis.xPosOfNextLabel += BST.PRINT_HORIZONTAL_GAP;\n\t\tif (this.xPosOfNextLabel > this.print_max) {\n\t\t\tthis.xPosOfNextLabel = BST.FIRST_PRINT_POS_X;\n\t\t\tthis.yPosOfNextLabel += BST.PRINT_VERTICAL_GAP;\n\t\t}\n\t\tif (tree.right != null) {\n\t\t\tthis.cmd(act.move, this.highlightID, tree.right.x, tree.right.y);\n\t\t\tthis.printTreeRec(tree.right);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.x, tree.y);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\treturn;\n\t}\n\n\tfindElement(findValue) {\n\t\tthis.commands = [];\n\n\t\tthis.highlightID = this.nextIndex++;\n\n\t\tthis.doFind(this.treeRoot, findValue);\n\n\t\treturn this.commands;\n\t}\n\n\tdoFind(tree, value) {\n\t\tthis.cmd(act.setText, 0, 'Searching for ' + value);\n\t\tif (tree != null) {\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\t\tif (tree.data === value) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\t0,\n\t\t\t\t\t'Searching for ' + value + ' : ' + value + ' = ' + value + ' (Element found!)',\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setText, 0, 'Found:' + value);\n\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t} else {\n\t\t\t\tif (tree.data > value) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t'Searching for ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' : ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' < ' +\n\t\t\t\t\t\t\ttree.data +\n\t\t\t\t\t\t\t' (look to left subtree)',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tif (tree.left != null) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createHighlightCircle,\n\t\t\t\t\t\t\tthis.highlightID,\n\t\t\t\t\t\t\tBST.HIGHLIGHT_COLOR,\n\t\t\t\t\t\t\ttree.x,\n\t\t\t\t\t\t\ttree.y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.move, this.highlightID, tree.left.x, tree.left.y);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\t\t\t}\n\t\t\t\t\tthis.doFind(tree.left, value);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t' Searching for ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' : ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' > ' +\n\t\t\t\t\t\t\ttree.data +\n\t\t\t\t\t\t\t' (look to right subtree)',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tif (tree.right != null) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createHighlightCircle,\n\t\t\t\t\t\t\tthis.highlightID,\n\t\t\t\t\t\t\tBST.HIGHLIGHT_COLOR,\n\t\t\t\t\t\t\ttree.x,\n\t\t\t\t\t\t\ttree.y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.move, this.highlightID, tree.right.x, tree.right.y);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\t\t\t}\n\t\t\t\t\tthis.doFind(tree.right, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\t0,\n\t\t\t\t'Searching for ' + value + ' : < Empty Tree > (Element not found)',\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, 0, 'Searching for ' + value + ' :  (Element not found)');\n\t\t}\n\t}\n\n\tremakeTree(curr) {\n\t\tif (curr == null) return;\n\t\tif (curr.left != null) {\n\t\t\tthis.cmd(act.connect, curr.graphicID, curr.left.graphicID, BST.LINK_COLOR);\n\t\t\tthis.remakeTree(curr.left);\n\t\t}\n\t\tif (curr.right != null) {\n\t\t\tthis.cmd(act.connect, curr.graphicID, curr.right.graphicID, BST.LINK_COLOR);\n\t\t\tthis.remakeTree(curr.right);\n\t\t}\n\t}\n\n\tadd(data) {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, 0, 'Inserting ' + data);\n\t\tthis.treeRoot = this.addH(data, this.treeRoot);\n\t\tthis.resizeTree();\n\t\treturn this.commands;\n\t}\n\n\taddH(data, curr) {\n\t\tif (curr == null) {\n\t\t\tthis.cmd(act.setText, 0, 'Null found, inserting new node');\n\t\t\tconst treeNodeID = this.nextIndex++;\n\t\t\tthis.cmd(act.createCircle, treeNodeID, data, 30, BST.STARTING_Y);\n\n\t\t\tthis.cmd(act.setForegroundColor, treeNodeID, BST.FOREGROUND_COLOR);\n\t\t\tthis.cmd(act.setBackgroundColor, treeNodeID, BST.BACKGROUND_COLOR);\n\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, 0, '');\n\t\t\treturn new BSTNode(data, treeNodeID, 0, 0);\n\t\t}\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 1);\n\t\tif (data < curr.data) {\n\t\t\tthis.cmd(act.setText, 0, `${data} < ${curr.data}. Looking at left subtree`);\n\t\t\tthis.cmd(act.step);\n\t\t\tcurr.left = this.addH(data, curr.left);\n\t\t\tcurr.left.parent = curr;\n\t\t\tthis.resizeTree();\n\t\t\tconst connected = this.connectSmart(curr.graphicID, curr.left.graphicID);\n\t\t\tconnected && this.cmd(act.step);\n\t\t} else if (data > curr.data) {\n\t\t\tthis.cmd(act.setText, 0, `${data} > ${curr.data}. Looking at right subtree`);\n\t\t\tthis.cmd(act.step);\n\t\t\tcurr.right = this.addH(data, curr.right);\n\t\t\tcurr.right.parent = curr;\n\t\t\tthis.resizeTree();\n\t\t\tconst connected = this.connectSmart(curr.graphicID, curr.right.graphicID);\n\t\t\tconnected && this.cmd(act.step);\n\t\t} else {\n\t\t\tthis.cmd(act.setText, 0, `${data} == ${curr.data}. Ignoring duplicate!`);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 0);\n\t\tthis.cmd(act.setText, 0, '');\n\t\treturn curr;\n\t}\n\n\tconnectSmart(id1, id2) {\n\t\tif (!this.edges.some(e => e[0] === id1 && e[1] === id2)) {\n\t\t\tthis.cmd(act.connect, id1, id2, BST.LINK_COLOR);\n\t\t\tthis.edges.push([id1, id2]);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tdeleteNode(curr) {\n\t\tthis.cmd(act.delete, curr.graphicID);\n\t}\n\n\tremove(data) {\n\t\tthis.commands = [];\n\n\t\tthis.cmd(act.setText, 0, `Deleting ${data}`);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, 0, ' ');\n\n\t\tthis.highlightID = this.nextIndex++;\n\t\tthis.treeRoot = this.removeH(this.treeRoot, data);\n\t\tthis.cmd(act.setText, 0, '');\n\t\tthis.resizeTree();\n\t\treturn this.commands;\n\t}\n\n\tremoveH(curr, data) {\n\t\tif (curr == null) {\n\t\t\tthis.cmd(act.setText, 0, `${data} not found in the tree`);\n\t\t\treturn;\n\t\t}\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 1);\n\t\tif (data < curr.data) {\n\t\t\tthis.cmd(act.setText, 0, `${data} < ${curr.data}. Looking left`);\n\t\t\tthis.cmd(act.step);\n\t\t\tcurr.left = this.removeH(curr.left, data);\n\t\t\tif (curr.left != null) {\n\t\t\t\tcurr.left.parent = curr;\n\t\t\t\tthis.connectSmart(curr.graphicID, curr.left.graphicID);\n\t\t\t\tthis.resizeTree();\n\t\t\t}\n\t\t} else if (data > curr.data) {\n\t\t\tthis.cmd(act.setText, 0, `${data} > ${curr.data}. Looking right`);\n\t\t\tthis.cmd(act.step);\n\t\t\tcurr.right = this.removeH(curr.right, data);\n\t\t\tif (curr.right != null) {\n\t\t\t\tcurr.right.parent = curr;\n\t\t\t\tthis.connectSmart(curr.graphicID, curr.right.graphicID);\n\t\t\t\tthis.resizeTree();\n\t\t\t}\n\t\t} else {\n\t\t\tif (curr.left == null && curr.right == null) {\n\t\t\t\tthis.cmd(act.setText, 0, 'Element to delete is a leaf node');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.deleteNode(curr);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\treturn null;\n\t\t\t} else if (curr.left == null) {\n\t\t\t\tthis.cmd(act.setText, 0, `One-child case, replace with right child`);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.deleteNode(curr);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\treturn curr.right;\n\t\t\t} else if (curr.right == null) {\n\t\t\t\tthis.cmd(act.setText, 0, `One-child case, replace with left child`);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.deleteNode(curr);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\treturn curr.left;\n\t\t\t} else {\n\t\t\t\tconst dummy = [];\n\t\t\t\tif (this.predSucc === 'succ') {\n\t\t\t\t\tthis.cmd(act.setText, 0, `Two-child case, replace data with successor`);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tcurr.right = this.removeSucc(curr.right, dummy);\n\t\t\t\t\tcurr.right && this.connectSmart(curr.graphicID, curr.right.graphicID);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setText, 0, `Two-child case, replace data with predecessor`);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tcurr.left = this.removePred(curr.left, dummy);\n\t\t\t\t\tcurr.left && this.connectSmart(curr.graphicID, curr.left.graphicID);\n\t\t\t\t}\n\t\t\t\tthis.resizeTree();\n\t\t\t\tcurr.data = dummy[0];\n\t\t\t\tthis.cmd(act.setText, curr.graphicID, curr.data);\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 0);\n\t\tthis.cmd(act.setText, 0, '');\n\t\treturn curr;\n\t}\n\n\tremoveSucc(curr, dummy) {\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 1, '#0000ff');\n\t\tthis.cmd(act.step);\n\t\tif (curr.left == null) {\n\t\t\tthis.cmd(act.setText, 0, 'No left child, replace with right child');\n\t\t\tthis.cmd(act.step);\n\t\t\tdummy.push(curr.data);\n\t\t\tthis.deleteNode(curr);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, 0, '');\n\t\t\treturn curr.right;\n\t\t}\n\t\tthis.cmd(act.setText, 0, 'Left child exists, look left');\n\t\tcurr.left = this.removeSucc(curr.left, dummy);\n\t\tif (curr.left != null) {\n\t\t\tcurr.left.parent = curr;\n\t\t\tthis.connectSmart(curr.graphicID, curr.left.graphicID);\n\t\t\tthis.resizeTree();\n\t\t}\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 0, '#0000ff');\n\t\treturn curr;\n\t}\n\n\tremovePred(curr, dummy) {\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 1, '#0000ff');\n\t\tthis.cmd(act.step);\n\t\tif (curr.right == null) {\n\t\t\tthis.cmd(act.setText, 0, 'No right child, replace with right child');\n\t\t\tthis.cmd(act.step);\n\t\t\tdummy.push(curr.data);\n\t\t\tthis.deleteNode(curr);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, 0, '');\n\t\t\treturn curr.left;\n\t\t}\n\t\tthis.cmd(act.setText, 0, 'Right child exists, look right');\n\t\tthis.cmd(act.step);\n\t\tcurr.right = this.removePred(curr.right, dummy);\n\t\tif (curr.right != null) {\n\t\t\tcurr.right.parent = curr;\n\t\t\tthis.connectSmart(curr.graphicID, curr.right.graphicID);\n\t\t\tthis.resizeTree();\n\t\t}\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 0, '#0000ff');\n\t\treturn curr;\n\t}\n\n\tresizeTree() {\n\t\tif (this.treeRoot == null) {\n\t\t\treturn;\n\t\t}\n\t\tlet startingPoint = this.startingX;\n\t\tthis.resizeWidths(this.treeRoot);\n\t\tif (this.treeRoot != null) {\n\t\t\tif (this.treeRoot.leftWidth > startingPoint) {\n\t\t\t\tstartingPoint = this.treeRoot.leftWidth;\n\t\t\t} else if (this.treeRoot.rightWidth > startingPoint) {\n\t\t\t\tstartingPoint = Math.max(\n\t\t\t\t\tthis.treeRoot.leftWidth,\n\t\t\t\t\t2 * startingPoint - this.treeRoot.rightWidth,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.setNewPositions(this.treeRoot, startingPoint, BST.STARTING_Y, 0);\n\t\t\tthis.animateNewPositions(this.treeRoot);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t}\n\n\tsetNewPositions(tree, xPosition, yPosition, side) {\n\t\tif (tree != null) {\n\t\t\ttree.y = yPosition;\n\t\t\tif (side === -1) {\n\t\t\t\txPosition = xPosition - tree.rightWidth;\n\t\t\t} else if (side === 1) {\n\t\t\t\txPosition = xPosition + tree.leftWidth;\n\t\t\t}\n\t\t\ttree.x = xPosition;\n\t\t\tthis.setNewPositions(tree.left, xPosition, yPosition + BST.HEIGHT_DELTA, -1);\n\t\t\tthis.setNewPositions(tree.right, xPosition, yPosition + BST.HEIGHT_DELTA, 1);\n\t\t}\n\t}\n\n\tanimateNewPositions(tree) {\n\t\tif (tree != null) {\n\t\t\tthis.cmd(act.move, tree.graphicID, tree.x, tree.y);\n\t\t\tthis.animateNewPositions(tree.left);\n\t\t\tthis.animateNewPositions(tree.right);\n\t\t}\n\t}\n\n\tresizeWidths(tree) {\n\t\tif (tree == null) {\n\t\t\treturn 0;\n\t\t}\n\t\ttree.leftWidth = Math.max(this.resizeWidths(tree.left), BST.WIDTH_DELTA / 2);\n\t\ttree.rightWidth = Math.max(this.resizeWidths(tree.right), BST.WIDTH_DELTA / 2);\n\t\treturn tree.leftWidth + tree.rightWidth;\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tthis.recClear(this.treeRoot);\n\t\tthis.treeRoot = null;\n\t\treturn this.commands;\n\t}\n\n\trecClear(curr) {\n\t\tif (curr != null) {\n\t\t\tthis.cmd(act.delete, curr.graphicID);\n\t\t\tthis.recClear(curr.left);\n\t\t\tthis.recClear(curr.right);\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n\nclass BSTNode {\n\tconstructor(val, id, initialX, initialY) {\n\t\tthis.data = val;\n\t\tthis.x = initialX;\n\t\tthis.y = initialY;\n\n\t\tthis.graphicID = id;\n\t\tthis.left = null;\n\t\tthis.right = null;\n\t\tthis.parent = null;\n\t}\n}\n\n// Various constants\n\nBST.HIGHLIGHT_LABEL_COLOR = '#FF0000';\nBST.HIGHLIGHT_LINK_COLOR = '#FF0000';\n\nBST.HIGHLIGHT_COLOR = '#007700';\nBST.HEIGHT_LABEL_COLOR = '#007700';\n\nBST.LINK_COLOR = '#00B000';\nBST.HIGHLIGHT_CIRCLE_COLOR = '#007700';\nBST.FOREGROUND_COLOR = '#007700';\nBST.BACKGROUND_COLOR = '#DDFFDD';\nBST.PRINT_COLOR = BST.FOREGROUND_COLOR;\n\nBST.WIDTH_DELTA = 50;\nBST.HEIGHT_DELTA = 50;\nBST.STARTING_Y = 50;\n\nBST.FIRST_PRINT_POS_X = 50;\nBST.PRINT_VERTICAL_GAP = 20;\nBST.PRINT_HORIZONTAL_GAP = 50;\nBST.EXPLANITORY_TEXT_X = 10;\nBST.EXPLANITORY_TEXT_Y = 10;\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, { addControlToAlgorithmBar, addDivisorToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst FIRST_PRINT_POS_X = 50;\nconst PRINT_VERTICAL_GAP = 20;\nconst PRINT_MAX = 990;\nconst PRINT_HORIZONTAL_GAP = 50;\n\nconst MIN_MAX_DEGREE = 4;\n\nconst HEIGHT_DELTA = 50;\nconst NODE_SPACING = 3;\nconst STARTING_Y = 30;\nconst WIDTH_PER_ELEM = 40;\nconst NODE_HEIGHT = 20;\n\nconst MESSAGE_X = 5;\nconst MESSAGE_Y = 10;\n\nconst FOREGROUND_COLOR = '#007700';\nconst BACKGROUND_COLOR = '#EEFFEE';\nconst PRINT_COLOR = FOREGROUND_COLOR;\n\nexport default class BTree extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.nextIndex = 0;\n\n\t\tthis.starting_x = w / 2;\n\n\t\tthis.preemptiveSplit = false;\n\n\t\tthis.addControls();\n\n\t\tthis.max_keys = 3;\n\t\tthis.min_keys = 1;\n\t\tthis.split_index = 1;\n\n\t\tthis.max_degree = 4;\n\n\t\tthis.messageID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, this.messageID, '', MESSAGE_X, MESSAGE_Y, 0);\n\t\tthis.moveLabel1ID = this.nextIndex++;\n\t\tthis.moveLabel2ID = this.nextIndex++;\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tthis.commands = [];\n\n\t\tthis.first_print_pos_y = h - 3 * PRINT_VERTICAL_GAP;\n\n\t\tthis.xPosOfNextLabel = 100;\n\t\tthis.yPosOfNextLabel = 200;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tthis.insertField = addControlToAlgorithmBar('Text', '');\n\t\tthis.insertField.onkeydown = this.returnSubmit(\n\t\t\tthis.insertField,\n\t\t\tthis.insertCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.insertField);\n\n\t\tthis.insertButton = addControlToAlgorithmBar('Button', 'Insert');\n\t\tthis.insertButton.onclick = this.insertCallback.bind(this);\n\t\tthis.controls.push(this.insertButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.deleteField = addControlToAlgorithmBar('Text', '');\n\t\tthis.deleteField.onkeydown = this.returnSubmit(\n\t\t\tthis.deleteField,\n\t\t\tthis.deleteCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.deleteField);\n\n\t\tthis.deleteButton = addControlToAlgorithmBar('Button', 'Delete');\n\t\tthis.deleteButton.onclick = this.deleteCallback.bind(this);\n\t\tthis.controls.push(this.deleteButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.findField = addControlToAlgorithmBar('Text', '');\n\t\tthis.findField.onkeydown = this.returnSubmit(\n\t\t\tthis.findField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.findField);\n\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Find');\n\t\tthis.findButton.onclick = this.findCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.printButton = addControlToAlgorithmBar('Button', 'Print');\n\t\tthis.printButton.onclick = this.printCallback.bind(this);\n\t\tthis.controls.push(this.printButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 3;\n\t\tthis.max_degree = 4;\n\t\tthis.max_keys = 3;\n\t\tthis.min_keys = 1;\n\t\tthis.split_index = 1;\n\t\t// NOTE: The order of these last two this.commands matters!\n\t\tthis.treeRoot = null;\n\t\tthis.ignoreInputs = true;\n\t\tthis.ignoreInputs = false;\n\t}\n\n\tenableUI() {\n\t\tlet i;\n\t\tfor (i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tmaxDegreeChangedHandler(newMaxDegree) {\n\t\tif (this.max_degree !== newMaxDegree) {\n\t\t\tthis.implementAction(this.changeDegree.bind(this), newMaxDegree);\n\t\t\tthis.animationManager.skipForward();\n\t\t\tthis.animationManager.clearHistory();\n\t\t}\n\t}\n\n\tinsertCallback() {\n\t\tconst insertedValue = this.normalizeNumber(this.insertField.value, 4);\n\t\tif (insertedValue !== '') {\n\t\t\tthis.insertField.value = '';\n\t\t\tthis.implementAction(this.insertElement.bind(this), parseInt(insertedValue));\n\t\t}\n\t}\n\n\tdeleteCallback() {\n\t\tlet deletedValue = this.deleteField.value;\n\t\tif (deletedValue !== '') {\n\t\t\tdeletedValue = this.normalizeNumber(this.deleteField.value, 4);\n\t\t\tthis.deleteField.value = '';\n\t\t\tthis.implementAction(this.deleteElement.bind(this), parseInt(deletedValue));\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearTree.bind(this));\n\t}\n\n\tpremtiveSplitCallback() {\n\t\tif (this.preemptiveSplit !== this.premptiveSplitBox.checked) {\n\t\t\tthis.implementAction(\n\t\t\t\tthis.changePreemtiveSplit.bind(this),\n\t\t\t\tthis.premptiveSplitBox.checked,\n\t\t\t);\n\t\t}\n\t}\n\n\tchangePreemtiveSplit(newValue) {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.step);\n\t\tthis.preemptiveSplit = newValue;\n\t\tif (this.premptiveSplitBox.checked !== this.preemptiveSplit) {\n\t\t\tthis.premptiveSplitBox.checked = this.preemptiveSplit;\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tprintCallback() {\n\t\tthis.implementAction(this.printTree.bind(this));\n\t}\n\n\tprintTree() {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, this.messageID, 'Printing tree');\n\t\tconst firstLabel = this.nextIndex;\n\n\t\tthis.xPosOfNextLabel = FIRST_PRINT_POS_X;\n\t\tthis.yPosOfNextLabel = this.first_print_pos_y;\n\n\t\tthis.printTreeRec(this.treeRoot);\n\t\tthis.cmd(act.step);\n\t\tfor (let i = firstLabel; i < this.nextIndex; i++) {\n\t\t\tthis.cmd(act.delete, i);\n\t\t}\n\t\tthis.nextIndex = firstLabel;\n\t\tthis.cmd(act.setText, this.messageID, '');\n\t\treturn this.commands;\n\t}\n\n\tprintTreeRec(tree) {\n\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\tlet nextLabelID;\n\t\tif (tree.isLeaf) {\n\t\t\tfor (let i = 0; i < tree.numKeys; i++) {\n\t\t\t\tnextLabelID = this.nextIndex++;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tnextLabelID,\n\t\t\t\t\ttree.keys[i],\n\t\t\t\t\tthis.getLabelX(tree, i),\n\t\t\t\t\ttree.y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setForegroundColor, nextLabelID, PRINT_COLOR);\n\t\t\t\tthis.cmd(act.move, nextLabelID, this.xPosOfNextLabel, this.yPosOfNextLabel);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.xPosOfNextLabel += PRINT_HORIZONTAL_GAP;\n\t\t\t\tif (this.xPosOfNextLabel > PRINT_MAX) {\n\t\t\t\t\tthis.xPosOfNextLabel = FIRST_PRINT_POS_X;\n\t\t\t\t\tthis.yPosOfNextLabel += PRINT_VERTICAL_GAP;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t} else {\n\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[0].graphicID, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[0].graphicID, 0);\n\t\t\tthis.printTreeRec(tree.children[0]);\n\t\t\tfor (let i = 0; i < tree.numKeys; i++) {\n\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\t\t\tnextLabelID = this.nextIndex++;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tnextLabelID,\n\t\t\t\t\ttree.keys[i],\n\t\t\t\t\tthis.getLabelX(tree, i),\n\t\t\t\t\ttree.y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setForegroundColor, nextLabelID, PRINT_COLOR);\n\t\t\t\tthis.cmd(act.move, nextLabelID, this.xPosOfNextLabel, this.yPosOfNextLabel);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.xPosOfNextLabel += PRINT_HORIZONTAL_GAP;\n\t\t\t\tif (this.xPosOfNextLabel > PRINT_MAX) {\n\t\t\t\t\tthis.xPosOfNextLabel = FIRST_PRINT_POS_X;\n\t\t\t\t\tthis.yPosOfNextLabel += PRINT_VERTICAL_GAP;\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i + 1].graphicID, 1);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i + 1].graphicID, 0);\n\t\t\t\tthis.printTreeRec(tree.children[i + 1]);\n\t\t\t}\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t}\n\t}\n\n\tclearTree() {\n\t\tthis.commands = [];\n\t\tthis.deleteTree(this.treeRoot);\n\t\tthis.treeRoot = null;\n\t\tthis.nextIndex = 3;\n\t\treturn this.commands;\n\t}\n\n\tdeleteTree(tree) {\n\t\tif (tree != null) {\n\t\t\tif (!tree.isLeaf) {\n\t\t\t\tfor (let i = 0; i <= tree.numKeys; i++) {\n\t\t\t\t\tthis.cmd(act.disconnect, tree.graphicID, tree.children[i].graphicID);\n\t\t\t\t\tthis.deleteTree(tree.children[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.cmd(act.delete, tree.graphicID);\n\t\t}\n\t}\n\n\tchangeDegree(degree) {\n\t\tthis.commands = [];\n\t\tthis.deleteTree(this.treeRoot);\n\t\tthis.treeRoot = null;\n\t\tthis.nextIndex = 3;\n\t\tconst newDegree = degree;\n\t\tthis.ignoreInputs = true;\n\t\tthis.maxDegreeRadioButtons[newDegree - MIN_MAX_DEGREE].checked = true;\n\n\t\tthis.ignoreInputs = false;\n\t\tthis.max_degree = newDegree;\n\t\tthis.max_keys = newDegree - 1;\n\t\tthis.min_keys = Math.floor((newDegree + 1) / 2) - 1;\n\t\tthis.split_index = Math.floor((newDegree - 1) / 2);\n\t\tif (this.commands.length === 0) {\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tif (newDegree % 2 !== 0 && this.preemptiveSplit) {\n\t\t\tthis.preemptiveSplit = false;\n\t\t\tthis.premptiveSplitBox.checked = false;\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tfindCallback() {\n\t\tconst findValue = this.normalizeNumber(this.findField.value, 4);\n\t\tthis.findField.value = '';\n\t\tthis.implementAction(this.findElement.bind(this), parseInt(findValue));\n\t}\n\n\tfindElement(findValue) {\n\t\tthis.commands = [];\n\n\t\tthis.cmd(act.setText, this.messageID, 'Finding ' + findValue);\n\t\tthis.findInTree(this.treeRoot, findValue);\n\n\t\treturn this.commands;\n\t}\n\n\tfindInTree(tree, val) {\n\t\tif (tree != null) {\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < tree.numKeys && tree.keys[i] < val; i++);\n\t\t\tif (i === tree.numKeys) {\n\t\t\t\tif (!tree.isLeaf) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setEdgeHighlight,\n\t\t\t\t\t\ttree.graphicID,\n\t\t\t\t\t\ttree.children[tree.numKeys].graphicID,\n\t\t\t\t\t\t1,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setEdgeHighlight,\n\t\t\t\t\t\ttree.graphicID,\n\t\t\t\t\t\ttree.children[tree.numKeys].graphicID,\n\t\t\t\t\t\t0,\n\t\t\t\t\t);\n\t\t\t\t\tthis.findInTree(tree.children[tree.numKeys], val);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.cmd(act.setText, this.messageID, 'Element ' + val + ' is not in the tree');\n\t\t\t\t}\n\t\t\t} else if (tree.keys[i] > val) {\n\t\t\t\tif (!tree.isLeaf) {\n\t\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i].graphicID, 1);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i].graphicID, 0);\n\t\t\t\t\tthis.findInTree(tree.children[i], val);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.cmd(act.setText, this.messageID, 'Element ' + val + ' is not in the tree');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, '#FF0000', i);\n\t\t\t\tthis.cmd(act.setText, this.messageID, 'Element ' + val + ' found');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, FOREGROUND_COLOR, i);\n\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.messageID, 'Element ' + val + ' is not in the tree');\n\t\t}\n\t}\n\n\tinsertElement(insertedValue) {\n\t\tthis.commands = [];\n\n\t\tthis.cmd(act.setText, this.messageID, 'Inserting ' + insertedValue);\n\t\tthis.cmd(act.step);\n\n\t\tif (this.treeRoot == null) {\n\t\t\tthis.treeRoot = new BTreeNode(this.nextIndex++, this.starting_x, STARTING_Y);\n\t\t\tthis.cmd(\n\t\t\t\tact.createBTreeNode,\n\t\t\t\tthis.treeRoot.graphicID,\n\t\t\t\tWIDTH_PER_ELEM,\n\t\t\t\tNODE_HEIGHT,\n\t\t\t\t1,\n\t\t\t\tthis.starting_x,\n\t\t\t\tSTARTING_Y,\n\t\t\t\tBACKGROUND_COLOR,\n\t\t\t\tFOREGROUND_COLOR,\n\t\t\t);\n\t\t\tthis.treeRoot.keys[0] = insertedValue;\n\t\t\tthis.cmd(act.setText, this.treeRoot.graphicID, insertedValue, 0);\n\t\t} else {\n\t\t\tif (this.preemptiveSplit) {\n\t\t\t\tif (this.treeRoot.numKeys === this.max_keys) {\n\t\t\t\t\tthis.split(this.treeRoot);\n\t\t\t\t\tthis.resizeTree();\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t\tthis.insertNotFull(this.treeRoot, insertedValue);\n\t\t\t} else {\n\t\t\t\tthis.insert(this.treeRoot, insertedValue);\n\t\t\t}\n\t\t\tif (!this.treeRoot.isLeaf) {\n\t\t\t\tthis.resizeTree();\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.setText, this.messageID, '');\n\n\t\treturn this.commands;\n\t}\n\n\tinsertNotFull(tree, insertValue) {\n\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\tthis.cmd(act.step);\n\t\tif (tree.isLeaf) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.messageID,\n\t\t\t\t'Inserting ' + insertValue + '.  Inserting into a leaf',\n\t\t\t);\n\t\t\ttree.numKeys++;\n\t\t\tthis.cmd(act.setNumElements, tree.graphicID, tree.numKeys);\n\t\t\tlet insertIndex = tree.numKeys - 1;\n\t\t\twhile (insertIndex > 0 && tree.keys[insertIndex - 1] > insertValue) {\n\t\t\t\ttree.keys[insertIndex] = tree.keys[insertIndex - 1];\n\t\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[insertIndex], insertIndex);\n\t\t\t\tinsertIndex--;\n\t\t\t}\n\t\t\ttree.keys[insertIndex] = insertValue;\n\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[insertIndex], insertIndex);\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\tthis.resizeTree();\n\t\t} else {\n\t\t\tlet findIndex = 0;\n\t\t\twhile (findIndex < tree.numKeys && tree.keys[findIndex] < insertValue) {\n\t\t\t\tfindIndex++;\n\t\t\t}\n\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[findIndex].graphicID, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[findIndex].graphicID, 0);\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\tif (tree.children[findIndex].numKeys === this.max_keys) {\n\t\t\t\tconst newTree = this.split(tree.children[findIndex]);\n\t\t\t\tthis.resizeTree();\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.insertNotFull(newTree, insertValue);\n\t\t\t} else {\n\t\t\t\tthis.insertNotFull(tree.children[findIndex], insertValue);\n\t\t\t}\n\t\t}\n\t}\n\n\tinsert(tree, insertValue) {\n\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\tthis.cmd(act.step);\n\t\tif (tree.isLeaf) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.messageID,\n\t\t\t\t'Inserting ' + insertValue + '.  Inserting into a leaf',\n\t\t\t);\n\t\t\ttree.numKeys++;\n\t\t\tthis.cmd(act.setNumElements, tree.graphicID, tree.numKeys);\n\t\t\tlet insertIndex = tree.numKeys - 1;\n\t\t\twhile (insertIndex > 0 && tree.keys[insertIndex - 1] > insertValue) {\n\t\t\t\ttree.keys[insertIndex] = tree.keys[insertIndex - 1];\n\t\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[insertIndex], insertIndex);\n\t\t\t\tinsertIndex--;\n\t\t\t}\n\t\t\ttree.keys[insertIndex] = insertValue;\n\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[insertIndex], insertIndex);\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\tthis.resizeTree();\n\t\t\tthis.insertRepair(tree);\n\t\t} else {\n\t\t\tlet findIndex = 0;\n\t\t\twhile (findIndex < tree.numKeys && tree.keys[findIndex] < insertValue) {\n\t\t\t\tfindIndex++;\n\t\t\t}\n\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[findIndex].graphicID, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[findIndex].graphicID, 0);\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\tthis.insert(tree.children[findIndex], insertValue);\n\t\t}\n\t}\n\n\tinsertRepair(tree) {\n\t\tif (tree.numKeys <= this.max_keys) {\n\t\t\treturn;\n\t\t} else if (tree.parent == null) {\n\t\t\tthis.treeRoot = this.split(tree);\n\t\t\treturn;\n\t\t} else {\n\t\t\tconst newNode = this.split(tree);\n\t\t\tthis.insertRepair(newNode);\n\t\t}\n\t}\n\n\tsplit(tree) {\n\t\tthis.cmd(act.setText, this.messageID, 'Node now contains too many keys.  Splittig ...');\n\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\tconst rightNode = new BTreeNode(this.nextIndex++, tree.x + 100, tree.y);\n\t\trightNode.numKeys = tree.numKeys - this.split_index - 1;\n\t\tconst risingNode = tree.keys[this.split_index];\n\t\tlet currentParent;\n\t\tlet parentIndex;\n\t\tif (tree.parent != null) {\n\t\t\tcurrentParent = tree.parent;\n\t\t\tfor (\n\t\t\t\tparentIndex = 0;\n\t\t\t\tparentIndex < currentParent.numKeys + 1 &&\n\t\t\t\tcurrentParent.children[parentIndex] !== tree;\n\t\t\t\tparentIndex++\n\t\t\t);\n\t\t\tif (parentIndex === currentParent.numKeys + 1) {\n\t\t\t\tthrow new Error(\"Couldn't find which child we were!\");\n\t\t\t}\n\t\t\tthis.cmd(act.setNumElements, currentParent.graphicID, currentParent.numKeys + 1);\n\t\t\tfor (let i = currentParent.numKeys; i > parentIndex; i--) {\n\t\t\t\tcurrentParent.children[i + 1] = currentParent.children[i];\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tcurrentParent.graphicID,\n\t\t\t\t\tcurrentParent.children[i].graphicID,\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tcurrentParent.graphicID,\n\t\t\t\t\tcurrentParent.children[i].graphicID,\n\t\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t\t0, // Curve\n\t\t\t\t\t0, // Directed\n\t\t\t\t\t'', // Label\n\t\t\t\t\ti + 1,\n\t\t\t\t);\n\n\t\t\t\tcurrentParent.keys[i] = currentParent.keys[i - 1];\n\t\t\t\tthis.cmd(act.setText, currentParent.graphicID, currentParent.keys[i], i);\n\t\t\t}\n\t\t\tcurrentParent.numKeys++;\n\t\t\tcurrentParent.keys[parentIndex] = risingNode;\n\t\t\tthis.cmd(act.setText, currentParent.graphicID, '', parentIndex);\n\t\t\tthis.moveLabel1ID = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.moveLabel1ID,\n\t\t\t\trisingNode,\n\t\t\t\tthis.getLabelX(tree, this.split_index),\n\t\t\t\ttree.y,\n\t\t\t);\n\t\t\tthis.cmd(act.setForegroundColor, this.moveLabel1ID, FOREGROUND_COLOR);\n\n\t\t\tthis.cmd(\n\t\t\t\tact.move,\n\t\t\t\tthis.moveLabel1ID,\n\t\t\t\tthis.getLabelX(currentParent, parentIndex),\n\t\t\t\tcurrentParent.y,\n\t\t\t);\n\n\t\t\tcurrentParent.children[parentIndex + 1] = rightNode;\n\t\t\trightNode.parent = currentParent;\n\t\t}\n\n\t\tthis.cmd(\n\t\t\tact.createBTreeNode,\n\t\t\trightNode.graphicID,\n\t\t\tWIDTH_PER_ELEM,\n\t\t\tNODE_HEIGHT,\n\t\t\ttree.numKeys - this.split_index - 1,\n\t\t\ttree.x,\n\t\t\ttree.y,\n\t\t\tBACKGROUND_COLOR,\n\t\t\tFOREGROUND_COLOR,\n\t\t);\n\n\t\tfor (let i = this.split_index + 1; i < tree.numKeys + 1; i++) {\n\t\t\trightNode.children[i - this.split_index - 1] = tree.children[i];\n\t\t\tif (tree.children[i] != null) {\n\t\t\t\trightNode.isLeaf = false;\n\t\t\t\tthis.cmd(act.disconnect, tree.graphicID, tree.children[i].graphicID);\n\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\trightNode.graphicID,\n\t\t\t\t\trightNode.children[i - this.split_index - 1].graphicID,\n\t\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t\t0, // Curve\n\t\t\t\t\t0, // Directed\n\t\t\t\t\t'', // Label\n\t\t\t\t\ti - this.split_index - 1,\n\t\t\t\t);\n\t\t\t\tif (tree.children[i] != null) {\n\t\t\t\t\ttree.children[i].parent = rightNode;\n\t\t\t\t}\n\t\t\t\ttree.children[i] = null;\n\t\t\t}\n\t\t}\n\t\tfor (let i = this.split_index + 1; i < tree.numKeys; i++) {\n\t\t\trightNode.keys[i - this.split_index - 1] = tree.keys[i];\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\trightNode.graphicID,\n\t\t\t\trightNode.keys[i - this.split_index - 1],\n\t\t\t\ti - this.split_index - 1,\n\t\t\t);\n\t\t}\n\t\tconst leftNode = tree;\n\t\tleftNode.numKeys = this.split_index;\n\t\tfor (let i = this.split_index; i < tree.numKeys; i++) {\n\t\t\tthis.cmd(act.setText, tree.graphicID, '', i);\n\t\t}\n\t\tthis.cmd(act.setNumElements, tree.graphicID, this.split_index);\n\n\t\tif (tree.parent != null) {\n\t\t\tthis.cmd(\n\t\t\t\tact.connect,\n\t\t\t\tcurrentParent.graphicID,\n\t\t\t\trightNode.graphicID,\n\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t0, // Curve\n\t\t\t\t0, // Directed\n\t\t\t\t'', // Label\n\t\t\t\tparentIndex + 1,\n\t\t\t);\n\t\t\tthis.resizeTree();\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.delete, this.moveLabel1ID);\n\t\t\tthis.cmd(act.setText, currentParent.graphicID, risingNode, parentIndex);\n\t\t\treturn tree.parent;\n\t\t} else {\n\t\t\tthis.treeRoot = new BTreeNode(this.nextIndex++, this.starting_x, STARTING_Y);\n\t\t\tthis.cmd(\n\t\t\t\tact.createBTreeNode,\n\t\t\t\tthis.treeRoot.graphicID,\n\t\t\t\tWIDTH_PER_ELEM,\n\t\t\t\tNODE_HEIGHT,\n\t\t\t\t1,\n\t\t\t\tthis.starting_x,\n\t\t\t\tSTARTING_Y,\n\t\t\t\tBACKGROUND_COLOR,\n\t\t\t\tFOREGROUND_COLOR,\n\t\t\t);\n\t\t\tthis.treeRoot.keys[0] = risingNode;\n\t\t\tthis.cmd(act.setText, this.treeRoot.graphicID, risingNode, 0);\n\t\t\tthis.treeRoot.children[0] = leftNode;\n\t\t\tthis.treeRoot.children[1] = rightNode;\n\t\t\tleftNode.parent = this.treeRoot;\n\t\t\trightNode.parent = this.treeRoot;\n\t\t\tthis.cmd(\n\t\t\t\tact.connect,\n\t\t\t\tthis.treeRoot.graphicID,\n\t\t\t\tleftNode.graphicID,\n\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t0, // Curve\n\t\t\t\t0, // Directed\n\t\t\t\t'', // Label\n\t\t\t\t0,\n\t\t\t); // Connection Point\n\t\t\tthis.cmd(\n\t\t\t\tact.connect,\n\t\t\t\tthis.treeRoot.graphicID,\n\t\t\t\trightNode.graphicID,\n\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t0, // Curve\n\t\t\t\t0, // Directed\n\t\t\t\t'', // Label\n\t\t\t\t1,\n\t\t\t); // Connection Point\n\t\t\tthis.treeRoot.isLeaf = false;\n\t\t\treturn this.treeRoot;\n\t\t}\n\t}\n\n\tdeleteElement(deletedValue) {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, 0, 'Deleting ' + deletedValue);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, 0, '');\n\t\tthis.highlightID = this.nextIndex++;\n\t\tthis.cmd(act.setText, 0, '');\n\t\tif (this.preemptiveSplit) {\n\t\t\tthis.doDeleteNotEmpty(this.treeRoot, deletedValue);\n\t\t} else {\n\t\t\tthis.doDelete(this.treeRoot, deletedValue);\n\t\t}\n\t\tif (this.treeRoot.numKeys === 0) {\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.delete, this.treeRoot.graphicID);\n\t\t\tthis.treeRoot = this.treeRoot.children[0];\n\t\t\tthis.treeRoot.parent = null;\n\t\t\tthis.resizeTree();\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tdoDeleteNotEmpty(tree, val) {\n\t\tif (tree != null) {\n\t\t\tlet nextNode;\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < tree.numKeys && tree.keys[i] < val; i++);\n\t\t\tif (i === tree.numKeys) {\n\t\t\t\tif (!tree.isLeaf) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setEdgeHighlight,\n\t\t\t\t\t\ttree.graphicID,\n\t\t\t\t\t\ttree.children[tree.numKeys].graphicID,\n\t\t\t\t\t\t1,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setEdgeHighlight,\n\t\t\t\t\t\ttree.graphicID,\n\t\t\t\t\t\ttree.children[tree.numKeys].graphicID,\n\t\t\t\t\t\t0,\n\t\t\t\t\t);\n\n\t\t\t\t\tif (tree.children[tree.numKeys].numKeys === this.min_keys) {\n\t\t\t\t\t\tif (tree.children[tree.numKeys - 1].numKeys > this.min_keys) {\n\t\t\t\t\t\t\tnextNode = this.stealFromLeft(\n\t\t\t\t\t\t\t\ttree.children[tree.numKeys],\n\t\t\t\t\t\t\t\ttree.numKeys,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.doDeleteNotEmpty(nextNode, val);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnextNode = this.mergeRight(tree.children[tree.numKeys - 1]);\n\t\t\t\t\t\t\tthis.doDeleteNotEmpty(nextNode, val);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.doDeleteNotEmpty(tree.children[tree.numKeys], val);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t}\n\t\t\t} else if (tree.keys[i] > val) {\n\t\t\t\tif (!tree.isLeaf) {\n\t\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i].graphicID, 1);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i].graphicID, 0);\n\n\t\t\t\t\tif (tree.children[i].numKeys > this.min_keys) {\n\t\t\t\t\t\tthis.doDeleteNotEmpty(tree.children[i], val);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (tree.children[i + 1].numKeys > this.min_keys) {\n\t\t\t\t\t\t\tnextNode = this.stealFromRight(tree.children[i], i);\n\t\t\t\t\t\t\tthis.doDeleteNotEmpty(nextNode, val);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnextNode = this.mergeRight(tree.children[i]);\n\t\t\t\t\t\t\tthis.doDeleteNotEmpty(nextNode, val);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, 'FF0000', i);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tif (tree.isLeaf) {\n\t\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, FOREGROUND_COLOR, i);\n\t\t\t\t\tfor (let j = i; j < tree.numKeys - 1; j++) {\n\t\t\t\t\t\ttree.keys[j] = tree.keys[j + 1];\n\t\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[j], j);\n\t\t\t\t\t}\n\t\t\t\t\ttree.numKeys--;\n\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, '', tree.numKeys);\n\t\t\t\t\tthis.cmd(act.setNumElements, tree.graphicID, tree.numKeys);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.resizeTree();\n\t\t\t\t\tthis.cmd(act.setText, this.messageID, '');\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\tthis.messageID,\n\t\t\t\t\t\t'Checking to see if tree to left of element to delete \\nhas an extra key',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i].graphicID, 1);\n\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i].graphicID, 0);\n\t\t\t\t\tlet maxNode = tree.children[i];\n\n\t\t\t\t\tif (tree.children[i].numKeys === this.min_keys) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\tthis.messageID,\n\t\t\t\t\t\t\t'Tree to left of element to delete does not have an extra key.  \\nLooking to the right ...',\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.setEdgeHighlight,\n\t\t\t\t\t\t\ttree.graphicID,\n\t\t\t\t\t\t\ttree.children[i + 1].graphicID,\n\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.setEdgeHighlight,\n\t\t\t\t\t\t\ttree.graphicID,\n\t\t\t\t\t\t\ttree.children[i + 1].graphicID,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t);\n\t\t\t\t\t\t// Trees to left and right of node to delete don't have enough keys\n\t\t\t\t\t\t// Do a merge, and then recursively delete the element\n\t\t\t\t\t\tif (tree.children[i + 1].numKeys === this.min_keys) {\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\tthis.messageID,\n\t\t\t\t\t\t\t\t'Neither subtree has extra nodes.  Mergeing around the key to delete, \\nand recursively deleting ...',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, FOREGROUND_COLOR, i);\n\t\t\t\t\t\t\tnextNode = this.mergeRight(tree.children[i]);\n\t\t\t\t\t\t\tthis.doDeleteNotEmpty(nextNode, val);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\tthis.messageID,\n\t\t\t\t\t\t\t\t'Tree to right of element to delete does have an extra key. \\nFinding the smallest key in that subtree ...',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t\t\t\tlet minNode = tree.children[i + 1];\n\t\t\t\t\t\t\twhile (!minNode.isLeaf) {\n\t\t\t\t\t\t\t\tthis.cmd(act.setHighlight, minNode.graphicID, 1);\n\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\t\tthis.cmd(act.setHighlight, minNode.graphicID, 0);\n\t\t\t\t\t\t\t\tif (minNode.children[0].numKeys === this.min_keys) {\n\t\t\t\t\t\t\t\t\tif (minNode.children[1].numKeys === this.min_keys) {\n\t\t\t\t\t\t\t\t\t\tminNode = this.mergeRight(minNode.children[0]);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tminNode = this.stealFromRight(minNode.children[0], 0);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tminNode = minNode.children[0];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, minNode.graphicID, 1);\n\t\t\t\t\t\t\ttree.keys[i] = minNode.keys[0];\n\t\t\t\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, FOREGROUND_COLOR, i);\n\t\t\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, '', i);\n\t\t\t\t\t\t\tthis.cmd(act.setText, minNode.graphicID, '', 0);\n\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\t\tthis.moveLabel1ID,\n\t\t\t\t\t\t\t\tminNode.keys[0],\n\t\t\t\t\t\t\t\tthis.getLabelX(minNode, 0),\n\t\t\t\t\t\t\t\tminNode.y,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(act.move, this.moveLabel1ID, this.getLabelX(tree, i), tree.y);\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\tthis.cmd(act.delete, this.moveLabel1ID);\n\t\t\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[i], i);\n\t\t\t\t\t\t\tfor (i = 1; i < minNode.numKeys; i++) {\n\t\t\t\t\t\t\t\tminNode.keys[i - 1] = minNode.keys[i];\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\t\tminNode.graphicID,\n\t\t\t\t\t\t\t\t\tminNode.keys[i - 1],\n\t\t\t\t\t\t\t\t\ti - 1,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.cmd(act.setText, minNode.graphicID, '', minNode.numKeys - 1);\n\n\t\t\t\t\t\t\tminNode.numKeys--;\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, minNode.graphicID, 0);\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\n\t\t\t\t\t\t\tthis.cmd(act.setNumElements, minNode.graphicID, minNode.numKeys);\n\t\t\t\t\t\t\tthis.resizeTree();\n\t\t\t\t\t\t\tthis.cmd(act.setText, this.messageID, '');\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\tthis.messageID,\n\t\t\t\t\t\t\t'Tree to left of element to delete does have \\nan extra key. Finding the largest key in that subtree ...',\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\twhile (!maxNode.isLeaf) {\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, maxNode.graphicID, 1);\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, maxNode.graphicID, 0);\n\t\t\t\t\t\t\tif (maxNode.children[maxNode.numKeys].numKeys === this.min_keys) {\n\t\t\t\t\t\t\t\tif (maxNode.children[maxNode.numKeys - 1] > this.min_keys) {\n\t\t\t\t\t\t\t\t\tmaxNode = this.stealFromLeft(\n\t\t\t\t\t\t\t\t\t\tmaxNode.children[maxNode.numKeys],\n\t\t\t\t\t\t\t\t\t\tmaxNode.numKeys,\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tmaxNode = this.mergeRight(maxNode.children[maxNode.numKeys - 1]);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmaxNode = maxNode.children[maxNode.numKeys];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.cmd(act.setHighlight, maxNode.graphicID, 1);\n\t\t\t\t\t\ttree.keys[i] = maxNode.keys[maxNode.numKeys - 1];\n\t\t\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, FOREGROUND_COLOR, i);\n\t\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, '', i);\n\t\t\t\t\t\tthis.cmd(act.setText, maxNode.graphicID, '', maxNode.numKeys - 1);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tthis.moveLabel1ID,\n\t\t\t\t\t\t\ttree.keys[i],\n\t\t\t\t\t\t\tthis.getLabelX(maxNode, maxNode.numKeys - 1),\n\t\t\t\t\t\t\tmaxNode.y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.move, this.moveLabel1ID, this.getLabelX(tree, i), tree.y);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.cmd(act.delete, this.moveLabel1ID);\n\t\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[i], i);\n\t\t\t\t\t\tmaxNode.numKeys--;\n\t\t\t\t\t\tthis.cmd(act.setHighlight, maxNode.graphicID, 0);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\n\t\t\t\t\t\tthis.cmd(act.setNumElements, maxNode.graphicID, maxNode.numKeys);\n\t\t\t\t\t\tthis.resizeTree();\n\t\t\t\t\t\tthis.cmd(act.setText, this.messageID, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tdoDelete(tree, val) {\n\t\tif (tree != null) {\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < tree.numKeys && tree.keys[i] < val; i++);\n\t\t\tif (i === tree.numKeys) {\n\t\t\t\tif (!tree.isLeaf) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setEdgeHighlight,\n\t\t\t\t\t\ttree.graphicID,\n\t\t\t\t\t\ttree.children[tree.numKeys].graphicID,\n\t\t\t\t\t\t1,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setEdgeHighlight,\n\t\t\t\t\t\ttree.graphicID,\n\t\t\t\t\t\ttree.children[tree.numKeys].graphicID,\n\t\t\t\t\t\t0,\n\t\t\t\t\t);\n\t\t\t\t\tthis.doDelete(tree.children[tree.numKeys], val);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t}\n\t\t\t} else if (tree.keys[i] > val) {\n\t\t\t\tif (!tree.isLeaf) {\n\t\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i].graphicID, 1);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i].graphicID, 0);\n\t\t\t\t\tthis.doDelete(tree.children[i], val);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, '#FF0000', i);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tif (tree.isLeaf) {\n\t\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, FOREGROUND_COLOR, i);\n\t\t\t\t\tfor (let j = i; j < tree.numKeys - 1; j++) {\n\t\t\t\t\t\ttree.keys[j] = tree.keys[j + 1];\n\t\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[j], j);\n\t\t\t\t\t}\n\t\t\t\t\ttree.numKeys--;\n\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, '', tree.numKeys);\n\t\t\t\t\tthis.cmd(act.setNumElements, tree.graphicID, tree.numKeys);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.repairAfterDelete(tree);\n\t\t\t\t} else {\n\t\t\t\t\tlet maxNode = tree.children[i];\n\t\t\t\t\twhile (!maxNode.isLeaf) {\n\t\t\t\t\t\tthis.cmd(act.setHighlight, maxNode.graphicID, 1);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, maxNode.graphicID, 0);\n\t\t\t\t\t\tmaxNode = maxNode.children[maxNode.numKeys];\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.setHighlight, maxNode.graphicID, 1);\n\t\t\t\t\ttree.keys[i] = maxNode.keys[maxNode.numKeys - 1];\n\t\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, FOREGROUND_COLOR, i);\n\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, '', i);\n\t\t\t\t\tthis.cmd(act.setText, maxNode.graphicID, '', maxNode.numKeys - 1);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\tthis.moveLabel1ID,\n\t\t\t\t\t\ttree.keys[i],\n\t\t\t\t\t\tthis.getLabelX(maxNode, maxNode.numKeys - 1),\n\t\t\t\t\t\tmaxNode.y,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.move, this.moveLabel1ID, this.getLabelX(tree, i), tree.y);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.delete, this.moveLabel1ID);\n\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[i], i);\n\t\t\t\t\tmaxNode.numKeys--;\n\t\t\t\t\tthis.cmd(act.setHighlight, maxNode.graphicID, 0);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\n\t\t\t\t\tthis.cmd(act.setNumElements, maxNode.graphicID, maxNode.numKeys);\n\t\t\t\t\tthis.repairAfterDelete(maxNode);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tmergeRight(tree) {\n\t\tthis.cmd(act.setText, this.messageID, 'Merging node');\n\n\t\tconst parentNode = tree.parent;\n\t\tlet parentIndex = 0;\n\t\tfor (parentIndex = 0; parentNode.children[parentIndex] !== tree; parentIndex++);\n\t\tconst rightSib = parentNode.children[parentIndex + 1];\n\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\tthis.cmd(act.setHighlight, parentNode.graphicID, 1);\n\t\tthis.cmd(act.setHighlight, rightSib.graphicID, 1);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setNumElements, tree.graphicID, tree.numKeys + rightSib.numKeys + 1);\n\t\ttree.x = (tree.x + rightSib.x) / 2;\n\t\tthis.cmd(act.setPosition, tree.graphicID, tree.x, tree.y);\n\n\t\ttree.keys[tree.numKeys] = parentNode.keys[parentIndex];\n\t\tconst fromParentIndex = tree.numKeys;\n\t\tthis.cmd(act.setText, tree.graphicID, '', tree.numKeys);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.moveLabel1ID,\n\t\t\tparentNode.keys[parentIndex],\n\t\t\tthis.getLabelX(parentNode, parentIndex),\n\t\t\tparentNode.y,\n\t\t);\n\n\t\tfor (let i = 0; i < rightSib.numKeys; i++) {\n\t\t\ttree.keys[tree.numKeys + 1 + i] = rightSib.keys[i];\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\ttree.graphicID,\n\t\t\t\ttree.keys[tree.numKeys + 1 + i],\n\t\t\t\ttree.numKeys + 1 + i,\n\t\t\t);\n\t\t\tthis.cmd(act.setText, rightSib.graphicID, '', i);\n\t\t}\n\t\tif (!tree.isLeaf) {\n\t\t\tfor (let i = 0; i <= rightSib.numKeys; i++) {\n\t\t\t\tthis.cmd(act.disconnect, rightSib.graphicID, rightSib.children[i].graphicID);\n\t\t\t\ttree.children[tree.numKeys + 1 + i] = rightSib.children[i];\n\t\t\t\ttree.children[tree.numKeys + 1 + i].parent = tree;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\ttree.graphicID,\n\t\t\t\t\ttree.children[tree.numKeys + 1 + i].graphicID,\n\t\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t\t0, // Curve\n\t\t\t\t\t0, // Directed\n\t\t\t\t\t'', // Label\n\t\t\t\t\ttree.numKeys + 1 + i,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.disconnect, parentNode.graphicID, rightSib.graphicID);\n\t\tfor (let i = parentIndex + 1; i < parentNode.numKeys; i++) {\n\t\t\tthis.cmd(act.disconnect, parentNode.graphicID, parentNode.children[i + 1].graphicID);\n\t\t\tparentNode.children[i] = parentNode.children[i + 1];\n\t\t\tthis.cmd(\n\t\t\t\tact.connect,\n\t\t\t\tparentNode.graphicID,\n\t\t\t\tparentNode.children[i].graphicID,\n\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t0, // Curve\n\t\t\t\t0, // Directed\n\t\t\t\t'', // Label\n\t\t\t\ti,\n\t\t\t);\n\t\t\tparentNode.keys[i - 1] = parentNode.keys[i];\n\t\t\tthis.cmd(act.setText, parentNode.graphicID, parentNode.keys[i - 1], i - 1);\n\t\t}\n\t\tthis.cmd(act.setText, parentNode.graphicID, '', parentNode.numKeys - 1);\n\t\tparentNode.numKeys--;\n\t\tthis.cmd(act.setNumElements, parentNode.graphicID, parentNode.numKeys);\n\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\tthis.cmd(act.setHighlight, parentNode.graphicID, 0);\n\n\t\tthis.cmd(act.delete, rightSib.graphicID);\n\t\ttree.numKeys = tree.numKeys + rightSib.numKeys + 1;\n\t\tthis.cmd(act.move, this.moveLabel1ID, this.getLabelX(tree, fromParentIndex), tree.y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, this.moveLabel1ID);\n\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[fromParentIndex], fromParentIndex);\n\n\t\tthis.cmd(act.setText, this.messageID, '');\n\t\treturn tree;\n\t}\n\n\tstealFromRight(tree, parentIndex) {\n\t\t// Steal from right sibling\n\t\tconst parentNode = tree.parent;\n\n\t\tthis.cmd(act.setNumElements, tree.graphicID, tree.numKeys + 1);\n\n\t\tthis.cmd(act.setText, this.messageID, 'Stealing from right sibling');\n\n\t\tconst rightSib = parentNode.children[parentIndex + 1];\n\t\ttree.numKeys++;\n\n\t\tthis.cmd(act.setNumElements, tree.graphicID, tree.numKeys);\n\n\t\tthis.cmd(act.setText, tree.graphicID, '', tree.numKeys - 1);\n\t\tthis.cmd(act.setText, parentNode.graphicID, '', parentIndex);\n\t\tthis.cmd(act.setText, rightSib.graphicID, '', 0);\n\n\t\tconst tmpLabel1 = this.nextIndex++;\n\t\tconst tmpLabel2 = this.nextIndex++;\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\ttmpLabel1,\n\t\t\trightSib.keys[0],\n\t\t\tthis.getLabelX(rightSib, 0),\n\t\t\trightSib.y,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\ttmpLabel2,\n\t\t\tparentNode.keys[parentIndex],\n\t\t\tthis.getLabelX(parentNode, parentIndex),\n\t\t\tparentNode.y,\n\t\t);\n\t\tthis.cmd(act.setForegroundColor, tmpLabel1, FOREGROUND_COLOR);\n\t\tthis.cmd(act.setForegroundColor, tmpLabel2, FOREGROUND_COLOR);\n\n\t\tthis.cmd(act.move, tmpLabel1, this.getLabelX(parentNode, parentIndex), parentNode.y);\n\t\tthis.cmd(act.move, tmpLabel2, this.getLabelX(tree, tree.numKeys - 1), tree.y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, tmpLabel1);\n\t\tthis.cmd(act.delete, tmpLabel2);\n\t\ttree.keys[tree.numKeys - 1] = parentNode.keys[parentIndex];\n\t\tparentNode.keys[parentIndex] = rightSib.keys[0];\n\n\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[tree.numKeys - 1], tree.numKeys - 1);\n\t\tthis.cmd(act.setText, parentNode.graphicID, parentNode.keys[parentIndex], parentIndex);\n\t\tif (!tree.isLeaf) {\n\t\t\ttree.children[tree.numKeys] = rightSib.children[0];\n\t\t\ttree.children[tree.numKeys].parent = tree;\n\t\t\tthis.cmd(act.disconnect, rightSib.graphicID, rightSib.children[0].graphicID);\n\t\t\tthis.cmd(\n\t\t\t\tact.connect,\n\t\t\t\ttree.graphicID,\n\t\t\t\ttree.children[tree.numKeys].graphicID,\n\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t0, // Curve\n\t\t\t\t0, // Directed\n\t\t\t\t'', // Label\n\t\t\t\ttree.numKeys,\n\t\t\t);\n\n\t\t\tfor (let i = 1; i < rightSib.numKeys + 1; i++) {\n\t\t\t\tthis.cmd(act.disconnect, rightSib.graphicID, rightSib.children[i].graphicID);\n\t\t\t\trightSib.children[i - 1] = rightSib.children[i];\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\trightSib.graphicID,\n\t\t\t\t\trightSib.children[i - 1].graphicID,\n\t\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t\t0, // Curve\n\t\t\t\t\t0, // Directed\n\t\t\t\t\t'', // Label\n\t\t\t\t\ti - 1,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tfor (let i = 1; i < rightSib.numKeys; i++) {\n\t\t\trightSib.keys[i - 1] = rightSib.keys[i];\n\t\t\tthis.cmd(act.setText, rightSib.graphicID, rightSib.keys[i - 1], i - 1);\n\t\t}\n\t\tthis.cmd(act.setText, rightSib.graphicID, '', rightSib.numKeys - 1);\n\t\trightSib.numKeys--;\n\t\tthis.cmd(act.setNumElements, rightSib.graphicID, rightSib.numKeys);\n\t\tthis.resizeTree();\n\t\tthis.cmd(act.setText, this.messageID, '');\n\t\treturn tree;\n\t}\n\n\tstealFromLeft(tree, parentIndex) {\n\t\tconst parentNode = tree.parent;\n\t\t// Steal from left sibling\n\t\ttree.numKeys++;\n\t\tthis.cmd(act.setNumElements, tree.graphicID, tree.numKeys);\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tthis.messageID,\n\t\t\t'Node has too few keys.  Stealing from left sibling.',\n\t\t);\n\n\t\tfor (let i = tree.numKeys - 1; i > 0; i--) {\n\t\t\ttree.keys[i] = tree.keys[i - 1];\n\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[i], i);\n\t\t}\n\t\tconst leftSib = parentNode.children[parentIndex - 1];\n\n\t\tthis.cmd(act.setText, tree.graphicID, '', 0);\n\t\tthis.cmd(act.setText, parentNode.graphicID, '', parentIndex - 1);\n\t\tthis.cmd(act.setText, leftSib.graphicID, '', leftSib.numKeys - 1);\n\n\t\tconst tmpLabel1 = this.nextIndex++;\n\t\tconst tmpLabel2 = this.nextIndex++;\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\ttmpLabel1,\n\t\t\tleftSib.keys[leftSib.numKeys - 1],\n\t\t\tthis.getLabelX(leftSib, leftSib.numKeys - 1),\n\t\t\tleftSib.y,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\ttmpLabel2,\n\t\t\tparentNode.keys[parentIndex - 1],\n\t\t\tthis.getLabelX(parentNode, parentIndex - 1),\n\t\t\tparentNode.y,\n\t\t);\n\t\tthis.cmd(act.setForegroundColor, tmpLabel1, FOREGROUND_COLOR);\n\t\tthis.cmd(act.setForegroundColor, tmpLabel2, FOREGROUND_COLOR);\n\n\t\tthis.cmd(act.move, tmpLabel1, this.getLabelX(parentNode, parentIndex - 1), parentNode.y);\n\t\tthis.cmd(act.move, tmpLabel2, this.getLabelX(tree, 0), tree.y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, tmpLabel1);\n\t\tthis.cmd(act.delete, tmpLabel2);\n\n\t\tif (!tree.isLeaf) {\n\t\t\tfor (let i = tree.numKeys; i > 0; i--) {\n\t\t\t\tthis.cmd(act.disconnect, tree.graphicID, tree.children[i - 1].graphicID);\n\t\t\t\ttree.children[i] = tree.children[i - 1];\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\ttree.graphicID,\n\t\t\t\t\ttree.children[i].graphicID,\n\t\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t\t0, // Curve\n\t\t\t\t\t0, // Directed\n\t\t\t\t\t'', // Label\n\t\t\t\t\ti,\n\t\t\t\t);\n\t\t\t}\n\t\t\ttree.children[0] = leftSib.children[leftSib.numKeys];\n\t\t\tthis.cmd(\n\t\t\t\tact.disconnect,\n\t\t\t\tleftSib.graphicID,\n\t\t\t\tleftSib.children[leftSib.numKeys].graphicID,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.connect,\n\t\t\t\ttree.graphicID,\n\t\t\t\ttree.children[0].graphicID,\n\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t0, // Curve\n\t\t\t\t0, // Directed\n\t\t\t\t'', // Label\n\t\t\t\t0,\n\t\t\t);\n\t\t\tleftSib.children[leftSib.numKeys] = null;\n\t\t\ttree.children[0].parent = tree;\n\t\t}\n\n\t\ttree.keys[0] = parentNode.keys[parentIndex - 1];\n\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[0], 0);\n\t\tparentNode.keys[parentIndex - 1] = leftSib.keys[leftSib.numKeys - 1];\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tparentNode.graphicID,\n\t\t\tparentNode.keys[parentIndex - 1],\n\t\t\tparentIndex - 1,\n\t\t);\n\t\tthis.cmd(act.setText, leftSib.graphicID, '', leftSib.numKeys - 1);\n\n\t\tleftSib.numKeys--;\n\t\tthis.cmd(act.setNumElements, leftSib.graphicID, leftSib.numKeys);\n\t\tthis.resizeTree();\n\t\tthis.cmd(act.setText, this.messageID, '');\n\t\treturn tree;\n\t}\n\n\trepairAfterDelete(tree) {\n\t\tif (tree.numKeys < this.min_keys) {\n\t\t\tif (tree.parent == null) {\n\t\t\t\tif (tree.numKeys === 0) {\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.delete, tree.graphicID);\n\t\t\t\t\tthis.treeRoot = tree.children[0];\n\t\t\t\t\tif (this.treeRoot != null) this.treeRoot.parent = null;\n\t\t\t\t\tthis.resizeTree();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst parentNode = tree.parent;\n\t\t\t\tlet parentIndex;\n\t\t\t\tlet nextNode;\n\t\t\t\tfor (parentIndex = 0; parentNode.children[parentIndex] !== tree; parentIndex++);\n\t\t\t\tif (\n\t\t\t\t\tparentIndex > 0 &&\n\t\t\t\t\tparentNode.children[parentIndex - 1].numKeys > this.min_keys\n\t\t\t\t) {\n\t\t\t\t\tthis.stealFromLeft(tree, parentIndex);\n\t\t\t\t} else if (\n\t\t\t\t\tparentIndex < parentNode.numKeys &&\n\t\t\t\t\tparentNode.children[parentIndex + 1].numKeys > this.min_keys\n\t\t\t\t) {\n\t\t\t\t\tthis.stealFromRight(tree, parentIndex);\n\t\t\t\t} else if (parentIndex === 0) {\n\t\t\t\t\t// Merge with right sibling\n\t\t\t\t\tnextNode = this.mergeRight(tree);\n\t\t\t\t\tthis.repairAfterDelete(nextNode.parent);\n\t\t\t\t} else {\n\t\t\t\t\t// Merge with left sibling\n\t\t\t\t\tnextNode = this.mergeRight(parentNode.children[parentIndex - 1]);\n\t\t\t\t\tthis.repairAfterDelete(nextNode.parent);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgetLabelX(tree, index) {\n\t\treturn (\n\t\t\ttree.x -\n\t\t\t(WIDTH_PER_ELEM * tree.numKeys) / 2 +\n\t\t\tWIDTH_PER_ELEM / 2 +\n\t\t\tindex * WIDTH_PER_ELEM\n\t\t);\n\t}\n\n\tresizeTree() {\n\t\tthis.resizeWidths(this.treeRoot);\n\t\tthis.setNewPositions(this.treeRoot, this.starting_x, STARTING_Y);\n\t\tthis.animateNewPositions(this.treeRoot);\n\t}\n\n\tsetNewPositions(tree, xPosition, yPosition) {\n\t\tif (tree != null) {\n\t\t\ttree.y = yPosition;\n\t\t\ttree.x = xPosition;\n\t\t\tif (!tree.isLeaf) {\n\t\t\t\tconst leftEdge = xPosition - tree.width / 2;\n\t\t\t\tlet priorWidth = 0;\n\t\t\t\tfor (let i = 0; i < tree.numKeys + 1; i++) {\n\t\t\t\t\tthis.setNewPositions(\n\t\t\t\t\t\ttree.children[i],\n\t\t\t\t\t\tleftEdge + priorWidth + tree.widths[i] / 2,\n\t\t\t\t\t\tyPosition + HEIGHT_DELTA,\n\t\t\t\t\t);\n\t\t\t\t\tpriorWidth += tree.widths[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tanimateNewPositions(tree) {\n\t\tif (tree == null) {\n\t\t\treturn;\n\t\t}\n\t\tlet i;\n\t\tfor (i = 0; i < tree.numKeys + 1; i++) {\n\t\t\tthis.animateNewPositions(tree.children[i]);\n\t\t}\n\t\tthis.cmd(act.move, tree.graphicID, tree.x, tree.y);\n\t}\n\n\tresizeWidths(tree) {\n\t\tif (tree == null) {\n\t\t\treturn 0;\n\t\t}\n\t\tif (tree.isLeaf) {\n\t\t\tfor (let i = 0; i < tree.numKeys + 1; i++) {\n\t\t\t\ttree.widths[i] = 0;\n\t\t\t}\n\t\t\ttree.width = tree.numKeys * WIDTH_PER_ELEM + NODE_SPACING;\n\t\t\treturn tree.width;\n\t\t} else {\n\t\t\tlet treeWidth = 0;\n\t\t\tfor (let i = 0; i < tree.numKeys + 1; i++) {\n\t\t\t\ttree.widths[i] = this.resizeWidths(tree.children[i]);\n\t\t\t\ttreeWidth = treeWidth + tree.widths[i];\n\t\t\t}\n\t\t\ttreeWidth = Math.max(treeWidth, tree.numKeys * WIDTH_PER_ELEM + NODE_SPACING);\n\t\t\ttree.width = treeWidth;\n\t\t\treturn treeWidth;\n\t\t}\n\t}\n}\n\nfunction BTreeNode(id, initialX, initialY) {\n\tthis.widths = [];\n\tthis.keys = [];\n\tthis.children = [];\n\tthis.x = initialX;\n\tthis.y = initialY;\n\tthis.graphicID = id;\n\tthis.numKeys = 1;\n\tthis.isLeaf = true;\n\tthis.parent = null;\n\n\tthis.leftWidth = 0;\n\tthis.rightWidth = 0;\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 30;\n\nconst MAX_LENGTH = 22;\n\nconst PATTERN_START_Y = 100;\n\nconst LAST_TABLE_START_Y = 200;\n\nexport default class BoyerMoore extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Text');\n\n\t\t// Text text field\n\t\tthis.textField = addControlToAlgorithmBar('Text', '');\n\t\tthis.textField.onkeydown = this.returnSubmit(\n\t\t\tthis.textField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\tMAX_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.textField);\n\n\t\taddLabelToAlgorithmBar('Pattern');\n\n\t\t// Pattern text field\n\t\tthis.patternField = addControlToAlgorithmBar('Text', '');\n\t\tthis.patternField.onkeydown = this.returnSubmit(\n\t\t\tthis.patternField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\tMAX_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.patternField);\n\n\t\t// Find button\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Find');\n\t\tthis.findButton.onclick = this.findCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\taddLabelToAlgorithmBar('or');\n\n\t\t// Build Last Occurrence Table button\n\t\tthis.blotButton = addControlToAlgorithmBar('Button', 'Build Last Occurrence Table');\n\t\tthis.blotButton.onclick = this.buildLastOccurrenceTableCallback.bind(this);\n\t\tthis.controls.push(this.blotButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tsetup() {\n\t\tthis.textRowID = [];\n\t\tthis.comparisonMatrixID = [];\n\t\tthis.patternTableLabelID = this.nextIndex++;\n\t\tthis.patternTableCharacterID = [];\n\t\tthis.patternTableIndexID = [];\n\t\tthis.lastTableLabelID = this.nextIndex++;\n\t\tthis.lastTableCharacterID = [];\n\t\tthis.lastTableValueID = [];\n\n\t\tthis.animationManager.startNewAnimation();\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.textRowID = [];\n\t\tthis.comparisonMatrixID = [];\n\t\tthis.patternTableLabelID = this.nextIndex++;\n\t\tthis.patternTableCharacterID = [];\n\t\tthis.patternTableIndexID = [];\n\t\tthis.lastTableLabelID = this.nextIndex++;\n\t\tthis.lastTableCharacterID = [];\n\t\tthis.lastTableValueID = [];\n\t}\n\n\tfindCallback() {\n\t\tif (\n\t\t\tthis.textField.value !== '' &&\n\t\t\tthis.patternField.value !== '' &&\n\t\t\tthis.textField.value.length >= this.patternField.value.length\n\t\t) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst text = this.textField.value;\n\t\t\tconst pattern = this.patternField.value;\n\t\t\tthis.textField.value = '';\n\t\t\tthis.patternField.value = '';\n\t\t\tthis.implementAction(this.find.bind(this), text, pattern);\n\t\t}\n\t}\n\n\tbuildLastOccurrenceTableCallback() {\n\t\tif (this.patternField.value !== '') {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst pattern = this.patternField.value;\n\t\t\tthis.patternField.value = '';\n\t\t\tthis.implementAction(this.onlyBuildLastOccurrenceTable.bind(this), 0, pattern);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tfind(text, pattern) {\n\t\tthis.commands = [];\n\n\t\tconst maxRows = this.getMaxRows(text, pattern);\n\t\tif (maxRows <= 14) {\n\t\t\tthis.cellSize = 30;\n\t\t} else if (maxRows <= 17) {\n\t\t\tthis.cellSize = 25;\n\t\t} else {\n\t\t\tthis.cellSize = 20;\n\t\t}\n\n\t\tthis.textRowID = new Array(text.length);\n\t\tthis.comparisonMatrixID = new Array(maxRows);\n\t\tfor (let i = 0; i < maxRows; i++) {\n\t\t\tthis.comparisonMatrixID[i] = new Array(text.length);\n\t\t}\n\n\t\tfor (let i = 0; i < text.length; i++) {\n\t\t\tconst xpos = i * this.cellSize + ARRAY_START_X;\n\t\t\tconst ypos = ARRAY_START_Y;\n\t\t\tthis.textRowID[i] = this.nextIndex;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.nextIndex,\n\t\t\t\ttext.charAt(i),\n\t\t\t\tthis.cellSize,\n\t\t\t\tthis.cellSize,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.setBackgroundColor, this.nextIndex++, '#D3D3D3');\n\t\t}\n\n\t\tlet xpos;\n\t\tlet ypos;\n\t\tfor (let row = 0; row < maxRows; row++) {\n\t\t\tfor (let col = 0; col < text.length; col++) {\n\t\t\t\txpos = col * this.cellSize + ARRAY_START_X;\n\t\t\t\typos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\tthis.comparisonMatrixID[row][col] = this.nextIndex;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t'',\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\txpos,\n\t\t\t\t\typos,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tconst lastTable = this.buildLastTable(text.length, pattern);\n\n\t\tconst iPointerID = this.nextIndex++;\n\t\tconst jPointerID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tiPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X + (pattern.length - 1) * this.cellSize,\n\t\t\tARRAY_START_Y,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tjPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X + (pattern.length - 1) * this.cellSize,\n\t\t\tARRAY_START_Y + this.cellSize,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\n\t\tlet i = 0;\n\t\tlet j = pattern.length - 1;\n\t\tlet row = 0;\n\t\twhile (i <= text.length - pattern.length) {\n\t\t\tfor (let k = i; k < i + pattern.length; k++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonMatrixID[row][k],\n\t\t\t\t\tpattern.charAt(k - i),\n\t\t\t\t\txpos,\n\t\t\t\t\typos,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t\twhile (j >= 0 && pattern.charAt(j) === text.charAt(i + j)) {\n\t\t\t\tthis.cmd(act.setBackgroundColor, this.comparisonMatrixID[row][i + j], '#2ECC71');\n\t\t\t\tj--;\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tif (j >= 0) {\n\t\t\t\t\tconst xpos = (i + j) * this.cellSize + ARRAY_START_X;\n\t\t\t\t\tthis.cmd(act.move, iPointerID, xpos, ARRAY_START_Y);\n\t\t\t\t\tconst ypos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\t\tthis.cmd(act.move, jPointerID, xpos, ypos);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (j === -1) {\n\t\t\t\ti++;\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.setBackgroundColor, this.comparisonMatrixID[row][i + j], '#E74C3C');\n\t\t\t\tlet shift;\n\t\t\t\tif (text.charAt(i + j) in lastTable) {\n\t\t\t\t\tshift = lastTable[text.charAt(i + j)];\n\t\t\t\t} else {\n\t\t\t\t\tshift = -1;\n\t\t\t\t}\n\t\t\t\tif (shift < j) {\n\t\t\t\t\ti += j - shift;\n\t\t\t\t} else {\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tj = pattern.length - 1;\n\t\t\trow++;\n\t\t\tif (i <= text.length - pattern.length) {\n\t\t\t\tconst xpos = (i + j) * this.cellSize + ARRAY_START_X;\n\t\t\t\tthis.cmd(act.move, iPointerID, xpos, ARRAY_START_Y);\n\t\t\t\tconst ypos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\tthis.cmd(act.move, jPointerID, xpos, ypos);\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.delete, iPointerID);\n\t\tthis.cmd(act.delete, jPointerID);\n\t\treturn this.commands;\n\t}\n\n\tgetMaxRows(text, pattern) {\n\t\tconst lastTable = {};\n\t\tfor (let i = 0; i < pattern.length; i++) {\n\t\t\tlastTable[pattern.charAt(i)] = i;\n\t\t}\n\t\tlet i = 0;\n\t\tlet j = pattern.length - 1;\n\t\tlet maxRows = 0;\n\t\twhile (i <= text.length - pattern.length) {\n\t\t\twhile (j >= 0 && pattern.charAt(j) === text.charAt(i + j)) {\n\t\t\t\tj--;\n\t\t\t}\n\t\t\tif (j === -1) {\n\t\t\t\ti++;\n\t\t\t} else {\n\t\t\t\tlet shift;\n\t\t\t\tif (text.charAt(i + j) in lastTable) {\n\t\t\t\t\tshift = lastTable[text.charAt(i + j)];\n\t\t\t\t} else {\n\t\t\t\t\tshift = -1;\n\t\t\t\t}\n\t\t\t\tif (shift < j) {\n\t\t\t\t\ti += j - shift;\n\t\t\t\t} else {\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tj = pattern.length - 1;\n\t\t\tmaxRows++;\n\t\t}\n\t\treturn maxRows;\n\t}\n\n\tonlyBuildLastOccurrenceTable(textLength, pattern) {\n\t\tthis.commands = [];\n\t\tthis.cellSize = 30;\n\t\tthis.buildLastTable(textLength, pattern);\n\t\treturn this.commands;\n\t}\n\n\tbuildLastTable(textLength, pattern) {\n\t\t// Display labels\n\t\tconst labelsX = ARRAY_START_X + textLength * this.cellSize + 10;\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.patternTableLabelID,\n\t\t\t'Pattern:',\n\t\t\tlabelsX,\n\t\t\tPATTERN_START_Y - 5,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.lastTableLabelID,\n\t\t\t'Last occurence table:',\n\t\t\tlabelsX,\n\t\t\tLAST_TABLE_START_Y + 10,\n\t\t\t0,\n\t\t);\n\n\t\t// Display pattern table\n\t\tconst patternTableStartX = ARRAY_START_X + textLength * this.cellSize + 80;\n\t\tthis.patternTableCharacterID = new Array(pattern.length);\n\t\tthis.patternTableIndexID = new Array(pattern.length);\n\t\tfor (let i = 0; i < pattern.length; i++) {\n\t\t\tconst xpos = patternTableStartX + i * this.cellSize;\n\t\t\tthis.patternTableCharacterID[i] = this.nextIndex;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.nextIndex++,\n\t\t\t\tpattern.charAt(i),\n\t\t\t\tthis.cellSize,\n\t\t\t\tthis.cellSize,\n\t\t\t\txpos,\n\t\t\t\tPATTERN_START_Y,\n\t\t\t);\n\t\t\tthis.patternTableIndexID[i] = this.nextIndex;\n\t\t\tthis.cmd(act.createLabel, this.nextIndex++, i, xpos, PATTERN_START_Y + this.cellSize);\n\t\t}\n\n\t\t// Create and display last occurrence table\n\t\tconst lastTable = {};\n\t\tconst lotStartX = ARRAY_START_X + textLength * this.cellSize + 155;\n\t\tthis.lastTableCharacterID = [];\n\t\tthis.lastTableValueID = [];\n\t\tlet j = 0;\n\n\t\tconst lotPointerID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tlotPointerID,\n\t\t\t'#0000FF',\n\t\t\tpatternTableStartX,\n\t\t\tPATTERN_START_Y,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(act.setHighlight, lotPointerID, 1);\n\n\t\tfor (let i = 0; i < pattern.length; i++) {\n\t\t\tlet xpos = patternTableStartX + i * this.cellSize;\n\t\t\tthis.cmd(act.move, lotPointerID, xpos, PATTERN_START_Y);\n\t\t\tif (lastTable[pattern.charAt(i)]) {\n\t\t\t\tthis.cmd(act.setText, lastTable[pattern.charAt(i)][1], i);\n\t\t\t\tthis.cmd(act.setHighlight, lastTable[pattern.charAt(i)][1], 1);\n\t\t\t\tlastTable[pattern.charAt(i)][0] = i;\n\t\t\t} else {\n\t\t\t\txpos = lotStartX + j * this.cellSize;\n\t\t\t\tthis.lastTableCharacterID.push(this.nextIndex);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.nextIndex,\n\t\t\t\t\tpattern.charAt(i),\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\txpos,\n\t\t\t\t\tLAST_TABLE_START_Y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setBackgroundColor, this.nextIndex++, '#D3D3D3');\n\t\t\t\tthis.lastTableValueID.push(this.nextIndex);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.nextIndex,\n\t\t\t\t\ti,\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\txpos,\n\t\t\t\t\tLAST_TABLE_START_Y + this.cellSize,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setHighlight, this.nextIndex, 1);\n\t\t\t\tj++;\n\t\t\t\tlastTable[pattern.charAt(i)] = [i, this.nextIndex++];\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setHighlight, lastTable[pattern.charAt(i)][1], 0);\n\t\t}\n\n\t\t// Display '*' entry\n\t\tthis.cmd(act.delete, lotPointerID);\n\t\tconst xpos = lotStartX + j * this.cellSize;\n\t\tthis.lastTableCharacterID.push(this.nextIndex);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.nextIndex,\n\t\t\t'*',\n\t\t\tthis.cellSize,\n\t\t\tthis.cellSize,\n\t\t\txpos,\n\t\t\tLAST_TABLE_START_Y,\n\t\t);\n\t\tthis.cmd(act.setBackgroundColor, this.nextIndex++, '#D3D3D3');\n\t\tthis.lastTableValueID.push(this.nextIndex);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.nextIndex++,\n\t\t\t'-1',\n\t\t\tthis.cellSize,\n\t\t\tthis.cellSize,\n\t\t\txpos,\n\t\t\tLAST_TABLE_START_Y + this.cellSize,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\tObject.keys(lastTable).map(char => (lastTable[char] = lastTable[char][0])); // Return only indices\n\t\treturn lastTable;\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.textRowID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.textRowID[i]);\n\t\t}\n\t\tthis.textRowID = [];\n\t\tfor (let i = 0; i < this.comparisonMatrixID.length; i++) {\n\t\t\tfor (let j = 0; j < this.comparisonMatrixID[i].length; j++) {\n\t\t\t\tthis.cmd(act.delete, this.comparisonMatrixID[i][j]);\n\t\t\t}\n\t\t}\n\t\tthis.comparisonMatrixID = [];\n\t\tif (this.patternTableCharacterID.length !== 0) {\n\t\t\tthis.cmd(act.delete, this.patternTableLabelID);\n\t\t}\n\t\tfor (let i = 0; i < this.patternTableCharacterID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.patternTableCharacterID[i]);\n\t\t\tthis.cmd(act.delete, this.patternTableIndexID[i]);\n\t\t}\n\t\tthis.patternTableCharacterID = [];\n\t\tthis.patternTableIndexID = [];\n\t\tif (this.lastTableCharacterID.length !== 0) {\n\t\t\tthis.cmd(act.delete, this.lastTableLabelID);\n\t\t}\n\t\tfor (let i = 0; i < this.lastTableCharacterID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.lastTableCharacterID[i]);\n\t\t\tthis.cmd(act.delete, this.lastTableValueID[i]);\n\t\t}\n\t\tthis.lastTableCharacterID = [];\n\t\tthis.lastTableValueID = [];\n\t\treturn this.commands;\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 30;\n\nconst MAX_LENGTH = 22;\n\nexport default class BruteForce extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Text');\n\n\t\t// Text text field\n\t\tthis.textField = addControlToAlgorithmBar('Text', '');\n\t\tthis.textField.onkeydown = this.returnSubmit(\n\t\t\tthis.textField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\tMAX_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.textField);\n\n\t\taddLabelToAlgorithmBar('Pattern');\n\n\t\t// Pattern text field\n\t\tthis.patternField = addControlToAlgorithmBar('Text', '');\n\t\tthis.patternField.onkeydown = this.returnSubmit(\n\t\t\tthis.patternField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\tMAX_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.patternField);\n\n\t\t// Find button\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Find');\n\t\tthis.findButton.onclick = this.findCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tsetup() {\n\t\tthis.textRowID = [];\n\t\tthis.comparisonMatrixID = [];\n\n\t\tthis.animationManager.startNewAnimation();\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.textRowID = [];\n\t\tthis.comparisonMatrixID = [];\n\t}\n\n\tfindCallback() {\n\t\tif (\n\t\t\tthis.textField.value !== '' &&\n\t\t\tthis.patternField.value !== '' &&\n\t\t\tthis.textField.value.length >= this.patternField.value.length\n\t\t) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst text = this.textField.value;\n\t\t\tconst pattern = this.patternField.value;\n\t\t\tthis.textField.value = '';\n\t\t\tthis.patternField.value = '';\n\t\t\tthis.implementAction(this.find.bind(this), text, pattern);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tfind(text, pattern) {\n\t\tthis.commands = [];\n\n\t\tconst maxRows = text.length - pattern.length + 1;\n\t\tif (maxRows <= 14) {\n\t\t\tthis.cellSize = 30;\n\t\t} else if (maxRows <= 17) {\n\t\t\tthis.cellSize = 25;\n\t\t} else {\n\t\t\tthis.cellSize = 20;\n\t\t}\n\n\t\tthis.textRowID = new Array(text.length);\n\t\tthis.comparisonMatrixID = new Array(maxRows);\n\t\tfor (let i = 0; i < maxRows; i++) {\n\t\t\tthis.comparisonMatrixID[i] = new Array(text.length);\n\t\t}\n\n\t\tlet xpos, ypos;\n\n\t\tfor (let i = 0; i < text.length; i++) {\n\t\t\txpos = i * this.cellSize + ARRAY_START_X;\n\t\t\typos = ARRAY_START_Y;\n\t\t\tthis.textRowID[i] = this.nextIndex;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.nextIndex,\n\t\t\t\ttext.charAt(i),\n\t\t\t\tthis.cellSize,\n\t\t\t\tthis.cellSize,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.setBackgroundColor, this.nextIndex++, '#D3D3D3');\n\t\t}\n\n\t\tfor (let row = 0; row < maxRows; row++) {\n\t\t\tfor (let col = 0; col < text.length; col++) {\n\t\t\t\txpos = col * this.cellSize + ARRAY_START_X;\n\t\t\t\typos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\tthis.comparisonMatrixID[row][col] = this.nextIndex;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t'',\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\txpos,\n\t\t\t\t\typos,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tconst iPointerID = this.nextIndex++;\n\t\tconst jPointerID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tiPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tjPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y + this.cellSize,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\n\t\tlet i = 0;\n\t\tlet j = 0;\n\t\tlet row = 0;\n\t\twhile (i <= text.length - pattern.length) {\n\t\t\tfor (let k = i; k < i + pattern.length; k++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonMatrixID[row][k],\n\t\t\t\t\tpattern.charAt(k - i),\n\t\t\t\t\txpos,\n\t\t\t\t\typos,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t\twhile (j < pattern.length && pattern.charAt(j) === text.charAt(i + j)) {\n\t\t\t\tthis.cmd(act.setBackgroundColor, this.comparisonMatrixID[row][i + j], '#2ECC71');\n\t\t\t\tj++;\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tif (j !== pattern.length) {\n\t\t\t\t\tconst xpos = (i + j) * this.cellSize + ARRAY_START_X;\n\t\t\t\t\tthis.cmd(act.move, iPointerID, xpos, ARRAY_START_Y);\n\t\t\t\t\tconst ypos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\t\tthis.cmd(act.move, jPointerID, xpos, ypos);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (j !== pattern.length) {\n\t\t\t\tthis.cmd(act.setBackgroundColor, this.comparisonMatrixID[row][i + j], '#E74C3C');\n\t\t\t}\n\t\t\ti++;\n\t\t\tj = 0;\n\t\t\trow++;\n\t\t\tif (i <= text.length - pattern.length) {\n\t\t\t\tconst xpos = (i + j) * this.cellSize + ARRAY_START_X;\n\t\t\t\tthis.cmd(act.move, iPointerID, xpos, ARRAY_START_Y);\n\t\t\t\tconst ypos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\tthis.cmd(act.move, jPointerID, xpos, ypos);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.delete, iPointerID);\n\t\tthis.cmd(act.delete, jPointerID);\n\t\treturn this.commands;\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.textRowID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.textRowID[i]);\n\t\t}\n\t\tthis.textRowID = [];\n\t\tfor (let i = 0; i < this.comparisonMatrixID.length; i++) {\n\t\t\tfor (let j = 0; j < this.comparisonMatrixID[i].length; j++) {\n\t\t\t\tthis.cmd(act.delete, this.comparisonMatrixID[i][j]);\n\t\t\t}\n\t\t}\n\t\tthis.comparisonMatrixID = [];\n\t\treturn this.commands;\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddCheckboxToAlgorithmBar,\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 200;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nlet lastSwapEnabled = true;\n\nexport default class BubbleSort extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Comma separated list (e.g. \"3,1,2\", max 18 elements)');\n\n\t\t// List text field\n\t\tthis.listField = addControlToAlgorithmBar('Text', '');\n\t\tthis.listField.onkeydown = this.returnSubmit(\n\t\t\tthis.listField,\n\t\t\tthis.sortCallback.bind(this),\n\t\t\t60,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.listField);\n\n\t\t// Sort button\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Sort');\n\t\tthis.findButton.onclick = this.sortCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Last swap optimization toggle\n\t\tthis.lastSwapCheckbox = addCheckboxToAlgorithmBar('Enable last swap optimization', true);\n\t\tthis.lastSwapCheckbox.onclick = this.toggleLastSwap.bind(this);\n\t\tthis.controls.push(this.lastSwapCheckbox);\n\t}\n\n\tsetup() {\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\n\t\tthis.animationManager.startNewAnimation();\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\t}\n\n\tsortCallback() {\n\t\tif (this.listField.value !== '') {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst list = this.listField.value;\n\t\t\tthis.listField.value = '';\n\t\t\tthis.implementAction(this.sort.bind(this), list);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\ttoggleLastSwap() {\n\t\tlastSwapEnabled = !lastSwapEnabled;\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.arrayID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t}\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\treturn this.commands;\n\t}\n\n\tsort(params) {\n\t\tthis.commands = [];\n\n\t\tthis.arrayID = [];\n\t\tthis.arrayData = params\n\t\t\t.split(',')\n\t\t\t.map(Number)\n\t\t\t.filter(x => !Number.isNaN(x))\n\t\t\t.slice(0, 18);\n\t\tconst length = this.arrayData.length;\n\t\tconst elemCounts = new Map();\n\t\tconst letterMap = new Map();\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst count = elemCounts.has(this.arrayData[i]) ? elemCounts.get(this.arrayData[i]) : 0;\n\t\t\tif (count > 0) {\n\t\t\t\tletterMap.set(this.arrayData[i], 'a');\n\t\t\t}\n\t\t\telemCounts.set(this.arrayData[i], count + 1);\n\t\t}\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tconst xpos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = ARRAY_START_Y;\n\n\t\t\tlet displayData = this.arrayData[i].toString();\n\t\t\tif (letterMap.has(this.arrayData[i])) {\n\t\t\t\tconst currChar = letterMap.get(this.arrayData[i]);\n\t\t\t\tdisplayData += currChar;\n\t\t\t\tletterMap.set(this.arrayData[i], String.fromCharCode(currChar.charCodeAt(0) + 1));\n\t\t\t}\n\t\t\tthis.displayData[i] = displayData;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\tdisplayData,\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t}\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.iPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y,\n\t\t);\n\t\tthis.cmd(act.setHighlight, this.iPointerID, 1);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.jPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X + ARRAY_ELEM_WIDTH,\n\t\t\tARRAY_START_Y,\n\t\t);\n\t\tthis.cmd(act.setHighlight, this.jPointerID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tlet sorted = true;\n\t\tlet end = this.arrayData.length - 1;\n\t\tlet lastSwapped = 0;\n\t\tdo {\n\t\t\tsorted = true;\n\t\t\tfor (let i = 0; i < end; i++) {\n\t\t\t\tthis.movePointers(i, i + 1);\n\t\t\t\tif (this.arrayData[i] > this.arrayData[i + 1]) {\n\t\t\t\t\tthis.swap(i, i + 1);\n\t\t\t\t\tsorted = false;\n\t\t\t\t\tlastSwapped = i;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (lastSwapEnabled) {\n\t\t\t\tend = lastSwapped;\n\t\t\t} else {\n\t\t\t\tend--;\n\t\t\t}\n\t\t\tif (!sorted) {\n\t\t\t\tfor (let i = end + 1; i < this.arrayData.length; i++) {\n\t\t\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#2ECC71');\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t} while (!sorted);\n\n\t\tthis.cmd(act.delete, this.iPointerID);\n\t\tthis.cmd(act.delete, this.jPointerID);\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = 0; i < this.arrayData.length; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#2ECC71');\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tmovePointers(i, j) {\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.move, this.iPointerID, iXPos, ARRAY_START_Y);\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.move, this.jPointerID, jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t}\n\n\tswap(i, j) {\n\t\t// Change pointer colors to red\n\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#FF0000');\n\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#FF0000');\n\t\t// Create temporary labels and remove text in array\n\t\tconst iLabelID = this.nextIndex++;\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, iLabelID, this.displayData[i], iXPos, ARRAY_START_Y);\n\t\tconst jLabelID = this.nextIndex++;\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, jLabelID, this.displayData[j], jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\tthis.cmd(act.setText, this.arrayID[j], '');\n\t\t// Move labels\n\t\tthis.cmd(act.move, iLabelID, jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.move, jLabelID, iXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t\t// Set text in array and delete temporary labels\n\t\tthis.cmd(act.setText, this.arrayID[i], this.displayData[j]);\n\t\tthis.cmd(act.setText, this.arrayID[j], this.displayData[i]);\n\t\tthis.cmd(act.delete, iLabelID);\n\t\tthis.cmd(act.delete, jLabelID);\n\t\t// Swap data in backend array\n\t\tlet temp = this.arrayData[i];\n\t\tthis.arrayData[i] = this.arrayData[j];\n\t\tthis.arrayData[j] = temp;\n\t\t// Swap data in display array\n\t\ttemp = this.displayData[i];\n\t\tthis.displayData[i] = this.displayData[j];\n\t\tthis.displayData[j] = temp;\n\t\t// Reset pointer colors back to blue\n\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#0000FF');\n\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#0000FF');\n\t\tthis.cmd(act.step);\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm';\nimport { act } from '../anim/AnimationMain';\n\nconst LINKED_LIST_START_X = 100;\nconst LINKED_LIST_START_Y = 200;\nconst LINKED_LIST_ELEM_WIDTH = 70;\nconst LINKED_LIST_ELEM_HEIGHT = 30;\n\nconst LINKED_LIST_INSERT_X = 200;\nconst LINKED_LIST_INSERT_Y = 50;\n\nconst LINKED_LIST_ELEMS_PER_LINE = 9;\nconst LINKED_LIST_ELEM_SPACING = 100;\nconst LINKED_LIST_LINE_SPACING = 100;\n\nconst PUSH_LABEL_X = 50;\nconst PUSH_LABEL_Y = 30;\nconst PUSH_ELEMENT_X = 120;\nconst PUSH_ELEMENT_Y = 30;\n\nconst SIZE = 9;\n\nexport default class CircularlyLinkedList extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t\tthis.initialIndex = this.nextIndex;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tconst addVerticalGroup = addGroupToAlgorithmBar(false);\n\t\tconst addTopHorizontalGroup = addGroupToAlgorithmBar(true, addVerticalGroup);\n\t\tconst addBottomHorizontalGroup = addGroupToAlgorithmBar(true, addVerticalGroup);\n\n\t\taddLabelToAlgorithmBar('Add', addTopHorizontalGroup);\n\n\t\t// Add's value text field\n\t\tthis.addValueField = addControlToAlgorithmBar('Text', '', addTopHorizontalGroup);\n\t\tthis.addValueField.onkeydown = this.returnSubmit(\n\t\t\tthis.addValueField,\n\t\t\t() => this.addIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.addValueField);\n\n\t\taddLabelToAlgorithmBar('at index', addTopHorizontalGroup);\n\n\t\t// Add's index text field\n\t\tthis.addIndexField = addControlToAlgorithmBar('Text', '', addTopHorizontalGroup);\n\t\tthis.addIndexField.onkeydown = this.returnSubmit(\n\t\t\tthis.addIndexField,\n\t\t\t() => this.addIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.addIndexField);\n\n\t\t// Add to front button\n\t\tthis.addFrontButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add to Front',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addFrontButton.onclick = this.addFrontCallback.bind(this);\n\t\tthis.controls.push(this.addFrontButton);\n\n\t\t// Add to back button\n\t\tthis.addBackButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add to Back',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addBackButton.onclick = () => this.addBackCallback();\n\t\tthis.controls.push(this.addBackButton);\n\n\t\taddLabelToAlgorithmBar('or', addBottomHorizontalGroup);\n\n\t\t// Add at index button\n\t\tthis.addIndexButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add at Index',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addIndexButton.onclick = this.addIndexCallback.bind(this);\n\t\tthis.controls.push(this.addIndexButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst removeVerticalGroup = addGroupToAlgorithmBar(false);\n\t\tconst removeTopHorizontalGroup = addGroupToAlgorithmBar(true, removeVerticalGroup);\n\t\tconst removeBottomHorizontalGroup = addGroupToAlgorithmBar(true, removeVerticalGroup);\n\n\t\taddLabelToAlgorithmBar('Index', removeTopHorizontalGroup);\n\n\t\t// Remove's index text field\n\t\tthis.removeField = addControlToAlgorithmBar('Text', '', removeTopHorizontalGroup);\n\t\tthis.removeField.onkeydown = this.returnSubmit(\n\t\t\tthis.removeField,\n\t\t\t() => this.removeIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.removeField);\n\n\t\t// Remove from index button\n\t\tthis.removeIndexButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Index',\n\t\t\tremoveTopHorizontalGroup,\n\t\t);\n\t\tthis.removeIndexButton.onclick = () => this.removeIndexCallback();\n\t\tthis.controls.push(this.removeIndexButton);\n\n\t\taddLabelToAlgorithmBar('or', removeBottomHorizontalGroup);\n\n\t\t// Remove from front button\n\t\tthis.removeFrontButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Front',\n\t\t\tremoveBottomHorizontalGroup,\n\t\t);\n\t\tthis.removeFrontButton.onclick = () => this.removeFrontCallback();\n\t\tthis.controls.push(this.removeFrontButton);\n\n\t\t// Remove from back button\n\t\tthis.removeBackButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Back',\n\t\t\tremoveBottomHorizontalGroup,\n\t\t);\n\t\tthis.removeBackButton.onclick = () => this.removeBackCallback();\n\t\tthis.controls.push(this.removeBackButton);\n\n\t\t// Get's index text field\n\t\t// this.getField = addControlToAlgorithmBar(\"Text\", \"\");\n\t\t// this.getField.onkeydown = this.returnSubmit(this.getField, () => this.getCallback(), 4, true);\n\t\t// this.controls.push(this.getField);\n\n\t\t// Get button\n\t\t// this.getButton = addControlToAlgorithmBar(\"Button\", \"Get\");\n\t\t// this.getButton.onclick = () => this.getCallback();\n\t\t// this.controls.push(this.getButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = () => this.clearCallback();\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.linkedListElemID = new Array(SIZE);\n\n\t\tthis.arrayData = new Array(SIZE);\n\t\tthis.size = 0;\n\t\tthis.leftoverLabelID = this.nextIndex++;\n\n\t\tthis.cmd(act.createLabel, this.leftoverLabelID, '', PUSH_LABEL_X, PUSH_LABEL_Y);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.size = 0;\n\t\tthis.nextIndex = this.initialIndex;\n\t}\n\n\taddIndexCallback() {\n\t\tif (\n\t\t\tthis.addValueField.value !== '' &&\n\t\t\tthis.addIndexField.value !== '' &&\n\t\t\tthis.size < SIZE\n\t\t) {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tconst index = parseInt(this.addIndexField.value);\n\t\t\tif (index >= 0 && index <= this.size) {\n\t\t\t\tthis.addValueField.value = '';\n\t\t\t\tthis.addIndexField.value = '';\n\t\t\t\tthis.implementAction(this.add.bind(this), addVal, index);\n\t\t\t}\n\t\t}\n\t}\n\n\taddFrontCallback() {\n\t\tif (this.addValueField.value !== '' && this.size < SIZE) {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tthis.addValueField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, 0);\n\t\t}\n\t}\n\n\taddBackCallback() {\n\t\tif (this.addValueField.value !== '' && this.size < SIZE) {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tthis.addValueField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, this.size);\n\t\t}\n\t}\n\n\tremoveIndexCallback() {\n\t\tif (this.removeField.value !== '') {\n\t\t\tconst index = this.removeField.value;\n\t\t\tif (index >= 0 && index < this.size) {\n\t\t\t\tthis.removeField.value = '';\n\t\t\t\tthis.implementAction(this.remove.bind(this), index);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveFrontCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), 0);\n\t\t}\n\t}\n\n\tremoveBackCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), this.size - 1);\n\t\t}\n\t}\n\n\t// CircularlySinglyLinkedList.prototype.getCallback = function()\n\t// {\n\t//     if (this.getField.value != \"\" && this.getField.value > 0 && this.getField.value < this.size)\n\t//     {\n\t//         this.implementAction(this.get.bind(this), \"\");\n\t//     }\n\t// }\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearAll.bind(this));\n\t}\n\n\tadd(elemToAdd, index) {\n\t\tthis.commands = [];\n\n\t\tconst labPushID = this.nextIndex++;\n\t\tconst labPushValID = this.nextIndex++;\n\n\t\t// Order of data should behave as normal\n\t\tfor (let i = this.size - 1; i >= index; i--) {\n\t\t\tthis.arrayData[i + 1] = this.arrayData[i];\n\t\t}\n\t\tthis.arrayData[index] = elemToAdd;\n\n\t\t// Adding to the front or back using O(1) trick, so new node will be added to index 1\n\t\tif (this.size !== 0 && (index === 0 || index === this.size)) {\n\t\t\t// Move over all node IDs but the first\n\t\t\tfor (let i = this.size - 1; i >= 1; i--) {\n\t\t\t\tthis.linkedListElemID[i + 1] = this.linkedListElemID[i];\n\t\t\t}\n\t\t\t// Place new node's ID at index 1\n\t\t\tthis.linkedListElemID[1] = this.nextIndex++;\n\t\t}\n\t\t// Adding first node or to the middle, so new node will be placed normally\n\t\telse {\n\t\t\tfor (let i = this.size - 1; i >= index; i--) {\n\t\t\t\tthis.linkedListElemID[i + 1] = this.linkedListElemID[i];\n\t\t\t}\n\t\t\tthis.linkedListElemID[index] = this.nextIndex++;\n\t\t}\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tif (this.size !== 0 && (index === 0 || index === this.size)) {\n\t\t\tthis.cmd(\n\t\t\t\tact.createCircularlyLinkedListNode,\n\t\t\t\tthis.linkedListElemID[1],\n\t\t\t\t'',\n\t\t\t\tLINKED_LIST_ELEM_WIDTH,\n\t\t\t\tLINKED_LIST_ELEM_HEIGHT,\n\t\t\t\tLINKED_LIST_INSERT_X,\n\t\t\t\tLINKED_LIST_INSERT_Y,\n\t\t\t);\n\t\t} else {\n\t\t\tthis.cmd(\n\t\t\t\tact.createCircularlyLinkedListNode,\n\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t'',\n\t\t\t\tLINKED_LIST_ELEM_WIDTH,\n\t\t\t\tLINKED_LIST_ELEM_HEIGHT,\n\t\t\t\tLINKED_LIST_INSERT_X,\n\t\t\t\tLINKED_LIST_INSERT_Y,\n\t\t\t);\n\t\t}\n\t\tthis.cmd(act.createLabel, labPushID, 'Adding Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPushValID, elemToAdd, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\n\t\tif (this.size === 0) {\n\t\t\tthis.cmd(act.move, labPushValID, LINKED_LIST_INSERT_X, LINKED_LIST_INSERT_Y);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tthis.cmd(act.setText, this.linkedListElemID[0], elemToAdd);\n\t\t\tthis.cmd(act.delete, labPushValID);\n\t\t\tthis.cmd(act.connectCurve, this.linkedListElemID[0], this.linkedListElemID[0], -0.5);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tthis.size = this.size + 1;\n\t\t\tthis.resetNodePositions();\n\t\t} else {\n\t\t\tif (index === 0 || index === this.size) {\n\t\t\t\t// Move label from first node to new node\n\t\t\t\tconst labCopiedValID = this.nextIndex++;\n\t\t\t\tconst copiedData = index === 0 ? this.arrayData[1] : this.arrayData[0];\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tlabCopiedValID,\n\t\t\t\t\tcopiedData,\n\t\t\t\t\tLINKED_LIST_START_X,\n\t\t\t\t\tLINKED_LIST_START_Y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.move, labCopiedValID, LINKED_LIST_INSERT_X, LINKED_LIST_INSERT_Y);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(act.setText, this.linkedListElemID[1], copiedData);\n\t\t\t\tthis.cmd(act.delete, labCopiedValID);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t// Move label for new data to the first node\n\t\t\t\tthis.cmd(act.move, labPushValID, LINKED_LIST_START_X, LINKED_LIST_START_Y);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(act.setText, this.linkedListElemID[0], elemToAdd);\n\t\t\t\tthis.cmd(act.delete, labPushValID);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t// Change pointers\n\t\t\t\tif (this.size === 1) {\n\t\t\t\t\t// Case where we're adding the second node\n\t\t\t\t\tthis.cmd(act.disconnect, this.linkedListElemID[0], this.linkedListElemID[0]); // Disconnect head node from itself\n\t\t\t\t\tthis.cmd(act.connect, this.linkedListElemID[0], this.linkedListElemID[1]); // Connect head node to new node\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.connectCurve,\n\t\t\t\t\t\tthis.linkedListElemID[1],\n\t\t\t\t\t\tthis.linkedListElemID[0],\n\t\t\t\t\t\t-0.5,\n\t\t\t\t\t); // Connect new node to head node\n\t\t\t\t} else {\n\t\t\t\t\t// Other cases\n\t\t\t\t\tthis.cmd(act.disconnect, this.linkedListElemID[0], this.linkedListElemID[2]); // Disconnect head from old second node\n\t\t\t\t\tthis.cmd(act.connect, this.linkedListElemID[0], this.linkedListElemID[1]); // Connect head node to new node\n\t\t\t\t\tthis.cmd(act.connect, this.linkedListElemID[1], this.linkedListElemID[2]); // Connect new node to old second node\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.size = this.size + 1;\n\t\t\t\tthis.resetNodePositions();\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t// If adding to the back, \"move head over\" (rotate elements backwards)\n\t\t\t\tif (index === this.size - 1) {\n\t\t\t\t\t// We increment size above, so subtract one to check if adding to back\n\t\t\t\t\tlet i;\n\t\t\t\t\tconst firstNodeID = this.linkedListElemID[0];\n\t\t\t\t\tfor (i = 0; i < this.size - 1; i++) {\n\t\t\t\t\t\tthis.linkedListElemID[i] = this.linkedListElemID[i + 1];\n\t\t\t\t\t}\n\t\t\t\t\tthis.linkedListElemID[this.size - 1] = firstNodeID;\n\n\t\t\t\t\tconst lastX =\n\t\t\t\t\t\t((this.size - 1) % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING +\n\t\t\t\t\t\tLINKED_LIST_START_X;\n\t\t\t\t\tconst lastY =\n\t\t\t\t\t\tMath.floor((this.size - 1) / LINKED_LIST_ELEMS_PER_LINE) *\n\t\t\t\t\t\t\tLINKED_LIST_LINE_SPACING +\n\t\t\t\t\t\tLINKED_LIST_START_Y;\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tthis.linkedListElemID[i],\n\t\t\t\t\t\t(LINKED_LIST_START_X + lastX) / 2,\n\t\t\t\t\t\tlastY + LINKED_LIST_ELEM_HEIGHT * 3,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t\tfor (let i = 0; i < this.size - 1; i++) {\n\t\t\t\t\t\tconst nextX =\n\t\t\t\t\t\t\t(i % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING +\n\t\t\t\t\t\t\tLINKED_LIST_START_X;\n\t\t\t\t\t\tconst nextY =\n\t\t\t\t\t\t\tMath.floor(i / LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_LINE_SPACING +\n\t\t\t\t\t\t\tLINKED_LIST_START_Y;\n\t\t\t\t\t\tthis.cmd(act.move, this.linkedListElemID[i], nextX, nextY);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.disconnect,\n\t\t\t\t\t\tthis.linkedListElemID[this.size - 2],\n\t\t\t\t\t\tthis.linkedListElemID[this.size - 1],\n\t\t\t\t\t); // Disconnect curved pointer\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.connect,\n\t\t\t\t\t\tthis.linkedListElemID[this.size - 2],\n\t\t\t\t\t\tthis.linkedListElemID[this.size - 1],\n\t\t\t\t\t); // Connect with normal pointer\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.disconnect,\n\t\t\t\t\t\tthis.linkedListElemID[this.size - 1],\n\t\t\t\t\t\tthis.linkedListElemID[0],\n\t\t\t\t\t); // Disconnect normal pointer\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.connectCurve,\n\t\t\t\t\t\tthis.linkedListElemID[this.size - 1],\n\t\t\t\t\t\tthis.linkedListElemID[0],\n\t\t\t\t\t\t-0.5,\n\t\t\t\t\t); // Connect with curved pointer\n\t\t\t\t\tthis.cmd(act.move, this.linkedListElemID[i], lastX, lastY);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.move, labPushValID, LINKED_LIST_INSERT_X, LINKED_LIST_INSERT_Y);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(act.setText, this.linkedListElemID[index], elemToAdd);\n\t\t\t\tthis.cmd(act.delete, labPushValID);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\n\t\t\t\tthis.size = this.size + 1;\n\t\t\t\tthis.resetNodePositions();\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.delete, labPushID);\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tremove(index) {\n\t\tthis.commands = [];\n\n\t\tindex = parseInt(index);\n\t\tconst labPopID = this.nextIndex++;\n\t\tconst labPopValID = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tconst nodePosX = LINKED_LIST_START_X + LINKED_LIST_ELEM_SPACING * index;\n\t\tconst nodePosY = LINKED_LIST_START_Y;\n\t\tthis.cmd(act.createLabel, labPopID, 'Removing Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPopValID, this.arrayData[index], nodePosX, nodePosY);\n\t\tthis.cmd(act.move, labPopValID, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\n\t\tif (this.size !== 1) {\n\t\t\tif (index === 0) {\n\t\t\t\t// O(1) remove from front trick\n\t\t\t\tconst labCopiedValID = this.nextIndex++;\n\t\t\t\tconst secondNodeX = LINKED_LIST_START_X + LINKED_LIST_ELEM_SPACING;\n\t\t\t\tconst secondNodeY = LINKED_LIST_START_Y;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tlabCopiedValID,\n\t\t\t\t\tthis.arrayData[1],\n\t\t\t\t\tsecondNodeX,\n\t\t\t\t\tsecondNodeY,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.move, labCopiedValID, LINKED_LIST_START_X, LINKED_LIST_START_Y);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(act.setText, this.linkedListElemID[0], this.arrayData[1]);\n\t\t\t\tthis.cmd(act.delete, labCopiedValID);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\tthis.linkedListElemID[1],\n\t\t\t\t\tsecondNodeX,\n\t\t\t\t\tsecondNodeY - LINKED_LIST_ELEM_HEIGHT * 2,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(act.disconnect, this.linkedListElemID[0], this.linkedListElemID[1]);\n\t\t\t\tif (this.size === 2) {\n\t\t\t\t\t// Only one node will remain, connect it to itself\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.connectCurve,\n\t\t\t\t\t\tthis.linkedListElemID[0],\n\t\t\t\t\t\tthis.linkedListElemID[0],\n\t\t\t\t\t\t-0.5,\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\t// Normal remove\n\t\t\t\t\tthis.cmd(act.connect, this.linkedListElemID[0], this.linkedListElemID[2]);\n\t\t\t\t}\n\t\t\t} else if (index === this.size - 1) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tif (this.size === 2) {\n\t\t\t\t\t// Only one node will remain, connect it to itself\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.connectCurve,\n\t\t\t\t\t\tthis.linkedListElemID[0],\n\t\t\t\t\t\tthis.linkedListElemID[0],\n\t\t\t\t\t\t-0.5,\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\t// Normal remove\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.connectCurve,\n\t\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\t\tthis.linkedListElemID[0],\n\t\t\t\t\t\t-0.5,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst xPos =\n\t\t\t\t\t(index % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING +\n\t\t\t\t\tLINKED_LIST_START_X;\n\t\t\t\tconst yPos = LINKED_LIST_START_Y - LINKED_LIST_ELEM_HEIGHT * 2;\n\t\t\t\tthis.cmd(act.move, this.linkedListElemID[index], xPos, yPos);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\n\t\t\tconst removedNodeIndex = index === 0 ? 1 : index; // If deleting from front, we need to remove the second node\n\t\t\tthis.cmd(act.delete, this.linkedListElemID[removedNodeIndex]);\n\t\t\tfor (let i = removedNodeIndex; i < this.size; i++) {\n\t\t\t\tthis.linkedListElemID[i] = this.linkedListElemID[i + 1];\n\t\t\t}\n\t\t} else {\n\t\t\tthis.cmd(act.delete, this.linkedListElemID[0]);\n\t\t}\n\n\t\tfor (let i = index; i < this.size; i++) {\n\t\t\tthis.arrayData[i] = this.arrayData[i + 1];\n\t\t}\n\t\tthis.size = this.size - 1;\n\t\tthis.resetNodePositions();\n\n\t\tthis.cmd(act.delete, labPopValID);\n\t\tthis.cmd(act.delete, labPopID);\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tresetNodePositions() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tconst nextX =\n\t\t\t\t(i % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING + LINKED_LIST_START_X;\n\t\t\tconst nextY =\n\t\t\t\tMath.floor(i / LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_LINE_SPACING +\n\t\t\t\tLINKED_LIST_START_Y;\n\t\t\tthis.cmd(act.move, this.linkedListElemID[i], nextX, nextY);\n\t\t}\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.delete, this.linkedListElemID[i]);\n\t\t}\n\t\tthis.size = 0;\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddRadioButtonGroupToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst MAX_HASH_LENGTH = 10;\n\nconst HASH_NUMBER_START_X = 200;\nconst HASH_X_DIFF = 7;\nconst HASH_NUMBER_START_Y = 10;\nconst HASH_ADD_START_Y = 30;\nconst HASH_INPUT_START_X = 60;\nconst HASH_INPUT_X_DIFF = 7;\nconst HASH_INPUT_START_Y = 45;\nconst HASH_ADD_LINE_Y = 42;\nconst HASH_RESULT_Y = 50;\nconst ELF_HASH_SHIFT = 10;\n\nconst HASH_LABEL_X = 300;\nconst HASH_LABEL_Y = 30;\nconst HASH_LABEL_DELTA_X = 50;\n\nconst HIGHLIGHT_COLOR = '#0000FF';\n\nexport default class Hash extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.hashingIntegers = true;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tthis.insertField = addControlToAlgorithmBar('Text', '');\n\t\tthis.insertField.size = MAX_HASH_LENGTH;\n\t\tthis.insertField.onkeydown = this.returnSubmit(\n\t\t\tthis.insertField,\n\t\t\tthis.insertCallback.bind(this),\n\t\t\tMAX_HASH_LENGTH,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.insertField);\n\n\t\tthis.insertButton = addControlToAlgorithmBar('Button', 'Insert');\n\t\tthis.insertButton.onclick = this.insertCallback.bind(this);\n\t\tthis.controls.push(this.insertButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.deleteField = addControlToAlgorithmBar('Text', '');\n\t\tthis.deleteField.size = MAX_HASH_LENGTH;\n\t\tthis.deleteField.onkeydown = this.returnSubmit(\n\t\t\tthis.insertField,\n\t\t\tthis.deleteCallback.bind(this),\n\t\t\tMAX_HASH_LENGTH,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.deleteField);\n\n\t\tthis.deleteButton = addControlToAlgorithmBar('Button', 'Delete');\n\t\tthis.deleteButton.onclick = this.deleteCallback.bind(this);\n\t\tthis.controls.push(this.deleteButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.findField = addControlToAlgorithmBar('Text', '');\n\t\tthis.findField.size = MAX_HASH_LENGTH;\n\t\tthis.findField.onkeydown = this.returnSubmit(\n\t\t\tthis.insertField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\tMAX_HASH_LENGTH,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.findField);\n\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Find');\n\t\tthis.findButton.onclick = this.findCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst radioButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t['Hash Integer', 'Hash Strings'],\n\t\t\t'HashType',\n\t\t);\n\t\tthis.hashIntegerButton = radioButtonList[0];\n\t\tthis.hashIntegerButton.onclick = this.changeHashTypeCallback.bind(this, true);\n\t\tthis.controls.push(this.hashIntegerButton);\n\t\tthis.hashStringButton = radioButtonList[1];\n\t\tthis.hashStringButton.onclick = this.changeHashTypeCallback.bind(this, false);\n\t\tthis.hashIntegerButton.checked = true;\n\t\tthis.controls.push(this.hashStringButton);\n\t}\n\n\t// Do this extra level of wrapping to get undo to work properly.\n\t// (also, so that we only implement the action if we are changing the\n\t// radio button)\n\tchangeHashTypeCallback(newHashingIntegers) {\n\t\tif (this.hashingIntegers !== newHashingIntegers) {\n\t\t\tthis.implementAction(this.changeHashType.bind(this), newHashingIntegers);\n\t\t}\n\t}\n\n\tchangeHashType(newHashingIntegerValue) {\n\t\tthis.hashingIntegers = newHashingIntegerValue;\n\t\tif (this.hashingIntegers) {\n\t\t\tthis.hashIntegerButton.checked = true;\n\t\t\tthis.insertField.onkeydown = this.returnSubmit(\n\t\t\t\tthis.insertField,\n\t\t\t\tthis.insertCallback.bind(this),\n\t\t\t\tMAX_HASH_LENGTH,\n\t\t\t\ttrue,\n\t\t\t);\n\t\t\tthis.deleteField.onkeydown = this.returnSubmit(\n\t\t\t\tthis.insertField,\n\t\t\t\tthis.deleteCallback.bind(this),\n\t\t\t\tMAX_HASH_LENGTH,\n\t\t\t\ttrue,\n\t\t\t);\n\t\t\tthis.findField.onkeydown = this.returnSubmit(\n\t\t\t\tthis.insertField,\n\t\t\t\tthis.findCallback.bind(this),\n\t\t\t\tMAX_HASH_LENGTH,\n\t\t\t\ttrue,\n\t\t\t);\n\t\t} else {\n\t\t\tthis.hashStringButton.checked = true;\n\t\t\tthis.insertField.onkeydown = this.returnSubmit(\n\t\t\t\tthis.insertField,\n\t\t\t\tthis.insertCallback.bind(this),\n\t\t\t\tMAX_HASH_LENGTH,\n\t\t\t\tfalse,\n\t\t\t);\n\t\t\tthis.deleteField.onkeydown = this.returnSubmit(\n\t\t\t\tthis.insertField,\n\t\t\t\tthis.deleteCallback.bind(this),\n\t\t\t\tMAX_HASH_LENGTH,\n\t\t\t\tfalse,\n\t\t\t);\n\t\t\tthis.findField.onkeydown = this.returnSubmit(\n\t\t\t\tthis.insertField,\n\t\t\t\tthis.findCallback.bind(this),\n\t\t\t\tMAX_HASH_LENGTH,\n\t\t\t\tfalse,\n\t\t\t);\n\t\t}\n\t\treturn this.resetAll();\n\t}\n\n\tdoHash(input) {\n\t\tif (this.hashingIntegers) {\n\t\t\tconst labelID1 = this.nextIndex++;\n\t\t\tconst labelID2 = this.nextIndex++;\n\t\t\tconst highlightID = this.nextIndex++;\n\t\t\tconst index = parseInt(input) % this.table_size;\n\t\t\tthis.currHash = parseInt(input);\n\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tlabelID1,\n\t\t\t\tinput + ' % ' + String(this.table_size) + ' = ',\n\t\t\t\tHASH_LABEL_X,\n\t\t\t\tHASH_LABEL_Y,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tlabelID2,\n\t\t\t\tindex,\n\t\t\t\tHASH_LABEL_X + HASH_LABEL_DELTA_X,\n\t\t\t\tHASH_LABEL_Y,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\thighlightID,\n\t\t\t\tHIGHLIGHT_COLOR,\n\t\t\t\tHASH_LABEL_X + HASH_LABEL_DELTA_X,\n\t\t\t\tHASH_LABEL_Y,\n\t\t\t);\n\t\t\tthis.cmd(act.move, highlightID, this.indexXPos[index], this.indexYPos[index]);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.delete, labelID1);\n\t\t\tthis.cmd(act.delete, labelID2);\n\t\t\tthis.cmd(act.delete, highlightID);\n\t\t\tthis.nextIndex -= 3;\n\n\t\t\treturn index;\n\t\t} else {\n\t\t\tconst label1 = this.nextIndex++;\n\t\t\tthis.cmd(act.createLabel, label1, 'Hashing:', 10, 45, 0);\n\t\t\tconst wordToHashID = new Array(input.length);\n\t\t\tconst wordToHash = new Array(input.length);\n\t\t\tfor (let i = 0; i < input.length; i++) {\n\t\t\t\twordToHashID[i] = this.nextIndex++;\n\t\t\t\twordToHash[i] = input.charAt(i);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\twordToHashID[i],\n\t\t\t\t\twordToHash[i],\n\t\t\t\t\tHASH_INPUT_START_X + i * HASH_INPUT_X_DIFF,\n\t\t\t\t\tHASH_INPUT_START_Y,\n\t\t\t\t\t0,\n\t\t\t\t);\n\t\t\t}\n\t\t\tconst digits = new Array(32);\n\t\t\tconst hashValue = new Array(32);\n\t\t\tconst nextByte = new Array(8);\n\t\t\tconst nextByteID = new Array(8);\n\t\t\tconst resultDigits = new Array(32);\n\t\t\tconst floatingDigits = new Array(4);\n\t\t\tconst floatingVals = new Array(4);\n\n\t\t\tconst operatorID = this.nextIndex++;\n\t\t\tconst barID = this.nextIndex++;\n\t\t\tfor (let i = 0; i < 32; i++) {\n\t\t\t\thashValue[i] = 0;\n\t\t\t\tdigits[i] = this.nextIndex++;\n\t\t\t\tresultDigits[i] = this.nextIndex++;\n\t\t\t}\n\t\t\tfor (let i = 0; i < 8; i++) {\n\t\t\t\tnextByteID[i] = this.nextIndex++;\n\t\t\t}\n\t\t\tfor (let i = 0; i < 4; i++) {\n\t\t\t\tfloatingDigits[i] = this.nextIndex++;\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t\tfor (let i = wordToHash.length - 1; i >= 0; i--) {\n\t\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\tdigits[j],\n\t\t\t\t\t\thashValue[j],\n\t\t\t\t\t\tHASH_NUMBER_START_X + j * HASH_X_DIFF,\n\t\t\t\t\t\tHASH_NUMBER_START_Y,\n\t\t\t\t\t\t0,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.delete, wordToHashID[i]);\n\t\t\t\tlet nextChar = wordToHash[i].charCodeAt(0);\n\t\t\t\tfor (let j = 7; j >= 0; j--) {\n\t\t\t\t\tnextByte[j] = nextChar % 2;\n\t\t\t\t\tnextChar = Math.floor(nextChar / 2);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\tnextByteID[j],\n\t\t\t\t\t\tnextByte[j],\n\t\t\t\t\t\tHASH_INPUT_START_X + i * HASH_INPUT_X_DIFF,\n\t\t\t\t\t\tHASH_INPUT_START_Y,\n\t\t\t\t\t\t0,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tnextByteID[j],\n\t\t\t\t\t\tHASH_NUMBER_START_X + (j + 24) * HASH_X_DIFF,\n\t\t\t\t\t\tHASH_ADD_START_Y,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tbarID,\n\t\t\t\t\t'',\n\t\t\t\t\t32 * HASH_X_DIFF,\n\t\t\t\t\t0,\n\t\t\t\t\tHASH_NUMBER_START_X,\n\t\t\t\t\tHASH_ADD_LINE_Y,\n\t\t\t\t\t'left',\n\t\t\t\t\t'bottom',\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\toperatorID,\n\t\t\t\t\t'+',\n\t\t\t\t\tHASH_NUMBER_START_X,\n\t\t\t\t\tHASH_ADD_START_Y,\n\t\t\t\t\t0,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tlet carry = 0;\n\t\t\t\tfor (let j = 7; j >= 0; j--) {\n\t\t\t\t\thashValue[j + 24] = hashValue[j + 24] + nextByte[j] + carry;\n\t\t\t\t\tif (hashValue[j + 24] > 1) {\n\t\t\t\t\t\thashValue[j + 24] = hashValue[j + 24] - 2;\n\t\t\t\t\t\tcarry = 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcarry = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let j = 23; j >= 0; j--) {\n\t\t\t\t\thashValue[j] = hashValue[j] + carry;\n\t\t\t\t\tif (hashValue[j] > 1) {\n\t\t\t\t\t\thashValue[j] = hashValue[j] - 2;\n\t\t\t\t\t\tcarry = 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcarry = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\tresultDigits[j],\n\t\t\t\t\t\thashValue[j],\n\t\t\t\t\t\tHASH_NUMBER_START_X + j * HASH_X_DIFF,\n\t\t\t\t\t\tHASH_RESULT_Y,\n\t\t\t\t\t\t0,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tfor (let j = 0; j < 8; j++) {\n\t\t\t\t\tthis.cmd(act.delete, nextByteID[j]);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.delete, barID);\n\t\t\t\tthis.cmd(act.delete, operatorID);\n\t\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\t\tthis.cmd(act.delete, digits[j]);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tresultDigits[j],\n\t\t\t\t\t\tHASH_NUMBER_START_X + j * HASH_X_DIFF,\n\t\t\t\t\t\tHASH_NUMBER_START_Y,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tif (i > 0) {\n\t\t\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\tresultDigits[j],\n\t\t\t\t\t\t\tHASH_NUMBER_START_X + (j - 4) * HASH_X_DIFF,\n\t\t\t\t\t\t\tHASH_NUMBER_START_Y,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tfor (let j = 0; j < 28; j++) {\n\t\t\t\t\t\tfloatingVals[j] = hashValue[j];\n\t\t\t\t\t\thashValue[j] = hashValue[j + 4];\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (let j = 0; j < 4; j++) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\tresultDigits[j],\n\t\t\t\t\t\t\tHASH_NUMBER_START_X + (j + ELF_HASH_SHIFT) * HASH_X_DIFF,\n\t\t\t\t\t\t\tHASH_ADD_START_Y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\thashValue[j + 28] = 0;\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tfloatingDigits[j],\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\tHASH_NUMBER_START_X + (j + 28) * HASH_X_DIFF,\n\t\t\t\t\t\t\tHASH_NUMBER_START_Y,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (floatingVals[j]) {\n\t\t\t\t\t\t\thashValue[j + ELF_HASH_SHIFT] = 1 - hashValue[j + ELF_HASH_SHIFT];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createRectangle,\n\t\t\t\t\t\tbarID,\n\t\t\t\t\t\t'',\n\t\t\t\t\t\t32 * HASH_X_DIFF,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\tHASH_NUMBER_START_X,\n\t\t\t\t\t\tHASH_ADD_LINE_Y,\n\t\t\t\t\t\t'left',\n\t\t\t\t\t\t'bottom',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\toperatorID,\n\t\t\t\t\t\t'XOR',\n\t\t\t\t\t\tHASH_NUMBER_START_X,\n\t\t\t\t\t\tHASH_ADD_START_Y,\n\t\t\t\t\t\t0,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tdigits[j],\n\t\t\t\t\t\t\thashValue[j],\n\t\t\t\t\t\t\tHASH_NUMBER_START_X + j * HASH_X_DIFF,\n\t\t\t\t\t\t\tHASH_RESULT_Y,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t\tthis.cmd(act.delete, operatorID);\n\t\t\t\t\tthis.cmd(act.delete, barID);\n\t\t\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\t\t\tthis.cmd(act.delete, resultDigits[j]);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\tdigits[j],\n\t\t\t\t\t\t\tHASH_NUMBER_START_X + j * HASH_X_DIFF,\n\t\t\t\t\t\t\tHASH_NUMBER_START_Y,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tfor (let j = 0; j < 4; j++) {\n\t\t\t\t\t\tthis.cmd(act.delete, floatingDigits[j]);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\t\t\tthis.cmd(act.delete, digits[j]);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\t\t\tthis.cmd(act.delete, resultDigits[j]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.cmd(act.delete, label1);\n\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tdigits[j],\n\t\t\t\t\thashValue[j],\n\t\t\t\t\tHASH_NUMBER_START_X + j * HASH_X_DIFF,\n\t\t\t\t\tHASH_NUMBER_START_Y,\n\t\t\t\t\t0,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.currHash = 0;\n\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\tthis.currHash = this.currHash * 2 + hashValue[j];\n\t\t\t}\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tlabel1,\n\t\t\t\t' = ' + String(this.currHash),\n\t\t\t\tHASH_NUMBER_START_X + 32 * HASH_X_DIFF,\n\t\t\t\tHASH_NUMBER_START_Y,\n\t\t\t\t0,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\tthis.cmd(act.delete, digits[j]);\n\t\t\t}\n\n\t\t\tconst label2 = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tlabel1,\n\t\t\t\tString(this.currHash) + ' % ' + String(this.table_size) + ' = ',\n\t\t\t);\n\t\t\tconst index = this.currHash % this.table_size;\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tlabel2,\n\t\t\t\tindex,\n\t\t\t\tHASH_NUMBER_START_X + 32 * HASH_X_DIFF + 105,\n\t\t\t\tHASH_NUMBER_START_Y,\n\t\t\t\t0,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\tconst highlightID = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\thighlightID,\n\t\t\t\tHIGHLIGHT_COLOR,\n\t\t\t\tHASH_NUMBER_START_X + 30 * HASH_X_DIFF + 120,\n\t\t\t\tHASH_NUMBER_START_Y + 15,\n\t\t\t);\n\t\t\tthis.cmd(act.move, highlightID, this.indexXPos[index], this.indexYPos[index]);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.delete, highlightID);\n\t\t\tthis.cmd(act.delete, label1);\n\t\t\tthis.cmd(act.delete, label2);\n\n\t\t\treturn index;\n\t\t}\n\t}\n\n\tresetAll() {\n\t\tthis.insertField.value = '';\n\t\tthis.deleteField.value = '';\n\t\tthis.findField.value = '';\n\t\treturn [];\n\t}\n\n\tinsertCallback() {\n\t\tconst insertedValue = this.insertField.value;\n\t\tif (insertedValue !== '') {\n\t\t\tthis.insertField.value = '';\n\t\t\tthis.implementAction(this.insertElement.bind(this), insertedValue);\n\t\t}\n\t}\n\n\tdeleteCallback() {\n\t\tconst deletedValue = this.deleteField.value;\n\t\tif (deletedValue !== '') {\n\t\t\tthis.deleteField.value = '';\n\t\t\tthis.implementAction(this.deleteElement.bind(this), deletedValue);\n\t\t}\n\t}\n\n\tfindCallback() {\n\t\tconst findValue = this.findField.value;\n\t\tif (findValue !== '') {\n\t\t\tthis.findField.value = '';\n\t\t\tthis.implementAction(this.findElement.bind(this), findValue);\n\t\t}\n\t}\n\n\treset() {\n\t\tthis.hashIntegerButton.checked = true;\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport { addDivisorToAlgorithmBar, addRadioButtonGroupToAlgorithmBar } from './Algorithm.js';\nimport Hash from './Hash.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_ELEM_WIDTH = 90;\nconst ARRAY_ELEM_HEIGHT = 30;\nconst ARRAY_ELEM_START_X = 50;\nconst ARRAY_ELEM_START_Y = 100;\nconst ARRAY_VERTICAL_SEPARATION = 100;\n\nconst CLOSED_HASH_TABLE_SIZE = 29;\n\nconst INDEX_COLOR = '#0000FF';\n\nexport default class ClosedHash extends Hash {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.elements_per_row = Math.floor(w / ARRAY_ELEM_WIDTH);\n\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tsuper.addControls();\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst radioButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t[\n\t\t\t\t'Linear Probing: f(i) = i',\n\t\t\t\t'Quadratic Probing: f(i) = i * i',\n\t\t\t\t'Double Hashing: f(i) = i * hash2(elem)',\n\t\t\t],\n\t\t\t'CollisionStrategy',\n\t\t);\n\t\tthis.linearProblingButton = radioButtonList[0];\n\t\tthis.linearProblingButton.onclick = this.linearProbeCallback.bind(this);\n\t\tthis.quadraticProbingButton = radioButtonList[1];\n\t\tthis.quadraticProbingButton.onclick = this.quadraticProbeCallback.bind(this);\n\t\tthis.doubleHashingButton = radioButtonList[2];\n\t\tthis.doubleHashingButton.onclick = this.doubleHashingCallback.bind(this);\n\n\t\tthis.linearProblingButton.checked = true;\n\t\tthis.currentHashingTypeButtonState = this.linearProblingButton;\n\n\t\t// Add new controls\n\t}\n\n\tchangeProbeType(newProbingType) {\n\t\tif (newProbingType === this.linearProblingButton) {\n\t\t\tthis.linearProblingButton.checked = true;\n\t\t\tthis.currentHashingTypeButtonState = this.linearProblingButton;\n\t\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\t\tthis.skipDist[i] = i;\n\t\t\t}\n\t\t} else if (newProbingType === this.quadraticProbingButton) {\n\t\t\tthis.quadraticProbingButton.checked = true;\n\t\t\tthis.currentHashingTypeButtonState = this.quadraticProbingButton;\n\n\t\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\t\tthis.skipDist[i] = i * i;\n\t\t\t}\n\t\t} else if (newProbingType === this.doubleHashingButton) {\n\t\t\tthis.doubleHashingButton.checked = true;\n\t\t\tthis.currentHashingTypeButtonState = this.doubleHashingButton;\n\t\t}\n\t\tthis.commands = this.resetAll();\n\t\treturn this.commands;\n\t}\n\n\tquadraticProbeCallback() {\n\t\tif (this.currentHashingTypeButtonState !== this.quadraticProbingButton) {\n\t\t\tthis.implementAction(this.changeProbeType.bind(this), this.quadraticProbingButton);\n\t\t}\n\t}\n\n\tdoubleHashingCallback() {\n\t\tif (this.currentHashingTypeButtonState !== this.doubleHashingButton) {\n\t\t\tthis.implementAction(this.changeProbeType.bind(this), this.doubleHashingButton);\n\t\t}\n\t}\n\n\tlinearProbeCallback() {\n\t\tif (this.currentHashingTypeButtonState !== this.linearProblingButton) {\n\t\t\tthis.implementAction(this.changeProbeType.bind(this), this.linearProblingButton);\n\t\t}\n\t}\n\n\tinsertElement(elem) {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, this.ExplainLabel, 'Inserting element: ' + String(elem));\n\t\tlet index = this.doHash(elem);\n\n\t\tindex = this.getEmptyIndex(index, elem);\n\t\tthis.cmd(act.setText, this.ExplainLabel, '');\n\t\tif (index !== -1) {\n\t\t\tconst labID = this.nextIndex++;\n\t\t\tthis.cmd(act.createLabel, labID, elem, 20, 25);\n\t\t\tthis.cmd(\n\t\t\t\tact.move,\n\t\t\t\tlabID,\n\t\t\t\tthis.indexXPos[index],\n\t\t\t\tthis.indexYPos[index] - ARRAY_ELEM_HEIGHT,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.delete, labID);\n\t\t\tthis.cmd(act.setText, this.hashTableVisual[index], elem);\n\t\t\tthis.hashTableValues[index] = elem;\n\t\t\tthis.empty[index] = false;\n\t\t\tthis.deleted[index] = false;\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tresetSkipDist(elem, labelID) {\n\t\tconst skipVal = 7 - (this.currHash % 7);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tlabelID,\n\t\t\t'hash2(' +\n\t\t\t\tString(elem) +\n\t\t\t\t') = 1 - ' +\n\t\t\t\tString(this.currHash) +\n\t\t\t\t' % 7 = ' +\n\t\t\t\tString(skipVal),\n\t\t\t20,\n\t\t\t45,\n\t\t\t0,\n\t\t);\n\t\tthis.skipDist[0] = 0;\n\t\tfor (let i = 1; i < this.table_size; i++) {\n\t\t\tthis.skipDist[i] = this.skipDist[i - 1] + skipVal;\n\t\t}\n\t}\n\n\tgetEmptyIndex(index, elem) {\n\t\tif (this.currentHashingTypeButtonState === this.doubleHashingButton) {\n\t\t\tthis.resetSkipDist(elem, this.nextIndex++);\n\t\t}\n\t\tlet foundIndex = -1;\n\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\tconst candidateIndex = (index + this.skipDist[i]) % this.table_size;\n\t\t\tthis.cmd(act.setHighlight, this.hashTableVisual[candidateIndex], 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setHighlight, this.hashTableVisual[candidateIndex], 0);\n\t\t\tif (this.empty[candidateIndex]) {\n\t\t\t\tfoundIndex = candidateIndex;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (this.currentHashingTypeButtonState === this.doubleHashingButton) {\n\t\t\tthis.cmd(act.delete, --this.nextIndex);\n\t\t}\n\t\treturn foundIndex;\n\t}\n\n\tgetElemIndex(index, elem) {\n\t\tif (this.currentHashingTypeButtonState === this.doubleHashingButton) {\n\t\t\tthis.resetSkipDist(elem, this.nextIndex++);\n\t\t}\n\t\tlet foundIndex = -1;\n\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\tconst candidateIndex = (index + this.skipDist[i]) % this.table_size;\n\t\t\tthis.cmd(act.setHighlight, this.hashTableVisual[candidateIndex], 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setHighlight, this.hashTableVisual[candidateIndex], 0);\n\t\t\tif (!this.empty[candidateIndex] && this.hashTableValues[candidateIndex] === elem) {\n\t\t\t\tfoundIndex = candidateIndex;\n\t\t\t\tbreak;\n\t\t\t} else if (this.empty[candidateIndex] && !this.deleted[candidateIndex]) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (this.currentHashingTypeButtonState === this.doubleHashingButton) {\n\t\t\tthis.cmd(act.delete, --this.nextIndex);\n\t\t}\n\t\treturn foundIndex;\n\t}\n\n\tdeleteElement(elem) {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, this.ExplainLabel, 'Deleting element: ' + elem);\n\t\tlet index = this.doHash(elem);\n\n\t\tindex = this.getElemIndex(index, elem);\n\n\t\tif (index > 0) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.ExplainLabel,\n\t\t\t\t'Deleting element: ' + elem + '  Element deleted',\n\t\t\t);\n\t\t\tthis.empty[index] = true;\n\t\t\tthis.deleted[index] = true;\n\t\t\tthis.cmd(act.setText, this.hashTableVisual[index], '<deleted>');\n\t\t} else {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.ExplainLabel,\n\t\t\t\t'Deleting element: ' + elem + '  Element not in table',\n\t\t\t);\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tfindElement(elem) {\n\t\tthis.commands = [];\n\n\t\tthis.cmd(act.setText, this.ExplainLabel, 'Finding Element: ' + elem);\n\t\tconst index = this.doHash(elem);\n\n\t\tconst found = this.getElemIndex(index, elem) !== -1;\n\t\tif (found) {\n\t\t\tthis.cmd(act.setText, this.ExplainLabel, 'Finding Element: ' + elem + '  Found!');\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.ExplainLabel, 'Finding Element: ' + elem + '  Not Found!');\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tsetup() {\n\t\tthis.table_size = CLOSED_HASH_TABLE_SIZE;\n\t\tthis.skipDist = new Array(this.table_size);\n\t\tthis.hashTableVisual = new Array(this.table_size);\n\t\tthis.hashTableIndices = new Array(this.table_size);\n\t\tthis.hashTableValues = new Array(this.table_size);\n\n\t\tthis.indexXPos = new Array(this.table_size);\n\t\tthis.indexYPos = new Array(this.table_size);\n\n\t\tthis.empty = new Array(this.table_size);\n\t\tthis.deleted = new Array(this.table_size);\n\n\t\tthis.ExplainLabel = this.nextIndex++;\n\n\t\tthis.commands = [];\n\n\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\tthis.skipDist[i] = i; // Start with linear probing\n\t\t\tlet nextID = this.nextIndex++;\n\t\t\tthis.empty[i] = true;\n\t\t\tthis.deleted[i] = false;\n\n\t\t\tconst nextXPos = ARRAY_ELEM_START_X + (i % this.elements_per_row) * ARRAY_ELEM_WIDTH;\n\t\t\tconst nextYPos =\n\t\t\t\tARRAY_ELEM_START_Y +\n\t\t\t\tMath.floor(i / this.elements_per_row) * ARRAY_VERTICAL_SEPARATION;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tnextID,\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\tnextXPos,\n\t\t\t\tnextYPos,\n\t\t\t);\n\t\t\tthis.hashTableVisual[i] = nextID;\n\t\t\tnextID = this.nextIndex++;\n\t\t\tthis.hashTableIndices[i] = nextID;\n\t\t\tthis.indexXPos[i] = nextXPos;\n\t\t\tthis.indexYPos[i] = nextYPos + ARRAY_ELEM_HEIGHT;\n\n\t\t\tthis.cmd(act.createLabel, nextID, i, this.indexXPos[i], this.indexYPos[i]);\n\t\t\tthis.cmd(act.setForegroundColor, nextID, INDEX_COLOR);\n\t\t}\n\t\tthis.cmd(act.createLabel, this.ExplainLabel, '', 10, 25, 0);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tthis.resetIndex = this.nextIndex;\n\t}\n\n\tresetAll() {\n\t\tthis.commands = super.resetAll();\n\n\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\tthis.empty[i] = true;\n\t\t\tthis.deleted[i] = false;\n\t\t\tthis.cmd(act.setText, this.hashTableVisual[i], '');\n\t\t}\n\t\treturn this.commands;\n\t\t// Clear array, etc\n\t}\n\n\t// NEED TO OVERRIDE IN PARENT\n\treset() {\n\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\tthis.empty[i] = true;\n\t\t\tthis.deleted[i] = false;\n\t\t}\n\t\tthis.nextIndex = this.resetIndex;\n\t\tsuper.reset();\n\t}\n\n\tresetCallback() {}\n\n\tdisableUI() {\n\t\tsuper.disableUI();\n\t\tthis.linearProblingButton.disabled = true;\n\t\tthis.quadraticProbingButton.disabled = true;\n\t\tthis.doubleHashingButton.disabled = true;\n\t}\n\n\tenableUI() {\n\t\tsuper.enableUI();\n\t\tthis.linearProblingButton.disabled = false;\n\t\tthis.quadraticProbingButton.disabled = false;\n\t\tthis.doubleHashingButton.disabled = false;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddCheckboxToAlgorithmBar,\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 200;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nlet lastSwapEnabled = true;\n\nexport default class CocktailSort extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Comma separated list (e.g. \"3,1,2\", max 18 elements)');\n\n\t\t// List text field\n\t\tthis.listField = addControlToAlgorithmBar('Text', '');\n\t\tthis.listField.onkeydown = this.returnSubmit(\n\t\t\tthis.listField,\n\t\t\tthis.sortCallback.bind(this),\n\t\t\t60,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.listField);\n\n\t\t// Sort button\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Sort');\n\t\tthis.findButton.onclick = this.sortCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Last swap optimization toggle\n\t\tthis.lastSwapCheckbox = addCheckboxToAlgorithmBar('Enable last swap optimization', true);\n\t\tthis.lastSwapCheckbox.onclick = this.toggleLastSwap.bind(this);\n\t\tthis.controls.push(this.lastSwapCheckbox);\n\t}\n\n\tsetup() {\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\n\t\tthis.animationManager.startNewAnimation();\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\t}\n\n\tsortCallback() {\n\t\tif (this.listField.value !== '') {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst list = this.listField.value;\n\t\t\tthis.listField.value = '';\n\t\t\tthis.implementAction(this.sort.bind(this), list);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\ttoggleLastSwap() {\n\t\tlastSwapEnabled = !lastSwapEnabled;\n\t}\n\n\tclear() {\n\t\tthis.arrayData = [];\n\t\tthis.commands = [];\n\t\tthis.displayData = [];\n\t\tfor (let i = 0; i < this.arrayID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tsort(params) {\n\t\tthis.commands = [];\n\n\t\tthis.arrayID = [];\n\t\tthis.arrayData = params\n\t\t\t.split(',')\n\t\t\t.map(Number)\n\t\t\t.filter(x => !Number.isNaN(x))\n\t\t\t.slice(0, 18);\n\t\tthis.displayData = new Array(this.arrayData.length);\n\t\tconst length = this.arrayData.length;\n\n\t\tconst elemCounts = new Map();\n\t\tconst letterMap = new Map();\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst count = elemCounts.has(this.arrayData[i]) ? elemCounts.get(this.arrayData[i]) : 0;\n\t\t\tif (count > 0) {\n\t\t\t\tletterMap.set(this.arrayData[i], 'a');\n\t\t\t}\n\t\t\telemCounts.set(this.arrayData[i], count + 1);\n\t\t}\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tconst xpos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = ARRAY_START_Y;\n\n\t\t\tlet displayData = this.arrayData[i].toString();\n\t\t\tif (letterMap.has(this.arrayData[i])) {\n\t\t\t\tconst currChar = letterMap.get(this.arrayData[i]);\n\t\t\t\tdisplayData += currChar;\n\t\t\t\tletterMap.set(this.arrayData[i], String.fromCharCode(currChar.charCodeAt(0) + 1));\n\t\t\t}\n\t\t\tthis.displayData[i] = displayData;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\tdisplayData,\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t}\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.iPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y,\n\t\t);\n\t\tthis.cmd(act.setHighlight, this.iPointerID, 1);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.jPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X + ARRAY_ELEM_WIDTH,\n\t\t\tARRAY_START_Y,\n\t\t);\n\t\tthis.cmd(act.setHighlight, this.jPointerID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tlet sorted = true;\n\t\tlet start = 0;\n\t\tlet end = this.arrayData.length - 1;\n\t\tlet lastSwapped = 0;\n\t\tdo {\n\t\t\tsorted = true;\n\t\t\tfor (let i = start; i < end; i++) {\n\t\t\t\tthis.movePointers(i, i + 1);\n\t\t\t\tif (this.arrayData[i] > this.arrayData[i + 1]) {\n\t\t\t\t\tthis.swap(i, i + 1);\n\t\t\t\t\tsorted = false;\n\t\t\t\t\tlastSwapped = i;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (lastSwapEnabled) {\n\t\t\t\tend = lastSwapped;\n\t\t\t} else {\n\t\t\t\tend--;\n\t\t\t}\n\t\t\tif (!sorted) {\n\t\t\t\tfor (let i = end + 1; i < this.arrayData.length; i++) {\n\t\t\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#2ECC71');\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tif (!sorted) {\n\t\t\t\tsorted = true;\n\t\t\t\tfor (let i = end; i > start; i--) {\n\t\t\t\t\tthis.movePointers(i - 1, i);\n\t\t\t\t\tif (+this.arrayData[i] < +this.arrayData[i - 1]) {\n\t\t\t\t\t\tthis.swap(i, i - 1);\n\t\t\t\t\t\tsorted = false;\n\t\t\t\t\t\tlastSwapped = i;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (lastSwapEnabled) {\n\t\t\t\t\tstart = lastSwapped;\n\t\t\t\t} else {\n\t\t\t\t\tstart++;\n\t\t\t\t}\n\t\t\t\tif (!sorted) {\n\t\t\t\t\tfor (let i = start - 1; i >= 0; i--) {\n\t\t\t\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#2ECC71');\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t}\n\t\t} while (!sorted);\n\n\t\tthis.cmd(act.delete, this.iPointerID);\n\t\tthis.cmd(act.delete, this.jPointerID);\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = 0; i < this.arrayData.length; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#2ECC71');\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tmovePointers(i, j) {\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst iYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.move, this.iPointerID, iXPos, iYPos);\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.move, this.jPointerID, jXPos, jYPos);\n\t\tthis.cmd(act.step);\n\t}\n\n\tswap(i, j) {\n\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#FF0000');\n\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#FF0000');\n\t\tconst iLabelID = this.nextIndex++;\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst iYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.createLabel, iLabelID, this.displayData[i], iXPos, iYPos);\n\t\tconst jLabelID = this.nextIndex++;\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.createLabel, jLabelID, this.displayData[j], jXPos, jYPos);\n\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\tthis.cmd(act.setText, this.arrayID[j], '');\n\t\tthis.cmd(act.move, iLabelID, jXPos, jYPos);\n\t\tthis.cmd(act.move, jLabelID, iXPos, iYPos);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.arrayID[i], this.displayData[j]);\n\t\tthis.cmd(act.setText, this.arrayID[j], this.displayData[i]);\n\t\tthis.cmd(act.delete, iLabelID);\n\t\tthis.cmd(act.delete, jLabelID);\n\n\t\t// Swap actual data\n\t\tlet temp = this.arrayData[i];\n\t\tthis.arrayData[i] = this.arrayData[j];\n\t\tthis.arrayData[j] = temp;\n\n\t\t// Swap displayed data\n\t\ttemp = this.displayData[i];\n\t\tthis.displayData[i] = this.displayData[j];\n\t\tthis.displayData[j] = temp;\n\n\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#0000FF');\n\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#0000FF');\n\t\tthis.cmd(act.step);\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n\taddRadioButtonGroupToAlgorithmBar,\n} from './Algorithm.js';\nimport { BFS_DFS_ADJ_LIST } from './util/GraphValues';\nimport Graph from './Graph.js';\nimport { act } from '../anim/AnimationMain';\n\nconst DFS_STACK_TOP_COLOR = '#0000FF';\nconst VISITED_COLOR = '#99CCFF';\n\nconst INFO_MSG_X = 25;\nconst INFO_MSG_Y = 15;\n\nconst LIST_START_X = 30;\nconst LIST_START_Y = 70;\nconst LIST_SPACING = 20;\n\nconst VISITED_START_X = 30;\nconst VISITED_START_Y = 120;\n\nconst CURRENT_VERTEX_LABEL_X = 25;\nconst CURRENT_VERTEX_LABEL_Y = 145;\nconst CURRENT_VERTEX_X = 115;\nconst CURRENT_VERTEX_Y = 151;\n\nconst STACK_LABEL_X = 25;\nconst STACK_LABEL_Y = 170;\n\nconst STACK_START_X = 40;\nconst SMALL_STACK_START_Y = 335;\nconst LARGE_STACK_START_Y = 465;\nconst SMALL_STACK_SPACING = 20;\nconst LARGE_STACK_SPACING = 16;\n\nconst RECURSION_START_X = 125;\nconst RECURSION_START_Y = 185;\nconst SMALL_RECURSION_SPACING_X = 20;\nconst LARGE_RECURSION_SPACING_X = 10;\nconst SMALL_RECURSION_SPACING_Y = 20;\nconst LARGE_RECURSION_SPACING_Y = 15;\n\nexport default class DFS extends Graph {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h, BFS_DFS_ADJ_LIST);\n\t\tthis.addControls();\n\t\tthis.physicalStack = false;\n\t}\n\n\taddControls() {\n\t\taddLabelToAlgorithmBar('Start vertex: ');\n\n\t\tthis.startField = addControlToAlgorithmBar('Text', '');\n\t\tthis.startField.onkeydown = this.returnSubmit(\n\t\t\tthis.startField,\n\t\t\tthis.startCallback.bind(this),\n\t\t\t1,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.startField);\n\n\t\tthis.startButton = addControlToAlgorithmBar('Button', 'Run');\n\t\tthis.startButton.onclick = this.startCallback.bind(this);\n\t\tthis.controls.push(this.startButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst radioButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t['Recursion', 'Stack'],\n\t\t\t'StackType',\n\t\t);\n\n\t\tthis.recursiveStackButton = radioButtonList[0];\n\t\tthis.recursiveStackButton.onclick = this.stackCallback.bind(this, false);\n\t\tthis.recursiveStackButton.checked = true;\n\t\tthis.controls.push(this.recursiveStackButton);\n\n\t\tthis.physicalStackButton = radioButtonList[1];\n\t\tthis.physicalStackButton.onclick = this.stackCallback.bind(this, true);\n\t\tthis.controls.push(this.physicalStackButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tsuper.addControls();\n\t}\n\n\tsetup(adjMatrix) {\n\t\tsuper.setup(adjMatrix);\n\t\tthis.commands = [];\n\t\tthis.messageID = [];\n\n\t\tthis.visited = [];\n\n\t\tthis.stackID = [];\n\t\tthis.listID = [];\n\t\tthis.visitedID = [];\n\n\t\tthis.infoLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, this.infoLabelID, '', INFO_MSG_X, INFO_MSG_Y, 0);\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Visited Set:',\n\t\t\tVISITED_START_X - 5,\n\t\t\tVISITED_START_Y - 25,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'List:',\n\t\t\tLIST_START_X - 5,\n\t\t\tLIST_START_Y - 25,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Current vertex:',\n\t\t\tCURRENT_VERTEX_LABEL_X,\n\t\t\tCURRENT_VERTEX_LABEL_Y,\n\t\t\t0,\n\t\t);\n\n\t\tthis.stackLabelID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.stackLabelID,\n\t\t\tthis.physicalStack ? 'Stack:' : 'Recursive stack:   Recursive calls:',\n\t\t\tSTACK_LABEL_X,\n\t\t\tSTACK_LABEL_Y,\n\t\t\t0,\n\t\t);\n\n\t\tthis.animationManager.setAllLayers([0, this.currentLayer]);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tthis.lastIndex = this.nextIndex;\n\t}\n\n\treset() {\n\t\tthis.nextIndex = this.lastIndex;\n\t\tthis.listID = [];\n\t\tthis.visitedID = [];\n\t\tthis.messageID = [];\n\t}\n\n\tstackCallback(physical) {\n\t\tif (this.physicalStack !== physical) {\n\t\t\tthis.physicalStack = physical;\n\t\t\tthis.animationManager.resetAll();\n\t\t\tthis.setup(this.adj_matrix);\n\t\t}\n\t}\n\n\tstartCallback() {\n\t\tif (this.startField.value !== '') {\n\t\t\tlet startvalue = this.startField.value;\n\t\t\tthis.startField.value = '';\n\t\t\tstartvalue = startvalue.toUpperCase().charCodeAt(0) - 65;\n\t\t\tif (startvalue >= 0 && startvalue < this.size) {\n\t\t\t\tif (this.physicalStack) {\n\t\t\t\t\tthis.implementAction(this.doDFSStack.bind(this), startvalue);\n\t\t\t\t} else {\n\t\t\t\t\tthis.implementAction(this.doDFSRecursive.bind(this), startvalue);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tdoDFSStack(startVertex) {\n\t\tthis.commands = [];\n\n\t\tthis.clear();\n\n\t\tthis.visited = new Array(this.size);\n\t\tthis.stack = [];\n\t\tthis.stackID = [];\n\t\tthis.listID = [];\n\t\tthis.visitedID = [];\n\t\tthis.stackStartY = this.isLarge ? LARGE_STACK_START_Y : SMALL_STACK_START_Y;\n\t\tthis.stackSpacing = this.isLarge ? LARGE_STACK_SPACING : SMALL_STACK_SPACING;\n\n\t\tthis.rebuildEdges();\n\n\t\tlet vertex = startVertex;\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tthis.infoLabelID,\n\t\t\t'Pushing ' + this.toStr(vertex) + ' and adding to visited set',\n\t\t);\n\t\tlet vertexID = this.nextIndex++;\n\t\tthis.visited[vertex] = true;\n\t\tthis.visitedID.push(this.nextIndex);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\tthis.toStr(vertex),\n\t\t\tVISITED_START_X,\n\t\t\tVISITED_START_Y,\n\t\t);\n\t\tthis.cmd(act.setBackgroundColor, this.circleID[vertex], VISITED_COLOR);\n\t\tthis.stack.push(vertex);\n\t\tthis.stackID.push(vertexID);\n\t\tthis.cmd(act.createLabel, vertexID, this.toStr(vertex), STACK_START_X, this.stackStartY);\n\t\tthis.cmd(act.step);\n\n\t\twhile (this.stack.length > 0 && this.listID.length < this.size) {\n\t\t\tvertex = this.stack.pop();\n\t\t\tvertexID = this.stackID.pop();\n\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.infoLabelID,\n\t\t\t\t'Popping ' + this.toStr(vertex) + ' and adding to list',\n\t\t\t);\n\n\t\t\tthis.cmd(act.setTextColor, vertexID, DFS_STACK_TOP_COLOR);\n\t\t\tthis.cmd(act.move, vertexID, CURRENT_VERTEX_X, CURRENT_VERTEX_Y);\n\n\t\t\tthis.listID.push(this.nextIndex);\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.nextIndex++,\n\t\t\t\tthis.toStr(vertex),\n\t\t\t\tLIST_START_X + (this.listID.length - 1) * LIST_SPACING,\n\t\t\t\tLIST_START_Y,\n\t\t\t);\n\n\t\t\tthis.visitVertex(vertex);\n\n\t\t\tthis.cmd(act.step);\n\n\t\t\tfor (let neighbor = 0; neighbor < this.size; neighbor++) {\n\t\t\t\tif (this.adj_matrix[vertex][neighbor] > 0) {\n\t\t\t\t\tthis.highlightEdge(vertex, neighbor, 1);\n\t\t\t\t\tif (!this.visited[neighbor]) {\n\t\t\t\t\t\tthis.visited[neighbor] = true;\n\t\t\t\t\t\tthis.visitedID.push(this.nextIndex);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t\tthis.toStr(neighbor) +\n\t\t\t\t\t\t\t\t' has not yet been visited, pushing and adding to visited set',\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t\t\tthis.toStr(neighbor),\n\t\t\t\t\t\t\tVISITED_START_X + (this.visitedID.length - 1) * LIST_SPACING,\n\t\t\t\t\t\t\tVISITED_START_Y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.setBackgroundColor, this.circleID[neighbor], VISITED_COLOR);\n\t\t\t\t\t\tthis.stack.push(neighbor);\n\t\t\t\t\t\tthis.stackID.push(this.nextIndex);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t\t\tthis.toStr(neighbor),\n\t\t\t\t\t\t\tSTACK_START_X,\n\t\t\t\t\t\t\tthis.stackStartY - (this.stack.length - 1) * this.stackSpacing,\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t\tthis.toStr(neighbor) + ' has already been visited, skipping',\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.highlightEdge(vertex, neighbor, 0);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.cmd(act.delete, vertexID);\n\n\t\t\tthis.leaveVertex();\n\t\t}\n\n\t\tif (this.stack.length > 0) {\n\t\t\tthis.cmd(act.setText, this.infoLabelID, 'All vertices have been visited, done');\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Stack is empty, done');\n\t\t}\n\n\t\treturn this.commands;\n\t}\n\n\tdoDFSRecursive(startVertex) {\n\t\tthis.commands = [];\n\n\t\tthis.clear();\n\n\t\tthis.visited = new Array(this.size);\n\t\tthis.listID = [];\n\t\tthis.visitedID = [];\n\t\tthis.stackStartY = this.isLarge ? LARGE_STACK_START_Y : SMALL_STACK_START_Y;\n\t\tthis.stackSpacing = this.isLarge ? LARGE_STACK_SPACING : SMALL_STACK_SPACING;\n\t\tthis.recursionSpacingX = this.isLarge\n\t\t\t? LARGE_RECURSION_SPACING_X\n\t\t\t: SMALL_RECURSION_SPACING_X;\n\t\tthis.recursionSpacingY = this.isLarge\n\t\t\t? LARGE_RECURSION_SPACING_Y\n\t\t\t: SMALL_RECURSION_SPACING_Y;\n\t\tthis.currentID = this.nextIndex++;\n\n\t\tthis.rebuildEdges();\n\n\t\tthis.cmd(act.setText, this.infoLabelID, '');\n\n\t\tconst vertex = startVertex;\n\n\t\tthis.cmd(act.createLabel, this.currentID, '', CURRENT_VERTEX_X, CURRENT_VERTEX_Y);\n\t\tthis.cmd(act.setTextColor, this.currentID, DFS_STACK_TOP_COLOR);\n\n\t\tthis.cmd(act.setText, this.infoLabelID, 'About to recurse to ' + this.toStr(startVertex));\n\t\tthis.cmd(act.step);\n\n\t\tthis.visitVertex(vertex);\n\n\t\tthis.dfsVisit(vertex, RECURSION_START_X);\n\n\t\tthis.cmd(act.setText, this.infoLabelID, 'Returned from ' + this.toStr(vertex) + ', done');\n\t\tthis.cmd(act.delete, this.currentID);\n\t\tthis.leaveVertex();\n\n\t\treturn this.commands;\n\t}\n\n\tdfsVisit(currVertex, messageX) {\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tthis.infoLabelID,\n\t\t\t'Visiting ' + this.toStr(currVertex) + ' and adding to list',\n\t\t);\n\t\tthis.cmd(act.setText, this.currentID, this.toStr(currVertex));\n\n\t\tthis.stackID.push(this.nextIndex);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\tthis.toStr(currVertex),\n\t\t\tSTACK_START_X,\n\t\t\tthis.stackStartY - (this.stackID.length - 1) * this.stackSpacing,\n\t\t);\n\n\t\tconst nextMessage = this.nextIndex++;\n\t\tthis.messageID.push(nextMessage);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tnextMessage,\n\t\t\t'DFS(' + this.toStr(currVertex) + ')',\n\t\t\tmessageX,\n\t\t\tRECURSION_START_Y + (this.messageID.length - 1) * this.recursionSpacingY,\n\t\t\t0,\n\t\t);\n\n\t\tthis.listID.push(this.nextIndex);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\tthis.toStr(currVertex),\n\t\t\tLIST_START_X + (this.listID.length - 1) * LIST_SPACING,\n\t\t\tLIST_START_Y,\n\t\t);\n\n\t\tthis.visited[currVertex] = true;\n\t\tthis.visitedID.push(this.nextIndex);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\tthis.toStr(currVertex),\n\t\t\tVISITED_START_X + (this.visitedID.length - 1) * LIST_SPACING,\n\t\t\tVISITED_START_Y,\n\t\t);\n\t\tthis.cmd(act.setBackgroundColor, this.circleID[currVertex], VISITED_COLOR);\n\t\tthis.cmd(act.step);\n\n\t\tfor (let neighbor = 0; neighbor < this.size; neighbor++) {\n\t\t\tif (this.adj_matrix[currVertex][neighbor] > 0) {\n\t\t\t\tthis.highlightEdge(currVertex, neighbor, 1);\n\t\t\t\tif (this.visited[neighbor]) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t'Vertex ' + this.toStr(neighbor) + ' already visited, skipping',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.highlightEdge(currVertex, neighbor, 0);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t'About to recurse to ' + this.toStr(neighbor),\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t\tthis.leaveVertex();\n\t\t\t\t\tthis.visitVertex(neighbor);\n\t\t\t\t\tthis.highlightEdge(currVertex, neighbor, 0);\n\n\t\t\t\t\tthis.dfsVisit(neighbor, messageX + this.recursionSpacingX);\n\n\t\t\t\t\tthis.leaveVertex();\n\t\t\t\t\tthis.visitVertex(currVertex);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t'Returned from ' + this.toStr(neighbor) + ' to ' + this.toStr(currVertex),\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.delete, this.stackID.pop());\n\t}\n\n\tclear() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.circleID[i], '#FFFFFF');\n\t\t\tthis.visited[i] = false;\n\t\t}\n\t\tfor (let i = 0; i < this.listID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.listID[i]);\n\t\t}\n\t\tthis.listID = [];\n\t\tfor (let i = 0; i < this.visitedID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.visitedID[i]);\n\t\t}\n\t\tthis.visitedID = [];\n\t\tif (this.messageID != null) {\n\t\t\tfor (let i = 0; i < this.messageID.length; i++) {\n\t\t\t\tthis.cmd(act.delete, this.messageID[i]);\n\t\t\t}\n\t\t}\n\t\tthis.messageID = [];\n\t\tthis.cmd(act.setText, this.infoLabelID, '');\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, { addControlToAlgorithmBar, addLabelToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst INFO_MSG_X = 20;\nconst INFO_MSG_Y = 10;\n\nconst TABLE_ELEM_WIDTH = 40;\nconst TABLE_ELEM_HEIGHT = 30;\n\nconst TABLE_START_X = 500;\nconst TABLE_START_Y = 80;\n\nconst CODE_START_X = 20;\nconst CODE_START_Y = 35;\nconst CODE_LINE_HEIGHT = 14;\n\nconst CODE_HIGHLIGHT_COLOR = '#FF0000';\nconst CODE_STANDARD_COLOR = '#000000';\nconst LCS_CELL_COLOR = '#99CCFF';\nconst MAX_SEQUENCE_LENGTH = 13;\n\nconst SEQUENCE_START_X = 20;\nconst SEQUENCE_START_Y = 195;\nconst SEQUENCE_DELTA_X = 10;\n\nexport default class LCS extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\t\taddLabelToAlgorithmBar('S1:');\n\t\tthis.S1Field = addControlToAlgorithmBar('Text', '');\n\t\tthis.S1Field.onkeydown = this.returnSubmit(\n\t\t\tthis.S1Field,\n\t\t\tthis.runCallback.bind(this),\n\t\t\tMAX_SEQUENCE_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.S1Field);\n\n\t\taddLabelToAlgorithmBar('S2:');\n\t\tthis.S2Field = addControlToAlgorithmBar('Text', '');\n\t\tthis.S2Field.onkeydown = this.returnSubmit(\n\t\t\tthis.S2Field,\n\t\t\tthis.runCallback.bind(this),\n\t\t\tMAX_SEQUENCE_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.S2Field);\n\n\t\tthis.tableButton = addControlToAlgorithmBar('Button', 'Run');\n\t\tthis.tableButton.onclick = this.runCallback.bind(this);\n\t\tthis.controls.push(this.tableButton);\n\t}\n\n\tsetup() {\n\t\tthis.infoLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, this.infoLabelID, '', INFO_MSG_X, INFO_MSG_Y, 0);\n\n\t\tthis.code = [\n\t\t\t['def ', 'LCS(S1, S2, matrix)', ':'],\n\t\t\t['     for x from 0 to S1.length - 1:'],\n\t\t\t['          for y from 0 to S2.length - 1:'],\n\t\t\t['               if ', '(S1[x] == S2[y]):'],\n\t\t\t['                    matrix[x][y] = 1 + ', 'matrix[x - 1][y-1]'],\n\t\t\t['               else:'],\n\t\t\t[\n\t\t\t\t'                    matrix[x][y] = max(',\n\t\t\t\t'matrix[x - 1][y]',\n\t\t\t\t',',\n\t\t\t\t' matrix[x][y - 1]',\n\t\t\t\t')',\n\t\t\t],\n\t\t];\n\n\t\tthis.codeID = Array(this.code.length);\n\t\tlet i, j;\n\t\tfor (i = 0; i < this.code.length; i++) {\n\t\t\tthis.codeID[i] = new Array(this.code[i].length);\n\t\t\tfor (j = 0; j < this.code[i].length; j++) {\n\t\t\t\tthis.codeID[i][j] = this.nextIndex++;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tthis.codeID[i][j],\n\t\t\t\t\tthis.code[i][j],\n\t\t\t\t\tCODE_START_X,\n\t\t\t\t\tCODE_START_Y + i * CODE_LINE_HEIGHT,\n\t\t\t\t\t0,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[i][j], CODE_STANDARD_COLOR);\n\t\t\t\tif (j > 0) {\n\t\t\t\t\tthis.cmd(act.alignRight, this.codeID[i][j], this.codeID[i][j - 1]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tthis.initialIndex = this.nextIndex;\n\t\tthis.oldIDs = [];\n\t\tthis.commands = [];\n\t}\n\n\treset() {\n\t\tthis.oldIDs = [];\n\t\tthis.nextIndex = this.initialIndex;\n\t}\n\n\trunCallback() {\n\t\tif (this.S1Field.value !== '' && this.S2Field.value !== '') {\n\t\t\tthis.implementAction(this.run.bind(this), this.S1Field.value, this.S2Field.value);\n\t\t}\n\t}\n\n\trun(str1, str2) {\n\t\tthis.commands = [];\n\t\tthis.clearOldIDs();\n\n\t\tthis.buildTable(str1, str2);\n\n\t\tconst moveID = this.nextIndex++;\n\t\tconst x = str1.length;\n\t\tconst y = str2.length;\n\t\tlet i, j;\n\n\t\tfor (i = 0; i <= x; i++) {\n\t\t\tthis.cmd(act.setText, this.tableID[i][0], '0');\n\t\t\tthis.tableVals[i][0] = 0;\n\t\t}\n\t\tfor (i = 0; i <= y; i++) {\n\t\t\tthis.cmd(act.setText, this.tableID[0][i], '0');\n\t\t\tthis.tableVals[0][i] = 0;\n\t\t}\n\t\tthis.cmd(act.step);\n\t\tfor (j = 0; j < y; j++) {\n\t\t\tfor (i = 0; i < x; i++) {\n\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i + 1][j + 1], 1);\n\t\t\t\tthis.cmd(act.setHighlight, this.S1TableID[i], 1);\n\t\t\t\tthis.cmd(act.setHighlight, this.S2TableID[j], 1);\n\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[3][1], CODE_HIGHLIGHT_COLOR);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t'Comparing ' + str1.charAt(i) + ' and ' + str2.charAt(j),\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setHighlight, this.S1TableID[i], 0);\n\t\t\t\tthis.cmd(act.setHighlight, this.S2TableID[j], 0);\n\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[3][1], CODE_STANDARD_COLOR);\n\t\t\t\tif (str1.charAt(i) === str2.charAt(j)) {\n\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[4][0], CODE_HIGHLIGHT_COLOR);\n\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[4][1], CODE_HIGHLIGHT_COLOR);\n\t\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i + 1 - 1][j + 1 - 1], 1);\n\t\t\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Match, increment from the diagonal');\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\tmoveID,\n\t\t\t\t\t\tthis.tableVals[i][j] + 1,\n\t\t\t\t\t\tthis.tableXPos[i][j],\n\t\t\t\t\t\tthis.tableYPos[i][j],\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.bringToTop, moveID, 1);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tmoveID,\n\t\t\t\t\t\tthis.tableXPos[i + 1][j + 1],\n\t\t\t\t\t\tthis.tableYPos[i + 1][j + 1],\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.delete, moveID);\n\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[4][0], CODE_STANDARD_COLOR);\n\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[4][1], CODE_STANDARD_COLOR);\n\t\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i + 1 - 1][j + 1 - 1], 0);\n\t\t\t\t\tthis.tableVals[i + 1][j + 1] = this.tableVals[i][j] + 1;\n\t\t\t\t\tthis.cmd(act.setText, this.tableID[i + 1][j + 1], this.tableVals[i + 1][j + 1]);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[6][0], CODE_HIGHLIGHT_COLOR);\n\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[6][1], CODE_HIGHLIGHT_COLOR);\n\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[6][2], CODE_HIGHLIGHT_COLOR);\n\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[6][3], CODE_HIGHLIGHT_COLOR);\n\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[6][4], CODE_HIGHLIGHT_COLOR);\n\t\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i][j + 1], 1);\n\t\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i + 1][j], 1);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t'Mismatch, copy greatest value from left or above',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[6][0], CODE_STANDARD_COLOR);\n\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[6][2], CODE_STANDARD_COLOR);\n\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[6][4], CODE_STANDARD_COLOR);\n\n\t\t\t\t\tif (this.tableVals[i][j + 1] > this.tableVals[i + 1][j]) {\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i + 1][j], 0);\n\t\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[6][3], CODE_STANDARD_COLOR);\n\n\t\t\t\t\t\tthis.tableVals[i + 1][j + 1] = this.tableVals[i][j + 1];\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tmoveID,\n\t\t\t\t\t\t\tthis.tableVals[i][j + 1],\n\t\t\t\t\t\t\tthis.tableXPos[i][j + 1],\n\t\t\t\t\t\t\tthis.tableYPos[i][j + 1],\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[6][1], CODE_STANDARD_COLOR);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i][j + 1], 0);\n\t\t\t\t\t\tthis.tableVals[i + 1][j + 1] = this.tableVals[i + 1][j];\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tmoveID,\n\t\t\t\t\t\t\tthis.tableVals[i + 1][j],\n\t\t\t\t\t\t\tthis.tableXPos[i + 1][j],\n\t\t\t\t\t\t\tthis.tableYPos[i + 1][j],\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.bringToTop, moveID, 1);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tmoveID,\n\t\t\t\t\t\tthis.tableXPos[i + 1][j + 1],\n\t\t\t\t\t\tthis.tableYPos[i + 1][j + 1],\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setText, this.tableID[i + 1][j + 1], this.tableVals[i + 1][j + 1]);\n\t\t\t\t\tthis.cmd(act.delete, moveID);\n\t\t\t\t\tif (this.tableVals[i][j + 1] > this.tableVals[i + 1][j]) {\n\t\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[6][1], CODE_STANDARD_COLOR);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i][j + 1], 0);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[6][3], CODE_STANDARD_COLOR);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i + 1][j], 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i + 1][j + 1], 0);\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.setText, this.infoLabelID, 'Finished building table, can now find LCS');\n\t\tthis.cmd(act.step);\n\n\t\tthis.buildLCSFromTable(str1, str2);\n\n\t\tthis.cmd(act.setText, this.infoLabelID, 'Done');\n\t\treturn this.commands;\n\t}\n\n\tbuildTable(str1, str2) {\n\t\tconst x = str1.length;\n\t\tconst y = str2.length;\n\t\tthis.tableID = new Array(x + 1);\n\t\tthis.tableVals = new Array(x + 1);\n\t\tthis.tableXPos = new Array(x + 1);\n\t\tthis.tableYPos = new Array(x + 1);\n\n\t\tlet i, j;\n\n\t\tthis.S1TableID = new Array(x);\n\t\tfor (i = 0; i <= x; i++) {\n\t\t\tif (i > 0) {\n\t\t\t\tthis.S1TableID[i - 1] = this.nextIndex++;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tthis.S1TableID[i - 1],\n\t\t\t\t\tstr1.charAt(i - 1),\n\t\t\t\t\tTABLE_START_X + i * TABLE_ELEM_WIDTH,\n\t\t\t\t\tTABLE_START_Y - 2 * TABLE_ELEM_HEIGHT,\n\t\t\t\t);\n\t\t\t\tthis.oldIDs.push(this.S1TableID[i - 1]);\n\t\t\t}\n\t\t\tconst index = this.nextIndex++;\n\t\t\tthis.oldIDs.push(index);\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tindex,\n\t\t\t\ti - 1 === -1 ? '\\u2205' : i - 1,\n\t\t\t\tTABLE_START_X + i * TABLE_ELEM_WIDTH,\n\t\t\t\tTABLE_START_Y - 1 * TABLE_ELEM_HEIGHT,\n\t\t\t);\n\t\t\tthis.cmd(act.setForegroundColor, index, '#0000FF');\n\t\t}\n\n\t\tthis.S2TableID = new Array(y);\n\t\tfor (i = 0; i <= y; i++) {\n\t\t\tif (i > 0) {\n\t\t\t\tthis.S2TableID[i - 1] = this.nextIndex++;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tthis.S2TableID[i - 1],\n\t\t\t\t\tstr2.charAt(i - 1),\n\t\t\t\t\tTABLE_START_X - 2 * TABLE_ELEM_WIDTH,\n\t\t\t\t\tTABLE_START_Y + i * TABLE_ELEM_HEIGHT,\n\t\t\t\t);\n\t\t\t\tthis.oldIDs.push(this.S2TableID[i - 1]);\n\t\t\t}\n\t\t\tconst index = this.nextIndex++;\n\t\t\tthis.oldIDs.push(index);\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tindex,\n\t\t\t\ti - 1 === -1 ? '\\u2205' : i - 1,\n\t\t\t\tTABLE_START_X - 1 * TABLE_ELEM_WIDTH,\n\t\t\t\tTABLE_START_Y + i * TABLE_ELEM_HEIGHT,\n\t\t\t);\n\t\t\tthis.cmd(act.setForegroundColor, index, '#0000FF');\n\t\t}\n\n\t\tfor (i = 0; i <= x; i++) {\n\t\t\tthis.tableID[i] = new Array(y + 1);\n\t\t\tthis.tableVals[i] = new Array(y + 1);\n\t\t\tthis.tableXPos[i] = new Array(y + 1);\n\t\t\tthis.tableYPos[i] = new Array(y + 1);\n\n\t\t\tfor (j = 0; j <= y; j++) {\n\t\t\t\tthis.tableID[i][j] = this.nextIndex++;\n\t\t\t\tthis.tableVals[i][j] = -1;\n\t\t\t\tthis.oldIDs.push(this.tableID[i][j]);\n\n\t\t\t\tthis.tableXPos[i][j] = TABLE_START_X + i * TABLE_ELEM_WIDTH;\n\t\t\t\tthis.tableYPos[i][j] = TABLE_START_Y + j * TABLE_ELEM_HEIGHT;\n\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.tableID[i][j],\n\t\t\t\t\t'',\n\t\t\t\t\tTABLE_ELEM_WIDTH,\n\t\t\t\t\tTABLE_ELEM_HEIGHT,\n\t\t\t\t\tthis.tableXPos[i][j],\n\t\t\t\t\tthis.tableYPos[i][j],\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tclearOldIDs() {\n\t\tfor (let i = 0; i < this.oldIDs.length; i++) {\n\t\t\tthis.cmd(act.delete, this.oldIDs[i]);\n\t\t}\n\t\tthis.oldIDs = [];\n\t\tthis.nextIndex = this.initialIndex;\n\t}\n\n\tbuildLCSFromTable(str1, str2) {\n\t\tlet currX = this.tableVals.length - 1;\n\t\tlet currY = this.tableVals[0].length - 1;\n\n\t\tconst sequence = [];\n\n\t\tconst header = this.nextIndex++;\n\t\tthis.oldIDs.push(header);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\theader,\n\t\t\t'Longest Common Subsequence:',\n\t\t\tSEQUENCE_START_X,\n\t\t\tSEQUENCE_START_Y - 25,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(act.setForegroundColor, header, '#003300');\n\n\t\tfor (let i = 1; i <= str1.length; i++) {\n\t\t\tfor (let j = 1; j <= str2.length; j++) {\n\t\t\t\tconst topThick = this.tableVals[i][j] !== this.tableVals[i][j - 1];\n\t\t\t\tconst leftThick = this.tableVals[i][j] !== this.tableVals[i - 1][j];\n\t\t\t\tif (topThick || leftThick) {\n\t\t\t\t\tthis.cmd(act.setRectangleEdgeThickness, this.tableID[i][j], [\n\t\t\t\t\t\ttopThick,\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\tleftThick,\n\t\t\t\t\t]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\twhile (currX > 0 && currY > 0) {\n\t\t\tthis.cmd(act.setHighlight, this.tableID[currX][currY], 1);\n\t\t\tthis.cmd(act.setBackgroundColor, this.tableID[currX][currY], LCS_CELL_COLOR);\n\n\t\t\tif (\n\t\t\t\tthis.tableVals[currX - 1][currY] === this.tableVals[currX][currY - 1] &&\n\t\t\t\tthis.tableVals[currX - 1][currY] !== this.tableVals[currX][currY]\n\t\t\t) {\n\t\t\t\tthis.cmd(act.setHighlight, this.S1TableID[currX - 1], 1);\n\t\t\t\tthis.cmd(act.setHighlight, this.S2TableID[currY - 1], 1);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t'Hit a corner, move diagonally and add current character to LCS',\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(act.setHighlight, this.S1TableID[currX - 1], 0);\n\t\t\t\tthis.cmd(act.setHighlight, this.S2TableID[currY - 1], 0);\n\t\t\t} else {\n\t\t\t\tif (this.tableVals[currX - 1][currY] > this.tableVals[currX][currY - 1]) {\n\t\t\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Move left');\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Move up');\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\n\t\t\tthis.cmd(act.setHighlight, this.tableID[currX][currY], 0);\n\n\t\t\tif (\n\t\t\t\tthis.tableVals[currX - 1][currY] === this.tableVals[currX][currY - 1] &&\n\t\t\t\tthis.tableVals[currX - 1][currY] !== this.tableVals[currX][currY]\n\t\t\t) {\n\t\t\t\tconst nextSequenceID = this.nextIndex++;\n\t\t\t\tthis.oldIDs.push(nextSequenceID);\n\t\t\t\tsequence.push(nextSequenceID);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tnextSequenceID,\n\t\t\t\t\tstr1.charAt(currX - 1),\n\t\t\t\t\tSEQUENCE_START_X + (sequence.length - 1) * SEQUENCE_DELTA_X + 4,\n\t\t\t\t\tSEQUENCE_START_Y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setForegroundColor, nextSequenceID, '#0000FF');\n\n\t\t\t\tfor (let i = sequence.length - 1; i >= 0; i--) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tsequence[i],\n\t\t\t\t\t\tSEQUENCE_START_X + (sequence.length - 1 - i) * SEQUENCE_DELTA_X + 4,\n\t\t\t\t\t\tSEQUENCE_START_Y,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tcurrX = currX - 1;\n\t\t\t\tcurrY = currY - 1;\n\t\t\t} else {\n\t\t\t\tif (this.tableVals[currX - 1][currY] > this.tableVals[currX][currY - 1]) {\n\t\t\t\t\tcurrX = currX - 1;\n\t\t\t\t} else {\n\t\t\t\t\tcurrY = currY - 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 200;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nconst ARRRAY_ELEMS_PER_LINE = 15;\nconst ARRAY_LINE_SPACING = 130;\n\nconst FRONT_POS_X = 180;\nconst FRONT_POS_Y = 100;\nconst FRONT_LABEL_X = 130;\nconst FRONT_LABEL_Y = 100;\n\nconst SIZE_POS_X = 280;\nconst SIZE_POS_Y = 100;\nconst SIZE_LABEL_X = 230;\nconst SIZE_LABEL_Y = 100;\n\nconst QUEUE_LABEL_X = 50;\nconst QUEUE_LABEL_Y = 30;\nconst QUEUE_ELEMENT_X = 120;\nconst QUEUE_ELEMENT_Y = 30;\n\nconst INDEX_COLOR = '#0000FF';\n\nconst SIZE = 15;\n\nexport default class DequeArray extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.commands = [];\n\t\tthis.setup();\n\t\tthis.initialIndex = this.nextIndex;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\t// Add's value text field\n\t\tthis.addField = addControlToAlgorithmBar('Text', '');\n\t\tthis.addField.onkeydown = this.returnSubmit(this.addField, null, 4);\n\t\tthis.controls.push(this.addField);\n\n\t\t// Add first button\n\t\tthis.addFirstButton = addControlToAlgorithmBar('Button', 'Add First');\n\t\tthis.addFirstButton.onclick = this.addFirstCallBack.bind(this);\n\t\tthis.controls.push(this.addFirstButton);\n\n\t\taddLabelToAlgorithmBar('or');\n\n\t\t// Add last button\n\t\tthis.addLastButton = addControlToAlgorithmBar('Button', 'Add Last');\n\t\tthis.addLastButton.onclick = this.addLastCallback.bind(this);\n\t\tthis.controls.push(this.addLastButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Remove first button\n\t\tthis.removeFirstButton = addControlToAlgorithmBar('Button', 'Remove First');\n\t\tthis.removeFirstButton.onclick = this.removeFirstCallback.bind(this);\n\t\tthis.controls.push(this.removeFirstButton);\n\n\t\taddLabelToAlgorithmBar('or');\n\n\t\t// Remove last button\n\t\tthis.removeLastButton = addControlToAlgorithmBar('Button', 'Remove Last');\n\t\tthis.removeLastButton.onclick = this.removeLastCallback.bind(this);\n\t\tthis.controls.push(this.removeLastButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.nextIndex = 0;\n\n\t\tthis.arrayID = new Array(SIZE);\n\t\tthis.arrayLabelID = new Array(SIZE);\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelID[i] = this.nextIndex++;\n\t\t}\n\t\tthis.frontID = this.nextIndex++;\n\t\tconst frontLabelID = this.nextIndex++;\n\t\tthis.sizeID = this.nextIndex++;\n\t\tconst sizeLabelID = this.nextIndex++;\n\n\t\tthis.arrayData = new Array(SIZE);\n\t\tthis.front = 0;\n\t\tthis.size = 0;\n\t\tthis.leftoverLabelID = this.nextIndex++;\n\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tconst xpos = (i % ARRRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = Math.floor(i / ARRRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.createLabel, this.arrayLabelID[i], i, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\t\tthis.cmd(act.setForegroundColor, this.arrayLabelID[i], INDEX_COLOR);\n\t\t}\n\t\tthis.cmd(act.createLabel, frontLabelID, 'Front', FRONT_LABEL_X, FRONT_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.frontID,\n\t\t\t0,\n\t\t\tARRAY_ELEM_WIDTH,\n\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\tFRONT_POS_X,\n\t\t\tFRONT_POS_Y,\n\t\t);\n\n\t\tthis.cmd(act.createLabel, sizeLabelID, 'Size', SIZE_LABEL_X, SIZE_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.sizeID,\n\t\t\t0,\n\t\t\tARRAY_ELEM_WIDTH,\n\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\tSIZE_POS_X,\n\t\t\tSIZE_POS_Y,\n\t\t);\n\n\t\tthis.cmd(act.createLabel, this.leftoverLabelID, '', QUEUE_LABEL_X, QUEUE_LABEL_Y, false);\n\n\t\tthis.initialIndex = this.nextIndex;\n\n\t\tthis.highlight1ID = this.nextIndex++;\n\t\tthis.highlight2ID = this.nextIndex++;\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.top = 0;\n\t\tthis.front = 0;\n\t\tthis.size = 0;\n\t\tthis.arrayData = [];\n\t\tthis.nextIndex = this.initialIndex;\n\t}\n\n\taddLastCallback() {\n\t\tif (this.size < SIZE && this.addField.value !== '') {\n\t\t\tconst pushVal = this.addField.value;\n\t\t\tthis.addField.value = '';\n\t\t\tthis.implementAction(this.addLast.bind(this), pushVal);\n\t\t}\n\t}\n\n\tremoveFirstCallback() {\n\t\tif (this.size !== 0) {\n\t\t\tthis.implementAction(this.removeFirst.bind(this));\n\t\t}\n\t}\n\n\tremoveLastCallback() {\n\t\tif (this.size !== 0) {\n\t\t\tthis.implementAction(this.removeLast.bind(this));\n\t\t}\n\t}\n\n\taddFirstCallBack() {\n\t\tif (this.size < SIZE && this.addField.value !== '') {\n\t\t\tconst pushVal = this.addField.value;\n\t\t\tthis.addField.value = '';\n\t\t\tthis.implementAction(this.addFirst.bind(this), pushVal);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearAll.bind(this));\n\t}\n\n\taddLast(elemToaddLast) {\n\t\tthis.commands = [];\n\n\t\tconst labaddLastID = this.nextIndex++;\n\t\tconst labaddLastValID = this.nextIndex++;\n\t\tconst addIndex = (this.front + this.size) % SIZE;\n\n\t\tthis.arrayData[addIndex] = elemToaddLast;\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(act.createLabel, labaddLastID, 'Enqueuing Value: ', QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labaddLastValID, elemToaddLast, QUEUE_ELEMENT_X, QUEUE_ELEMENT_Y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.createHighlightCircle, this.highlight1ID, INDEX_COLOR, SIZE_POS_X, SIZE_POS_Y);\n\t\tthis.cmd(act.step);\n\n\t\tconst xpos = (addIndex % ARRRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(addIndex / ARRRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, labaddLastValID, xpos, ypos);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.arrayID[addIndex], elemToaddLast);\n\t\tthis.cmd(act.delete, labaddLastValID);\n\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\n\t\tthis.cmd(act.setHighlight, this.sizeID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.size = this.size + 1;\n\t\tthis.cmd(act.setText, this.sizeID, this.size);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.sizeID, 0);\n\t\tthis.cmd(act.delete, labaddLastID);\n\n\t\treturn this.commands;\n\t}\n\n\taddFirst(elemToAdd) {\n\t\tthis.commands = [];\n\n\t\tconst labelAddID = this.nextIndex++;\n\n\t\tconst addIndex = (this.front - 1 + SIZE) % SIZE;\n\n\t\tconst xpos = (addIndex % ARRRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(addIndex / ARRRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.arrayData[addIndex] = elemToAdd;\n\n\t\tthis.cmd(act.createLabel, labelAddID, elemToAdd, QUEUE_ELEMENT_X, QUEUE_ELEMENT_Y);\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\t\tthis.cmd(act.setPosition, this.leftoverLabelID, QUEUE_LABEL_X + 100, QUEUE_LABEL_Y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlight1ID,\n\t\t\tINDEX_COLOR,\n\t\t\tFRONT_POS_X,\n\t\t\tFRONT_POS_Y,\n\t\t);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tthis.leftoverLabelID,\n\t\t\t`Adding ${elemToAdd} at index (${this.front} - 1) % ${SIZE}`,\n\t\t);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(\n\t\t\tact.move,\n\t\t\tthis.highlight1ID,\n\t\t\tthis.front * ARRAY_ELEM_WIDTH + ARRAY_START_X,\n\t\t\typos + ARRAY_ELEM_HEIGHT,\n\t\t);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.move, labelAddID, xpos, ypos);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.arrayID[addIndex], elemToAdd);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.frontID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.frontID, addIndex);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.frontID, 0);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.sizeID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.sizeID, this.size + 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.sizeID, 0);\n\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.delete, labelAddID);\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\t\tthis.front = addIndex;\n\t\tthis.size++;\n\t\treturn this.commands;\n\t}\n\n\tremoveFirst() {\n\t\tthis.commands = [];\n\n\t\tconst labremoveFirstID = this.nextIndex++;\n\t\tconst labremoveFirstValID = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tlabremoveFirstID,\n\t\t\t'removeFirstd Value: ',\n\t\t\tQUEUE_LABEL_X,\n\t\t\tQUEUE_LABEL_Y,\n\t\t);\n\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlight1ID,\n\t\t\tINDEX_COLOR,\n\t\t\tFRONT_POS_X,\n\t\t\tFRONT_POS_Y,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\tconst xpos = (this.front % ARRRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(this.front / ARRRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\n\t\tconst removeFirstdVal = this.arrayData[this.front];\n\t\tthis.cmd(act.createLabel, labremoveFirstValID, removeFirstdVal, xpos, ypos);\n\t\tthis.cmd(act.setText, this.arrayID[this.front], '');\n\t\tthis.cmd(act.move, labremoveFirstValID, QUEUE_ELEMENT_X, QUEUE_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setHighlight, this.frontID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.front = (this.front + 1) % SIZE;\n\t\tthis.cmd(act.setText, this.frontID, this.front);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.frontID, 0);\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, 'removeFirstd Value: ' + removeFirstdVal);\n\n\t\tthis.cmd(act.delete, labremoveFirstID);\n\t\tthis.cmd(act.delete, labremoveFirstValID);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setHighlight, this.sizeID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.size--;\n\t\tthis.cmd(act.setText, this.sizeID, this.size);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.sizeID, 0);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.adjustIfEmpty();\n\n\t\treturn this.commands;\n\t}\n\n\tremoveLast() {\n\t\tthis.commands = [];\n\t\tconst remLabelID = this.nextIndex++;\n\t\tconst remLabelValID = this.nextIndex++;\n\n\t\tconst remIndex = (this.front + this.size - 1 + SIZE) % SIZE;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(act.createLabel, remLabelID, 'Removed Value: ', QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlight1ID,\n\t\t\tINDEX_COLOR,\n\t\t\tFRONT_POS_X,\n\t\t\tFRONT_POS_Y,\n\t\t);\n\t\tthis.cmd(act.createHighlightCircle, this.highlight2ID, INDEX_COLOR, SIZE_POS_X, SIZE_POS_Y);\n\n\t\tthis.cmd(act.step);\n\n\t\tconst xpos = (remIndex % ARRRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(remIndex / ARRRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.move, this.highlight2ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\t\tthis.cmd(act.delete, this.highlight2ID);\n\n\t\tconst removedVal = this.arrayData[remIndex];\n\t\tthis.cmd(act.createLabel, remLabelValID, removedVal, xpos, ypos);\n\t\tthis.cmd(act.setText, this.arrayID[remIndex], '');\n\t\tthis.cmd(act.move, remLabelValID, QUEUE_ELEMENT_X, QUEUE_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, 'Removed Value: ' + removedVal);\n\n\t\tthis.cmd(act.delete, remLabelID);\n\t\tthis.cmd(act.delete, remLabelValID);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setHighlight, this.sizeID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.sizeID, this.size - 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.sizeID, 0);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.size--;\n\n\t\tthis.adjustIfEmpty();\n\n\t\treturn this.commands;\n\t}\n\n\tadjustIfEmpty() {\n\t\tif (this.size === 0) {\n\t\t\tthis.cmd(act.setText, this.leftoverLabelID, 'size = 0, set front to 0');\n\t\t\tthis.front = 0;\n\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setHighlight, this.frontID, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, this.frontID, 0);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setHighlight, this.frontID, 0);\n\t\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\t\t}\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\t}\n\t\tthis.front = 0;\n\t\tthis.size = 0;\n\t\tthis.cmd(act.setText, this.frontID, '0');\n\t\tthis.cmd(act.setText, this.sizeID, '0');\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst LINKED_LIST_START_X = 100;\nconst LINKED_LIST_START_Y = 200;\nconst LINKED_LIST_ELEM_WIDTH = 100;\nconst LINKED_LIST_ELEM_HEIGHT = 30;\n\nconst LINKED_LIST_INSERT_X = 200;\nconst LINKED_LIST_INSERT_Y = 50;\n\nconst LINKED_LIST_ELEMS_PER_LINE = 8;\nconst LINKED_LIST_ELEM_SPACING = 150;\nconst LINKED_LIST_LINE_SPACING = 100;\n\nconst PUSH_LABEL_X = 50;\nconst PUSH_LABEL_Y = 30;\nconst PUSH_ELEMENT_X = 120;\nconst PUSH_ELEMENT_Y = 30;\n\nconst SIZE = 32;\n\nexport default class DequeLL extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t\tthis.initialIndex = this.nextIndex;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\t// Add's value text field\n\t\tthis.addField = addControlToAlgorithmBar('Text', '');\n\t\tthis.addField.onkeydown = this.returnSubmit(this.addField, null, 4);\n\t\tthis.controls.push(this.addField);\n\n\t\t// Add first button\n\t\tthis.addFirstButton = addControlToAlgorithmBar('Button', 'Add First');\n\t\tthis.addFirstButton.onclick = this.addFirstCallback.bind(this);\n\t\tthis.controls.push(this.addFirstButton);\n\n\t\taddLabelToAlgorithmBar('or');\n\n\t\t// Add last button\n\t\tthis.addLastButton = addControlToAlgorithmBar('Button', 'Add Last');\n\t\tthis.addLastButton.onclick = this.addLastCallback.bind(this);\n\t\tthis.controls.push(this.addLastButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Remove first button\n\t\tthis.removeFirstButton = addControlToAlgorithmBar('Button', 'Remove First');\n\t\tthis.removeFirstButton.onclick = this.removeFirstCallback.bind(this);\n\t\tthis.controls.push(this.removeFirstButton);\n\n\t\taddLabelToAlgorithmBar('or');\n\n\t\t// Remove last button\n\t\tthis.removeLastButton = addControlToAlgorithmBar('Button', 'Remove Last');\n\t\tthis.removeLastButton.onclick = this.removeLastCallback.bind(this);\n\t\tthis.controls.push(this.removeLastButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.linkedListElemID = new Array(SIZE);\n\n\t\tthis.arrayData = new Array(SIZE);\n\t\tthis.size = 0;\n\t\tthis.leftoverLabelID = this.nextIndex++;\n\n\t\tthis.cmd(act.createLabel, this.leftoverLabelID, '', PUSH_LABEL_X, PUSH_LABEL_Y);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.size = 0;\n\t\tthis.nextIndex = this.initialIndex;\n\t}\n\n\taddFirstCallback() {\n\t\tif (this.addField.value !== '') {\n\t\t\tconst addVal = parseInt(this.addField.value);\n\t\t\tthis.addField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, 0);\n\t\t}\n\t}\n\n\taddLastCallback() {\n\t\tif (this.addField.value !== '') {\n\t\t\tconst addVal = parseInt(this.addField.value);\n\t\t\tthis.addField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, this.size);\n\t\t}\n\t}\n\n\tremoveFirstCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), 0);\n\t\t}\n\t}\n\n\tremoveLastCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), this.size - 1);\n\t\t}\n\t}\n\n\t// getCallback(event)\n\t// {\n\t//     if (this.getField.value != \"\" && this.getField.value > 0 && this.getField.value < this.size)\n\t//     {\n\t//         this.implementAction(this.get.bind(this), \"\");\n\t//     }\n\t// }\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearAll.bind(this));\n\t}\n\n\tadd(elemToAdd, index) {\n\t\tthis.commands = [];\n\n\t\tconst labPushID = this.nextIndex++;\n\t\tconst labPushValID = this.nextIndex++;\n\n\t\tfor (let i = this.size - 1; i >= index; i--) {\n\t\t\tthis.arrayData[i + 1] = this.arrayData[i];\n\t\t\tthis.linkedListElemID[i + 1] = this.linkedListElemID[i];\n\t\t}\n\t\tthis.arrayData[index] = elemToAdd;\n\t\tthis.linkedListElemID[index] = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(\n\t\t\tact.createDoublyLinkedListNode,\n\t\t\tthis.linkedListElemID[index],\n\t\t\t'',\n\t\t\tLINKED_LIST_ELEM_WIDTH,\n\t\t\tLINKED_LIST_ELEM_HEIGHT,\n\t\t\tLINKED_LIST_INSERT_X,\n\t\t\tLINKED_LIST_INSERT_Y,\n\t\t\t0.25,\n\t\t);\n\n\t\tthis.cmd(act.createLabel, labPushID, 'Adding Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPushValID, elemToAdd, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, labPushValID, LINKED_LIST_INSERT_X, LINKED_LIST_INSERT_Y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.linkedListElemID[index], elemToAdd);\n\t\tthis.cmd(act.delete, labPushValID);\n\n\t\tif (index === 0) {\n\t\t\tthis.cmd(act.setPrevNull, this.linkedListElemID[index], 1);\n\t\t}\n\n\t\tif (index === this.size) {\n\t\t\tthis.cmd(act.setNextNull, this.linkedListElemID[index], 1);\n\t\t}\n\n\t\tif (this.size !== 0) {\n\t\t\tif (index === 0) {\n\t\t\t\tthis.cmd(act.setPrevNull, this.linkedListElemID[index + 1], 0);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t} else if (index === this.size) {\n\t\t\t\tthis.cmd(act.setNextNull, this.linkedListElemID[index - 1], 0);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.step);\n\t\tthis.size = this.size + 1;\n\t\tthis.resetNodePositions();\n\t\tthis.cmd(act.delete, labPushID);\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tremove(index) {\n\t\tthis.commands = [];\n\n\t\tindex = parseInt(index);\n\t\tconst labPopID = this.nextIndex++;\n\t\tconst labPopValID = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tconst nodePosX = LINKED_LIST_START_X + LINKED_LIST_ELEM_SPACING * index;\n\t\tconst nodePosY = LINKED_LIST_START_Y;\n\t\tthis.cmd(act.createLabel, labPopID, 'Removing Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPopValID, this.arrayData[index], nodePosX, nodePosY);\n\t\tthis.cmd(act.move, labPopValID, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\n\t\tif (this.size !== 1) {\n\t\t\tif (index === 0) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setPrevNull, this.linkedListElemID[index + 1], 1);\n\t\t\t} else if (index === this.size - 1) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setNextNull, this.linkedListElemID[index - 1], 1);\n\t\t\t} else {\n\t\t\t\tconst xPos =\n\t\t\t\t\t(index % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING +\n\t\t\t\t\tLINKED_LIST_START_X;\n\t\t\t\tconst yPos = LINKED_LIST_START_Y - LINKED_LIST_ELEM_HEIGHT * 2;\n\t\t\t\tthis.cmd(act.move, this.linkedListElemID[index], xPos, yPos);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, this.linkedListElemID[index]);\n\n\t\tfor (let i = index; i < this.size; i++) {\n\t\t\tthis.arrayData[i] = this.arrayData[i + 1];\n\t\t\tthis.linkedListElemID[i] = this.linkedListElemID[i + 1];\n\t\t}\n\t\tthis.size = this.size - 1;\n\t\tthis.resetNodePositions();\n\n\t\tthis.cmd(act.delete, labPopValID);\n\t\tthis.cmd(act.delete, labPopID);\n\n\t\treturn this.commands;\n\t}\n\n\tresetNodePositions() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tconst nextX =\n\t\t\t\t(i % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING + LINKED_LIST_START_X;\n\t\t\tconst nextY =\n\t\t\t\tMath.floor(i / LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_LINE_SPACING +\n\t\t\t\tLINKED_LIST_START_Y;\n\t\t\tthis.cmd(act.move, this.linkedListElemID[i], nextX, nextY);\n\t\t}\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.delete, this.linkedListElemID[i]);\n\t\t}\n\t\tthis.size = 0;\n\t\treturn this.commands;\n\t}\n}\n","class PriorityQueue {\n\tconstructor() {\n\t\tthis.backingArray = [];\n\t}\n\n\tenqueue(data, id, priority) {\n\t\tthis.backingArray.push([data, id, priority]);\n\t\tthis.backingArray.sort((a, b) => {\n\t\t\tif (a[2] !== b[2]) {\n\t\t\t\treturn a[2] - b[2];\n\t\t\t} else {\n\t\t\t\tif (Array.isArray(a[0])) {\n\t\t\t\t\tif (a[0][0] !== b[0][0]) {\n\t\t\t\t\t\treturn a[0][0] - b[0][0];\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn a[0][1] - b[0][1];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn a[0] - b[0];\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tdequeue() {\n\t\tconst x = this.backingArray.shift();\n\t\treturn [x[0], x[1]];\n\t}\n\n\tsize() {\n\t\treturn this.backingArray.length;\n\t}\n\n\tgetIDs() {\n\t\treturn this.backingArray.map(x => x[1]);\n\t}\n}\n\nexport default PriorityQueue;\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Graph, { VERTEX_INDEX_COLOR } from './Graph.js';\nimport {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { DIJKSTRAS_ADJ_LIST } from './util/GraphValues';\nimport PriorityQueue from './util/PriorityQueue';\nimport { act } from '../anim/AnimationMain';\n\nconst PQ_DEQUEUED_COLOR = '#0000FF';\nconst VISITED_COLOR = '#99CCFF';\n\nconst INFO_MSG_X = 25;\nconst INFO_MSG_Y = 15;\n\nconst VISITED_START_X = 30;\nconst VISITED_START_Y = 65;\nconst VISITED_SPACING = 20;\n\nconst CURRENT_VERTEX_LABEL_X = 25;\nconst CURRENT_VERTEX_LABEL_Y = 85;\nconst CURRENT_VERTEX_X = 110;\nconst CURRENT_VERTEX_Y = 85;\n\nconst PQ_LABEL_X = 25;\nconst PQ_LABEL_Y = 110;\n\nconst PQ_X = 110;\nconst PQ_Y = 110;\nconst PQ_SPACING = 42;\nconst PQ_LINE_SPACING = 25;\nconst PQ_MAX_PER_LINE = 9;\n\nconst TABLE_ENTRY_WIDTH = 50;\nconst SMALL_TABLE_ENTRY_HEIGHT = 20;\nconst LARGE_TABLE_ENTRY_HEIGHT = 17;\nconst TABLE_START_X = 50;\nconst TABLE_START_Y = 180;\n\nexport default class Dijkstras extends Graph {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h, DIJKSTRAS_ADJ_LIST, false, false, true);\n\t\tthis.addControls();\n\t}\n\n\taddControls() {\n\t\taddLabelToAlgorithmBar('Start vertex: ');\n\n\t\tthis.startField = addControlToAlgorithmBar('Text', '');\n\t\tthis.startField.onkeydown = this.returnSubmit(\n\t\t\tthis.startField,\n\t\t\tthis.startCallback.bind(this),\n\t\t\t1,\n\t\t\tfalse,\n\t\t);\n\t\tthis.startField.size = 2;\n\t\tthis.controls.push(this.startField);\n\n\t\tthis.startButton = addControlToAlgorithmBar('Button', 'Run');\n\t\tthis.startButton.onclick = this.startCallback.bind(this);\n\t\tthis.controls.push(this.startButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tsuper.addControls();\n\t}\n\n\tsetup(adjMatrix) {\n\t\tsuper.setup(adjMatrix);\n\n\t\tthis.commands = [];\n\n\t\tthis.vertexID = new Array(this.size);\n\n\t\tthis.distance = new Array(this.size);\n\t\tthis.distanceID = new Array(this.size);\n\n\t\tthis.visited = [];\n\t\tthis.visitedID = [];\n\n\t\tthis.pq = new PriorityQueue();\n\n\t\tthis.tableEntryHeight = this.isLarge ? LARGE_TABLE_ENTRY_HEIGHT : SMALL_TABLE_ENTRY_HEIGHT;\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.vertexID[i] = this.nextIndex++;\n\t\t\tthis.distanceID[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.vertexID[i],\n\t\t\t\tthis.toStr(i),\n\t\t\t\tTABLE_ENTRY_WIDTH,\n\t\t\t\tthis.tableEntryHeight,\n\t\t\t\tTABLE_START_X,\n\t\t\t\tTABLE_START_Y + i * this.tableEntryHeight,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.distanceID[i],\n\t\t\t\t'',\n\t\t\t\tTABLE_ENTRY_WIDTH,\n\t\t\t\tthis.tableEntryHeight,\n\t\t\t\tTABLE_START_X + TABLE_ENTRY_WIDTH,\n\t\t\t\tTABLE_START_Y + i * this.tableEntryHeight,\n\t\t\t);\n\t\t\tthis.cmd(act.setTextColor, this.vertexID[i], VERTEX_INDEX_COLOR);\n\t\t}\n\n\t\tthis.infoLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, this.infoLabelID, '', INFO_MSG_X, INFO_MSG_Y, 0);\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Visited Set:',\n\t\t\tVISITED_START_X - 5,\n\t\t\tVISITED_START_Y - 25,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Current vertex:',\n\t\t\tCURRENT_VERTEX_LABEL_X,\n\t\t\tCURRENT_VERTEX_LABEL_Y,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(act.createLabel, this.nextIndex++, 'Priority Queue:', PQ_LABEL_X, PQ_LABEL_Y, 0);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Distance Map:',\n\t\t\tTABLE_START_X + 0.5 * TABLE_ENTRY_WIDTH,\n\t\t\tTABLE_START_Y - SMALL_TABLE_ENTRY_HEIGHT,\n\t\t);\n\n\t\tthis.animationManager.setAllLayers([0, this.currentLayer]);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tthis.comparisonMessageID = this.nextIndex++;\n\t\tthis.lastIndex = this.nextIndex;\n\t}\n\n\treset() {\n\t\tthis.nextIndex = this.lastIndex;\n\t\tthis.messageID = [];\n\t\tthis.visitedID = [];\n\t\tthis.pq = new PriorityQueue();\n\t}\n\n\tstartCallback() {\n\t\tlet startvalue;\n\n\t\tif (this.startField.value !== '') {\n\t\t\tstartvalue = this.startField.value;\n\t\t\tthis.startField.value = '';\n\t\t\tstartvalue = startvalue.toUpperCase().charCodeAt(0) - 65;\n\t\t\tif (startvalue >= 0 && startvalue < this.size)\n\t\t\t\tthis.implementAction(this.doDijkstra.bind(this), startvalue);\n\t\t}\n\t}\n\n\tdoDijkstra(startVertex) {\n\t\tthis.commands = [];\n\n\t\tlet current = startVertex;\n\t\tlet currentID = this.nextIndex++;\n\n\t\tthis.clear();\n\n\t\tthis.visitedID = [];\n\n\t\tthis.distance[current] = 0;\n\t\tthis.cmd(act.setText, this.distanceID[current], 0);\n\n\t\tthis.pq = new PriorityQueue();\n\t\tthis.pq.enqueue(current, currentID, 0);\n\t\tthis.cmd(act.createLabel, currentID, '(' + this.toStr(current) + ', 0)', PQ_X, PQ_Y, 0);\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tthis.infoLabelID,\n\t\t\t'Enqueueing ' + this.toStr(current) + ' with distance 0 and updating distance map',\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\twhile (this.visited.includes(false) && this.pq.size() !== 0) {\n\t\t\t[current, currentID] = this.pq.dequeue();\n\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Dequeueing ' + this.toStr(current));\n\t\t\tthis.cmd(act.move, currentID, CURRENT_VERTEX_X, CURRENT_VERTEX_Y);\n\t\t\tthis.cmd(act.setText, currentID, this.toStr(current));\n\t\t\tthis.cmd(act.setTextColor, currentID, PQ_DEQUEUED_COLOR);\n\t\t\tlet pqIDs = this.pq.getIDs();\n\t\t\tfor (let i = 0; i < this.pq.size(); i++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\tpqIDs[i],\n\t\t\t\t\tPQ_X + (i % PQ_MAX_PER_LINE) * PQ_SPACING,\n\t\t\t\t\tPQ_Y + Math.floor(i / PQ_MAX_PER_LINE) * PQ_LINE_SPACING,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.visitVertex(current);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tif (!this.visited[current]) {\n\t\t\t\tthis.visited[current] = true;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t'Adding ' + this.toStr(current) + ' to visited set',\n\t\t\t\t);\n\t\t\t\tthis.visitedID.push(this.nextIndex);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\tthis.toStr(current),\n\t\t\t\t\tVISITED_START_X + (this.visitedID.length - 1) * VISITED_SPACING,\n\t\t\t\t\tVISITED_START_Y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setBackgroundColor, this.circleID[current], VISITED_COLOR);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t'Updating neighbors of vertex ' + this.toStr(current),\n\t\t\t\t);\n\t\t\t\tfor (let neighbor = 0; neighbor < this.size; neighbor++) {\n\t\t\t\t\tif (this.adj_matrix[current][neighbor] >= 0) {\n\t\t\t\t\t\tthis.highlightEdge(current, neighbor, 1);\n\t\t\t\t\t\tif (this.visited[neighbor]) {\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t\t\tthis.toStr(neighbor) + ' has already been visited, skipping',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Comparing distances');\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, this.distanceID[current], 1);\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, this.distanceID[neighbor], 1);\n\t\t\t\t\t\t\tconst curDist = this.distance[current];\n\t\t\t\t\t\t\tconst edgDist = this.adj_matrix[current][neighbor];\n\t\t\t\t\t\t\tconst newDist = curDist + edgDist;\n\t\t\t\t\t\t\tconst oldDist = this.distance[neighbor];\n\t\t\t\t\t\t\tconst oldDistStr =\n\t\t\t\t\t\t\t\toldDist >= 0 ? String(this.distance[neighbor]) : 'INF';\n\n\t\t\t\t\t\t\tif (oldDist < 0 || newDist < oldDist) {\n\t\t\t\t\t\t\t\tthis.distance[neighbor] = newDist;\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\t\t\tthis.comparisonMessageID,\n\t\t\t\t\t\t\t\t\t'New distance (' +\n\t\t\t\t\t\t\t\t\t\tcurDist +\n\t\t\t\t\t\t\t\t\t\t' + ' +\n\t\t\t\t\t\t\t\t\t\tedgDist +\n\t\t\t\t\t\t\t\t\t\t' = ' +\n\t\t\t\t\t\t\t\t\t\tnewDist +\n\t\t\t\t\t\t\t\t\t\t') is less than old distance (' +\n\t\t\t\t\t\t\t\t\t\toldDistStr +\n\t\t\t\t\t\t\t\t\t\t'), updating',\n\t\t\t\t\t\t\t\t\tTABLE_START_X + 2 * TABLE_ENTRY_WIDTH - 15,\n\t\t\t\t\t\t\t\t\tTABLE_START_Y + neighbor * this.tableEntryHeight - 5,\n\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Updating distance');\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\t\tthis.distanceID[neighbor],\n\t\t\t\t\t\t\t\t\tthis.distance[neighbor],\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.cmd(act.setHighlight, this.distanceID[current], 0);\n\t\t\t\t\t\t\t\tthis.cmd(act.setHighlight, this.distanceID[neighbor], 0);\n\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\t\tthis.cmd(act.delete, this.comparisonMessageID);\n\t\t\t\t\t\t\t\tthis.pq.enqueue(neighbor, this.nextIndex, newDist);\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t\t\t\t'Enqueueing ' +\n\t\t\t\t\t\t\t\t\t\tthis.toStr(neighbor) +\n\t\t\t\t\t\t\t\t\t\t' with distance ' +\n\t\t\t\t\t\t\t\t\t\tnewDist,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t\t\t\t\t'(' + this.toStr(neighbor) + ', ' + newDist + ')',\n\t\t\t\t\t\t\t\t\tPQ_X + ((this.pq.size() - 1) % PQ_MAX_PER_LINE) * PQ_SPACING,\n\t\t\t\t\t\t\t\t\tPQ_Y +\n\t\t\t\t\t\t\t\t\t\tMath.floor((this.pq.size() - 1) / PQ_MAX_PER_LINE) *\n\t\t\t\t\t\t\t\t\t\t\tPQ_LINE_SPACING,\n\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t\t\t\t\tconst newPqIDs = this.pq.getIDs();\n\t\t\t\t\t\t\t\tif (String(pqIDs) !== String(newPqIDs.slice(0, -1))) {\n\t\t\t\t\t\t\t\t\t// Check if newly enqueued element shifted things\n\t\t\t\t\t\t\t\t\tfor (let i = 0; i < this.pq.size(); i++) {\n\t\t\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\t\t\t\t\tnewPqIDs[i],\n\t\t\t\t\t\t\t\t\t\t\tPQ_X + (i % PQ_MAX_PER_LINE) * PQ_SPACING,\n\t\t\t\t\t\t\t\t\t\t\tPQ_Y +\n\t\t\t\t\t\t\t\t\t\t\t\tMath.floor(i / PQ_MAX_PER_LINE) * PQ_LINE_SPACING,\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tpqIDs = newPqIDs;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\t\t\tthis.comparisonMessageID,\n\t\t\t\t\t\t\t\t\t'New distance (' +\n\t\t\t\t\t\t\t\t\t\tcurDist +\n\t\t\t\t\t\t\t\t\t\t' + ' +\n\t\t\t\t\t\t\t\t\t\tedgDist +\n\t\t\t\t\t\t\t\t\t\t' = ' +\n\t\t\t\t\t\t\t\t\t\tnewDist +\n\t\t\t\t\t\t\t\t\t\t') is greater than or equal to old distance (' +\n\t\t\t\t\t\t\t\t\t\toldDistStr +\n\t\t\t\t\t\t\t\t\t\t'), skipping',\n\t\t\t\t\t\t\t\t\tTABLE_START_X + 2 * TABLE_ENTRY_WIDTH - 15,\n\t\t\t\t\t\t\t\t\tTABLE_START_Y + neighbor * this.tableEntryHeight - 5,\n\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\t\tthis.cmd(act.delete, this.comparisonMessageID);\n\t\t\t\t\t\t\t\tthis.cmd(act.setHighlight, this.distanceID[current], 0);\n\t\t\t\t\t\t\t\tthis.cmd(act.setHighlight, this.distanceID[neighbor], 0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.highlightEdge(current, neighbor, 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\tthis.toStr(current) + ' has already been visited, skipping',\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tthis.leaveVertex();\n\t\t\tthis.cmd(act.delete, currentID);\n\t\t}\n\n\t\tif (this.pq.size() > 0) {\n\t\t\tthis.cmd(act.setText, this.infoLabelID, 'All vertices have been visited, done');\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Priority queue is empty, done');\n\t\t}\n\n\t\treturn this.commands;\n\t}\n\n\tclear() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.circleID[i], '#FFFFFF');\n\t\t\tthis.cmd(act.setText, this.distanceID[i], 'INF');\n\t\t\tthis.visited[i] = false;\n\t\t\tthis.distance[i] = -1;\n\t\t}\n\t\tfor (let i = 0; i < this.visitedID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.visitedID[i]);\n\t\t}\n\t\tconst pqIDs = this.pq.getIDs();\n\t\tfor (const id of pqIDs) {\n\t\t\tthis.cmd(act.delete, id);\n\t\t}\n\t\tif (this.messageID != null) {\n\t\t\tfor (let i = 0; i < this.messageID.length; i++) {\n\t\t\t\tthis.cmd(act.delete, this.messageID[i]);\n\t\t\t}\n\t\t}\n\t\tthis.messageID = [];\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm';\nimport { act } from '../anim/AnimationMain';\n\nconst LINKED_LIST_START_X = 100;\nconst LINKED_LIST_START_Y = 200;\nconst LINKED_LIST_ELEM_WIDTH = 100;\nconst LINKED_LIST_ELEM_HEIGHT = 30;\n\nconst LINKED_LIST_INSERT_X = 200;\nconst LINKED_LIST_INSERT_Y = 50;\n\nconst LINKED_LIST_ELEMS_PER_LINE = 8;\nconst LINKED_LIST_ELEM_SPACING = 150;\nconst LINKED_LIST_LINE_SPACING = 100;\n\nconst PUSH_LABEL_X = 50;\nconst PUSH_LABEL_Y = 30;\nconst PUSH_ELEMENT_X = 120;\nconst PUSH_ELEMENT_Y = 30;\n\nconst SIZE = 32;\n\nexport default class DoublyLinkedList extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t\tthis.initialIndex = this.nextIndex;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tconst addVerticalGroup = addGroupToAlgorithmBar(false);\n\t\tconst addTopHorizontalGroup = addGroupToAlgorithmBar(true, addVerticalGroup);\n\t\tconst addBottomHorizontalGroup = addGroupToAlgorithmBar(true, addVerticalGroup);\n\n\t\taddLabelToAlgorithmBar('Add', addTopHorizontalGroup);\n\n\t\t// Add's value text field\n\t\tthis.addValueField = addControlToAlgorithmBar('Text', '', addTopHorizontalGroup);\n\t\tthis.addValueField.onkeydown = this.returnSubmit(\n\t\t\tthis.addValueField,\n\t\t\t() => this.addIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.addValueField);\n\n\t\taddLabelToAlgorithmBar('at index', addTopHorizontalGroup);\n\n\t\t// Add's index text field\n\t\tthis.addIndexField = addControlToAlgorithmBar('Text', '', addTopHorizontalGroup);\n\t\tthis.addIndexField.onkeydown = this.returnSubmit(\n\t\t\tthis.addIndexField,\n\t\t\t() => this.addIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.addIndexField);\n\n\t\t// Add to front button\n\t\tthis.addFrontButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add to Front',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addFrontButton.onclick = this.addFrontCallback.bind(this);\n\t\tthis.controls.push(this.addFrontButton);\n\n\t\t// Add to back button\n\t\tthis.addBackButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add to Back',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addBackButton.onclick = () => this.addBackCallback();\n\t\tthis.controls.push(this.addBackButton);\n\n\t\taddLabelToAlgorithmBar('or', addBottomHorizontalGroup);\n\n\t\t// Add at index button\n\t\tthis.addIndexButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add at Index',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addIndexButton.onclick = this.addIndexCallback.bind(this);\n\t\tthis.controls.push(this.addIndexButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst removeVerticalGroup = addGroupToAlgorithmBar(false);\n\t\tconst removeTopHorizontalGroup = addGroupToAlgorithmBar(true, removeVerticalGroup);\n\t\tconst removeBottomHorizontalGroup = addGroupToAlgorithmBar(true, removeVerticalGroup);\n\n\t\taddLabelToAlgorithmBar('Index', removeTopHorizontalGroup);\n\n\t\t// Remove's index text field\n\t\tthis.removeField = addControlToAlgorithmBar('Text', '', removeTopHorizontalGroup);\n\t\tthis.removeField.onkeydown = this.returnSubmit(\n\t\t\tthis.removeField,\n\t\t\t() => this.removeIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.removeField);\n\n\t\t// Remove from index button\n\t\tthis.removeIndexButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Index',\n\t\t\tremoveTopHorizontalGroup,\n\t\t);\n\t\tthis.removeIndexButton.onclick = () => this.removeIndexCallback();\n\t\tthis.controls.push(this.removeIndexButton);\n\n\t\taddLabelToAlgorithmBar('or', removeBottomHorizontalGroup);\n\n\t\t// Remove from front button\n\t\tthis.removeFrontButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Front',\n\t\t\tremoveBottomHorizontalGroup,\n\t\t);\n\t\tthis.removeFrontButton.onclick = () => this.removeFrontCallback();\n\t\tthis.controls.push(this.removeFrontButton);\n\n\t\t// Remove from back button\n\t\tthis.removeBackButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Back',\n\t\t\tremoveBottomHorizontalGroup,\n\t\t);\n\t\tthis.removeBackButton.onclick = () => this.removeBackCallback();\n\t\tthis.controls.push(this.removeBackButton);\n\n\t\t// Get's index text field\n\t\t// this.getField = addControlToAlgorithmBar(\"Text\", \"\");\n\t\t// this.getField.onkeydown = this.returnSubmit(this.getField, () => this.getCallback(), 4, true);\n\t\t// this.controls.push(this.getField);\n\n\t\t// Get button\n\t\t// this.getButton = addControlToAlgorithmBar(\"Button\", \"Get\");\n\t\t// this.getButton.onclick = () => this.getCallback();\n\t\t// this.controls.push(this.getButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = () => this.clearCallback();\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.linkedListElemID = new Array(SIZE);\n\n\t\tthis.arrayData = new Array(SIZE);\n\t\tthis.size = 0;\n\t\tthis.leftoverLabelID = this.nextIndex++;\n\n\t\tthis.cmd(act.createLabel, this.leftoverLabelID, '', PUSH_LABEL_X, PUSH_LABEL_Y);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.size = 0;\n\t\tthis.nextIndex = this.initialIndex;\n\t}\n\n\taddIndexCallback() {\n\t\tif (this.addValueField.value !== '' && this.addIndexField.value !== '') {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tconst index = parseInt(this.addIndexField.value);\n\t\t\tif (index >= 0 && index <= this.size) {\n\t\t\t\tthis.addValueField.value = '';\n\t\t\t\tthis.addIndexField.value = '';\n\t\t\t\tthis.implementAction(this.add.bind(this), addVal, index);\n\t\t\t}\n\t\t}\n\t}\n\n\taddFrontCallback() {\n\t\tif (this.addValueField.value !== '') {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tthis.addValueField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, 0);\n\t\t}\n\t}\n\n\taddBackCallback() {\n\t\tif (this.addValueField.value !== '') {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tthis.addValueField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, this.size);\n\t\t}\n\t}\n\n\tremoveIndexCallback() {\n\t\tif (this.removeField.value !== '') {\n\t\t\tconst index = this.removeField.value;\n\t\t\tif (index >= 0 && index < this.size) {\n\t\t\t\tthis.removeField.value = '';\n\t\t\t\tthis.implementAction(this.remove.bind(this), index);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveFrontCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), 0);\n\t\t}\n\t}\n\n\tremoveBackCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), this.size - 1);\n\t\t}\n\t}\n\n\t// DoublyLinkedList.prototype.getCallback = function(event)\n\t// {\n\t//     if (this.getField.value != \"\" && this.getField.value > 0 && this.getField.value < this.size)\n\t//     {\n\t//         this.implementAction(this.get.bind(this), \"\");\n\t//     }\n\t// }\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearAll.bind(this));\n\t}\n\n\tadd(elemToAdd, index) {\n\t\tthis.commands = [];\n\n\t\tconst labPushID = this.nextIndex++;\n\t\tconst labPushValID = this.nextIndex++;\n\n\t\tfor (let i = this.size - 1; i >= index; i--) {\n\t\t\tthis.arrayData[i + 1] = this.arrayData[i];\n\t\t\tthis.linkedListElemID[i + 1] = this.linkedListElemID[i];\n\t\t}\n\t\tthis.arrayData[index] = elemToAdd;\n\t\tthis.linkedListElemID[index] = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(\n\t\t\tact.createDoublyLinkedListNode,\n\t\t\tthis.linkedListElemID[index],\n\t\t\t'',\n\t\t\tLINKED_LIST_ELEM_WIDTH,\n\t\t\tLINKED_LIST_ELEM_HEIGHT,\n\t\t\tLINKED_LIST_INSERT_X,\n\t\t\tLINKED_LIST_INSERT_Y,\n\t\t);\n\n\t\tthis.cmd(act.createLabel, labPushID, 'Adding Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPushValID, elemToAdd, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, labPushValID, LINKED_LIST_INSERT_X, LINKED_LIST_INSERT_Y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.linkedListElemID[index], elemToAdd);\n\t\tthis.cmd(act.delete, labPushValID);\n\n\t\tif (index === 0) {\n\t\t\tthis.cmd(act.setPrevNull, this.linkedListElemID[index], 1);\n\t\t}\n\n\t\tif (index === this.size) {\n\t\t\tthis.cmd(act.setNextNull, this.linkedListElemID[index], 1);\n\t\t}\n\n\t\tif (this.size !== 0) {\n\t\t\tif (index === 0) {\n\t\t\t\tthis.cmd(act.setPrevNull, this.linkedListElemID[index + 1], 0);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t} else if (index === this.size) {\n\t\t\t\tthis.cmd(act.setNextNull, this.linkedListElemID[index - 1], 0);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.step);\n\t\tthis.size = this.size + 1;\n\t\tthis.resetNodePositions();\n\t\tthis.cmd(act.delete, labPushID);\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tremove(index) {\n\t\tthis.commands = [];\n\n\t\tindex = parseInt(index);\n\t\tconst labPopID = this.nextIndex++;\n\t\tconst labPopValID = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tconst nodePosX = LINKED_LIST_START_X + LINKED_LIST_ELEM_SPACING * index;\n\t\tconst nodePosY = LINKED_LIST_START_Y;\n\t\tthis.cmd(act.createLabel, labPopID, 'Removing Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPopValID, this.arrayData[index], nodePosX, nodePosY);\n\t\tthis.cmd(act.move, labPopValID, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\n\t\tif (this.size !== 1) {\n\t\t\tif (index === 0) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setPrevNull, this.linkedListElemID[index + 1], 1);\n\t\t\t} else if (index === this.size - 1) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setNextNull, this.linkedListElemID[index - 1], 1);\n\t\t\t} else {\n\t\t\t\tconst xPos =\n\t\t\t\t\t(index % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING +\n\t\t\t\t\tLINKED_LIST_START_X;\n\t\t\t\tconst yPos = LINKED_LIST_START_Y - LINKED_LIST_ELEM_HEIGHT * 2;\n\t\t\t\tthis.cmd(act.move, this.linkedListElemID[index], xPos, yPos);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, this.linkedListElemID[index]);\n\n\t\tfor (let i = index; i < this.size; i++) {\n\t\t\tthis.arrayData[i] = this.arrayData[i + 1];\n\t\t\tthis.linkedListElemID[i] = this.linkedListElemID[i + 1];\n\t\t}\n\t\tthis.size = this.size - 1;\n\t\tthis.resetNodePositions();\n\n\t\tthis.cmd(act.delete, labPopValID);\n\t\tthis.cmd(act.delete, labPopID);\n\n\t\treturn this.commands;\n\t}\n\n\tresetNodePositions() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tconst nextX =\n\t\t\t\t(i % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING + LINKED_LIST_START_X;\n\t\t\tconst nextY =\n\t\t\t\tMath.floor(i / LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_LINE_SPACING +\n\t\t\t\tLINKED_LIST_START_Y;\n\t\t\tthis.cmd(act.move, this.linkedListElemID[i], nextX, nextY);\n\t\t}\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.delete, this.linkedListElemID[i]);\n\t\t}\n\t\tthis.size = 0;\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Graph, { LARGE_SIZE, SMALL_SIZE } from './Graph.js';\nimport { addControlToAlgorithmBar, addDivisorToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst SMALL_COST_TABLE_WIDTH = 30;\nconst SMALL_COST_TABLE_HEIGHT = 30;\nconst SMALL_COST_TABLE_START_X = 40;\nconst SMALL_COST_TABLE_START_Y = 70;\n\nconst SMALL_PATH_TABLE_WIDTH = 30;\nconst SMALL_PATH_TABLE_HEIGHT = 30;\nconst SMALL_PATH_TABLE_START_X = 330;\nconst SMALL_PATH_TABLE_START_Y = 70;\n\nconst SMALL_NODE_1_X_POS = 50;\nconst SMALL_NODE_1_Y_POS = 400;\nconst SMALL_NODE_2_X_POS = 150;\nconst SMALL_NODE_2_Y_POS = 350;\nconst SMALL_NODE_3_X_POS = 250;\nconst SMALL_NODE_3_Y_POS = 400;\n\nconst SMALL_MESSAGE_X = 400;\nconst SMALL_MESSAGE_Y = 350;\n\nconst LARGE_COST_TABLE_WIDTH = 20;\nconst LARGE_COST_TABLE_HEIGHT = 20;\nconst LARGE_COST_TABLE_START_X = 40;\nconst LARGE_COST_TABLE_START_Y = 50;\n\nconst LARGE_PATH_TABLE_WIDTH = 20;\nconst LARGE_PATH_TABLE_HEIGHT = 20;\nconst LARGE_PATH_TABLE_START_X = 500;\nconst LARGE_PATH_TABLE_START_Y = 50;\n\nconst LARGE_NODE_1_X_POS = 50;\nconst LARGE_NODE_1_Y_POS = 500;\nconst LARGE_NODE_2_X_POS = 150;\nconst LARGE_NODE_2_Y_POS = 450;\nconst LARGE_NODE_3_X_POS = 250;\nconst LARGE_NODE_3_Y_POS = 500;\n\nconst LARGE_MESSAGE_X = 300;\nconst LARGE_MESSAGE_Y = 450;\n\nexport default class Floyd extends Graph {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h, [], false, false, true);\n\t\tthis.addControls();\n\t}\n\n\taddControls() {\n\t\tthis.startButton = addControlToAlgorithmBar('Button', 'Run');\n\t\tthis.startButton.onclick = this.startCallback.bind(this);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tsuper.addControls();\n\t\tthis.smallGraphButton.onclick = this.smallGraphCallback.bind(this);\n\t\tthis.largeGraphButton.onclick = this.largeGraphCallback.bind(this);\n\t}\n\n\treset() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\tthis.costTable[i][j] = this.adj_matrix[i][j];\n\t\t\t\tif (this.costTable[i][j] >= 0) {\n\t\t\t\t\tthis.pathTable[i][j] = i;\n\t\t\t\t} else {\n\t\t\t\t\tthis.pathTable[i][j] = -1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tsmallGraphCallback() {\n\t\tif (this.size !== SMALL_SIZE) {\n\t\t\tthis.animationManager.resetAll();\n\t\t\tthis.animationManager.setAllLayers([0, this.currentLayer]);\n\t\t\tthis.logicalButton.disabled = false;\n\t\t\tthis.adjacencyListButton.disabled = false;\n\t\t\tthis.adjacencyMatrixButton.disabled = false;\n\t\t\tthis.setup_small();\n\t\t}\n\t}\n\n\tlargeGraphCallback() {\n\t\tif (this.size !== LARGE_SIZE) {\n\t\t\tthis.animationManager.resetAll();\n\t\t\t//this.animationManager.setAllLayers([0]);\n\t\t\tthis.logicalButton.disabled = true;\n\t\t\tthis.adjacencyListButton.disabled = true;\n\t\t\tthis.adjacencyMatrixButton.disabled = true;\n\t\t\tthis.setup_large();\n\t\t}\n\t}\n\n\tgetCostLabel(value, alwaysUseINF) {\n\t\talwaysUseINF = alwaysUseINF === undefined ? false : alwaysUseINF;\n\t\tif (value >= 0) {\n\t\t\treturn String(value);\n\t\t} else if (this.size === SMALL_SIZE || alwaysUseINF) {\n\t\t\treturn 'INF';\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tsetup_small() {\n\t\tthis.cost_table_width = SMALL_COST_TABLE_WIDTH;\n\t\tthis.cost_table_height = SMALL_COST_TABLE_HEIGHT;\n\t\tthis.cost_table_start_x = SMALL_COST_TABLE_START_X;\n\t\tthis.cost_table_start_y = SMALL_COST_TABLE_START_Y;\n\n\t\tthis.path_table_width = SMALL_PATH_TABLE_WIDTH;\n\t\tthis.path_table_height = SMALL_PATH_TABLE_HEIGHT;\n\t\tthis.path_table_start_x = SMALL_PATH_TABLE_START_X;\n\t\tthis.path_table_start_y = SMALL_PATH_TABLE_START_Y;\n\n\t\tthis.node_1_x_pos = SMALL_NODE_1_X_POS;\n\t\tthis.node_1_y_pos = SMALL_NODE_1_Y_POS;\n\t\tthis.node_2_x_pos = SMALL_NODE_2_X_POS;\n\t\tthis.node_2_y_pos = SMALL_NODE_2_Y_POS;\n\t\tthis.node_3_x_pos = SMALL_NODE_3_X_POS;\n\t\tthis.node_3_y_pos = SMALL_NODE_3_Y_POS;\n\n\t\tthis.message_x = SMALL_MESSAGE_X;\n\t\tthis.message_y = SMALL_MESSAGE_Y;\n\t\tsuper.setup_small();\n\t}\n\n\tsetup_large() {\n\t\tthis.cost_table_width = LARGE_COST_TABLE_WIDTH;\n\t\tthis.cost_table_height = LARGE_COST_TABLE_HEIGHT;\n\t\tthis.cost_table_start_x = LARGE_COST_TABLE_START_X;\n\t\tthis.cost_table_start_y = LARGE_COST_TABLE_START_Y;\n\n\t\tthis.path_table_width = LARGE_PATH_TABLE_WIDTH;\n\t\tthis.path_table_height = LARGE_PATH_TABLE_HEIGHT;\n\t\tthis.path_table_start_x = LARGE_PATH_TABLE_START_X;\n\t\tthis.path_table_start_y = LARGE_PATH_TABLE_START_Y;\n\n\t\tthis.node_1_x_pos = LARGE_NODE_1_X_POS;\n\t\tthis.node_1_y_pos = LARGE_NODE_1_Y_POS;\n\t\tthis.node_2_x_pos = LARGE_NODE_2_X_POS;\n\t\tthis.node_2_y_pos = LARGE_NODE_2_Y_POS;\n\t\tthis.node_3_x_pos = LARGE_NODE_3_X_POS;\n\t\tthis.node_3_y_pos = LARGE_NODE_3_Y_POS;\n\n\t\tthis.message_x = LARGE_MESSAGE_X;\n\t\tthis.message_y = LARGE_MESSAGE_Y;\n\n\t\tsuper.setup_large();\n\t}\n\n\tsetup() {\n\t\tsuper.setup();\n\t\tthis.commands = [];\n\n\t\tthis.costTable = new Array(this.size);\n\t\tthis.pathTable = new Array(this.size);\n\t\tthis.costTableID = new Array(this.size);\n\t\tthis.pathTableID = new Array(this.size);\n\t\tthis.pathIndexXID = new Array(this.size);\n\t\tthis.pathIndexYID = new Array(this.size);\n\t\tthis.costIndexXID = new Array(this.size);\n\t\tthis.costIndexYID = new Array(this.size);\n\n\t\tthis.node1ID = this.nextIndex++;\n\t\tthis.node2ID = this.nextIndex++;\n\t\tthis.node3ID = this.nextIndex++;\n\n\t\tlet i;\n\t\tfor (i = 0; i < this.size; i++) {\n\t\t\tthis.costTable[i] = new Array(this.size);\n\t\t\tthis.pathTable[i] = new Array(this.size);\n\t\t\tthis.costTableID[i] = new Array(this.size);\n\t\t\tthis.pathTableID[i] = new Array(this.size);\n\t\t}\n\n\t\tconst costTableHeader = this.nextIndex++;\n\t\tconst pathTableHeader = this.nextIndex++;\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tcostTableHeader,\n\t\t\t'Cost Table',\n\t\t\tthis.cost_table_start_x,\n\t\t\tthis.cost_table_start_y - 2 * this.cost_table_height,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tpathTableHeader,\n\t\t\t'Path Table',\n\t\t\tthis.path_table_start_x,\n\t\t\tthis.path_table_start_y - 2 * this.path_table_height,\n\t\t\t0,\n\t\t);\n\n\t\tfor (i = 0; i < this.size; i++) {\n\t\t\tthis.pathIndexXID[i] = this.nextIndex++;\n\t\t\tthis.pathIndexYID[i] = this.nextIndex++;\n\t\t\tthis.costIndexXID[i] = this.nextIndex++;\n\t\t\tthis.costIndexYID[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.pathIndexXID[i],\n\t\t\t\ti,\n\t\t\t\tthis.path_table_start_x + i * this.path_table_width,\n\t\t\t\tthis.path_table_start_y - this.path_table_height,\n\t\t\t);\n\t\t\tthis.cmd(act.setTextColor, this.pathIndexXID[i], '#0000FF');\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.pathIndexYID[i],\n\t\t\t\ti,\n\t\t\t\tthis.path_table_start_x - this.path_table_width,\n\t\t\t\tthis.path_table_start_y + i * this.path_table_height,\n\t\t\t);\n\t\t\tthis.cmd(act.setTextColor, this.pathIndexYID[i], '#0000FF');\n\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.costIndexXID[i],\n\t\t\t\ti,\n\t\t\t\tthis.cost_table_start_x + i * this.cost_table_width,\n\t\t\t\tthis.cost_table_start_y - this.cost_table_height,\n\t\t\t);\n\t\t\tthis.cmd(act.setTextColor, this.costIndexXID[i], '#0000FF');\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.costIndexYID[i],\n\t\t\t\ti,\n\t\t\t\tthis.cost_table_start_x - this.cost_table_width,\n\t\t\t\tthis.cost_table_start_y + i * this.cost_table_height,\n\t\t\t);\n\t\t\tthis.cmd(act.setTextColor, this.costIndexYID[i], '#0000FF');\n\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\tthis.costTable[i][j] = this.adj_matrix[i][j];\n\t\t\t\tif (this.costTable[i][j] >= 0) {\n\t\t\t\t\tthis.pathTable[i][j] = i;\n\t\t\t\t} else {\n\t\t\t\t\tthis.pathTable[i][j] = -1;\n\t\t\t\t}\n\t\t\t\tthis.costTableID[i][j] = this.nextIndex++;\n\t\t\t\tthis.pathTableID[i][j] = this.nextIndex++;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.costTableID[i][j],\n\t\t\t\t\tthis.getCostLabel(this.costTable[i][j], true),\n\t\t\t\t\tthis.cost_table_width,\n\t\t\t\t\tthis.cost_table_height,\n\t\t\t\t\tthis.cost_table_start_x + j * this.cost_table_width,\n\t\t\t\t\tthis.cost_table_start_y + i * this.cost_table_height,\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.pathTableID[i][j],\n\t\t\t\t\tthis.pathTable[i][j],\n\t\t\t\t\tthis.path_table_width,\n\t\t\t\t\tthis.path_table_height,\n\t\t\t\t\tthis.path_table_start_x + j * this.path_table_width,\n\t\t\t\t\tthis.path_table_start_y + i * this.path_table_height,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tif (this.size === LARGE_SIZE) {\n\t\t\tthis.animationManager.setAllLayers([0]);\n\t\t}\n\t}\n\n\tstartCallback() {\n\t\tthis.implementAction(this.doFloydWarshall.bind(this));\n\t}\n\n\tdoFloydWarshall() {\n\t\tthis.commands = [];\n\n\t\tconst oldIndex = this.nextIndex;\n\t\tconst messageID = this.nextIndex++;\n\t\tconst moveLabel1ID = this.nextIndex++;\n\t\tconst moveLabel2ID = this.nextIndex++;\n\n\t\tthis.cmd(act.createCircle, this.node1ID, '', this.node_1_x_pos, this.node_1_y_pos);\n\t\tthis.cmd(act.createCircle, this.node2ID, '', this.node_2_x_pos, this.node_2_y_pos);\n\t\tthis.cmd(act.createCircle, this.node3ID, '', this.node_3_x_pos, this.node_3_y_pos);\n\t\tthis.cmd(act.createLabel, messageID, '', this.message_x, this.message_y, 0);\n\n\t\tfor (let k = 0; k < this.size; k++) {\n\t\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\t\tif (i !== j && j !== k && i !== k) {\n\t\t\t\t\t\tthis.cmd(act.setText, this.node1ID, i);\n\t\t\t\t\t\tthis.cmd(act.setText, this.node2ID, k);\n\t\t\t\t\t\tthis.cmd(act.setText, this.node3ID, j);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.connect,\n\t\t\t\t\t\t\tthis.node1ID,\n\t\t\t\t\t\t\tthis.node2ID,\n\t\t\t\t\t\t\t'#009999',\n\t\t\t\t\t\t\t-0.1,\n\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[i][k], true),\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.connect,\n\t\t\t\t\t\t\tthis.node2ID,\n\t\t\t\t\t\t\tthis.node3ID,\n\t\t\t\t\t\t\t'#9900CC',\n\t\t\t\t\t\t\t-0.1,\n\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[k][j], true),\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.connect,\n\t\t\t\t\t\t\tthis.node1ID,\n\t\t\t\t\t\t\tthis.node3ID,\n\t\t\t\t\t\t\t'#CC0000',\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[i][j], true),\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.costTableID[i][k], 1);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.costTableID[k][j], 1);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.costTableID[i][j], 1);\n\t\t\t\t\t\tthis.cmd(act.setTextColor, this.costTableID[i][k], '#009999');\n\t\t\t\t\t\tthis.cmd(act.setTextColor, this.costTableID[k][j], '#9900CC');\n\t\t\t\t\t\tthis.cmd(act.setTextColor, this.costTableID[i][j], '#CC0000');\n\t\t\t\t\t\tif (this.costTable[i][k] >= 0 && this.costTable[k][j] >= 0) {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tthis.costTable[i][j] < 0 ||\n\t\t\t\t\t\t\t\tthis.costTable[i][k] + this.costTable[k][j] < this.costTable[i][j]\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\t\tmessageID,\n\t\t\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[i][k], true) +\n\t\t\t\t\t\t\t\t\t\t' + ' +\n\t\t\t\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[k][j], true) +\n\t\t\t\t\t\t\t\t\t\t' < ' +\n\t\t\t\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[i][j], true),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\t\tthis.costTable[i][j] = this.costTable[i][k] + this.costTable[k][j];\n\t\t\t\t\t\t\t\tthis.cmd(act.setText, this.pathTableID[i][j], '');\n\t\t\t\t\t\t\t\tthis.cmd(act.setText, this.costTableID[i][j], '');\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\t\t\tmoveLabel1ID,\n\t\t\t\t\t\t\t\t\tthis.pathTable[k][j],\n\t\t\t\t\t\t\t\t\tthis.path_table_start_x + j * this.path_table_width,\n\t\t\t\t\t\t\t\t\tthis.path_table_start_y + k * this.path_table_height,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\t\t\tmoveLabel1ID,\n\t\t\t\t\t\t\t\t\tthis.path_table_start_x + j * this.path_table_width,\n\t\t\t\t\t\t\t\t\tthis.path_table_start_y + i * this.path_table_height,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\t\t\tmoveLabel2ID,\n\t\t\t\t\t\t\t\t\tthis.costTable[i][j],\n\t\t\t\t\t\t\t\t\tthis.message_x,\n\t\t\t\t\t\t\t\t\tthis.message_y,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.cmd(act.setHighlight, moveLabel2ID, 1);\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\t\t\tmoveLabel2ID,\n\t\t\t\t\t\t\t\t\tthis.cost_table_start_x + j * this.cost_table_width,\n\t\t\t\t\t\t\t\t\tthis.cost_table_start_y + i * this.cost_table_height,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.pathTable[i][j] = this.pathTable[k][j];\n\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\t\tthis.cmd(act.setText, this.costTableID[i][j], this.costTable[i][j]);\n\t\t\t\t\t\t\t\tthis.cmd(act.setText, this.pathTableID[i][j], this.pathTable[i][j]);\n\t\t\t\t\t\t\t\tthis.cmd(act.delete, moveLabel1ID);\n\t\t\t\t\t\t\t\tthis.cmd(act.delete, moveLabel2ID);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\t\tmessageID,\n\t\t\t\t\t\t\t\t\t'!(' +\n\t\t\t\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[i][k], true) +\n\t\t\t\t\t\t\t\t\t\t' + ' +\n\t\t\t\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[k][j], true) +\n\t\t\t\t\t\t\t\t\t\t' < ' +\n\t\t\t\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[i][j], true) +\n\t\t\t\t\t\t\t\t\t\t')',\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\tmessageID,\n\t\t\t\t\t\t\t\t'!(' +\n\t\t\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[i][k], true) +\n\t\t\t\t\t\t\t\t\t' + ' +\n\t\t\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[k][j], true) +\n\t\t\t\t\t\t\t\t\t' < ' +\n\t\t\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[i][j], true) +\n\t\t\t\t\t\t\t\t\t')',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.cmd(act.setTextColor, this.costTableID[i][k], '#000000');\n\t\t\t\t\t\tthis.cmd(act.setTextColor, this.costTableID[k][j], '#000000');\n\t\t\t\t\t\tthis.cmd(act.setTextColor, this.costTableID[i][j], '#000000');\n\t\t\t\t\t\tthis.cmd(act.disconnect, this.node1ID, this.node2ID);\n\t\t\t\t\t\tthis.cmd(act.disconnect, this.node2ID, this.node3ID);\n\t\t\t\t\t\tthis.cmd(act.disconnect, this.node1ID, this.node3ID);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.costTableID[i][k], 0);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.costTableID[k][j], 0);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.costTableID[i][j], 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.delete, this.node1ID);\n\t\tthis.cmd(act.delete, this.node2ID);\n\t\tthis.cmd(act.delete, this.node3ID);\n\t\tthis.cmd(act.delete, messageID);\n\t\tthis.nextIndex = oldIndex;\n\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n\taddRadioButtonGroupToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_SIZE = 32;\nconst ARRAY_ELEM_WIDTH = 30;\nconst ARRAY_ELEM_HEIGHT = 25;\nconst ARRAY_INITIAL_X = 30;\n\nconst ARRAY_Y_POS = 50;\nconst ARRAY_LABEL_Y_POS = 75;\n\nconst HEAP_X_POSITIONS = [\n\t0,\n\t450,\n\t250,\n\t650,\n\t150,\n\t350,\n\t550,\n\t750,\n\t100,\n\t200,\n\t300,\n\t400,\n\t500,\n\t600,\n\t700,\n\t800,\n\t75,\n\t125,\n\t175,\n\t225,\n\t275,\n\t325,\n\t375,\n\t425,\n\t475,\n\t525,\n\t575,\n\t625,\n\t675,\n\t725,\n\t775,\n\t825,\n];\n\nconst HEAP_Y_POSITIONS = [\n\t0,\n\t110,\n\t180,\n\t180,\n\t250,\n\t250,\n\t250,\n\t250,\n\t320,\n\t320,\n\t320,\n\t320,\n\t320,\n\t320,\n\t320,\n\t320,\n\t390,\n\t390,\n\t390,\n\t390,\n\t390,\n\t390,\n\t390,\n\t390,\n\t390,\n\t390,\n\t390,\n\t390,\n\t390,\n\t390,\n\t390,\n\t390,\n];\n\nexport default class Heap extends Algorithm {\n\tconstructor(am) {\n\t\tsuper(am);\n\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.createArray();\n\t}\n\n\taddControls() {\n\t\tthis.insertField = addControlToAlgorithmBar('Text', '');\n\t\tthis.insertField.onkeydown = this.returnSubmit(\n\t\t\tthis.insertField,\n\t\t\tthis.insertCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\n\t\tthis.insertButton = addControlToAlgorithmBar('Button', 'Enqueue');\n\t\tthis.insertButton.onclick = this.insertCallback.bind(this);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.removeButton = addControlToAlgorithmBar('Button', 'Dequeue');\n\t\tthis.removeButton.onclick = this.removeCallback.bind(this);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst verticalGroup = addGroupToAlgorithmBar(false);\n\n\t\taddLabelToAlgorithmBar(\n\t\t\t'Comma separated list (e.g. \"3,1,2\", max 31 elements)',\n\t\t\tverticalGroup,\n\t\t);\n\n\t\tconst horizontalGroup = addGroupToAlgorithmBar(true, verticalGroup);\n\n\t\tthis.buildHeapField = addControlToAlgorithmBar('Text', '', horizontalGroup);\n\t\tthis.buildHeapField.onkeydown = this.returnSubmit(\n\t\t\tthis.buildHeapField,\n\t\t\tthis.buildHeapCallback.bind(this),\n\t\t\t61,\n\t\t\tfalse,\n\t\t);\n\n\t\tthis.buildHeapButton = addControlToAlgorithmBar('Button', 'BuildHeap', horizontalGroup);\n\t\tthis.buildHeapButton.onclick = this.buildHeapCallback.bind(this);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst minMaxButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t['MinHeap', 'MaxHeap'],\n\t\t\t'MinHeap/MaxHeap',\n\t\t);\n\n\t\tthis.minHeapButton = minMaxButtonList[0];\n\t\tthis.minHeapButton.onclick = this.minHeapCallback.bind(this);\n\t\tthis.minHeapButton.checked = true;\n\t\tthis.maxHeapButton = minMaxButtonList[1];\n\t\tthis.maxHeapButton.onclick = this.maxHeapCallback.bind(this);\n\t\tthis.isMinHeap = true;\n\t}\n\n\tcreateArray() {\n\t\tthis.commands = [];\n\n\t\tthis.arrayData = new Array(ARRAY_SIZE);\n\t\tthis.arrayLabels = new Array(ARRAY_SIZE);\n\t\tthis.arrayRects = new Array(ARRAY_SIZE);\n\t\tthis.circleObjs = new Array(ARRAY_SIZE);\n\t\tthis.arrayXPositions = new Array(ARRAY_SIZE);\n\t\tthis.currentHeapSize = 0;\n\n\t\tfor (let i = 0; i < ARRAY_SIZE; i++) {\n\t\t\tthis.arrayXPositions[i] = ARRAY_INITIAL_X + i * ARRAY_ELEM_WIDTH;\n\t\t\tthis.arrayLabels[i] = this.nextIndex++;\n\t\t\tthis.arrayRects[i] = this.nextIndex++;\n\t\t\tthis.circleObjs[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayRects[i],\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\tthis.arrayXPositions[i],\n\t\t\t\tARRAY_Y_POS,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.arrayLabels[i],\n\t\t\t\ti,\n\t\t\t\tthis.arrayXPositions[i],\n\t\t\t\tARRAY_LABEL_Y_POS,\n\t\t\t);\n\t\t\tthis.cmd(act.setForegroundColor, this.arrayLabels[i], '#0000FF');\n\t\t}\n\t\tthis.cmd(act.setText, this.arrayRects[0], 'null');\n\t\tthis.swapLabel1 = this.nextIndex++;\n\t\tthis.swapLabel2 = this.nextIndex++;\n\t\tthis.swapLabel3 = this.nextIndex++;\n\t\tthis.swapLabel4 = this.nextIndex++;\n\t\tthis.descriptLabel1 = this.nextIndex++;\n\t\tthis.descriptLabel2 = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, this.descriptLabel1, '', 20, 10, 0);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\tinsertCallback() {\n\t\tconst insertedValue = this.normalizeNumber(this.insertField.value, 4);\n\t\tif (insertedValue !== '') {\n\t\t\tthis.insertField.value = '';\n\t\t\tthis.implementAction(this.insertElement.bind(this), parseInt(insertedValue));\n\t\t}\n\t}\n\n\tremoveCallback() {\n\t\tthis.implementAction(this.remove.bind(this));\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tbuildHeapCallback() {\n\t\tif (this.buildHeapField.value !== '') {\n\t\t\tconst list = this.buildHeapField.value;\n\t\t\tthis.buildHeapField.value = '';\n\t\t\tthis.implementAction(this.buildHeap.bind(this), list);\n\t\t}\n\t}\n\n\tminHeapCallback() {\n\t\tif (!this.isMinHeap) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tthis.isMinHeap = true;\n\t\t}\n\t}\n\n\tmaxHeapCallback() {\n\t\tif (this.isMinHeap) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tthis.isMinHeap = false;\n\t\t}\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\twhile (this.currentHeapSize > 0) {\n\t\t\tthis.cmd(act.delete, this.circleObjs[this.currentHeapSize]);\n\t\t\tthis.cmd(act.setText, this.arrayRects[this.currentHeapSize], '');\n\t\t\tthis.currentHeapSize--;\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\treset() {\n\t\tthis.currentHeapSize = 0;\n\t}\n\n\tswap(index1, index2) {\n\t\tthis.cmd(act.setText, this.arrayRects[index1], '');\n\t\tthis.cmd(act.setText, this.arrayRects[index2], '');\n\t\tthis.cmd(act.setText, this.circleObjs[index1], '');\n\t\tthis.cmd(act.setText, this.circleObjs[index2], '');\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.swapLabel1,\n\t\t\tthis.arrayData[index1],\n\t\t\tthis.arrayXPositions[index1],\n\t\t\tARRAY_Y_POS,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.swapLabel2,\n\t\t\tthis.arrayData[index2],\n\t\t\tthis.arrayXPositions[index2],\n\t\t\tARRAY_Y_POS,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.swapLabel3,\n\t\t\tthis.arrayData[index1],\n\t\t\tHEAP_X_POSITIONS[index1],\n\t\t\tHEAP_Y_POSITIONS[index1],\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.swapLabel4,\n\t\t\tthis.arrayData[index2],\n\t\t\tHEAP_X_POSITIONS[index2],\n\t\t\tHEAP_Y_POSITIONS[index2],\n\t\t);\n\t\tthis.cmd(act.move, this.swapLabel1, this.arrayXPositions[index2], ARRAY_Y_POS);\n\t\tthis.cmd(act.move, this.swapLabel2, this.arrayXPositions[index1], ARRAY_Y_POS);\n\t\tthis.cmd(act.move, this.swapLabel3, HEAP_X_POSITIONS[index2], HEAP_Y_POSITIONS[index2]);\n\t\tthis.cmd(act.move, this.swapLabel4, HEAP_X_POSITIONS[index1], HEAP_Y_POSITIONS[index1]);\n\t\tconst tmp = this.arrayData[index1];\n\t\tthis.arrayData[index1] = this.arrayData[index2];\n\t\tthis.arrayData[index2] = tmp;\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.arrayRects[index1], this.arrayData[index1]);\n\t\tthis.cmd(act.setText, this.arrayRects[index2], this.arrayData[index2]);\n\t\tthis.cmd(act.setText, this.circleObjs[index1], this.arrayData[index1]);\n\t\tthis.cmd(act.setText, this.circleObjs[index2], this.arrayData[index2]);\n\t\tthis.cmd(act.delete, this.swapLabel1);\n\t\tthis.cmd(act.delete, this.swapLabel2);\n\t\tthis.cmd(act.delete, this.swapLabel3);\n\t\tthis.cmd(act.delete, this.swapLabel4);\n\t}\n\n\tsetIndexHighlight(index, highlightVal) {\n\t\tthis.cmd(act.setHighlight, this.circleObjs[index], highlightVal);\n\t\tthis.cmd(act.setHighlight, this.arrayRects[index], highlightVal);\n\t}\n\n\tpushDown(index) {\n\t\tlet childIndex; // Used to keep track of smallest (in MinHeap) or largest (in MaxHeap) child\n\n\t\twhile (index * 2 <= this.currentHeapSize) {\n\t\t\tchildIndex = 2 * index;\n\n\t\t\tif (index * 2 + 1 <= this.currentHeapSize) {\n\t\t\t\tthis.setIndexHighlight(2 * index, 1);\n\t\t\t\tthis.setIndexHighlight(2 * index + 1, 1);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.setIndexHighlight(2 * index, 0);\n\t\t\t\tthis.setIndexHighlight(2 * index + 1, 0);\n\t\t\t\tif (this.downheapCheckRightChild(index)) {\n\t\t\t\t\tchildIndex = 2 * index + 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.setIndexHighlight(index, 1);\n\t\t\tthis.setIndexHighlight(childIndex, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.setIndexHighlight(index, 0);\n\t\t\tthis.setIndexHighlight(childIndex, 0);\n\n\t\t\tif (this.downheapCompare(childIndex, index)) {\n\t\t\t\tthis.swap(childIndex, index);\n\t\t\t\tindex = childIndex;\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tdownheapCheckRightChild(index) {\n\t\t// Checks if the right child is smaller (in MinHeap) or greater (in MaxHeap) than left child\n\t\tif (this.isMinHeap) {\n\t\t\tif (this.arrayData[2 * index + 1] < this.arrayData[2 * index]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.arrayData[2 * index + 1] > this.arrayData[2 * index]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\n\tdownheapCompare(childIndex, index) {\n\t\t// Checks if smallest child is smaller than parent (in MinHeap)\n\t\t// or greatest child is greater than parent (in MaxHeap)\n\t\tif (this.isMinHeap) {\n\t\t\tif (this.arrayData[childIndex] < this.arrayData[index]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.arrayData[childIndex] > this.arrayData[index]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\n\tremove() {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, this.descriptLabel1, '');\n\n\t\tif (this.currentHeapSize === 0) {\n\t\t\tthis.cmd(act.setText, this.descriptLabel1, 'Heap is empty, cannot dequeue');\n\t\t\treturn this.commands;\n\t\t}\n\n\t\tthis.cmd(act.setText, this.descriptLabel1, 'Removing element:');\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.descriptLabel2,\n\t\t\tthis.arrayData[1],\n\t\t\tHEAP_X_POSITIONS[1],\n\t\t\tHEAP_Y_POSITIONS[1],\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(act.setText, this.circleObjs[1], '');\n\t\tthis.cmd(act.move, this.descriptLabel2, 120, 40);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, this.descriptLabel2);\n\t\tthis.cmd(act.setText, this.descriptLabel1, 'Removing element: ' + this.arrayData[1]);\n\t\tthis.arrayData[1] = '';\n\t\tif (this.currentHeapSize > 1) {\n\t\t\tthis.cmd(act.setText, this.arrayRects[1], '');\n\t\t\tthis.cmd(act.setText, this.arrayRects[this.currentHeapSize], '');\n\t\t\tthis.swap(1, this.currentHeapSize);\n\t\t\tthis.cmd(act.delete, this.circleObjs[this.currentHeapSize]);\n\t\t\tthis.currentHeapSize--;\n\t\t\tthis.pushDown(1);\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.arrayRects[1], '');\n\t\t\tthis.cmd(act.delete, this.circleObjs[this.currentHeapSize]);\n\t\t\tthis.currentHeapSize--;\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tbuildHeap(params) {\n\t\tthis.commands = [];\n\t\tthis.arrayData = params\n\t\t\t.split(',') // Split on commas\n\t\t\t.map(Number) // Map to numbers (to remove invalid characters)\n\t\t\t.filter(x => !Number.isNaN(x)) // Remove stuff that was invalid\n\t\t\t.slice(0, 31); // Get first 31 numbers\n\t\tthis.arrayData.unshift(0); // Add a 0 to start of array\n\t\tthis.clear();\n\t\tfor (let i = 1; i < this.arrayData.length; i++) {\n\t\t\tthis.cmd(\n\t\t\t\tact.createCircle,\n\t\t\t\tthis.circleObjs[i],\n\t\t\t\tthis.arrayData[i],\n\t\t\t\tHEAP_X_POSITIONS[i],\n\t\t\t\tHEAP_Y_POSITIONS[i],\n\t\t\t);\n\t\t\tthis.cmd(act.setText, this.arrayRects[i], this.arrayData[i]);\n\t\t\tif (i > 1) {\n\t\t\t\tthis.cmd(act.connect, this.circleObjs[Math.floor(i / 2)], this.circleObjs[i]);\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.step);\n\t\tthis.currentHeapSize = this.arrayData.length - 1;\n\t\tlet nextElem = this.currentHeapSize;\n\t\twhile (nextElem > 0) {\n\t\t\tthis.pushDown(nextElem);\n\t\t\tnextElem = nextElem - 1;\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tinsertElement(insertedValue) {\n\t\tthis.commands = [];\n\n\t\tif (this.currentHeapSize >= ARRAY_SIZE - 1) {\n\t\t\tthis.cmd(act.setText, this.descriptLabel1, 'Heap Full!');\n\t\t\treturn this.commands;\n\t\t}\n\n\t\tthis.cmd(act.setText, this.descriptLabel1, 'Enqueueing Element: ' + insertedValue);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.descriptLabel1, 'Enqueueing Element: ');\n\t\tthis.currentHeapSize++;\n\t\tthis.arrayData[this.currentHeapSize] = insertedValue;\n\t\tthis.cmd(\n\t\t\tact.createCircle,\n\t\t\tthis.circleObjs[this.currentHeapSize],\n\t\t\t'',\n\t\t\tHEAP_X_POSITIONS[this.currentHeapSize],\n\t\t\tHEAP_Y_POSITIONS[this.currentHeapSize],\n\t\t);\n\t\tthis.cmd(act.createLabel, this.descriptLabel2, insertedValue, 120, 45, 1);\n\t\tif (this.currentHeapSize > 1) {\n\t\t\tthis.cmd(\n\t\t\t\tact.connect,\n\t\t\t\tthis.circleObjs[Math.floor(this.currentHeapSize / 2)],\n\t\t\t\tthis.circleObjs[this.currentHeapSize],\n\t\t\t);\n\t\t}\n\n\t\tthis.cmd(\n\t\t\tact.move,\n\t\t\tthis.descriptLabel2,\n\t\t\tHEAP_X_POSITIONS[this.currentHeapSize],\n\t\t\tHEAP_Y_POSITIONS[this.currentHeapSize],\n\t\t);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.circleObjs[this.currentHeapSize], insertedValue);\n\t\tthis.cmd(act.delete, this.descriptLabel2);\n\t\tthis.cmd(act.setText, this.arrayRects[this.currentHeapSize], insertedValue);\n\n\t\tlet currentIndex = this.currentHeapSize;\n\t\tlet parentIndex = Math.floor(currentIndex / 2);\n\n\t\tif (currentIndex > 1) {\n\t\t\tthis.setIndexHighlight(currentIndex, 1);\n\t\t\tthis.setIndexHighlight(parentIndex, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.setIndexHighlight(currentIndex, 0);\n\t\t\tthis.setIndexHighlight(parentIndex, 0);\n\t\t}\n\n\t\twhile (currentIndex > 1 && this.upheapCompare(currentIndex, parentIndex)) {\n\t\t\tthis.swap(currentIndex, parentIndex);\n\t\t\tcurrentIndex = parentIndex;\n\t\t\tparentIndex = Math.floor(parentIndex / 2);\n\t\t\tif (currentIndex > 1) {\n\t\t\t\tthis.setIndexHighlight(currentIndex, 1);\n\t\t\t\tthis.setIndexHighlight(parentIndex, 1);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.setIndexHighlight(currentIndex, 0);\n\t\t\t\tthis.setIndexHighlight(parentIndex, 0);\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.setText, this.descriptLabel1, '');\n\n\t\treturn this.commands;\n\t}\n\n\tupheapCompare(currentIndex, parentIndex) {\n\t\tif (this.isMinHeap) {\n\t\t\tif (this.arrayData[currentIndex] < this.arrayData[parentIndex]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.arrayData[currentIndex] > this.arrayData[parentIndex]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tthis.insertField.disabled = true;\n\t\tthis.insertButton.disabled = true;\n\t\tthis.removeButton.disabled = true;\n\t\tthis.clearButton.disabled = true;\n\t\tthis.buildHeapButton.disabled = true;\n\t\tthis.minHeapButton.disabled = true;\n\t\tthis.maxHeapButton.disabled = true;\n\t}\n\n\tenableUI() {\n\t\tthis.insertField.disabled = false;\n\t\tthis.insertButton.disabled = false;\n\t\tthis.removeButton.disabled = false;\n\t\tthis.clearButton.disabled = false;\n\t\tthis.buildHeapButton.disabled = false;\n\t\tthis.minHeapButton.disabled = false;\n\t\tthis.maxHeapButton.disabled = false;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, { addControlToAlgorithmBar, addLabelToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 200;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nexport default class InsertionSort extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Comma seperated list (e.g. \"3,1,2\", max 18 elements)');\n\n\t\t// List text field\n\t\tthis.listField = addControlToAlgorithmBar('Text', '');\n\t\tthis.listField.onkeydown = this.returnSubmit(\n\t\t\tthis.listField,\n\t\t\tthis.sortCallback.bind(this),\n\t\t\t60,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.listField);\n\n\t\t// Sort button\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Sort');\n\t\tthis.findButton.onclick = this.sortCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tsetup() {\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\n\t\tthis.animationManager.startNewAnimation();\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\t}\n\n\tsortCallback() {\n\t\tif (this.listField.value !== '') {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst list = this.listField.value;\n\t\t\tthis.listField.value = '';\n\t\t\tthis.implementAction(this.sort.bind(this), list);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.arrayID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t}\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\treturn this.commands;\n\t}\n\n\tsort(params) {\n\t\tthis.commands = [];\n\n\t\tthis.arrayID = [];\n\t\tthis.arrayData = params\n\t\t\t.split(',')\n\t\t\t.map(Number)\n\t\t\t.filter(x => !Number.isNaN(x))\n\t\t\t.slice(0, 18);\n\t\tthis.displayData = new Array(this.arrayData.length);\n\t\tconst length = this.arrayData.length;\n\t\tconst elemCounts = new Map();\n\t\tconst letterMap = new Map();\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst count = elemCounts.has(this.arrayData[i]) ? elemCounts.get(this.arrayData[i]) : 0;\n\t\t\tif (count > 0) {\n\t\t\t\tletterMap.set(this.arrayData[i], 'a');\n\t\t\t}\n\t\t\telemCounts.set(this.arrayData[i], count + 1);\n\t\t}\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tconst xpos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = ARRAY_START_Y;\n\n\t\t\tlet displayData = this.arrayData[i].toString();\n\t\t\tif (letterMap.has(this.arrayData[i])) {\n\t\t\t\tconst currChar = letterMap.get(this.arrayData[i]);\n\t\t\t\tdisplayData += currChar;\n\t\t\t\tletterMap.set(this.arrayData[i], String.fromCharCode(currChar.charCodeAt(0) + 1));\n\t\t\t}\n\t\t\tthis.displayData[i] = displayData;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\tdisplayData,\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t}\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.iPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y,\n\t\t);\n\t\tthis.cmd(act.setHighlight, this.iPointerID, 1);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.jPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X + ARRAY_ELEM_WIDTH,\n\t\t\tARRAY_START_Y,\n\t\t);\n\t\tthis.cmd(act.setHighlight, this.jPointerID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = 1; i < this.arrayData.length; i++) {\n\t\t\tfor (let j = i; j >= 1; j--) {\n\t\t\t\tthis.movePointers(j - 1, j);\n\t\t\t\tif (this.arrayData[j] < this.arrayData[j - 1]) {\n\t\t\t\t\tthis.swap(j, j - 1);\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (i === 1) this.cmd(act.setBackgroundColor, this.arrayID[0], '#2ECC71');\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#2ECC71');\n\t\t\tthis.cmd(act.step);\n\t\t}\n\n\t\tthis.cmd(act.delete, this.iPointerID);\n\t\tthis.cmd(act.delete, this.jPointerID);\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tmovePointers(i, j) {\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst iYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.move, this.iPointerID, iXPos, iYPos);\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.move, this.jPointerID, jXPos, jYPos);\n\t\tthis.cmd(act.step);\n\t}\n\n\tswap(i, j) {\n\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#FF0000');\n\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#FF0000');\n\t\tconst iLabelID = this.nextIndex++;\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst iYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.createLabel, iLabelID, this.displayData[i], iXPos, iYPos);\n\t\tconst jLabelID = this.nextIndex++;\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.createLabel, jLabelID, this.displayData[j], jXPos, jYPos);\n\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\tthis.cmd(act.setText, this.arrayID[j], '');\n\t\tthis.cmd(act.move, iLabelID, jXPos, jYPos);\n\t\tthis.cmd(act.move, jLabelID, iXPos, iYPos);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.arrayID[i], this.displayData[j]);\n\t\tthis.cmd(act.setText, this.arrayID[j], this.displayData[i]);\n\t\tthis.cmd(act.delete, iLabelID);\n\t\tthis.cmd(act.delete, jLabelID);\n\n\t\t// Swap data in backend array\n\t\tlet temp = this.arrayData[i];\n\t\tthis.arrayData[i] = this.arrayData[j];\n\t\tthis.arrayData[j] = temp;\n\n\t\t// Swap data in display array\n\t\ttemp = this.displayData[i];\n\t\tthis.displayData[i] = this.displayData[j];\n\t\tthis.displayData[j] = temp;\n\n\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#0000FF');\n\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#0000FF');\n\t\tthis.cmd(act.step);\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 30;\n\nconst MAX_LENGTH = 22;\n\nconst FAILURE_TABLE_START_Y = 100;\n\nexport default class KMP extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Text');\n\n\t\t// Text text field\n\t\tthis.textField = addControlToAlgorithmBar('Text', '');\n\t\tthis.textField.onkeydown = this.returnSubmit(\n\t\t\tthis.textField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\tMAX_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.textField);\n\n\t\taddLabelToAlgorithmBar('Pattern');\n\n\t\t// Pattern text field\n\t\tthis.patternField = addControlToAlgorithmBar('Text', '');\n\t\tthis.patternField.onkeydown = this.returnSubmit(\n\t\t\tthis.patternField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\tMAX_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.patternField);\n\n\t\t// Find button\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Find');\n\t\tthis.findButton.onclick = this.findCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\taddLabelToAlgorithmBar('or');\n\n\t\t// Build Failure Table button\n\t\tthis.bftButton = addControlToAlgorithmBar('Button', 'Build Failure Table');\n\t\tthis.bftButton.onclick = this.buildFailureTableCallback.bind(this);\n\t\tthis.controls.push(this.bftButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tsetup() {\n\t\tthis.textRowID = [];\n\t\tthis.comparisonMatrixID = [];\n\t\tthis.failureTableLabelID = this.nextIndex++;\n\t\tthis.failureTableCharacterID = [];\n\t\tthis.failureTableValueID = [];\n\n\t\tthis.animationManager.startNewAnimation();\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.textRowID = [];\n\t\tthis.comparisonMatrixID = [];\n\t\tthis.failureTableLabelID = this.nextIndex++;\n\t\tthis.failureTableCharacterID = [];\n\t\tthis.failureTableValueID = [];\n\t}\n\n\tfindCallback() {\n\t\tif (\n\t\t\tthis.textField.value !== '' &&\n\t\t\tthis.patternField.value !== '' &&\n\t\t\tthis.textField.value.length >= this.patternField.value.length\n\t\t) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst text = this.textField.value;\n\t\t\tconst pattern = this.patternField.value;\n\t\t\tthis.textField.value = '';\n\t\t\tthis.patternField.value = '';\n\t\t\tthis.implementAction(this.find.bind(this), text, pattern);\n\t\t}\n\t}\n\n\tbuildFailureTableCallback() {\n\t\tif (this.patternField.value !== '') {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst pattern = this.patternField.value;\n\t\t\tthis.patternField.value = '';\n\t\t\tthis.implementAction(this.onlyBuildFailureTable.bind(this), 0, pattern);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tfind(text, pattern) {\n\t\tthis.commands = [];\n\n\t\tconst maxRows = this.getMaxRows(text, pattern);\n\t\tif (maxRows <= 14) {\n\t\t\tthis.cellSize = 30;\n\t\t} else if (maxRows <= 17) {\n\t\t\tthis.cellSize = 25;\n\t\t} else {\n\t\t\tthis.cellSize = 20;\n\t\t}\n\n\t\tthis.textRowID = new Array(text.length);\n\t\tthis.comparisonMatrixID = new Array(maxRows);\n\t\tfor (let i = 0; i < maxRows; i++) {\n\t\t\tthis.comparisonMatrixID[i] = new Array(text.length);\n\t\t}\n\n\t\tlet xpos, ypos;\n\t\tfor (let i = 0; i < text.length; i++) {\n\t\t\txpos = i * this.cellSize + ARRAY_START_X;\n\t\t\typos = ARRAY_START_Y;\n\t\t\tthis.textRowID[i] = this.nextIndex;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.nextIndex,\n\t\t\t\ttext.charAt(i),\n\t\t\t\tthis.cellSize,\n\t\t\t\tthis.cellSize,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.setBackgroundColor, this.nextIndex++, '#D3D3D3');\n\t\t}\n\n\t\tfor (let row = 0; row < maxRows; row++) {\n\t\t\tfor (let col = 0; col < text.length; col++) {\n\t\t\t\txpos = col * this.cellSize + ARRAY_START_X;\n\t\t\t\typos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\tthis.comparisonMatrixID[row][col] = this.nextIndex;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t'',\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\txpos,\n\t\t\t\t\typos,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tconst failureTable = this.buildFailureTable(text.length, pattern);\n\n\t\tconst iPointerID = this.nextIndex++;\n\t\tconst jPointerID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tiPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tjPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y + this.cellSize,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\n\t\tlet i = 0;\n\t\tlet j = 0;\n\t\tlet row = 0;\n\t\twhile (i <= text.length - pattern.length) {\n\t\t\tfor (let k = i; k < i + pattern.length; k++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonMatrixID[row][k],\n\t\t\t\t\tpattern.charAt(k - i),\n\t\t\t\t\txpos,\n\t\t\t\t\typos,\n\t\t\t\t);\n\t\t\t\tif (k - i < j) {\n\t\t\t\t\tthis.cmd(act.setBackgroundColor, this.comparisonMatrixID[row][k], '#FFFF4D');\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t\twhile (j < pattern.length && pattern.charAt(j) === text.charAt(i + j)) {\n\t\t\t\tthis.cmd(act.setBackgroundColor, this.comparisonMatrixID[row][i + j], '#2ECC71');\n\t\t\t\tj++;\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tif (j < pattern.length) {\n\t\t\t\t\txpos = (i + j) * this.cellSize + ARRAY_START_X;\n\t\t\t\t\tthis.cmd(act.move, iPointerID, xpos, ARRAY_START_Y);\n\t\t\t\t\typos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\t\tthis.cmd(act.move, jPointerID, xpos, ypos);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (j === 0) {\n\t\t\t\tthis.cmd(act.setBackgroundColor, this.comparisonMatrixID[row][i], '#E74C3C');\n\t\t\t\ti++;\n\t\t\t} else {\n\t\t\t\tif (j !== pattern.length) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setBackgroundColor,\n\t\t\t\t\t\tthis.comparisonMatrixID[row][i + j],\n\t\t\t\t\t\t'#E74C3C',\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tconst nextAlignment = failureTable[j - 1];\n\t\t\t\ti += j - nextAlignment;\n\t\t\t\tj = nextAlignment;\n\t\t\t}\n\t\t\trow++;\n\t\t\tif (i <= text.length - pattern.length) {\n\t\t\t\txpos = (i + j) * this.cellSize + ARRAY_START_X;\n\t\t\t\tthis.cmd(act.move, iPointerID, xpos, ARRAY_START_Y);\n\t\t\t\typos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\tthis.cmd(act.move, jPointerID, xpos, ypos);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.delete, iPointerID);\n\t\tthis.cmd(act.delete, jPointerID);\n\t\treturn this.commands;\n\t}\n\n\tgetMaxRows(text, pattern) {\n\t\tconst failureTable = [];\n\t\tfailureTable[0] = 0;\n\t\tlet i = 0;\n\t\tlet j = 1;\n\t\twhile (j < pattern.length) {\n\t\t\tif (pattern.charAt(i) === pattern.charAt(j)) {\n\t\t\t\ti++;\n\t\t\t\tfailureTable[j] = i;\n\t\t\t\tj++;\n\t\t\t} else {\n\t\t\t\tif (i === 0) {\n\t\t\t\t\tfailureTable[j] = i;\n\t\t\t\t\tj++;\n\t\t\t\t} else {\n\t\t\t\t\ti = failureTable[i - 1];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\ti = 0;\n\t\tj = 0;\n\t\tlet maxRows = 0;\n\t\twhile (i <= text.length - pattern.length) {\n\t\t\twhile (j < pattern.length && pattern.charAt(j) === text.charAt(i + j)) {\n\t\t\t\tj++;\n\t\t\t}\n\t\t\tif (j === 0) {\n\t\t\t\ti++;\n\t\t\t} else {\n\t\t\t\tconst nextAlignment = failureTable[j - 1];\n\t\t\t\ti += j - nextAlignment;\n\t\t\t\tj = nextAlignment;\n\t\t\t}\n\t\t\tmaxRows++;\n\t\t}\n\t\treturn maxRows;\n\t}\n\n\tonlyBuildFailureTable(textLength, pattern) {\n\t\tthis.commands = [];\n\t\tthis.cellSize = 30;\n\t\tthis.buildFailureTable(textLength, pattern);\n\t\treturn this.commands;\n\t}\n\n\tbuildFailureTable(textLength, pattern) {\n\t\t// Display label\n\t\tconst labelX = ARRAY_START_X + textLength * this.cellSize + 10;\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.failureTableLabelID,\n\t\t\t'Failure table:',\n\t\t\tlabelX,\n\t\t\tFAILURE_TABLE_START_Y + 10,\n\t\t\t0,\n\t\t);\n\n\t\t// Display empty failure table\n\t\tconst tableStartX = ARRAY_START_X + textLength * this.cellSize + 110;\n\t\tthis.failureTableCharacterID = new Array(pattern.length);\n\t\tthis.failureTableValueID = new Array(pattern.length);\n\t\tfor (let i = 0; i < pattern.length; i++) {\n\t\t\tconst xpos = tableStartX + i * this.cellSize;\n\t\t\tthis.failureTableCharacterID[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.failureTableCharacterID[i],\n\t\t\t\tpattern.charAt(i),\n\t\t\t\tthis.cellSize,\n\t\t\t\tthis.cellSize,\n\t\t\t\txpos,\n\t\t\t\tFAILURE_TABLE_START_Y,\n\t\t\t);\n\t\t\tthis.cmd(act.setBackgroundColor, this.failureTableCharacterID[i], '#D3D3D3');\n\t\t\tthis.failureTableValueID[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.failureTableValueID[i],\n\t\t\t\t'',\n\t\t\t\tthis.cellSize,\n\t\t\t\tthis.cellSize,\n\t\t\t\txpos,\n\t\t\t\tFAILURE_TABLE_START_Y + this.cellSize,\n\t\t\t);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\t// Display pointers and set first value to 0\n\t\tconst iPointerID = this.nextIndex++;\n\t\tconst jPointerID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tiPointerID,\n\t\t\t'#0000FF',\n\t\t\ttableStartX,\n\t\t\tFAILURE_TABLE_START_Y,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tjPointerID,\n\t\t\t'#FF0000',\n\t\t\ttableStartX + this.cellSize,\n\t\t\tFAILURE_TABLE_START_Y,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(act.setText, this.failureTableValueID[0], 0);\n\t\tthis.cmd(act.step);\n\n\t\tconst failureTable = [];\n\t\tfailureTable[0] = 0;\n\t\tlet i = 0;\n\t\tlet j = 1;\n\t\twhile (j < pattern.length) {\n\t\t\tif (pattern.charAt(i) === pattern.charAt(j)) {\n\t\t\t\ti++;\n\t\t\t\tfailureTable[j] = i;\n\t\t\t\tthis.cmd(act.setText, this.failureTableValueID[j], i);\n\t\t\t\tj++;\n\t\t\t\tif (j < pattern.length) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tiPointerID,\n\t\t\t\t\t\ttableStartX + i * this.cellSize,\n\t\t\t\t\t\tFAILURE_TABLE_START_Y,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tjPointerID,\n\t\t\t\t\t\ttableStartX + j * this.cellSize,\n\t\t\t\t\t\tFAILURE_TABLE_START_Y,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t} else {\n\t\t\t\tif (i === 0) {\n\t\t\t\t\tfailureTable[j] = i;\n\t\t\t\t\tthis.cmd(act.setText, this.failureTableValueID[j], i);\n\t\t\t\t\tj++;\n\t\t\t\t\tif (j < pattern.length) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\tjPointerID,\n\t\t\t\t\t\t\ttableStartX + j * this.cellSize,\n\t\t\t\t\t\t\tFAILURE_TABLE_START_Y,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t} else {\n\t\t\t\t\ti = failureTable[i - 1];\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tiPointerID,\n\t\t\t\t\t\ttableStartX + i * this.cellSize,\n\t\t\t\t\t\tFAILURE_TABLE_START_Y,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.delete, iPointerID);\n\t\tthis.cmd(act.delete, jPointerID);\n\n\t\treturn failureTable;\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.textRowID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.textRowID[i]);\n\t\t}\n\t\tthis.textRowID = [];\n\t\tfor (let i = 0; i < this.comparisonMatrixID.length; i++) {\n\t\t\tfor (let j = 0; j < this.comparisonMatrixID[i].length; j++) {\n\t\t\t\tthis.cmd(act.delete, this.comparisonMatrixID[i][j]);\n\t\t\t}\n\t\t}\n\t\tthis.comparisonMatrixID = [];\n\t\tif (this.failureTableValueID.length !== 0) {\n\t\t\tthis.cmd(act.delete, this.failureTableLabelID);\n\t\t}\n\t\tfor (let i = 0; i < this.failureTableCharacterID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.failureTableCharacterID[i]);\n\t\t\tthis.cmd(act.delete, this.failureTableValueID[i]);\n\t\t}\n\t\tthis.failureTableCharacterID = [];\n\t\tthis.failureTableValueID = [];\n\t\treturn this.commands;\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Graph, { EDGE_COLOR, VERTEX_INDEX_COLOR } from './Graph.js';\nimport { KRUSKALS_DS_COLORS, PRIMS_KRUSKALS_ADJ_LIST } from './util/GraphValues';\nimport { addControlToAlgorithmBar, addDivisorToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst MESSAGE_LABEL_X = 30;\nconst MESSAGE_LABEL_Y = 15;\n\nconst FIND_LABEL_1_X = 30;\nconst FIND_LABEL_2_X = 100;\nconst FIND_LABEL_1_Y = 40;\nconst FIND_LABEL_2_Y = FIND_LABEL_1_Y;\n\nconst CURRENT_LABEL_X = 145;\nconst CURRENT_LABEL_Y = 67;\n\nconst PQ_LABEL_X = 145;\nconst PQ_LABEL_Y = 92;\n\nconst SET_ARRAY_ELEM_WIDTH = 50;\nconst SET_ARRAY_ELEM_HEIGHT = 20;\nconst SET_ARRAY_START_X = 52;\nconst SET_ARRAY_START_Y = 110;\n\nconst EDGE_LIST_ELEM_WIDTH = 40;\nconst EDGE_LIST_ELEM_HEIGHT = 40;\nconst EDGE_LIST_COLUMN_WIDTH = 100;\nconst EDGE_LIST_MAX_PER_COLUMN = 9;\n\nconst EDGE_LIST_START_X = 150;\nconst EDGE_LIST_START_Y = 135;\n\nconst HIGHLIGHT_CIRCLE_COLOR_1 = '#FF9999';\nconst HIGHLIGHT_CIRCLE_COLOR_2 = '#FF0000';\nconst HIGHLIGHT_CIRCLE_COLOR_3 = '#0000FF';\nconst HIGHLIGHT_CIRCLE_RADIUS = 12;\n\nconst MST_EDGE_COLOR = '#3399FF';\nconst MST_EDGE_THICKNESS = 4;\n\nexport default class Kruskals extends Graph {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h, PRIMS_KRUSKALS_ADJ_LIST, false, false, true);\n\t\tthis.addControls();\n\t}\n\n\taddControls() {\n\t\tthis.startButton = addControlToAlgorithmBar('Button', 'Run');\n\t\tthis.startButton.onclick = this.startCallback.bind(this);\n\t\tthis.controls.push(this.startButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tsuper.addControls(false);\n\t}\n\n\tsetup(adjMatrix) {\n\t\tsuper.setup(adjMatrix);\n\t\tthis.messageID = [];\n\t\tthis.commands = [];\n\t\tthis.setID = new Array(this.size);\n\t\tthis.setIndexID = new Array(this.size);\n\t\tthis.setData = new Array(this.size);\n\t\tthis.edgesListLeftID = [];\n\t\tthis.edgesListRightID = [];\n\n\t\tlet i;\n\t\tfor (i = 0; i < this.size; i++) {\n\t\t\tthis.setID[i] = this.nextIndex++;\n\t\t\tthis.setIndexID[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.setIndexID[i],\n\t\t\t\tthis.toStr(i),\n\t\t\t\tSET_ARRAY_ELEM_WIDTH,\n\t\t\t\tSET_ARRAY_ELEM_HEIGHT,\n\t\t\t\tSET_ARRAY_START_X,\n\t\t\t\tSET_ARRAY_START_Y + i * SET_ARRAY_ELEM_HEIGHT,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.setID[i],\n\t\t\t\t'',\n\t\t\t\tSET_ARRAY_ELEM_WIDTH,\n\t\t\t\tSET_ARRAY_ELEM_HEIGHT,\n\t\t\t\tSET_ARRAY_START_X + SET_ARRAY_ELEM_WIDTH,\n\t\t\t\tSET_ARRAY_START_Y + i * SET_ARRAY_ELEM_HEIGHT,\n\t\t\t);\n\t\t\tthis.cmd(act.setTextColor, this.setIndexID[i], VERTEX_INDEX_COLOR);\n\t\t}\n\n\t\tthis.messageLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, this.messageLabelID, '', MESSAGE_LABEL_X, MESSAGE_LABEL_Y, 0);\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Disjoint Set:',\n\t\t\tSET_ARRAY_START_X + 0.5 * SET_ARRAY_ELEM_WIDTH,\n\t\t\tSET_ARRAY_START_Y - 37,\n\t\t\t1,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Vertex',\n\t\t\tSET_ARRAY_START_X,\n\t\t\tSET_ARRAY_START_Y - 22,\n\t\t\t1,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Set ID',\n\t\t\tSET_ARRAY_START_X + SET_ARRAY_ELEM_WIDTH,\n\t\t\tSET_ARRAY_START_Y - 22,\n\t\t\t1,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Current edge:',\n\t\t\tCURRENT_LABEL_X,\n\t\t\tCURRENT_LABEL_Y,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(act.createLabel, this.nextIndex++, 'Priority Queue:', PQ_LABEL_X, PQ_LABEL_Y, 0);\n\t\tthis.animationManager.setAllLayers([0, this.currentLayer]);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tthis.lastIndex = this.nextIndex;\n\t}\n\n\treset() {\n\t\tthis.nextIndex = this.lastIndex;\n\t\tthis.messageID = [];\n\t\tthis.edgesListLeft = [];\n\t\tthis.edgesListRight = [];\n\t\tthis.edgesListLeftID = [];\n\t\tthis.edgesListRightID = [];\n\t}\n\n\tstartCallback() {\n\t\tthis.implementAction(this.doKruskal.bind(this));\n\t}\n\n\tdoKruskal() {\n\t\tthis.commands = [];\n\n\t\tfor (let k = 0; k < this.edgesListLeftID.length; k++) {\n\t\t\tthis.cmd(act.delete, this.edgesListLeftID[k]);\n\t\t\tthis.cmd(act.delete, this.edgesListRightID[k]);\n\t\t}\n\n\t\tthis.edgesListLeftID = [];\n\t\tthis.edgesListRightID = [];\n\t\tthis.edgesListLeft = [];\n\t\tthis.edgesListRight = [];\n\n\t\tlet i;\n\t\tlet j;\n\t\tfor (i = 0; i < this.size; i++) {\n\t\t\tthis.setData[i] = i + 1;\n\t\t\tthis.cmd(act.setText, this.setID[i], i + 1);\n\t\t\t!this.isLarge && this.cmd(act.setBackgroundColor, this.setID[i], KRUSKALS_DS_COLORS[i]);\n\t\t}\n\n\t\tthis.recolorGraph();\n\n\t\t// Create edge list\n\t\tthis.cmd(act.setText, this.messageLabelID, 'Enqueueing all edges into Priority Queue');\n\t\tlet top;\n\t\tfor (i = 0; i < this.size; i++) {\n\t\t\tfor (j = i + 1; j < this.size; j++) {\n\t\t\t\tif (this.adj_matrix[i][j] >= 0) {\n\t\t\t\t\tthis.edgesListLeftID.push(this.nextIndex++);\n\t\t\t\t\tthis.edgesListRightID.push(this.nextIndex++);\n\t\t\t\t\ttop = this.edgesListLeftID.length - 1;\n\t\t\t\t\tthis.edgesListLeft.push(i);\n\t\t\t\t\tthis.edgesListRight.push(j);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\tthis.edgesListLeftID[top],\n\t\t\t\t\t\tthis.toStr(i) + ' ',\n\t\t\t\t\t\tEDGE_LIST_START_X +\n\t\t\t\t\t\t\tMath.floor(top / EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_COLUMN_WIDTH,\n\t\t\t\t\t\tEDGE_LIST_START_Y +\n\t\t\t\t\t\t\t(top % EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_ELEM_HEIGHT,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\tthis.edgesListRightID[top],\n\t\t\t\t\t\t' ' + this.toStr(j),\n\t\t\t\t\t\tEDGE_LIST_START_X +\n\t\t\t\t\t\t\tEDGE_LIST_ELEM_WIDTH +\n\t\t\t\t\t\t\tMath.floor(top / EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_COLUMN_WIDTH,\n\t\t\t\t\t\tEDGE_LIST_START_Y +\n\t\t\t\t\t\t\t(top % EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_ELEM_HEIGHT,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.connect,\n\t\t\t\t\t\tthis.edgesListLeftID[top],\n\t\t\t\t\t\tthis.edgesListRightID[top],\n\t\t\t\t\t\tEDGE_COLOR,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\tthis.adj_matrix[i][j],\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\t// Sort edge list based on edge cost\n\t\tconst edgeCount = this.edgesListLeftID.length;\n\t\tlet tmpLeftID;\n\t\tlet tmpRightID;\n\t\tlet tmpLeft;\n\t\tlet tmpRight;\n\t\tfor (i = 1; i < edgeCount; i++) {\n\t\t\ttmpLeftID = this.edgesListLeftID[i];\n\t\t\ttmpRightID = this.edgesListRightID[i];\n\t\t\ttmpLeft = this.edgesListLeft[i];\n\t\t\ttmpRight = this.edgesListRight[i];\n\t\t\tj = i;\n\t\t\twhile (\n\t\t\t\tj > 0 &&\n\t\t\t\tthis.adj_matrix[this.edgesListLeft[j - 1]][this.edgesListRight[j - 1]] >\n\t\t\t\t\tthis.adj_matrix[tmpLeft][tmpRight]\n\t\t\t) {\n\t\t\t\tthis.edgesListLeft[j] = this.edgesListLeft[j - 1];\n\t\t\t\tthis.edgesListRight[j] = this.edgesListRight[j - 1];\n\t\t\t\tthis.edgesListLeftID[j] = this.edgesListLeftID[j - 1];\n\t\t\t\tthis.edgesListRightID[j] = this.edgesListRightID[j - 1];\n\t\t\t\tj = j - 1;\n\t\t\t}\n\t\t\tthis.edgesListLeft[j] = tmpLeft;\n\t\t\tthis.edgesListRight[j] = tmpRight;\n\t\t\tthis.edgesListLeftID[j] = tmpLeftID;\n\t\t\tthis.edgesListRightID[j] = tmpRightID;\n\t\t}\n\t\tfor (i = 0; i < edgeCount; i++) {\n\t\t\tthis.cmd(\n\t\t\t\tact.move,\n\t\t\t\tthis.edgesListLeftID[i],\n\t\t\t\tEDGE_LIST_START_X +\n\t\t\t\t\tMath.floor(i / EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_COLUMN_WIDTH,\n\t\t\t\tEDGE_LIST_START_Y + (i % EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_ELEM_HEIGHT,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.move,\n\t\t\t\tthis.edgesListRightID[i],\n\t\t\t\tEDGE_LIST_START_X +\n\t\t\t\t\tEDGE_LIST_ELEM_WIDTH +\n\t\t\t\t\tMath.floor(i / EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_COLUMN_WIDTH,\n\t\t\t\tEDGE_LIST_START_Y + (i % EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_ELEM_HEIGHT,\n\t\t\t);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tconst findLabelLeft = this.nextIndex++;\n\t\tconst findLabelRight = this.nextIndex++;\n\t\tconst highlightCircle1 = this.nextIndex++;\n\t\tconst highlightCircle2 = this.nextIndex++;\n\t\tconst highlightCircle3 = this.nextIndex++;\n\n\t\tlet edgesAdded = 0;\n\t\tlet nextListIndex = 0;\n\t\tthis.cmd(act.createLabel, findLabelLeft, '', FIND_LABEL_1_X, FIND_LABEL_1_Y, 0);\n\t\tthis.cmd(act.createLabel, findLabelRight, '', FIND_LABEL_2_X, FIND_LABEL_2_Y, 0);\n\n\t\t// Run algorithm\n\t\twhile (edgesAdded < this.size - 1 && nextListIndex < edgeCount) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.messageLabelID,\n\t\t\t\t'Dequeueing ' +\n\t\t\t\t\tthis.toStr(this.edgesListLeft[nextListIndex]) +\n\t\t\t\t\tthis.toStr(this.edgesListRight[nextListIndex]),\n\t\t\t);\n\n\t\t\tthis.cmd(\n\t\t\t\tact.move,\n\t\t\t\tthis.edgesListLeftID[nextListIndex],\n\t\t\t\tCURRENT_LABEL_X + 90,\n\t\t\t\tCURRENT_LABEL_Y + 6,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.move,\n\t\t\t\tthis.edgesListRightID[nextListIndex],\n\t\t\t\tCURRENT_LABEL_X + EDGE_LIST_ELEM_WIDTH + 90,\n\t\t\t\tCURRENT_LABEL_Y + 6,\n\t\t\t);\n\n\t\t\tfor (i = nextListIndex + 1; i < edgeCount; i++) {\n\t\t\t\tconst newPos = i - nextListIndex - 1;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\tthis.edgesListLeftID[i],\n\t\t\t\t\tEDGE_LIST_START_X +\n\t\t\t\t\t\tMath.floor(newPos / EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_COLUMN_WIDTH,\n\t\t\t\t\tEDGE_LIST_START_Y + (newPos % EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_ELEM_HEIGHT,\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\tthis.edgesListRightID[i],\n\t\t\t\t\tEDGE_LIST_START_X +\n\t\t\t\t\t\tEDGE_LIST_ELEM_WIDTH +\n\t\t\t\t\t\tMath.floor(newPos / EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_COLUMN_WIDTH,\n\t\t\t\t\tEDGE_LIST_START_Y + (newPos % EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_ELEM_HEIGHT,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.highlightEdge(\n\t\t\t\tthis.edgesListLeft[nextListIndex],\n\t\t\t\tthis.edgesListRight[nextListIndex],\n\t\t\t\t1,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tthis.cmd(act.setText, this.messageLabelID, 'Looking at disjoint set');\n\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tfindLabelLeft,\n\t\t\t\t'find(' + this.toStr(this.edgesListLeft[nextListIndex]) + ') = ',\n\t\t\t);\n\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\thighlightCircle1,\n\t\t\t\tHIGHLIGHT_CIRCLE_COLOR_1,\n\t\t\t\tCURRENT_LABEL_X + 88,\n\t\t\t\tCURRENT_LABEL_Y + 6,\n\t\t\t\tHIGHLIGHT_CIRCLE_RADIUS,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tconst left = this.edgesListLeft[nextListIndex];\n\t\t\tconst leftRoot = this.setData[left];\n\t\t\tthis.cmd(\n\t\t\t\tact.move,\n\t\t\t\thighlightCircle1,\n\t\t\t\tSET_ARRAY_START_X,\n\t\t\t\tSET_ARRAY_START_Y + this.edgesListLeft[nextListIndex] * SET_ARRAY_ELEM_HEIGHT,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tfindLabelLeft,\n\t\t\t\t'find(' + this.toStr(this.edgesListLeft[nextListIndex]) + ') = ' + leftRoot,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tfindLabelRight,\n\t\t\t\t'find(' + this.toStr(this.edgesListRight[nextListIndex]) + ') = ',\n\t\t\t);\n\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\thighlightCircle2,\n\t\t\t\tHIGHLIGHT_CIRCLE_COLOR_2,\n\t\t\t\tCURRENT_LABEL_X + EDGE_LIST_ELEM_WIDTH + 91,\n\t\t\t\tCURRENT_LABEL_Y + 6,\n\t\t\t\tHIGHLIGHT_CIRCLE_RADIUS,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tconst right = this.edgesListRight[nextListIndex];\n\t\t\tconst rightRoot = this.setData[right];\n\t\t\tthis.cmd(\n\t\t\t\tact.move,\n\t\t\t\thighlightCircle2,\n\t\t\t\tSET_ARRAY_START_X,\n\t\t\t\tSET_ARRAY_START_Y + this.edgesListRight[nextListIndex] * SET_ARRAY_ELEM_HEIGHT,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tfindLabelRight,\n\t\t\t\t'find(' + this.toStr(this.edgesListRight[nextListIndex]) + ') = ' + rightRoot,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tif (leftRoot !== rightRoot) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.messageLabelID,\n\t\t\t\t\t'Vertices in different sets.  Add edge to MST.',\n\t\t\t\t);\n\t\t\t\tthis.highlightEdge(\n\t\t\t\t\tthis.edgesListLeft[nextListIndex],\n\t\t\t\t\tthis.edgesListRight[nextListIndex],\n\t\t\t\t\t0,\n\t\t\t\t);\n\t\t\t\tedgesAdded++;\n\t\t\t\tthis.setEdgeColor(\n\t\t\t\t\tthis.edgesListLeft[nextListIndex],\n\t\t\t\t\tthis.edgesListRight[nextListIndex],\n\t\t\t\t\tMST_EDGE_COLOR,\n\t\t\t\t);\n\t\t\t\tthis.setEdgeThickness(\n\t\t\t\t\tthis.edgesListLeft[nextListIndex],\n\t\t\t\t\tthis.edgesListRight[nextListIndex],\n\t\t\t\t\tMST_EDGE_THICKNESS,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.messageLabelID,\n\t\t\t\t\t'Union sets ' + leftRoot + ' and ' + rightRoot,\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tfindLabelLeft, // reusing find label\n\t\t\t\t\t'union(' + this.toStr(left) + ', ' + this.toStr(right) + ')',\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setText, findLabelRight, '');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tconst minRoot = Math.min(leftRoot, rightRoot);\n\t\t\t\tconst maxRoot = Math.max(leftRoot, rightRoot);\n\t\t\t\tlet firstMatch = true;\n\t\t\t\tfor (let k = 0; k < this.size; k++) {\n\t\t\t\t\tif (this.setData[k] === maxRoot) {\n\t\t\t\t\t\tif (firstMatch) {\n\t\t\t\t\t\t\tfirstMatch = false;\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.createHighlightCircle,\n\t\t\t\t\t\t\t\thighlightCircle3,\n\t\t\t\t\t\t\t\tHIGHLIGHT_CIRCLE_COLOR_3,\n\t\t\t\t\t\t\t\tSET_ARRAY_START_X + SET_ARRAY_ELEM_WIDTH,\n\t\t\t\t\t\t\t\tSET_ARRAY_START_Y + k * SET_ARRAY_ELEM_HEIGHT,\n\t\t\t\t\t\t\t\tHIGHLIGHT_CIRCLE_RADIUS,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, highlightCircle3, 1);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\t\thighlightCircle3,\n\t\t\t\t\t\t\t\tSET_ARRAY_START_X + SET_ARRAY_ELEM_WIDTH,\n\t\t\t\t\t\t\t\tSET_ARRAY_START_Y + k * SET_ARRAY_ELEM_HEIGHT,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.setData[k] = minRoot;\n\t\t\t\t\t\tthis.cmd(act.setText, this.setID[k], minRoot);\n\t\t\t\t\t\t!this.isLarge &&\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.setBackgroundColor,\n\t\t\t\t\t\t\t\tthis.setID[k],\n\t\t\t\t\t\t\t\tKRUSKALS_DS_COLORS[minRoot - 1],\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.delete, highlightCircle3);\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.setText, this.messageLabelID, 'Vertices in the same set, skip edge');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\n\t\t\tthis.highlightEdge(\n\t\t\t\tthis.edgesListLeft[nextListIndex],\n\t\t\t\tthis.edgesListRight[nextListIndex],\n\t\t\t\t0,\n\t\t\t);\n\n\t\t\tthis.cmd(act.delete, highlightCircle1);\n\t\t\tthis.cmd(act.delete, highlightCircle2);\n\n\t\t\tthis.cmd(act.delete, this.edgesListLeftID[nextListIndex]);\n\t\t\tthis.cmd(act.delete, this.edgesListRightID[nextListIndex]);\n\t\t\tthis.cmd(act.setText, findLabelLeft, '');\n\t\t\tthis.cmd(act.setText, findLabelRight, '');\n\t\t\tnextListIndex++;\n\t\t}\n\t\tthis.cmd(act.delete, findLabelLeft);\n\t\tthis.cmd(act.delete, findLabelRight);\n\n\t\tthis.edgesListLeftID = this.edgesListLeftID.slice(nextListIndex);\n\t\tthis.edgesListRightID = this.edgesListRightID.slice(nextListIndex);\n\n\t\tif (edgesAdded === this.size - 1) {\n\t\t\tthis.cmd(act.setText, this.messageLabelID, 'MST has correct amount of edges, done');\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.messageLabelID, 'Priority queue is empty, done');\n\t\t}\n\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, { addControlToAlgorithmBar, addLabelToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst INFO_LABEL_X = 75;\nconst INFO_LABEL_Y = 20;\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 70;\n\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nconst BUCKETS_START_X = 100;\nconst BUCKETS_START_Y = 140;\n\nconst BUCKET_ELEM_WIDTH = 50;\nconst BUCKET_ELEM_HEIGHT = 20;\nconst BUCKET_ELEM_SPACING = 15;\n\nexport default class LSDRadix extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Comma separated list (e.g. \"3,1,2\", max 9 elements)');\n\n\t\t// List text field\n\t\tthis.listField = addControlToAlgorithmBar('Text', '');\n\t\tthis.listField.onkeydown = this.returnSubmit(\n\t\t\tthis.listField,\n\t\t\tthis.sortCallback.bind(this),\n\t\t\t60,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.listField);\n\n\t\t// Sort button\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Sort');\n\t\tthis.findButton.onclick = this.sortCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tsetup() {\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.arrayDisplay = [];\n\t\tthis.bucketsData = [];\n\t\tthis.bucketsID = [];\n\t\tthis.bucketsDisplay = [];\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\t\tthis.infoLabelID = this.nextIndex++;\n\n\t\tthis.animationManager.startNewAnimation();\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.arrayDisplay = [];\n\t\tthis.bucketsData = [];\n\t\tthis.bucketsID = [];\n\t\tthis.bucketsDisplay = [];\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\t\tthis.infoLabelID = this.nextIndex++;\n\t}\n\n\tsortCallback() {\n\t\tif (this.listField.value !== '') {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst list = this.listField.value;\n\t\t\tthis.listField.value = '';\n\t\t\tthis.implementAction(this.sort.bind(this), list);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.arrayID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t}\n\t\tfor (let i = 0; i < this.bucketsID.length; i++) {\n\t\t\tfor (let j = 0; j < this.bucketsID[i].length; j++) {\n\t\t\t\tthis.cmd(act.delete, this.bucketsID[i][j]);\n\t\t\t}\n\t\t}\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.arrayDisplay = [];\n\t\tthis.bucketsData = [];\n\t\tthis.bucketsID = [];\n\t\tthis.bucketsDisplay = [];\n\t\treturn this.commands;\n\t}\n\n\tsort(params) {\n\t\tthis.commands = [];\n\n\t\tthis.arrayID = [];\n\t\tthis.arrayData = params\n\t\t\t.split(',')\n\t\t\t.map(Number)\n\t\t\t.filter(x => !Number.isNaN(x))\n\t\t\t.slice(0, 9);\n\t\tconst length = this.arrayData.length;\n\t\tconst elemCounts = new Map();\n\t\tconst letterMap = new Map();\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst count = elemCounts.has(this.arrayData[i]) ? elemCounts.get(this.arrayData[i]) : 0;\n\t\t\tif (count > 0) {\n\t\t\t\tletterMap.set(this.arrayData[i], 'a');\n\t\t\t}\n\t\t\telemCounts.set(this.arrayData[i], count + 1);\n\t\t}\n\n\t\t// Create data array\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tconst xpos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = ARRAY_START_Y;\n\n\t\t\tlet arrayDisplay = this.arrayData[i].toString();\n\t\t\tif (letterMap.has(this.arrayData[i])) {\n\t\t\t\tconst currChar = letterMap.get(this.arrayData[i]);\n\t\t\t\tarrayDisplay += currChar;\n\t\t\t\tletterMap.set(this.arrayData[i], String.fromCharCode(currChar.charCodeAt(0) + 1));\n\t\t\t}\n\t\t\tthis.arrayDisplay[i] = arrayDisplay;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\tarrayDisplay,\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t}\n\n\t\tthis.bucketsData = [];\n\t\tthis.bucketsID = [];\n\n\t\t// Create buckets\n\t\tfor (let i = 0; i < 10; i++) {\n\t\t\tthis.bucketsData[i] = [];\n\t\t\tthis.bucketsID[i] = [];\n\t\t\tthis.bucketsDisplay[i] = [];\n\t\t\tthis.bucketsID[i].push(this.nextIndex++);\n\t\t\tconst xpos = i * ARRAY_ELEM_WIDTH + BUCKETS_START_X;\n\t\t\tconst ypos = BUCKETS_START_Y;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.bucketsID[i][0],\n\t\t\t\ti,\n\t\t\t\tBUCKET_ELEM_WIDTH,\n\t\t\t\tBUCKET_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.setBackgroundColor, this.bucketsID[i], '#D3D3D3');\n\t\t}\n\n\t\t// Find number of digits\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.infoLabelID,\n\t\t\t'Searching for number with greatest magnitude',\n\t\t\tINFO_LABEL_X,\n\t\t\tINFO_LABEL_Y,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.iPointerID,\n\t\t\t'#FF0000',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y,\n\t\t);\n\t\tthis.cmd(act.setHighlight, this.iPointerID, 1);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.jPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X + ARRAY_ELEM_WIDTH,\n\t\t\tARRAY_START_Y,\n\t\t);\n\t\tthis.cmd(act.setHighlight, this.jPointerID, 1);\n\n\t\tlet greatest = 0;\n\t\tfor (let i = 1; i < this.arrayData.length; i++) {\n\t\t\tthis.movePointers(greatest, i);\n\t\t\tif (this.arrayData[i] > this.arrayData[greatest]) {\n\t\t\t\tgreatest = i;\n\t\t\t\tthis.movePointers(greatest, i);\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.delete, this.iPointerID);\n\t\tthis.cmd(act.delete, this.jPointerID);\n\t\tthis.cmd(act.setBackgroundColor, this.arrayID[greatest], '#FFFF00');\n\n\t\tlet digits = Math.floor(Math.log10(this.arrayData[greatest])) + 1;\n\t\tdigits = digits || 1; // If greatest is 0, above returns NaN, so set to 1 if that happens\n\n\t\tconst longData = this.arrayData[greatest];\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tthis.infoLabelID,\n\t\t\tlongData + ' has greatest magnitude, number of digits is ' + digits,\n\t\t);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setBackgroundColor, this.arrayID[greatest], '#FFFFFF');\n\n\t\t// Run algorithm\n\t\tfor (let i = 0; i < digits; i++) {\n\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Getting digits at position ' + (i + 1));\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\tthis.iPointerID,\n\t\t\t\t'#0000FF',\n\t\t\t\tARRAY_START_X,\n\t\t\t\tARRAY_START_Y,\n\t\t\t);\n\t\t\tthis.cmd(act.setHighlight, this.iPointerID, 1);\n\t\t\tfor (let j = 0; j < this.arrayData.length; j++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\tthis.iPointerID,\n\t\t\t\t\tARRAY_START_X + j * ARRAY_ELEM_WIDTH,\n\t\t\t\t\tARRAY_START_Y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tconst id = this.nextIndex++;\n\t\t\t\tconst data = this.arrayData[j];\n\t\t\t\tconst display = this.arrayDisplay[j];\n\t\t\t\tconst digit = this.nthDigit(data, i);\n\t\t\t\tthis.bucketsID[digit].push(id);\n\t\t\t\tthis.bucketsData[digit].push(data);\n\t\t\t\tthis.bucketsDisplay[digit].push(display);\n\t\t\t\tconst len = this.bucketsData[digit].length;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tid,\n\t\t\t\t\tdisplay,\n\t\t\t\t\tBUCKET_ELEM_WIDTH,\n\t\t\t\t\tBUCKET_ELEM_HEIGHT,\n\t\t\t\t\tBUCKETS_START_X + digit * BUCKET_ELEM_WIDTH,\n\t\t\t\t\tBUCKETS_START_Y + len * BUCKET_ELEM_HEIGHT + len * BUCKET_ELEM_SPACING,\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.bucketsID[digit][this.bucketsID[digit].length - 2],\n\t\t\t\t\tid,\n\t\t\t\t\t0,\n\t\t\t\t\t0,\n\t\t\t\t\t1,\n\t\t\t\t\t'',\n\t\t\t\t\t2,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tthis.cmd(act.delete, this.iPointerID);\n\t\t\tthis.cmd(act.step);\n\t\t\tlet index = 0;\n\t\t\tfor (let j = 0; j < 10; j++) {\n\t\t\t\tconst idBucket = this.bucketsID[j];\n\t\t\t\tconst dataBucket = this.bucketsData[j];\n\t\t\t\tconst displayBucket = this.bucketsDisplay[j];\n\t\t\t\twhile (dataBucket.length) {\n\t\t\t\t\tconst labelID = this.nextIndex++;\n\t\t\t\t\tconst nodeID = idBucket.splice(1, 1)[0];\n\t\t\t\t\tconst data = dataBucket.shift();\n\t\t\t\t\tconst display = displayBucket.shift();\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\tlabelID,\n\t\t\t\t\t\tdisplay,\n\t\t\t\t\t\tBUCKETS_START_X + j * BUCKET_ELEM_WIDTH,\n\t\t\t\t\t\tBUCKETS_START_Y + BUCKET_ELEM_HEIGHT + BUCKET_ELEM_SPACING,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tlabelID,\n\t\t\t\t\t\tARRAY_START_X + index * ARRAY_ELEM_WIDTH,\n\t\t\t\t\t\tARRAY_START_Y,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setText, this.arrayID[index], display);\n\t\t\t\t\tthis.cmd(act.delete, labelID);\n\t\t\t\t\tthis.cmd(act.delete, nodeID);\n\t\t\t\t\tif (dataBucket.length) {\n\t\t\t\t\t\tthis.cmd(act.connect, idBucket[0], idBucket[1]);\n\t\t\t\t\t\tfor (let k = 1; k < idBucket.length; k++) {\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\t\tidBucket[k],\n\t\t\t\t\t\t\t\tBUCKETS_START_X + j * BUCKET_ELEM_WIDTH,\n\t\t\t\t\t\t\t\tBUCKETS_START_Y + k * BUCKET_ELEM_HEIGHT + k * BUCKET_ELEM_SPACING,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t}\n\t\t\t\t\tthis.arrayData[index] = data;\n\t\t\t\t\tthis.arrayDisplay[index] = display;\n\t\t\t\t\tindex++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.delete, this.infoLabelID);\n\n\t\treturn this.commands;\n\t}\n\n\tmovePointers(i, j) {\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst iYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.move, this.iPointerID, iXPos, iYPos);\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.move, this.jPointerID, jXPos, jYPos);\n\t\tthis.cmd(act.step);\n\t}\n\n\tswap(i, j) {\n\t\tconst iLabelID = this.nextIndex++;\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst iYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.createLabel, iLabelID, this.displayData[i], iXPos, iYPos);\n\t\tconst jLabelID = this.nextIndex++;\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.createLabel, jLabelID, this.displayData[j], jXPos, jYPos);\n\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\tthis.cmd(act.setText, this.arrayID[j], '');\n\t\tthis.cmd(act.move, iLabelID, jXPos, jYPos);\n\t\tthis.cmd(act.move, jLabelID, iXPos, iYPos);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.arrayID[i], this.displayData[j]);\n\t\tthis.cmd(act.setText, this.arrayID[j], this.displayData[i]);\n\t\tthis.cmd(act.delete, iLabelID);\n\t\tthis.cmd(act.delete, jLabelID);\n\t\t// Swap data in backend array\n\t\tlet temp = this.arrayData[i];\n\t\tthis.arrayData[i] = this.arrayData[j];\n\t\tthis.arrayData[j] = temp;\n\t\t// Swap data in display array\n\t\ttemp = this.displayData[i];\n\t\tthis.displayData[i] = this.displayData[j];\n\t\tthis.displayData[j] = temp;\n\t}\n\n\tnthDigit(data, digit) {\n\t\tdata = Math.floor(data / Math.pow(10, digit));\n\t\tdata %= 10;\n\t\treturn data;\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm';\nimport { act } from '../anim/AnimationMain';\n\nconst LINKED_LIST_START_X = 100;\nconst LINKED_LIST_START_Y = 200;\nconst LINKED_LIST_ELEM_WIDTH = 70;\nconst LINKED_LIST_ELEM_HEIGHT = 30;\n\nconst LINKED_LIST_INSERT_X = 200;\nconst LINKED_LIST_INSERT_Y = 50;\n\nconst LINKED_LIST_ELEMS_PER_LINE = 8;\nconst LINKED_LIST_ELEM_SPACING = 100;\nconst LINKED_LIST_LINE_SPACING = 100;\n\nconst PUSH_LABEL_X = 50;\nconst PUSH_LABEL_Y = 30;\nconst PUSH_ELEMENT_X = 120;\nconst PUSH_ELEMENT_Y = 30;\n\nconst SIZE = 32;\n\nexport default class LinkedList extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t\tthis.initialIndex = this.nextIndex;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tconst addVerticalGroup = addGroupToAlgorithmBar(false);\n\t\tconst addTopHorizontalGroup = addGroupToAlgorithmBar(true, addVerticalGroup);\n\t\tconst addBottomHorizontalGroup = addGroupToAlgorithmBar(true, addVerticalGroup);\n\n\t\taddLabelToAlgorithmBar('Add', addTopHorizontalGroup);\n\n\t\t// Add's value text field\n\t\tthis.addValueField = addControlToAlgorithmBar('Text', '', addTopHorizontalGroup);\n\t\tthis.addValueField.onkeydown = this.returnSubmit(\n\t\t\tthis.addValueField,\n\t\t\t() => this.addIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.addValueField);\n\n\t\taddLabelToAlgorithmBar('at index', addTopHorizontalGroup);\n\n\t\t// Add's index text field\n\t\tthis.addIndexField = addControlToAlgorithmBar('Text', '', addTopHorizontalGroup);\n\t\tthis.addIndexField.onkeydown = this.returnSubmit(\n\t\t\tthis.addIndexField,\n\t\t\t() => this.addIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.addIndexField);\n\n\t\t// Add to front button\n\t\tthis.addFrontButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add to Front',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addFrontButton.onclick = this.addFrontCallback.bind(this);\n\t\tthis.controls.push(this.addFrontButton);\n\n\t\t// Add to back button\n\t\tthis.addBackButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add to Back',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addBackButton.onclick = () => this.addBackCallback();\n\t\tthis.controls.push(this.addBackButton);\n\n\t\taddLabelToAlgorithmBar('or', addBottomHorizontalGroup);\n\n\t\t// Add at index button\n\t\tthis.addIndexButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add at Index',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addIndexButton.onclick = this.addIndexCallback.bind(this);\n\t\tthis.controls.push(this.addIndexButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst removeVerticalGroup = addGroupToAlgorithmBar(false);\n\t\tconst removeTopHorizontalGroup = addGroupToAlgorithmBar(true, removeVerticalGroup);\n\t\tconst removeBottomHorizontalGroup = addGroupToAlgorithmBar(true, removeVerticalGroup);\n\n\t\taddLabelToAlgorithmBar('Index', removeTopHorizontalGroup);\n\n\t\t// Remove's index text field\n\t\tthis.removeField = addControlToAlgorithmBar('Text', '', removeTopHorizontalGroup);\n\t\tthis.removeField.onkeydown = this.returnSubmit(\n\t\t\tthis.removeField,\n\t\t\t() => this.removeIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.removeField);\n\n\t\t// Remove from index button\n\t\tthis.removeIndexButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Index',\n\t\t\tremoveTopHorizontalGroup,\n\t\t);\n\t\tthis.removeIndexButton.onclick = () => this.removeIndexCallback();\n\t\tthis.controls.push(this.removeIndexButton);\n\n\t\taddLabelToAlgorithmBar('or', removeBottomHorizontalGroup);\n\n\t\t// Remove from front button\n\t\tthis.removeFrontButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Front',\n\t\t\tremoveBottomHorizontalGroup,\n\t\t);\n\t\tthis.removeFrontButton.onclick = () => this.removeFrontCallback();\n\t\tthis.controls.push(this.removeFrontButton);\n\n\t\t// Remove from back button\n\t\tthis.removeBackButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Back',\n\t\t\tremoveBottomHorizontalGroup,\n\t\t);\n\t\tthis.removeBackButton.onclick = () => this.removeBackCallback();\n\t\tthis.controls.push(this.removeBackButton);\n\n\t\t// Get's index text field\n\t\t// this.getField = addControlToAlgorithmBar(\"Text\", \"\");\n\t\t// this.getField.onkeydown = this.returnSubmit(this.getField, () => this.getCallback(), 4, true);\n\t\t// this.controls.push(this.getField);\n\n\t\t// Get button\n\t\t// this.getButton = addControlToAlgorithmBar(\"Button\", \"Get\");\n\t\t// this.getButton.onclick = () => this.getCallback();\n\t\t// this.controls.push(this.getButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = () => this.clearCallback();\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.linkedListElemID = new Array(SIZE);\n\n\t\tthis.arrayData = new Array(SIZE);\n\t\tthis.size = 0;\n\t\tthis.leftoverLabelID = this.nextIndex++;\n\n\t\tthis.cmd(act.createLabel, this.leftoverLabelID, '', PUSH_LABEL_X, PUSH_LABEL_Y);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.size = 0;\n\t\tthis.nextIndex = this.initialIndex;\n\t}\n\n\taddIndexCallback() {\n\t\tif (this.addValueField.value !== '' && this.addIndexField.value !== '') {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tconst index = parseInt(this.addIndexField.value);\n\t\t\tif (index >= 0 && index <= this.size) {\n\t\t\t\tthis.addValueField.value = '';\n\t\t\t\tthis.addIndexField.value = '';\n\t\t\t\tthis.implementAction(this.add.bind(this), addVal, index);\n\t\t\t}\n\t\t}\n\t}\n\n\taddFrontCallback() {\n\t\tif (this.addValueField.value !== '') {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tthis.addValueField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, 0);\n\t\t}\n\t}\n\n\taddBackCallback() {\n\t\tif (this.addValueField.value !== '') {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tthis.addValueField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, this.size);\n\t\t}\n\t}\n\n\tremoveIndexCallback() {\n\t\tif (this.removeField.value !== '') {\n\t\t\tconst index = this.removeField.value;\n\t\t\tif (index >= 0 && index < this.size) {\n\t\t\t\tthis.removeField.value = '';\n\t\t\t\tthis.implementAction(this.remove.bind(this), index);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveFrontCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), 0);\n\t\t}\n\t}\n\n\tremoveBackCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), this.size - 1);\n\t\t}\n\t}\n\n\t// getCallback()\n\t// {\n\t//     if (this.getField.value != \"\" && this.getField.value > 0 && this.getField.value < this.size)\n\t//     {\n\t//         this.implementAction(this.get.bind(this), \"\");\n\t//     }\n\t// }\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearAll.bind(this));\n\t}\n\n\tadd(elemToAdd, index) {\n\t\tthis.commands = [];\n\n\t\tconst labPushID = this.nextIndex++;\n\t\tconst labPushValID = this.nextIndex++;\n\n\t\tfor (let i = this.size - 1; i >= index; i--) {\n\t\t\tthis.arrayData[i + 1] = this.arrayData[i];\n\t\t\tthis.linkedListElemID[i + 1] = this.linkedListElemID[i];\n\t\t}\n\t\tthis.arrayData[index] = elemToAdd;\n\t\tthis.linkedListElemID[index] = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(\n\t\t\tact.createLinkedListNode,\n\t\t\tthis.linkedListElemID[index],\n\t\t\t'',\n\t\t\tLINKED_LIST_ELEM_WIDTH,\n\t\t\tLINKED_LIST_ELEM_HEIGHT,\n\t\t\tLINKED_LIST_INSERT_X,\n\t\t\tLINKED_LIST_INSERT_Y,\n\t\t\t0.25,\n\t\t\t0,\n\t\t\t1,\n\t\t);\n\n\t\tthis.cmd(act.createLabel, labPushID, 'Adding Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPushValID, elemToAdd, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, labPushValID, LINKED_LIST_INSERT_X, LINKED_LIST_INSERT_Y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.linkedListElemID[index], elemToAdd);\n\t\tthis.cmd(act.delete, labPushValID);\n\n\t\tif (index === this.size) {\n\t\t\tthis.cmd(act.setNull, this.linkedListElemID[index], 1);\n\t\t}\n\n\t\tif (this.size !== 0) {\n\t\t\tif (index === 0) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t} else if (index === this.size) {\n\t\t\t\tthis.cmd(act.setNull, this.linkedListElemID[index - 1], 0);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.step);\n\t\tthis.size = this.size + 1;\n\t\tthis.resetNodePositions();\n\t\tthis.cmd(act.delete, labPushID);\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tremove(index) {\n\t\tthis.commands = [];\n\n\t\tindex = parseInt(index);\n\t\tconst labPopID = this.nextIndex++;\n\t\tconst labPopValID = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tconst nodePosX = LINKED_LIST_START_X + LINKED_LIST_ELEM_SPACING * index;\n\t\tconst nodePosY = LINKED_LIST_START_Y;\n\t\tthis.cmd(act.createLabel, labPopID, 'Removing Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPopValID, this.arrayData[index], nodePosX, nodePosY);\n\t\tthis.cmd(act.move, labPopValID, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\n\t\tif (this.size !== 1) {\n\t\t\tif (index === 0) {\n\t\t\t\t//TODO: Move head pointer\n\t\t\t} else if (index === this.size - 1) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setNull, this.linkedListElemID[index - 1], 1);\n\t\t\t} else {\n\t\t\t\tconst xPos =\n\t\t\t\t\t(index % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING +\n\t\t\t\t\tLINKED_LIST_START_X;\n\t\t\t\tconst yPos = LINKED_LIST_START_Y - LINKED_LIST_ELEM_HEIGHT * 2;\n\t\t\t\tthis.cmd(act.move, this.linkedListElemID[index], xPos, yPos);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, this.linkedListElemID[index]);\n\n\t\tfor (let i = index; i < this.size; i++) {\n\t\t\tthis.arrayData[i] = this.arrayData[i + 1];\n\t\t\tthis.linkedListElemID[i] = this.linkedListElemID[i + 1];\n\t\t}\n\t\tthis.size = this.size - 1;\n\t\tthis.resetNodePositions();\n\n\t\tthis.cmd(act.delete, labPopValID);\n\t\tthis.cmd(act.delete, labPopID);\n\n\t\treturn this.commands;\n\t}\n\n\tresetNodePositions() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tconst nextX =\n\t\t\t\t(i % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING + LINKED_LIST_START_X;\n\t\t\tconst nextY =\n\t\t\t\tMath.floor(i / LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_LINE_SPACING +\n\t\t\t\tLINKED_LIST_START_Y;\n\t\t\tthis.cmd(act.move, this.linkedListElemID[i], nextX, nextY);\n\t\t}\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.delete, this.linkedListElemID[i]);\n\t\t}\n\t\tthis.size = 0;\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, { addControlToAlgorithmBar, addLabelToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 120;\nconst ARRAY_START_Y = 50;\nconst ARRAY_LINE_SPACING = 80;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\n// const ARRRAY_ELEMS_PER_LINE = 15;\n\n// const TOP_POS_X = 180;\n// const TOP_POS_Y = 100;\n// const TOP_LABEL_X = 130;\n// const TOP_LABEL_Y = 100;\n\n// const PUSH_LABEL_X = 50;\n// const PUSH_LABEL_Y = 30;\n// const PUSH_ELEMENT_X = 120;\n// const PUSH_ELEMENT_Y = 30;\n\n// const SIZE = 10;\n\nconst LARGE_OFFSET = 15;\nconst SMALL_OFFSET = 7;\n\nexport default class MergeSort extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\n\t\tthis.addControls();\n\n\t\t// Useful for memory management\n\t\tthis.nextIndex = 0;\n\n\t\t// TODO:  Add any code necessary to set up your own algorithm.  Initialize data\n\t\t// structures, etc.\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Comma separated list (e.g. \"3,1,2\", max 12 elements)');\n\n\t\t// List text field\n\t\tthis.listField = addControlToAlgorithmBar('Text', '');\n\t\tthis.listField.onkeydown = this.returnSubmit(\n\t\t\tthis.listField,\n\t\t\tthis.sortCallback.bind(this),\n\t\t\t60,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.listField);\n\n\t\t// Sort button\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Sort');\n\t\tthis.findButton.onclick = this.sortCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tsetup() {\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.iPointerID = 0;\n\t\tthis.jPointerID = 0;\n\t\tthis.kPointerID = 0;\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.iPointerID = 0;\n\t\tthis.jPointerID = 0;\n\t\tthis.kPointerID = 0;\n\t}\n\n\tsortCallback() {\n\t\tif (this.listField.value !== '') {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst list = this.listField.value;\n\t\t\tthis.listField.value = '';\n\t\t\tthis.implementAction(this.sort.bind(this), list);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.arrayID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t}\n\t\tthis.arrayData = [];\n\t\tthis.displayData = [];\n\t\tthis.arrayID = [];\n\t\treturn this.commands;\n\t}\n\n\tsort(params) {\n\t\tthis.commands = [];\n\n\t\tthis.arrayID = [];\n\t\tthis.arrayData = params\n\t\t\t.split(',')\n\t\t\t.map(Number)\n\t\t\t.filter(x => !Number.isNaN(x))\n\t\t\t.slice(0, 12);\n\t\tthis.displayData = new Array(this.arrayData.length);\n\n\t\tconst elemCounts = new Map();\n\t\tconst letterMap = new Map();\n\n\t\tfor (let i = 0; i < this.arrayData.length; i++) {\n\t\t\tconst count = elemCounts.has(this.arrayData[i]) ? elemCounts.get(this.arrayData[i]) : 0;\n\t\t\tif (count > 0) {\n\t\t\t\tletterMap.set(this.arrayData[i], 'a');\n\t\t\t}\n\t\t\telemCounts.set(this.arrayData[i], count + 1);\n\t\t}\n\n\t\tfor (let i = 0; i < this.arrayData.length; i++) {\n\t\t\tconst xPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst yPos = ARRAY_START_Y;\n\t\t\tthis.arrayID.push(this.nextIndex);\n\n\t\t\tlet displayData = this.arrayData[i].toString();\n\t\t\tif (letterMap.has(this.arrayData[i])) {\n\t\t\t\tconst currChar = letterMap.get(this.arrayData[i]);\n\t\t\t\tdisplayData += currChar;\n\t\t\t\tletterMap.set(this.arrayData[i], String.fromCharCode(currChar.charCodeAt(0) + 1));\n\t\t\t}\n\t\t\tthis.displayData[i] = displayData;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.nextIndex++,\n\t\t\t\tdisplayData,\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txPos,\n\t\t\t\tyPos,\n\t\t\t);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tif (this.arrayData.length !== 1) {\n\t\t\tconst mid = Math.ceil((this.arrayData.length - 1) / 2);\n\t\t\tthis.leftHelper(0, mid - 1, -LARGE_OFFSET, 0, 1);\n\t\t\tthis.rightHelper(mid, this.arrayData.length - 1, LARGE_OFFSET, 0, 1);\n\t\t\tthis.merge(\n\t\t\t\t0,\n\t\t\t\tthis.arrayData.length - 1,\n\t\t\t\tmid,\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\t-LARGE_OFFSET,\n\t\t\t\tLARGE_OFFSET,\n\t\t\t\tthis.arrayID,\n\t\t\t);\n\t\t} else {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[0], '#2ECC71');\n\t\t\tthis.cmd(act.step);\n\t\t}\n\n\t\treturn this.commands;\n\t}\n\n\tleftHelper(left, right, offset, prevOffset, row) {\n\t\tif (left > right) return;\n\n\t\tconst tempArrayID = this.drawArrayAndCopy(left, right, offset, prevOffset, row);\n\n\t\tif (left !== right) {\n\t\t\tconst mid = Math.ceil((left + right) / 2);\n\t\t\tconst extraOffset = row < 2 ? 2 * LARGE_OFFSET : 2 * SMALL_OFFSET;\n\t\t\tthis.leftHelper(left, mid - 1, offset - extraOffset, offset, row + 1);\n\t\t\tthis.leftHelper(mid, right, offset, offset, row + 1);\n\t\t\tthis.merge(left, right, mid, row, offset, offset - extraOffset, offset, tempArrayID);\n\t\t} else {\n\t\t\tthis.cmd(act.setBackgroundColor, tempArrayID[left], '#2ECC71');\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t}\n\n\trightHelper(left, right, offset, prevOffset, row) {\n\t\tif (left > right) return;\n\n\t\tconst tempArrayID = this.drawArrayAndCopy(left, right, offset, prevOffset, row);\n\n\t\tif (left !== right) {\n\t\t\tconst mid = Math.ceil((left + right) / 2);\n\t\t\tconst extraOffset = row < 2 ? 2 * LARGE_OFFSET : 2 * SMALL_OFFSET;\n\t\t\tthis.rightHelper(left, mid - 1, offset, offset, row + 1);\n\t\t\tthis.rightHelper(mid, right, offset + extraOffset, offset, row + 1);\n\t\t\tthis.merge(left, right, mid, row, offset, offset, offset + extraOffset, tempArrayID);\n\t\t} else {\n\t\t\tthis.cmd(act.setBackgroundColor, tempArrayID[left], '#2ECC71');\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t}\n\n\tdrawArrayAndCopy(left, right, offset, prevOffset, row) {\n\t\tconst tempArrayID = [];\n\n\t\t// Display subarray\n\t\tfor (let i = left; i <= right; i++) {\n\t\t\tconst xPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X + offset;\n\t\t\tconst yPos = ARRAY_START_Y + row * ARRAY_LINE_SPACING;\n\t\t\ttempArrayID[i] = this.nextIndex;\n\t\t\tthis.arrayID.push(this.nextIndex);\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.nextIndex++,\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txPos,\n\t\t\t\tyPos,\n\t\t\t);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\t// Copy elements from big array to current subarray\n\t\tfor (let i = left; i <= right; i++) {\n\t\t\tthis.copyData(\n\t\t\t\ti,\n\t\t\t\ti,\n\t\t\t\tprevOffset,\n\t\t\t\toffset,\n\t\t\t\trow - 1,\n\t\t\t\trow,\n\t\t\t\tthis.displayData[i],\n\t\t\t\ttempArrayID[i],\n\t\t\t\t-1,\n\t\t\t);\n\t\t}\n\n\t\treturn tempArrayID;\n\t}\n\n\tmerge(left, right, mid, row, currOffset, leftOffset, rightOffset, currArrayID) {\n\t\tconst tempArray = new Array(this.arrayData.length); // Temporary array to store data for sorting\n\t\tconst tempDisplay = new Array(this.arrayData.length);\n\n\t\t// Copy data to temporary array\n\t\tfor (let i = left; i <= right; i++) {\n\t\t\ttempArray[i] = this.arrayData[i];\n\t\t\ttempDisplay[i] = this.displayData[i];\n\t\t}\n\n\t\t// Create pointers\n\t\tconst bottomYPos = ARRAY_START_Y + (row + 1) * ARRAY_LINE_SPACING;\n\t\tconst iPointerID = this.nextIndex++;\n\t\tconst iXPos = left * ARRAY_ELEM_WIDTH + ARRAY_START_X + leftOffset;\n\t\tthis.cmd(act.createHighlightCircle, iPointerID, '#0000FF', iXPos, bottomYPos);\n\t\tconst jPointerID = this.nextIndex++;\n\t\tconst jXPos = mid * ARRAY_ELEM_WIDTH + ARRAY_START_X + rightOffset;\n\t\tthis.cmd(act.createHighlightCircle, jPointerID, '#0000FF', jXPos, bottomYPos);\n\t\tconst kPointerID = this.nextIndex++;\n\t\tconst kXPos = left * ARRAY_ELEM_WIDTH + ARRAY_START_X + currOffset;\n\t\tconst topYPos = ARRAY_START_Y + row * ARRAY_LINE_SPACING;\n\t\tthis.cmd(act.createHighlightCircle, kPointerID, '#0000FF', kXPos, topYPos);\n\t\tthis.cmd(act.step);\n\n\t\t// Merge data and animate\n\t\tlet i = left;\n\t\tlet j = mid;\n\t\tlet k = left;\n\t\twhile (i < mid && j <= right) {\n\t\t\tif (tempArray[i] <= tempArray[j]) {\n\t\t\t\tthis.copyData(\n\t\t\t\t\ti,\n\t\t\t\t\tk,\n\t\t\t\t\tleftOffset,\n\t\t\t\t\tcurrOffset,\n\t\t\t\t\trow + 1,\n\t\t\t\t\trow,\n\t\t\t\t\ttempDisplay[i],\n\t\t\t\t\tcurrArrayID[k],\n\t\t\t\t\tiPointerID,\n\t\t\t\t);\n\t\t\t\tthis.arrayData[k] = tempArray[i];\n\t\t\t\tthis.displayData[k] = tempDisplay[i];\n\t\t\t\tk++;\n\t\t\t\tthis.movePointer(k, row, currOffset, kPointerID);\n\t\t\t\ti++;\n\t\t\t\tif (i < mid) {\n\t\t\t\t\tthis.movePointer(i, row + 1, leftOffset, iPointerID);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.copyData(\n\t\t\t\t\tj,\n\t\t\t\t\tk,\n\t\t\t\t\trightOffset,\n\t\t\t\t\tcurrOffset,\n\t\t\t\t\trow + 1,\n\t\t\t\t\trow,\n\t\t\t\t\ttempDisplay[j],\n\t\t\t\t\tcurrArrayID[k],\n\t\t\t\t\tjPointerID,\n\t\t\t\t);\n\t\t\t\tthis.arrayData[k] = tempArray[j];\n\t\t\t\tthis.displayData[k] = tempDisplay[j];\n\t\t\t\tk++;\n\t\t\t\tthis.movePointer(k, row, currOffset, kPointerID);\n\t\t\t\tj++;\n\t\t\t\tif (j <= right) {\n\t\t\t\t\tthis.movePointer(j, row + 1, rightOffset, jPointerID);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\twhile (i < mid) {\n\t\t\tthis.copyData(\n\t\t\t\ti,\n\t\t\t\tk,\n\t\t\t\tleftOffset,\n\t\t\t\tcurrOffset,\n\t\t\t\trow + 1,\n\t\t\t\trow,\n\t\t\t\ttempDisplay[i],\n\t\t\t\tcurrArrayID[k],\n\t\t\t\tiPointerID,\n\t\t\t);\n\t\t\tthis.arrayData[k] = tempArray[i];\n\t\t\tthis.displayData[k] = tempDisplay[i];\n\t\t\tk++;\n\t\t\ti++;\n\t\t\tif (k <= right) {\n\t\t\t\tthis.movePointer(i, row + 1, leftOffset, iPointerID);\n\t\t\t\tthis.movePointer(k, row, currOffset, kPointerID);\n\t\t\t}\n\t\t}\n\t\twhile (j <= right) {\n\t\t\tthis.copyData(\n\t\t\t\tj,\n\t\t\t\tk,\n\t\t\t\trightOffset,\n\t\t\t\tcurrOffset,\n\t\t\t\trow + 1,\n\t\t\t\trow,\n\t\t\t\ttempDisplay[j],\n\t\t\t\tcurrArrayID[k],\n\t\t\t\tjPointerID,\n\t\t\t);\n\t\t\tthis.arrayData[k] = tempArray[j];\n\t\t\tthis.displayData[k] = tempDisplay[j];\n\t\t\tj++;\n\t\t\tk++;\n\t\t\tif (k <= right) {\n\t\t\t\tthis.movePointer(j, row + 1, rightOffset, jPointerID);\n\t\t\t\tthis.movePointer(k, row, currOffset, kPointerID);\n\t\t\t}\n\t\t}\n\n\t\t// Delete pointers\n\t\tthis.cmd(act.delete, iPointerID);\n\t\tthis.cmd(act.delete, jPointerID);\n\t\tthis.cmd(act.delete, kPointerID);\n\t\tthis.cmd(act.step);\n\t}\n\n\tcopyData(fromIndex, toIndex, fromOffset, toOffset, fromRow, toRow, value, cellID, pointerID) {\n\t\tif (pointerID !== -1) {\n\t\t\tthis.cmd(act.setForegroundColor, pointerID, '#FF0000');\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tconst fromXPos = fromIndex * ARRAY_ELEM_WIDTH + ARRAY_START_X + fromOffset;\n\t\tconst fromYPos = ARRAY_START_Y + fromRow * ARRAY_LINE_SPACING;\n\t\tconst labelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, labelID, value, fromXPos, fromYPos);\n\t\tconst toXPos = toIndex * ARRAY_ELEM_WIDTH + ARRAY_START_X + toOffset;\n\t\tconst toYPos = ARRAY_START_Y + toRow * ARRAY_LINE_SPACING;\n\t\tthis.cmd(act.move, labelID, toXPos, toYPos);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, cellID, value);\n\t\tthis.cmd(act.delete, labelID);\n\t\tif (pointerID !== -1) {\n\t\t\tthis.cmd(act.setBackgroundColor, cellID, '#2ECC71');\n\t\t\tthis.cmd(act.setForegroundColor, pointerID, '#0000FF');\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t}\n\n\tmovePointer(index, row, offset, pointerID) {\n\t\tconst xPos = index * ARRAY_ELEM_WIDTH + ARRAY_START_X + offset;\n\t\tconst yPos = ARRAY_START_Y + row * ARRAY_LINE_SPACING;\n\t\tthis.cmd(act.move, pointerID, xPos, yPos);\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Hash from './Hash.js';\nimport { act } from '../anim/AnimationMain';\n\nconst POINTER_ARRAY_ELEM_WIDTH = 70;\nconst POINTER_ARRAY_ELEM_HEIGHT = 30;\nconst POINTER_ARRAY_ELEM_START_X = 50;\n\nconst LINKED_ITEM_HEIGHT = 30;\nconst LINKED_ITEM_WIDTH = 65;\n\nconst LINKED_ITEM_Y_DELTA = 50;\n\nconst HASH_TABLE_SIZE = 13;\n\nconst INDEX_COLOR = '#0000FF';\n\nexport default class OpenHash extends Hash {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.nextIndex = 0;\n\t\tthis.POINTER_ARRAY_ELEM_Y = h - POINTER_ARRAY_ELEM_WIDTH;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tsuper.addControls();\n\t}\n\n\tinsertElement(elem) {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, this.ExplainLabel, 'Inserting element: ' + String(elem));\n\t\tconst index = this.doHash(elem);\n\n\t\tconst node = new LinkedListNode(elem, this.nextIndex++, 100, 75);\n\t\tthis.cmd(\n\t\t\tact.createLinkedListNode,\n\t\t\tnode.graphicID,\n\t\t\telem,\n\t\t\tLINKED_ITEM_WIDTH,\n\t\t\tLINKED_ITEM_HEIGHT,\n\t\t\t100,\n\t\t\t75,\n\t\t);\n\t\tlet found = false;\n\t\tif (this.hashTableValues[index] != null) {\n\t\t\t// Search for duplicates\n\t\t\tthis.cmd(act.setText, this.ExplainLabel, 'Searching for duplicates of ' + elem);\n\n\t\t\tconst compareIndex = this.nextIndex++;\n\t\t\tlet tmp = this.hashTableValues[index];\n\t\t\tthis.cmd(act.createLabel, compareIndex, '', 10, 40, 0);\n\t\t\twhile (tmp != null && !found) {\n\t\t\t\tthis.cmd(act.setHighlight, tmp.graphicID, 1);\n\t\t\t\tif (tmp.data === elem) {\n\t\t\t\t\tthis.cmd(act.setText, compareIndex, tmp.data + '==' + elem);\n\t\t\t\t\tfound = true;\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setText, compareIndex, tmp.data + '!=' + elem);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setHighlight, tmp.graphicID, 0);\n\t\t\t\ttmp = tmp.next;\n\t\t\t}\n\n\t\t\tthis.cmd(act.delete, compareIndex);\n\t\t\tthis.nextIndex--;\n\t\t} else {\n\t\t\tthis.cmd(act.setNull, node.graphicID, 1);\n\t\t\tthis.cmd(act.setNull, this.hashTableVisual[index], 0);\n\t\t}\n\n\t\tif (found) {\n\t\t\tthis.cmd(act.setText, this.ExplainLabel, 'Duplicate of  ' + elem + '  found!');\n\t\t\tthis.cmd(act.delete, node.graphicID);\n\t\t\tthis.cmd(act.step);\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.ExplainLabel, 'Duplicate of  ' + elem + '  not found!');\n\t\t\tthis.cmd(act.step);\n\n\t\t\tif (this.hashTableValues[index] != null) {\n\t\t\t\tthis.cmd(act.connect, node.graphicID, this.hashTableValues[index].graphicID);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.hashTableVisual[index],\n\t\t\t\t\tthis.hashTableValues[index].graphicID,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.cmd(act.connect, this.hashTableVisual[index], node.graphicID);\n\t\t\tnode.next = this.hashTableValues[index];\n\t\t\tthis.hashTableValues[index] = node;\n\t\t\tthis.repositionList(index);\n\t\t}\n\n\t\tthis.cmd(act.setText, this.ExplainLabel, '');\n\n\t\treturn this.commands;\n\t}\n\n\trepositionList(index) {\n\t\tconst startX = POINTER_ARRAY_ELEM_START_X + index * POINTER_ARRAY_ELEM_WIDTH;\n\t\tlet startY = this.POINTER_ARRAY_ELEM_Y - LINKED_ITEM_Y_DELTA;\n\t\tlet tmp = this.hashTableValues[index];\n\t\twhile (tmp != null) {\n\t\t\ttmp.x = startX;\n\t\t\ttmp.y = startY;\n\t\t\tthis.cmd(act.move, tmp.graphicID, tmp.x, tmp.y);\n\t\t\tstartY = startY - LINKED_ITEM_Y_DELTA;\n\t\t\ttmp = tmp.next;\n\t\t}\n\t}\n\n\tdeleteElement(elem) {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, this.ExplainLabel, 'Deleting element: ' + elem);\n\t\tconst index = this.doHash(elem);\n\t\tif (this.hashTableValues[index] == null) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.ExplainLabel,\n\t\t\t\t'Deleting element: ' + elem + '  Element not in table',\n\t\t\t);\n\t\t\treturn this.commands;\n\t\t}\n\t\tthis.cmd(act.setHighlight, this.hashTableValues[index].graphicID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.hashTableValues[index].graphicID, 0);\n\t\tif (this.hashTableValues[index].data === elem) {\n\t\t\tif (this.hashTableValues[index].next != null) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.hashTableVisual[index],\n\t\t\t\t\tthis.hashTableValues[index].next.graphicID,\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.setNull, this.hashTableVisual[index], 1);\n\t\t\t}\n\t\t\tthis.cmd(act.delete, this.hashTableValues[index].graphicID);\n\t\t\tthis.hashTableValues[index] = this.hashTableValues[index].next;\n\t\t\tthis.repositionList(index);\n\t\t\treturn this.commands;\n\t\t}\n\t\tlet tmpPrev = this.hashTableValues[index];\n\t\tlet tmp = this.hashTableValues[index].next;\n\t\tlet found = false;\n\t\twhile (tmp != null && !found) {\n\t\t\tthis.cmd(act.setHighlight, tmp.graphicID, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setHighlight, tmp.graphicID, 0);\n\t\t\tif (tmp.data === elem) {\n\t\t\t\tfound = true;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.ExplainLabel,\n\t\t\t\t\t'Deleting element: ' + elem + '  Element deleted',\n\t\t\t\t);\n\t\t\t\tif (tmp.next != null) {\n\t\t\t\t\tthis.cmd(act.connect, tmpPrev.graphicID, tmp.next.graphicID);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setNull, tmpPrev.graphicID, 1);\n\t\t\t\t}\n\t\t\t\ttmpPrev.next = tmpPrev.next.next;\n\t\t\t\tthis.cmd(act.delete, tmp.graphicID);\n\t\t\t\tthis.repositionList(index);\n\t\t\t} else {\n\t\t\t\ttmpPrev = tmp;\n\t\t\t\ttmp = tmp.next;\n\t\t\t}\n\t\t}\n\t\tif (!found) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.ExplainLabel,\n\t\t\t\t'Deleting element: ' + elem + '  Element not in table',\n\t\t\t);\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tfindElement(elem) {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, this.ExplainLabel, 'Finding Element: ' + elem);\n\n\t\tconst index = this.doHash(elem);\n\t\tconst compareIndex = this.nextIndex++;\n\t\tlet found = false;\n\t\tlet tmp = this.hashTableValues[index];\n\t\tthis.cmd(act.createLabel, compareIndex, '', 10, 40, 0);\n\t\twhile (tmp != null && !found) {\n\t\t\tthis.cmd(act.setHighlight, tmp.graphicID, 1);\n\t\t\tif (tmp.data === elem) {\n\t\t\t\tthis.cmd(act.setText, compareIndex, tmp.data + '==' + elem);\n\t\t\t\tfound = true;\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.setText, compareIndex, tmp.data + '!=' + elem);\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setHighlight, tmp.graphicID, 0);\n\t\t\ttmp = tmp.next;\n\t\t}\n\t\tif (found) {\n\t\t\tthis.cmd(act.setText, this.ExplainLabel, 'Finding Element: ' + elem + '  Found!');\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.ExplainLabel, 'Finding Element: ' + elem + '  Not Found!');\n\t\t}\n\t\tthis.cmd(act.delete, compareIndex);\n\t\tthis.nextIndex--;\n\t\treturn this.commands;\n\t}\n\n\tsetup() {\n\t\tthis.hashTableVisual = new Array(HASH_TABLE_SIZE);\n\t\tthis.hashTableIndices = new Array(HASH_TABLE_SIZE);\n\t\tthis.hashTableValues = new Array(HASH_TABLE_SIZE);\n\n\t\tthis.indexXPos = new Array(HASH_TABLE_SIZE);\n\t\tthis.indexYPos = new Array(HASH_TABLE_SIZE);\n\n\t\tthis.ExplainLabel = this.nextIndex++;\n\n\t\tthis.table_size = HASH_TABLE_SIZE;\n\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < HASH_TABLE_SIZE; i++) {\n\t\t\tlet nextID = this.nextIndex++;\n\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tnextID,\n\t\t\t\t'',\n\t\t\t\tPOINTER_ARRAY_ELEM_WIDTH,\n\t\t\t\tPOINTER_ARRAY_ELEM_HEIGHT,\n\t\t\t\tPOINTER_ARRAY_ELEM_START_X + i * POINTER_ARRAY_ELEM_WIDTH,\n\t\t\t\tthis.POINTER_ARRAY_ELEM_Y,\n\t\t\t);\n\t\t\tthis.hashTableVisual[i] = nextID;\n\t\t\tthis.cmd(act.setNull, this.hashTableVisual[i], 1);\n\n\t\t\tnextID = this.nextIndex++;\n\t\t\tthis.hashTableIndices[i] = nextID;\n\t\t\tthis.indexXPos[i] = POINTER_ARRAY_ELEM_START_X + i * POINTER_ARRAY_ELEM_WIDTH;\n\t\t\tthis.indexYPos[i] = this.POINTER_ARRAY_ELEM_Y + POINTER_ARRAY_ELEM_HEIGHT;\n\t\t\tthis.hashTableValues[i] = null;\n\n\t\t\tthis.cmd(act.createLabel, nextID, i, this.indexXPos[i], this.indexYPos[i]);\n\t\t\tthis.cmd(act.setForegroundColor, nextID, INDEX_COLOR);\n\t\t}\n\t\tthis.cmd(act.createLabel, this.ExplainLabel, '', 10, 25, 0);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tthis.resetIndex = this.nextIndex;\n\t}\n\n\tresetAll() {\n\t\tlet tmp;\n\t\tthis.commands = super.resetAll();\n\t\tfor (let i = 0; i < this.hashTableValues.length; i++) {\n\t\t\ttmp = this.hashTableValues[i];\n\t\t\tif (tmp != null) {\n\t\t\t\twhile (tmp != null) {\n\t\t\t\t\tthis.cmd(act.delete, tmp.graphicID);\n\t\t\t\t\ttmp = tmp.next;\n\t\t\t\t}\n\t\t\t\tthis.hashTableValues[i] = null;\n\t\t\t\tthis.cmd(act.setNull, this.hashTableVisual[i], 1);\n\t\t\t}\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\t// NEED TO OVERRIDE IN PARENT\n\treset() {\n\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\tthis.hashTableValues[i] = null;\n\t\t}\n\t\tthis.nextIndex = this.resetIndex;\n\t\tsuper.reset();\n\t}\n\n\tresetCallback() {}\n\n\t/*this.nextIndex = 0;\n this.commands = [];\n this.cmd(act.createLabel, 0, \"\", 20, 50, 0);\n this.animationManager.startNewAnimation(this.commands);\n this.animationManager.skipForward();\n this.animationManager.clearHistory(); */\n\n\tdisableUI() {\n\t\tsuper.disableUI();\n\t}\n\n\tenableUI() {\n\t\tsuper.enableUI();\n\t}\n}\n\nclass LinkedListNode {\n\tconstructor(val, id, initialX, initialY) {\n\t\tthis.data = val;\n\t\tthis.graphicID = id;\n\t\tthis.x = initialX;\n\t\tthis.y = initialY;\n\t\tthis.next = null;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport Graph from './Graph.js';\nimport { PRIMS_KRUSKALS_ADJ_LIST } from './util/GraphValues';\nimport PriorityQueue from './util/PriorityQueue';\nimport { act } from '../anim/AnimationMain';\n\nconst PQ_DEQUEUED_COLOR = '#0000FF';\nconst VISITED_COLOR = '#99CCFF';\nconst MST_EDGE_COLOR = '#3399FF';\nconst MST_EDGE_THICKNESS = 4;\n\nconst INFO_MSG_X = 25;\nconst INFO_MSG_Y = 15;\n\nconst VISITED_START_X = 30;\nconst VISITED_START_Y = 65;\nconst VISITED_SPACING = 20;\n\nconst CURRENT_EDGE_LABEL_X = 25;\nconst CURRENT_EDGE_LABEL_Y = 90;\nconst CURRENT_VERTEX_X = 110;\nconst CURRENT_VERTEX_Y = 96;\n\nconst PQ_LABEL_X = 25;\nconst PQ_LABEL_Y = 115;\n\nconst PQ_X = 45;\nconst PQ_Y = 143;\nconst PQ_SPACING = 50;\nconst PQ_LINE_SPACING = 25;\nconst PQ_MAX_PER_LINE = 8;\n\nexport default class Prims extends Graph {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h, PRIMS_KRUSKALS_ADJ_LIST, false, false, true);\n\t\tthis.addControls();\n\t}\n\n\taddControls() {\n\t\taddLabelToAlgorithmBar('Start vertex: ');\n\n\t\tthis.startField = addControlToAlgorithmBar('Text', '');\n\t\tthis.startField.onkeydown = this.returnSubmit(\n\t\t\tthis.startField,\n\t\t\tthis.startCallback.bind(this),\n\t\t\t1,\n\t\t\tfalse,\n\t\t);\n\t\tthis.startField.size = 2;\n\t\tthis.controls.push(this.startField);\n\n\t\tthis.startButton = addControlToAlgorithmBar('Button', 'Run');\n\t\tthis.startButton.onclick = this.startCallback.bind(this);\n\t\tthis.controls.push(this.startButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tsuper.addControls(false);\n\t}\n\n\tsetup(adjMatrix) {\n\t\tsuper.setup(adjMatrix);\n\t\tthis.commands = [];\n\t\tthis.messageID = null;\n\n\t\tthis.visited = [];\n\t\tthis.visitedID = [];\n\t\tthis.pq = new PriorityQueue();\n\n\t\tthis.infoLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, this.infoLabelID, '', INFO_MSG_X, INFO_MSG_Y, 0);\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Visited Set:',\n\t\t\tVISITED_START_X - 5,\n\t\t\tVISITED_START_Y - 25,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Current edge:',\n\t\t\tCURRENT_EDGE_LABEL_X,\n\t\t\tCURRENT_EDGE_LABEL_Y,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(act.createLabel, this.nextIndex++, 'Priority Queue:', PQ_LABEL_X, PQ_LABEL_Y, 0);\n\n\t\tthis.animationManager.setAllLayers([0, this.currentLayer]);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tthis.highlightCircleL = this.nextIndex++;\n\t\tthis.highlightCircleAL = this.nextIndex++;\n\t\tthis.highlightCircleAM = this.nextIndex++;\n\t\tthis.lastIndex = this.nextIndex;\n\t}\n\n\treset() {\n\t\tthis.nextIndex = this.lastIndex;\n\t\tthis.messageID = [];\n\t\tthis.visitedID = [];\n\t\tthis.pq = new PriorityQueue();\n\t}\n\n\tstartCallback() {\n\t\tif (this.startField.value !== '') {\n\t\t\tlet startvalue = this.startField.value;\n\t\t\tthis.startField.value = '';\n\t\t\tstartvalue = startvalue.toUpperCase().charCodeAt(0) - 65;\n\t\t\tif (startvalue >= 0 && startvalue < this.size)\n\t\t\t\tthis.implementAction(this.doPrim.bind(this), startvalue);\n\t\t}\n\t}\n\n\tdoPrim(startVertex) {\n\t\tthis.commands = [];\n\n\t\tthis.clear();\n\n\t\tthis.visitedID = [];\n\n\t\tthis.visitVertex(startVertex);\n\n\t\tthis.visited[startVertex] = true;\n\t\tthis.visitedID.push(this.nextIndex);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\tthis.toStr(startVertex),\n\t\t\tVISITED_START_X,\n\t\t\tVISITED_START_Y,\n\t\t);\n\t\tthis.cmd(act.setBackgroundColor, this.circleID[startVertex], VISITED_COLOR);\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tthis.infoLabelID,\n\t\t\t'Adding ' + this.toStr(startVertex) + ' to visited set',\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\tthis.pq = new PriorityQueue();\n\t\tlet pqIDs = [];\n\t\tthis.cmd(act.setText, this.infoLabelID, 'Enqueuing edges of ' + this.toStr(startVertex));\n\t\tfor (let neighbor = 0; neighbor < this.size; neighbor++) {\n\t\t\tconst weight = this.adj_matrix[startVertex][neighbor];\n\t\t\tif (weight > 0) {\n\t\t\t\tthis.highlightEdge(startVertex, neighbor, 1);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tthis.nextIndex,\n\t\t\t\t\t'(' + this.toStr(startVertex) + this.toStr(neighbor) + ', ' + weight + ')',\n\t\t\t\t\tPQ_X + (this.pq.size() % PQ_MAX_PER_LINE) * PQ_SPACING,\n\t\t\t\t\tPQ_Y + Math.floor(this.pq.size() / PQ_MAX_PER_LINE) * PQ_LINE_SPACING,\n\t\t\t\t);\n\t\t\t\tthis.pq.enqueue([startVertex, neighbor], this.nextIndex++, weight);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tconst newPqIDs = this.pq.getIDs();\n\t\t\t\tif (String(pqIDs) !== String(newPqIDs.slice(0, -1))) {\n\t\t\t\t\t// Check if newly enqueued element shifted things\n\t\t\t\t\tfor (let i = 0; i < this.pq.size(); i++) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\tnewPqIDs[i],\n\t\t\t\t\t\t\tPQ_X + (i % PQ_MAX_PER_LINE) * PQ_SPACING,\n\t\t\t\t\t\t\tPQ_Y + Math.floor(i / PQ_MAX_PER_LINE) * PQ_LINE_SPACING,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t\tpqIDs = newPqIDs;\n\t\t\t\tthis.highlightEdge(startVertex, neighbor, 0);\n\t\t\t}\n\t\t}\n\n\t\tthis.leaveVertex();\n\n\t\twhile (this.visited.includes(false) && this.pq.size() !== 0) {\n\t\t\tconst [edge, edgeID] = this.pq.dequeue();\n\t\t\tlet edgeStr = this.toStr(edge[0]) + this.toStr(edge[1]);\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.infoLabelID,\n\t\t\t\t'Dequeued ' + edgeStr + ', with destination ' + this.toStr(edge[1]),\n\t\t\t);\n\t\t\tthis.cmd(act.move, edgeID, CURRENT_VERTEX_X, CURRENT_VERTEX_Y);\n\t\t\tthis.cmd(act.setText, edgeID, this.toStr(edge[0]) + this.toStr(edge[1]));\n\t\t\tthis.cmd(act.setTextColor, edgeID, PQ_DEQUEUED_COLOR);\n\t\t\tpqIDs = this.pq.getIDs();\n\t\t\tfor (let i = 0; i < this.pq.size(); i++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\tpqIDs[i],\n\t\t\t\t\tPQ_X + (i % PQ_MAX_PER_LINE) * PQ_SPACING,\n\t\t\t\t\tPQ_Y + Math.floor(i / PQ_MAX_PER_LINE) * PQ_LINE_SPACING,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.highlightEdge(edge[0], edge[1], 1);\n\t\t\tthis.visitVertex(edge[1]);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tif (!this.visited[edge[1]]) {\n\t\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Adding ' + edgeStr + ' to MST');\n\t\t\t\tthis.highlightEdge(edge[0], edge[1], 0);\n\t\t\t\tthis.setEdgeColor(edge[0], edge[1], MST_EDGE_COLOR);\n\t\t\t\tthis.setEdgeThickness(edge[0], edge[1], MST_EDGE_THICKNESS);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.visited[edge[1]] = true;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t'Adding ' + this.toStr(edge[1]) + ' to visited set',\n\t\t\t\t);\n\t\t\t\tthis.visitedID.push(this.nextIndex);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\tthis.toStr(edge[1]),\n\t\t\t\t\tVISITED_START_X + (this.visitedID.length - 1) * VISITED_SPACING,\n\t\t\t\t\tVISITED_START_Y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setBackgroundColor, this.circleID[edge[1]], VISITED_COLOR);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t'Enqueuing edges of ' + this.toStr(edge[1]),\n\t\t\t\t);\n\t\t\t\tfor (let neighbor = 0; neighbor < this.size; neighbor++) {\n\t\t\t\t\tif (this.adj_matrix[edge[1]][neighbor] >= 0) {\n\t\t\t\t\t\tthis.highlightEdge(edge[1], neighbor, 1);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.circleID[neighbor], 1);\n\t\t\t\t\t\tif (this.visited[neighbor]) {\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t\t\t'Vertex ' +\n\t\t\t\t\t\t\t\t\tthis.toStr(neighbor) +\n\t\t\t\t\t\t\t\t\t' has already been visited, skipping',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, this.circleID[neighbor], 0);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t\t\t'Vertex ' + this.toStr(neighbor) + ' has not yet been visited',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, this.circleID[neighbor], 0);\n\t\t\t\t\t\t\tedgeStr = this.toStr(edge[1]) + this.toStr(neighbor);\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t\t\t'Enqueueing edge ' +\n\t\t\t\t\t\t\t\t\tedgeStr +\n\t\t\t\t\t\t\t\t\t' with weight ' +\n\t\t\t\t\t\t\t\t\tthis.adj_matrix[edge[1]][neighbor],\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\t\tthis.nextIndex,\n\t\t\t\t\t\t\t\t'(' + edgeStr + ', ' + this.adj_matrix[edge[1]][neighbor] + ')',\n\t\t\t\t\t\t\t\tPQ_X + (this.pq.size() % PQ_MAX_PER_LINE) * PQ_SPACING,\n\t\t\t\t\t\t\t\tPQ_Y +\n\t\t\t\t\t\t\t\t\tMath.floor(this.pq.size() / PQ_MAX_PER_LINE) * PQ_LINE_SPACING,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.pq.enqueue(\n\t\t\t\t\t\t\t\t[edge[1], neighbor],\n\t\t\t\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t\t\t\tthis.adj_matrix[edge[1]][neighbor],\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t\t\t\tconst newPqIDs = this.pq.getIDs();\n\t\t\t\t\t\t\tif (String(pqIDs) !== String(newPqIDs.slice(0, -1))) {\n\t\t\t\t\t\t\t\t// Check if newly enqueued element shifted things\n\t\t\t\t\t\t\t\tfor (let i = 0; i < this.pq.size(); i++) {\n\t\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\t\t\t\tnewPqIDs[i],\n\t\t\t\t\t\t\t\t\t\tPQ_X + (i % PQ_MAX_PER_LINE) * PQ_SPACING,\n\t\t\t\t\t\t\t\t\t\tPQ_Y + Math.floor(i / PQ_MAX_PER_LINE) * PQ_LINE_SPACING,\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpqIDs = newPqIDs;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.highlightEdge(edge[1], neighbor, 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.highlightEdge(edge[0], edge[1], 0);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\tthis.toStr(edge[1]) + ' has already been visited, skipping',\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tthis.leaveVertex();\n\t\t\tthis.cmd(act.delete, edgeID);\n\t\t}\n\n\t\tif (this.pq.size() > 0) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.infoLabelID,\n\t\t\t\t'MST has correct amount of edges / all vertices have been visited, done',\n\t\t\t);\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Priority queue is empty, done');\n\t\t}\n\n\t\treturn this.commands;\n\t}\n\n\tclear() {\n\t\tthis.recolorGraph();\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.circleID[i], '#FFFFFF');\n\t\t\tthis.visited[i] = false;\n\t\t}\n\t\tfor (let i = 0; i < this.visitedID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.visitedID[i]);\n\t\t}\n\t\tconst pqIDs = this.pq.getIDs();\n\t\tfor (const id of pqIDs) {\n\t\t\tthis.cmd(act.delete, id);\n\t\t}\n\t\tif (this.messageID != null) {\n\t\t\tfor (let i = 0; i < this.messageID.length; i++) {\n\t\t\t\tthis.cmd(act.delete, this.messageID[i]);\n\t\t\t}\n\t\t}\n\t\tthis.messageID = [];\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, { addControlToAlgorithmBar, addDivisorToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 200;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nconst ARRRAY_ELEMS_PER_LINE = 15;\nconst ARRAY_LINE_SPACING = 130;\n\nconst HEAD_POS_X = 180;\nconst HEAD_POS_Y = 100;\nconst HEAD_LABEL_X = 130;\nconst HEAD_LABEL_Y = 100;\n\nconst TAIL_POS_X = 280;\nconst TAIL_POS_Y = 100;\nconst TAIL_LABEL_X = 230;\nconst TAIL_LABEL_Y = 100;\n\nconst QUEUE_LABEL_X = 50;\nconst QUEUE_LABEL_Y = 30;\nconst QUEUE_ELEMENT_X = 120;\nconst QUEUE_ELEMENT_Y = 30;\n\nconst INDEX_COLOR = '#0000FF';\n\nconst SIZE = 15;\n\nexport default class QueueArray extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.commands = [];\n\t\tthis.setup();\n\t\tthis.initialIndex = this.nextIndex;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\t\tthis.enqueueField = addControlToAlgorithmBar('Text', '');\n\t\tthis.enqueueField.onkeydown = this.returnSubmit(\n\t\t\tthis.enqueueField,\n\t\t\tthis.enqueueCallback.bind(this),\n\t\t\t4,\n\t\t);\n\n\t\tthis.enqueueButton = addControlToAlgorithmBar('Button', 'Enqueue');\n\t\tthis.enqueueButton.onclick = this.enqueueCallback.bind(this);\n\t\tthis.controls.push(this.enqueueField);\n\t\tthis.controls.push(this.enqueueButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.dequeueButton = addControlToAlgorithmBar('Button', 'Dequeue');\n\t\tthis.dequeueButton.onclick = this.dequeueCallback.bind(this);\n\t\tthis.controls.push(this.dequeueButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.nextIndex = 0;\n\n\t\tthis.arrayID = new Array(SIZE);\n\t\tthis.arrayLabelID = new Array(SIZE);\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelID[i] = this.nextIndex++;\n\t\t}\n\t\tthis.headID = this.nextIndex++;\n\t\tconst headLabelID = this.nextIndex++;\n\t\tthis.tailID = this.nextIndex++;\n\t\tconst tailLabelID = this.nextIndex++;\n\n\t\tthis.arrayData = new Array(SIZE);\n\t\tthis.head = 0;\n\t\tthis.tail = 0;\n\t\tthis.leftoverLabelID = this.nextIndex++;\n\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tconst xpos = (i % ARRRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = Math.floor(i / ARRRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.createLabel, this.arrayLabelID[i], i, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\t\tthis.cmd(act.setForegroundColor, this.arrayLabelID[i], INDEX_COLOR);\n\t\t}\n\t\tthis.cmd(act.createLabel, headLabelID, 'Head', HEAD_LABEL_X, HEAD_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.headID,\n\t\t\t0,\n\t\t\tARRAY_ELEM_WIDTH,\n\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\tHEAD_POS_X,\n\t\t\tHEAD_POS_Y,\n\t\t);\n\n\t\tthis.cmd(act.createLabel, tailLabelID, 'Tail', TAIL_LABEL_X, TAIL_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.tailID,\n\t\t\t0,\n\t\t\tARRAY_ELEM_WIDTH,\n\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\tTAIL_POS_X,\n\t\t\tTAIL_POS_Y,\n\t\t);\n\n\t\tthis.cmd(act.createLabel, this.leftoverLabelID, '', QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\n\t\tthis.initialIndex = this.nextIndex;\n\n\t\tthis.highlight1ID = this.nextIndex++;\n\t\tthis.highlight2ID = this.nextIndex++;\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.top = 0;\n\t\tthis.nextIndex = this.initialIndex;\n\t}\n\n\tenqueueCallback() {\n\t\tif ((this.tail + 1) % SIZE !== this.head && this.enqueueField.value !== '') {\n\t\t\tconst pushVal = this.enqueueField.value;\n\t\t\tthis.enqueueField.value = '';\n\t\t\tthis.implementAction(this.enqueue.bind(this), pushVal);\n\t\t}\n\t}\n\n\tdequeueCallback() {\n\t\tif (this.tail !== this.head) {\n\t\t\tthis.implementAction(this.dequeue.bind(this));\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearAll.bind(this));\n\t}\n\n\tenqueue(elemToEnqueue) {\n\t\tthis.commands = [];\n\n\t\tconst labEnqueueID = this.nextIndex++;\n\t\tconst labEnqueueValID = this.nextIndex++;\n\t\tthis.arrayData[this.tail] = elemToEnqueue;\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(act.createLabel, labEnqueueID, 'Enqueuing Value: ', QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labEnqueueValID, elemToEnqueue, QUEUE_ELEMENT_X, QUEUE_ELEMENT_Y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.createHighlightCircle, this.highlight1ID, INDEX_COLOR, TAIL_POS_X, TAIL_POS_Y);\n\t\tthis.cmd(act.step);\n\n\t\tconst xpos = (this.tail % ARRRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(this.tail / ARRRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, labEnqueueValID, xpos, ypos);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.arrayID[this.tail], elemToEnqueue);\n\t\tthis.cmd(act.delete, labEnqueueValID);\n\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\n\t\tthis.cmd(act.setHighlight, this.tailID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.tail = (this.tail + 1) % SIZE;\n\t\tthis.cmd(act.setText, this.tailID, this.tail);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.tailID, 0);\n\t\tthis.cmd(act.delete, labEnqueueID);\n\n\t\treturn this.commands;\n\t}\n\n\tdequeue() {\n\t\tthis.commands = [];\n\n\t\tconst labDequeueID = this.nextIndex++;\n\t\tconst labDequeueValID = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(act.createLabel, labDequeueID, 'Dequeued Value: ', QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\n\t\tthis.cmd(act.createHighlightCircle, this.highlight1ID, INDEX_COLOR, HEAD_POS_X, HEAD_POS_Y);\n\t\tthis.cmd(act.step);\n\n\t\tconst xpos = (this.head % ARRRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(this.head / ARRRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\n\t\tconst dequeuedVal = this.arrayData[this.head];\n\t\tthis.cmd(act.createLabel, labDequeueValID, dequeuedVal, xpos, ypos);\n\t\tthis.cmd(act.setText, this.arrayID[this.head], '');\n\t\tthis.cmd(act.move, labDequeueValID, QUEUE_ELEMENT_X, QUEUE_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setHighlight, this.headID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.head = (this.head + 1) % SIZE;\n\t\tthis.cmd(act.setText, this.headID, this.head);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.headID, 0);\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, 'Dequeued Value: ' + dequeuedVal);\n\n\t\tthis.cmd(act.delete, labDequeueID);\n\t\tthis.cmd(act.delete, labDequeueValID);\n\n\t\treturn this.commands;\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\t}\n\t\tthis.head = 0;\n\t\tthis.tail = 0;\n\t\tthis.cmd(act.setText, this.headID, '0');\n\t\tthis.cmd(act.setText, this.tailID, '0');\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, { addControlToAlgorithmBar, addDivisorToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst LINKED_LIST_START_X = 100;\nconst LINKED_LIST_START_Y = 200;\nconst LINKED_LIST_ELEM_WIDTH = 70;\nconst LINKED_LIST_ELEM_HEIGHT = 30;\n\nconst LINKED_LIST_INSERT_X = 250;\nconst LINKED_LIST_INSERT_Y = 50;\n\nconst LINKED_LIST_ELEMS_PER_LINE = 8;\nconst LINKED_LIST_ELEM_SPACING = 100;\nconst LINKED_LIST_LINE_SPACING = 100;\n\nconst TOP_POS_X = 180;\nconst TOP_POS_Y = 100;\nconst TOP_LABEL_X = 130;\nconst TOP_LABEL_Y = 100;\n\nconst TOP_ELEM_WIDTH = 30;\nconst TOP_ELEM_HEIGHT = 30;\n\nconst TAIL_POS_X = 180;\nconst TAIL_LABEL_X = 130;\n\nconst PUSH_LABEL_X = 50;\nconst PUSH_LABEL_Y = 30;\nconst PUSH_ELEMENT_X = 120;\nconst PUSH_ELEMENT_Y = 30;\n\nconst SIZE = 32;\n\nexport default class QueueLL extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.commands = [];\n\t\tthis.tail_pos_y = h - LINKED_LIST_ELEM_HEIGHT;\n\t\tthis.tail_label_y = this.tail_pos_y;\n\t\tthis.setup();\n\t\tthis.initialIndex = this.nextIndex;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\t\tthis.enqueueField = addControlToAlgorithmBar('Text', '');\n\t\tthis.enqueueField.onkeydown = this.returnSubmit(\n\t\t\tthis.enqueueField,\n\t\t\tthis.enqueueCallback.bind(this),\n\t\t\t4,\n\t\t);\n\n\t\tthis.enqueueButton = addControlToAlgorithmBar('Button', 'Enqueue');\n\t\tthis.enqueueButton.onclick = this.enqueueCallback.bind(this);\n\t\tthis.controls.push(this.enqueueField);\n\t\tthis.controls.push(this.enqueueButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.dequeueButton = addControlToAlgorithmBar('Button', 'Dequeue');\n\t\tthis.dequeueButton.onclick = this.dequeueCallback.bind(this);\n\t\tthis.controls.push(this.dequeueButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.linkedListElemID = new Array(SIZE);\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.linkedListElemID[i] = this.nextIndex++;\n\t\t}\n\t\tthis.headID = this.nextIndex++;\n\t\tthis.headLabelID = this.nextIndex++;\n\n\t\tthis.tailID = this.nextIndex++;\n\t\tthis.tailLabelID = this.nextIndex++;\n\n\t\tthis.arrayData = new Array(SIZE);\n\t\tthis.top = 0;\n\t\tthis.leftoverLabelID = this.nextIndex++;\n\n\t\tthis.cmd(act.createLabel, this.headLabelID, 'Head', TOP_LABEL_X, TOP_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.headID,\n\t\t\t'',\n\t\t\tTOP_ELEM_WIDTH,\n\t\t\tTOP_ELEM_HEIGHT,\n\t\t\tTOP_POS_X,\n\t\t\tTOP_POS_Y,\n\t\t);\n\t\tthis.cmd(act.setNull, this.headID, 1);\n\n\t\tthis.cmd(act.createLabel, this.tailLabelID, 'Tail', TAIL_LABEL_X, this.tail_label_y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.tailID,\n\t\t\t'',\n\t\t\tTOP_ELEM_WIDTH,\n\t\t\tTOP_ELEM_HEIGHT,\n\t\t\tTAIL_POS_X,\n\t\t\tthis.tail_pos_y,\n\t\t);\n\t\tthis.cmd(act.setNull, this.tailID, 1);\n\n\t\tthis.cmd(act.createLabel, this.leftoverLabelID, '', 5, PUSH_LABEL_Y, 0);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\tresetLinkedListPositions() {\n\t\tfor (let i = this.top - 1; i >= 0; i--) {\n\t\t\tconst nextX =\n\t\t\t\t((this.top - 1 - i) % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING +\n\t\t\t\tLINKED_LIST_START_X;\n\t\t\tconst nextY =\n\t\t\t\tMath.floor((this.top - 1 - i) / LINKED_LIST_ELEMS_PER_LINE) *\n\t\t\t\t\tLINKED_LIST_LINE_SPACING +\n\t\t\t\tLINKED_LIST_START_Y;\n\t\t\tthis.cmd(act.move, this.linkedListElemID[i], nextX, nextY);\n\t\t}\n\t}\n\n\treset() {\n\t\tthis.top = 0;\n\t\tthis.nextIndex = this.initialIndex;\n\t}\n\n\tenqueueCallback() {\n\t\tif (this.top < SIZE && this.enqueueField.value !== '') {\n\t\t\tconst pushVal = this.enqueueField.value;\n\t\t\tthis.enqueueField.value = '';\n\t\t\tthis.implementAction(this.enqueue.bind(this), pushVal);\n\t\t}\n\t}\n\n\tdequeueCallback() {\n\t\tif (this.top > 0) {\n\t\t\tthis.implementAction(this.dequeue.bind(this));\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearAll.bind(this));\n\t}\n\n\tenqueue(elemToPush) {\n\t\tthis.commands = [];\n\n\t\tthis.arrayData[this.top] = elemToPush;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tfor (let i = this.top; i > 0; i--) {\n\t\t\tthis.arrayData[i] = this.arrayData[i - 1];\n\t\t\tthis.linkedListElemID[i] = this.linkedListElemID[i - 1];\n\t\t}\n\t\tthis.arrayData[0] = elemToPush;\n\t\tthis.linkedListElemID[0] = this.nextIndex++;\n\n\t\tconst labPushID = this.nextIndex++;\n\t\tconst labPushValID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createLinkedListNode,\n\t\t\tthis.linkedListElemID[0],\n\t\t\t'',\n\t\t\tLINKED_LIST_ELEM_WIDTH,\n\t\t\tLINKED_LIST_ELEM_HEIGHT,\n\t\t\tLINKED_LIST_INSERT_X,\n\t\t\tLINKED_LIST_INSERT_Y,\n\t\t\t0.25,\n\t\t\t0,\n\t\t\t1,\n\t\t);\n\n\t\tthis.cmd(act.setNull, this.linkedListElemID[0], 1);\n\t\tthis.cmd(act.createLabel, labPushID, 'Enqueuing Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPushValID, elemToPush, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, labPushValID, LINKED_LIST_INSERT_X, LINKED_LIST_INSERT_Y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.linkedListElemID[0], elemToPush);\n\t\tthis.cmd(act.delete, labPushValID);\n\n\t\tif (this.top === 0) {\n\t\t\tthis.cmd(act.setNull, this.headID, 0);\n\t\t\tthis.cmd(act.setNull, this.tailID, 0);\n\t\t\tthis.cmd(act.connect, this.headID, this.linkedListElemID[this.top]);\n\t\t\tthis.cmd(act.connect, this.tailID, this.linkedListElemID[this.top]);\n\t\t} else {\n\t\t\tthis.cmd(act.setNull, this.linkedListElemID[1], 0);\n\t\t\tthis.cmd(act.connect, this.linkedListElemID[1], this.linkedListElemID[0]);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.disconnect, this.tailID, this.linkedListElemID[1]);\n\t\t}\n\t\tthis.cmd(act.connect, this.tailID, this.linkedListElemID[0]);\n\n\t\tthis.cmd(act.step);\n\t\tthis.top = this.top + 1;\n\t\tthis.resetLinkedListPositions();\n\t\tthis.cmd(act.delete, labPushID);\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tdequeue() {\n\t\tthis.commands = [];\n\n\t\tconst labPopID = this.nextIndex++;\n\t\tconst labPopValID = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(act.createLabel, labPopID, 'Dequeued Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tlabPopValID,\n\t\t\tthis.arrayData[this.top - 1],\n\t\t\tLINKED_LIST_START_X,\n\t\t\tLINKED_LIST_START_Y,\n\t\t);\n\n\t\tthis.cmd(act.move, labPopValID, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.disconnect, this.headID, this.linkedListElemID[this.top - 1]);\n\n\t\tif (this.top === 1) {\n\t\t\tthis.cmd(act.setNull, this.headID, 1);\n\t\t\tthis.cmd(act.setNull, this.tailID, 1);\n\t\t\tthis.cmd(act.disconnect, this.tailID, this.linkedListElemID[this.top - 1]);\n\t\t} else {\n\t\t\tthis.cmd(act.connect, this.headID, this.linkedListElemID[this.top - 2]);\n\t\t}\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, this.linkedListElemID[this.top - 1]);\n\t\tthis.top = this.top - 1;\n\t\tthis.resetLinkedListPositions();\n\n\t\tthis.cmd(act.delete, labPopValID);\n\t\tthis.cmd(act.delete, labPopID);\n\t\tthis.cmd(act.setText, this.leftoverLabelID, 'Dequeued Value: ' + this.arrayData[this.top]);\n\n\t\treturn this.commands;\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.top; i++) {\n\t\t\tthis.cmd(act.delete, this.linkedListElemID[i]);\n\t\t}\n\t\tthis.top = 0;\n\t\tthis.cmd(act.setNull, this.headID, 1);\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddCheckboxToAlgorithmBar,\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 200;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nlet worstPivotEnabled = false;\nlet firstPivotEnabled = false;\n\nexport default class QuickSelect extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Comma separated list (e.g. \"3,1,2\", max 18 elements)');\n\n\t\t// List text field\n\t\tthis.listField = addControlToAlgorithmBar('Text', '');\n\t\tthis.listField.onkeydown = this.returnSubmit(\n\t\t\tthis.listField,\n\t\t\tthis.runCallback.bind(this),\n\t\t\t60,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.listField);\n\n\t\taddLabelToAlgorithmBar('kᵗʰ element (1 indexed)');\n\n\t\t// k text field\n\t\tthis.kField = addControlToAlgorithmBar('Text', '');\n\t\tthis.kField.onkeydown = this.returnSubmit(\n\t\t\tthis.kField,\n\t\t\tthis.runCallback.bind(this),\n\t\t\t2,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.kField);\n\n\t\t// Run button\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Run');\n\t\tthis.findButton.onclick = this.runCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Toggles\n\t\tthis.togglesGroup = addGroupToAlgorithmBar();\n\t\tthis.worstPivotToggle = addCheckboxToAlgorithmBar(\n\t\t\t'Pick min element as pivot',\n\t\t\tfalse,\n\t\t\tthis.togglesGroup,\n\t\t);\n\t\tthis.worstPivotToggle.onclick = this.toggleWorstPivot.bind(this);\n\t\tthis.controls.push(this.worstPivotToggle);\n\t\tthis.firstPivotToggle = addCheckboxToAlgorithmBar(\n\t\t\t'Pick first element as pivot',\n\t\t\tfalse,\n\t\t\tthis.togglesGroup,\n\t\t);\n\t\tthis.firstPivotToggle.onclick = this.toggleFirstPivot.bind(this);\n\t\tthis.controls.push(this.firstPivotToggle);\n\t}\n\n\tsetup() {\n\t\tthis.arrayData = [];\n\t\tthis.displayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.iPointerID = 0;\n\t\tthis.jPointerID = 0;\n\t\tthis.pPointerID = 0;\n\n\t\tthis.animationManager.startNewAnimation();\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.arrayData = [];\n\t\tthis.displayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.iPointerID = 0;\n\t\tthis.jPointerID = 0;\n\t\tthis.pPointerID = 0;\n\t}\n\n\trunCallback() {\n\t\tif (this.listField.value !== '' && this.kField.value !== '') {\n\t\t\tconst listStr = this.listField.value;\n\t\t\tconst list = listStr\n\t\t\t\t.split(',')\n\t\t\t\t.map(Number)\n\t\t\t\t.filter(x => !Number.isNaN(x))\n\t\t\t\t.slice(0, 18);\n\t\t\tconst k = this.kField.value;\n\t\t\tif (k > 0 && k <= list.length) {\n\t\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\t\tthis.listField.value = '';\n\t\t\t\tthis.kField.value = '';\n\t\t\t\tthis.implementAction(this.run.bind(this), listStr, k);\n\t\t\t}\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.arrayID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t}\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\treturn this.commands;\n\t}\n\n\trun(list, k) {\n\t\tthis.commands = [];\n\n\t\tthis.k = Number(k);\n\n\t\tthis.arrayID = [];\n\t\tthis.arrayData = list\n\t\t\t.split(',')\n\t\t\t.map(Number)\n\t\t\t.filter(x => !Number.isNaN(x))\n\t\t\t.slice(0, 18);\n\t\tthis.displayData = new Array(this.arrayData.length);\n\n\t\tconst elemCounts = new Map();\n\t\tconst letterMap = new Map();\n\n\t\tfor (let i = 0; i < this.arrayData.length; i++) {\n\t\t\tconst count = elemCounts.has(this.arrayData[i]) ? elemCounts.get(this.arrayData[i]) : 0;\n\t\t\tif (count > 0) {\n\t\t\t\tletterMap.set(this.arrayData[i], 'a');\n\t\t\t}\n\t\t\telemCounts.set(this.arrayData[i], count + 1);\n\t\t}\n\n\t\tfor (let i = 0; i < this.arrayData.length; i++) {\n\t\t\tthis.arrayData[i] = parseInt(this.arrayData[i]);\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tconst xpos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = ARRAY_START_Y;\n\n\t\t\tlet displayData = this.arrayData[i].toString();\n\t\t\tif (letterMap.has(this.arrayData[i])) {\n\t\t\t\tconst currChar = letterMap.get(this.arrayData[i]);\n\t\t\t\tdisplayData += currChar;\n\t\t\t\tletterMap.set(this.arrayData[i], String.fromCharCode(currChar.charCodeAt(0) + 1));\n\t\t\t}\n\t\t\tthis.displayData[i] = displayData;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\tdisplayData,\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t}\n\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\t\tthis.pPointerID = this.nextIndex++;\n\t\tthis.helper(0, this.arrayData.length - 1);\n\n\t\treturn this.commands;\n\t}\n\n\thelper(left, right) {\n\t\tif (left > right) return;\n\n\t\t// Hightlight cells in the current sub-array\n\t\tfor (let i = left; i <= right; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#99CCFF');\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tif (left === right) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[left], '#2ECC71');\n\t\t\tthis.cmd(act.step);\n\t\t\treturn;\n\t\t}\n\n\t\t// Create pivot pointer and swap with left-most element\n\t\t// To make things more interesting (and clearer), we don't pick the left-most element as pivot\n\t\tlet pivot;\n\t\tif (worstPivotEnabled) {\n\t\t\tlet min = left;\n\t\t\tfor (let i = left + 1; i <= right; i++) {\n\t\t\t\tif (this.arrayData[i] < this.arrayData[min]) {\n\t\t\t\t\tmin = i;\n\t\t\t\t}\n\t\t\t}\n\t\t\tpivot = min;\n\t\t} else if (firstPivotEnabled) {\n\t\t\tpivot = left;\n\t\t} else {\n\t\t\tpivot = Math.floor(Math.random() * (right - left)) + left + 1;\n\t\t}\n\t\tconst pXPos = pivot * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createHighlightCircle, this.pPointerID, '#FFFF00', pXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t\tthis.swapPivot(pivot, left);\n\n\t\t// Partition\n\t\tlet i = left + 1;\n\t\tlet j = right;\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createHighlightCircle, this.iPointerID, '#0000FF', iXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.createHighlightCircle, this.jPointerID, '#0000FF', jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t\twhile (i <= j) {\n\t\t\twhile (i <= j && this.arrayData[left] >= this.arrayData[i]) {\n\t\t\t\ti++;\n\t\t\t\tthis.movePointers(i, j);\n\t\t\t}\n\t\t\tif (i <= j) {\n\t\t\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#FF0000');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\twhile (i <= j && this.arrayData[left] <= this.arrayData[j]) {\n\t\t\t\tj--;\n\t\t\t\tthis.movePointers(i, j);\n\t\t\t}\n\t\t\tif (i <= j) {\n\t\t\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#FF0000');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tif (i <= j) {\n\t\t\t\tthis.swap(i, j);\n\t\t\t\ti++;\n\t\t\t\tj--;\n\t\t\t\tthis.movePointers(i, j);\n\t\t\t}\n\t\t}\n\n\t\t// Move pivot back and delete pivot pointer\n\t\tthis.swapPivot(left, j, true);\n\n\t\t// Delete i and j pointers\n\t\tthis.cmd(act.delete, this.iPointerID);\n\t\tthis.cmd(act.delete, this.jPointerID);\n\t\tthis.cmd(act.delete, this.pPointerID);\n\t\tthis.cmd(act.step);\n\n\t\t// Un-hightlight cells in sub-array and set pivot cell to green\n\t\tfor (let i = left; i <= right; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#FFFFFF');\n\t\t}\n\t\tif (this.k - 1 === j) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[j], '#2ECC71');\n\t\t\tthis.cmd(act.step);\n\t\t} else {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[j], '#4DA6ff');\n\t\t\tthis.cmd(act.step);\n\n\t\t\tif (this.k - 1 < j) {\n\t\t\t\tthis.helper(left, j - 1);\n\t\t\t} else {\n\t\t\t\tthis.helper(j + 1, right);\n\t\t\t}\n\t\t}\n\t}\n\n\tmovePointers(i, j) {\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.move, this.iPointerID, iXPos, ARRAY_START_Y);\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.move, this.jPointerID, jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t}\n\n\tswapPivot(pivot, other, moveJ) {\n\t\tif (pivot === other) return;\n\t\t// Create temporary labels and remove text in array\n\t\tconst lLabelID = this.nextIndex++;\n\t\tconst lXPos = other * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, lLabelID, this.displayData[other], lXPos, ARRAY_START_Y);\n\t\tconst pLabelID = this.nextIndex++;\n\t\tconst pXPos = pivot * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, pLabelID, this.displayData[pivot], pXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.setText, this.arrayID[other], '');\n\t\tthis.cmd(act.setText, this.arrayID[pivot], '');\n\t\t// Move labels and pivot pointer\n\t\tthis.cmd(act.move, pLabelID, lXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.move, this.pPointerID, lXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.move, lLabelID, pXPos, ARRAY_START_Y);\n\t\tmoveJ && this.cmd(act.move, this.jPointerID, pXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t\t// Set text in array, and delete temporary labels and pointer\n\t\tthis.cmd(act.setText, this.arrayID[other], this.displayData[pivot]);\n\t\tthis.cmd(act.setText, this.arrayID[pivot], this.displayData[other]);\n\t\tthis.cmd(act.delete, pLabelID);\n\t\tthis.cmd(act.delete, lLabelID);\n\t\t// Swap data in backend array\n\t\tlet temp = this.arrayData[pivot];\n\t\tthis.arrayData[pivot] = this.arrayData[other];\n\t\tthis.arrayData[other] = temp;\n\t\t//Swap data in backend display data\n\t\ttemp = this.displayData[pivot];\n\t\tthis.displayData[pivot] = this.displayData[other];\n\t\tthis.displayData[other] = temp;\n\t}\n\n\tswap(i, j) {\n\t\t// Create temporary labels and remove text in array\n\t\tconst iLabelID = this.nextIndex++;\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, iLabelID, this.displayData[i], iXPos, ARRAY_START_Y);\n\t\tconst jLabelID = this.nextIndex++;\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, jLabelID, this.displayData[j], jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\tthis.cmd(act.setText, this.arrayID[j], '');\n\t\t// Move labels\n\t\tthis.cmd(act.move, iLabelID, jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.move, jLabelID, iXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t\t// Set text in array and delete temporary labels\n\t\tthis.cmd(act.setText, this.arrayID[i], this.displayData[j]);\n\t\tthis.cmd(act.setText, this.arrayID[j], this.displayData[i]);\n\t\tthis.cmd(act.delete, iLabelID);\n\t\tthis.cmd(act.delete, jLabelID);\n\t\t// Swap data in backend array\n\t\tlet temp = this.arrayData[i];\n\t\tthis.arrayData[i] = this.arrayData[j];\n\t\tthis.arrayData[j] = temp;\n\t\t//Swap data in backend display data\n\t\ttemp = this.displayData[i];\n\t\tthis.displayData[i] = this.displayData[j];\n\t\tthis.displayData[j] = temp;\n\t\t// Reset pointer colors back to blue\n\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#0000FF');\n\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#0000FF');\n\t\tthis.cmd(act.step);\n\t}\n\n\ttoggleWorstPivot() {\n\t\tworstPivotEnabled = !worstPivotEnabled;\n\t\tif (firstPivotEnabled) {\n\t\t\tfirstPivotEnabled = false;\n\t\t\tthis.firstPivotToggle.checked = false;\n\t\t}\n\t}\n\n\ttoggleFirstPivot() {\n\t\tfirstPivotEnabled = !firstPivotEnabled;\n\t\tif (worstPivotEnabled) {\n\t\t\tworstPivotEnabled = false;\n\t\t\tthis.worstPivotToggle.checked = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddCheckboxToAlgorithmBar,\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 200;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nlet worstPivotEnabled = false;\nlet firstPivotEnabled = false;\n\nexport default class QuickSort extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Comma separated list (e.g. \"3,1,2\", max 18 elements)');\n\n\t\t// List text field\n\t\tthis.listField = addControlToAlgorithmBar('Text', '');\n\t\tthis.listField.onkeydown = this.returnSubmit(\n\t\t\tthis.listField,\n\t\t\tthis.sortCallback.bind(this),\n\t\t\t60,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.listField);\n\n\t\t// Sort button\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Sort');\n\t\tthis.findButton.onclick = this.sortCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Toggles\n\t\tthis.togglesGroup = addGroupToAlgorithmBar();\n\t\tthis.worstPivotToggle = addCheckboxToAlgorithmBar(\n\t\t\t'Pick min element as pivot',\n\t\t\tfalse,\n\t\t\tthis.togglesGroup,\n\t\t);\n\t\tthis.worstPivotToggle.onclick = this.toggleWorstPivot.bind(this);\n\t\tthis.controls.push(this.worstPivotToggle);\n\t\tthis.firstPivotToggle = addCheckboxToAlgorithmBar(\n\t\t\t'Pick first element as pivot',\n\t\t\tfalse,\n\t\t\tthis.togglesGroup,\n\t\t);\n\t\tthis.firstPivotToggle.onclick = this.toggleFirstPivot.bind(this);\n\t\tthis.controls.push(this.firstPivotToggle);\n\t}\n\n\tsetup() {\n\t\tthis.arrayData = [];\n\t\tthis.displayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.iPointerID = 0;\n\t\tthis.jPointerID = 0;\n\t\tthis.pPointerID = 0;\n\n\t\tthis.animationManager.startNewAnimation();\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.arrayData = [];\n\t\tthis.displayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.iPointerID = 0;\n\t\tthis.jPointerID = 0;\n\t\tthis.pPointerID = 0;\n\t}\n\n\tsortCallback() {\n\t\tif (this.listField.value !== '') {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst list = this.listField.value;\n\t\t\tthis.listField.value = '';\n\t\t\tthis.implementAction(this.sort.bind(this), list);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.arrayID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t}\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\treturn this.commands;\n\t}\n\n\tsort(params) {\n\t\tthis.commands = [];\n\n\t\tthis.arrayID = [];\n\t\tthis.arrayData = params\n\t\t\t.split(',')\n\t\t\t.map(Number)\n\t\t\t.filter(x => x)\n\t\t\t.slice(0, 18);\n\t\tthis.displayData = new Array(this.arrayData.length);\n\n\t\tconst elemCounts = new Map();\n\t\tconst letterMap = new Map();\n\n\t\tfor (let i = 0; i < this.arrayData.length; i++) {\n\t\t\tconst count = elemCounts.has(this.arrayData[i]) ? elemCounts.get(this.arrayData[i]) : 0;\n\t\t\tif (count > 0) {\n\t\t\t\tletterMap.set(this.arrayData[i], 'a');\n\t\t\t}\n\t\t\telemCounts.set(this.arrayData[i], count + 1);\n\t\t}\n\n\t\tfor (let i = 0; i < this.arrayData.length; i++) {\n\t\t\tthis.arrayData[i] = parseInt(this.arrayData[i]);\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tconst xpos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = ARRAY_START_Y;\n\n\t\t\tlet displayData = this.arrayData[i].toString();\n\t\t\tif (letterMap.has(this.arrayData[i])) {\n\t\t\t\tconst currChar = letterMap.get(this.arrayData[i]);\n\t\t\t\tdisplayData += currChar;\n\t\t\t\tletterMap.set(this.arrayData[i], String.fromCharCode(currChar.charCodeAt(0) + 1));\n\t\t\t}\n\t\t\tthis.displayData[i] = displayData;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\tdisplayData,\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t}\n\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\t\tthis.pPointerID = this.nextIndex++;\n\t\tthis.helper(0, this.arrayData.length - 1);\n\n\t\treturn this.commands;\n\t}\n\n\thelper(left, right) {\n\t\tif (left > right) return;\n\n\t\t// Hightlight cells in the current sub-array\n\t\tfor (let i = left; i <= right; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#99CCFF');\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tif (left === right) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[left], '#2ECC71');\n\t\t\tthis.cmd(act.step);\n\t\t\treturn;\n\t\t}\n\n\t\t// Create pivot pointer and swap with left-most element\n\t\t// To make things more interesting (and clearer), we don't pick the left-most element as pivot\n\t\tlet pivot;\n\t\tif (worstPivotEnabled) {\n\t\t\tlet min = left;\n\t\t\tfor (let i = left + 1; i <= right; i++) {\n\t\t\t\tif (this.arrayData[i] < this.arrayData[min]) {\n\t\t\t\t\tmin = i;\n\t\t\t\t}\n\t\t\t}\n\t\t\tpivot = min;\n\t\t} else if (firstPivotEnabled) {\n\t\t\tpivot = left;\n\t\t} else {\n\t\t\tpivot = Math.floor(Math.random() * (right - left)) + left + 1;\n\t\t}\n\t\tconst pXPos = pivot * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createHighlightCircle, this.pPointerID, '#FFFF00', pXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t\tthis.swapPivot(pivot, left);\n\n\t\t// Partition\n\t\tlet i = left + 1;\n\t\tlet j = right;\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createHighlightCircle, this.iPointerID, '#0000FF', iXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.createHighlightCircle, this.jPointerID, '#0000FF', jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t\twhile (i <= j) {\n\t\t\twhile (i <= j && this.arrayData[left] >= this.arrayData[i]) {\n\t\t\t\ti++;\n\t\t\t\tthis.movePointers(i, j);\n\t\t\t}\n\t\t\tif (i <= j) {\n\t\t\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#FF0000');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\twhile (i <= j && this.arrayData[left] <= this.arrayData[j]) {\n\t\t\t\tj--;\n\t\t\t\tthis.movePointers(i, j);\n\t\t\t}\n\t\t\tif (i <= j) {\n\t\t\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#FF0000');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tif (i <= j) {\n\t\t\t\tthis.swap(i, j);\n\t\t\t\ti++;\n\t\t\t\tj--;\n\t\t\t\tthis.movePointers(i, j);\n\t\t\t}\n\t\t}\n\n\t\t// Move pivot back and delete pivot pointer\n\t\tthis.swapPivot(left, j, true);\n\n\t\t// Delete i and j pointers\n\t\tthis.cmd(act.delete, this.iPointerID);\n\t\tthis.cmd(act.delete, this.jPointerID);\n\t\tthis.cmd(act.delete, this.pPointerID);\n\t\tthis.cmd(act.step);\n\n\t\t// Un-hightlight cells in sub-array and set pivot cell to green\n\t\tfor (let i = left; i <= right; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#FFFFFF');\n\t\t}\n\t\tthis.cmd(act.setBackgroundColor, this.arrayID[j], '#2ECC71');\n\t\tthis.cmd(act.step);\n\n\t\tthis.helper(left, j - 1);\n\t\tthis.helper(j + 1, right);\n\t}\n\n\tmovePointers(i, j) {\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.move, this.iPointerID, iXPos, ARRAY_START_Y);\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.move, this.jPointerID, jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t}\n\n\tswapPivot(pivot, other, moveJ) {\n\t\tif (pivot === other) return;\n\t\t// Create temporary labels and remove text in array\n\t\tconst lLabelID = this.nextIndex++;\n\t\tconst lXPos = other * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, lLabelID, this.displayData[other], lXPos, ARRAY_START_Y);\n\t\tconst pLabelID = this.nextIndex++;\n\t\tconst pXPos = pivot * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, pLabelID, this.displayData[pivot], pXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.setText, this.arrayID[other], '');\n\t\tthis.cmd(act.setText, this.arrayID[pivot], '');\n\t\t// Move labels and pivot pointer\n\t\tthis.cmd(act.move, pLabelID, lXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.move, this.pPointerID, lXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.move, lLabelID, pXPos, ARRAY_START_Y);\n\t\tmoveJ && this.cmd(act.move, this.jPointerID, pXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t\t// Set text in array, and delete temporary labels and pointer\n\t\tthis.cmd(act.setText, this.arrayID[other], this.displayData[pivot]);\n\t\tthis.cmd(act.setText, this.arrayID[pivot], this.displayData[other]);\n\t\tthis.cmd(act.delete, pLabelID);\n\t\tthis.cmd(act.delete, lLabelID);\n\t\t// Swap data in backend array\n\t\tlet temp = this.arrayData[pivot];\n\t\tthis.arrayData[pivot] = this.arrayData[other];\n\t\tthis.arrayData[other] = temp;\n\t\t//Swap data in backend display data\n\t\ttemp = this.displayData[pivot];\n\t\tthis.displayData[pivot] = this.displayData[other];\n\t\tthis.displayData[other] = temp;\n\t}\n\n\tswap(i, j) {\n\t\t// Create temporary labels and remove text in array\n\t\tconst iLabelID = this.nextIndex++;\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, iLabelID, this.displayData[i], iXPos, ARRAY_START_Y);\n\t\tconst jLabelID = this.nextIndex++;\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, jLabelID, this.displayData[j], jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\tthis.cmd(act.setText, this.arrayID[j], '');\n\t\t// Move labels\n\t\tthis.cmd(act.move, iLabelID, jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.move, jLabelID, iXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t\t// Set text in array and delete temporary labels\n\t\tthis.cmd(act.setText, this.arrayID[i], this.displayData[j]);\n\t\tthis.cmd(act.setText, this.arrayID[j], this.displayData[i]);\n\t\tthis.cmd(act.delete, iLabelID);\n\t\tthis.cmd(act.delete, jLabelID);\n\t\t// Swap data in backend array\n\t\tlet temp = this.arrayData[i];\n\t\tthis.arrayData[i] = this.arrayData[j];\n\t\tthis.arrayData[j] = temp;\n\t\t//Swap data in backend display data\n\t\ttemp = this.displayData[i];\n\t\tthis.displayData[i] = this.displayData[j];\n\t\tthis.displayData[j] = temp;\n\t\t// Reset pointer colors back to blue\n\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#0000FF');\n\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#0000FF');\n\t\tthis.cmd(act.step);\n\t}\n\n\ttoggleWorstPivot() {\n\t\tworstPivotEnabled = !worstPivotEnabled;\n\t\tif (firstPivotEnabled) {\n\t\t\tfirstPivotEnabled = false;\n\t\t\tthis.firstPivotToggle.checked = false;\n\t\t}\n\t}\n\n\ttoggleFirstPivot() {\n\t\tfirstPivotEnabled = !firstPivotEnabled;\n\t\tif (worstPivotEnabled) {\n\t\t\tworstPivotEnabled = false;\n\t\t\tthis.worstPivotToggle.checked = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 30;\n\nconst MAX_LENGTH = 22;\n\n// const LOWER_A_CHAR_CODE = 97;\n\nconst BASE_LABEL_Y = 45;\nconst CHARACTER_VALUES_LABEL_Y = 60;\nconst TEXT_HASH_LABEL_START_Y = 100;\nconst PATTERN_HASH_LABEL_START_Y = 115;\n\nexport default class RabinKarp extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Text');\n\n\t\t// Text text field\n\t\tthis.textField = addControlToAlgorithmBar('Text', '');\n\t\tthis.textField.onkeydown = this.returnSubmit(\n\t\t\tthis.textField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\tMAX_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.textField);\n\n\t\taddLabelToAlgorithmBar('Pattern');\n\n\t\t// Pattern text field\n\t\tthis.patternField = addControlToAlgorithmBar('Text', '');\n\t\tthis.patternField.onkeydown = this.returnSubmit(\n\t\t\tthis.patternField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\tMAX_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.patternField);\n\n\t\t// Find button\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Find');\n\t\tthis.findButton.onclick = this.findCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tsetup() {\n\t\tthis.textRowID = [];\n\t\tthis.comparisonMatrixID = [];\n\t\tthis.baseLabelID = this.nextIndex++;\n\t\tthis.characterValuesLabelID = this.nextIndex++;\n\t\tthis.textHashLabelID = this.nextIndex++;\n\t\tthis.textHashCalculationID = this.nextIndex++;\n\t\tthis.patternHashLabelID = this.nextIndex++;\n\t\tthis.patternHashCalculationID = this.nextIndex++;\n\n\t\tthis.animationManager.startNewAnimation();\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.textRowID = [];\n\t\tthis.comparisonMatrixID = [];\n\t\tthis.baseLabelID = this.nextIndex++;\n\t\tthis.characterValuesLabelID = this.nextIndex++;\n\t\tthis.textHashLabelID = this.nextIndex++;\n\t\tthis.textHashCalculationID = this.nextIndex++;\n\t\tthis.patternHashLabelID = this.nextIndex++;\n\t\tthis.patternHashCalculationID = this.nextIndex++;\n\t}\n\n\tfindCallback() {\n\t\tif (\n\t\t\tthis.textField.value !== '' &&\n\t\t\tthis.patternField.value !== '' &&\n\t\t\tthis.textField.value.length >= this.patternField.value.length\n\t\t) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst text = this.textField.value;\n\t\t\tconst pattern = this.patternField.value;\n\t\t\tthis.textField.value = '';\n\t\t\tthis.patternField.value = '';\n\t\t\tthis.implementAction(this.find.bind(this), text, pattern);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tfind(text, pattern) {\n\t\tthis.commands = [];\n\n\t\t// Filter non-letters from string and make lower case\n\t\ttext = text.replace(/[^a-zA-Z]/g, '').toLowerCase();\n\t\tpattern = pattern.replace(/[^a-zA-Z]/g, '').toLowerCase();\n\n\t\tconst maxRows = text.length - pattern.length + 1;\n\t\tif (maxRows <= 14) {\n\t\t\tthis.cellSize = 30;\n\t\t} else if (maxRows <= 17) {\n\t\t\tthis.cellSize = 25;\n\t\t} else {\n\t\t\tthis.cellSize = 20;\n\t\t}\n\n\t\tthis.textRowID = new Array(text.length);\n\t\tthis.comparisonMatrixID = new Array(maxRows);\n\t\tfor (let i = 0; i < maxRows; i++) {\n\t\t\tthis.comparisonMatrixID[i] = new Array(text.length);\n\t\t}\n\n\t\tlet xpos, ypos;\n\n\t\tfor (let i = 0; i < text.length; i++) {\n\t\t\txpos = i * this.cellSize + ARRAY_START_X;\n\t\t\typos = ARRAY_START_Y;\n\t\t\tthis.textRowID[i] = this.nextIndex;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.nextIndex,\n\t\t\t\ttext.charAt(i),\n\t\t\t\tthis.cellSize,\n\t\t\t\tthis.cellSize,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.setBackgroundColor, this.nextIndex++, '#D3D3D3');\n\t\t}\n\n\t\tfor (let row = 0; row < maxRows; row++) {\n\t\t\tfor (let col = 0; col < text.length; col++) {\n\t\t\t\txpos = col * this.cellSize + ARRAY_START_X;\n\t\t\t\typos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\tthis.comparisonMatrixID[row][col] = this.nextIndex;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t'',\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\txpos,\n\t\t\t\t\typos,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tconst labelsX = ARRAY_START_X + text.length * this.cellSize + 10;\n\t\tthis.cmd(act.createLabel, this.baseLabelID, 'Base constant = 1', labelsX, BASE_LABEL_Y, 0);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.characterValuesLabelID,\n\t\t\t'Character values: a = 0, b = 1, ..., z = 25',\n\t\t\tlabelsX,\n\t\t\tCHARACTER_VALUES_LABEL_Y,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.textHashLabelID,\n\t\t\t'Text hash:',\n\t\t\tlabelsX,\n\t\t\tTEXT_HASH_LABEL_START_Y,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.patternHashLabelID,\n\t\t\t'Pattern hash:',\n\t\t\tlabelsX,\n\t\t\tPATTERN_HASH_LABEL_START_Y,\n\t\t\t0,\n\t\t);\n\n\t\tlet textCalculation = '';\n\t\tlet textHash = 0;\n\t\tlet patternCalculation = '';\n\t\tlet patternHash = 0;\n\t\tfor (let i = 0; i < pattern.length; i++) {\n\t\t\ttextHash += text.charCodeAt(i) - 97;\n\t\t\ttextCalculation += text.charAt(i) + ' + ';\n\t\t\tpatternHash += pattern.charCodeAt(i) - 97;\n\t\t\tpatternCalculation += pattern.charAt(i) + ' + ';\n\t\t}\n\t\ttextCalculation =\n\t\t\ttextCalculation.substring(0, textCalculation.length - 2) + ' = ' + textHash;\n\t\tpatternCalculation =\n\t\t\tpatternCalculation.substring(0, patternCalculation.length - 2) + ' = ' + patternHash;\n\t\tconst calculationsX = ARRAY_START_X + text.length * this.cellSize + 100;\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.textHashCalculationID,\n\t\t\ttextCalculation,\n\t\t\tcalculationsX,\n\t\t\tTEXT_HASH_LABEL_START_Y,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.patternHashCalculationID,\n\t\t\tpatternCalculation,\n\t\t\tcalculationsX,\n\t\t\tPATTERN_HASH_LABEL_START_Y,\n\t\t\t0,\n\t\t);\n\n\t\tconst iPointerID = this.nextIndex++;\n\t\tconst jPointerID = this.nextIndex++;\n\n\t\tlet row = 0;\n\t\tfor (let i = 0; i <= text.length - pattern.length; i++) {\n\t\t\tfor (let k = i; k < i + pattern.length; k++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonMatrixID[row][k],\n\t\t\t\t\tpattern.charAt(k - i),\n\t\t\t\t\txpos,\n\t\t\t\t\typos,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t\tif (patternHash === textHash) {\n\t\t\t\txpos = i * this.cellSize + ARRAY_START_X;\n\t\t\t\tthis.cmd(act.createHighlightCircle, iPointerID, '#0000FF', xpos, ARRAY_START_Y);\n\t\t\t\typos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\tthis.cmd(act.createHighlightCircle, jPointerID, '#0000FF', xpos, ypos);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tlet j = 0;\n\t\t\t\twhile (j < pattern.length && pattern.charAt(j) === text.charAt(i + j)) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setBackgroundColor,\n\t\t\t\t\t\tthis.comparisonMatrixID[row][i + j],\n\t\t\t\t\t\t'#2ECC71',\n\t\t\t\t\t);\n\t\t\t\t\tj++;\n\t\t\t\t\tif (j !== pattern.length) {\n\t\t\t\t\t\txpos = (i + j) * this.cellSize + ARRAY_START_X;\n\t\t\t\t\t\tthis.cmd(act.move, iPointerID, xpos, ARRAY_START_Y);\n\t\t\t\t\t\typos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\t\t\tthis.cmd(act.move, jPointerID, xpos, ypos);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (j !== pattern.length) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setBackgroundColor,\n\t\t\t\t\t\tthis.comparisonMatrixID[row][i + j],\n\t\t\t\t\t\t'#E74C3C',\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.delete, iPointerID);\n\t\t\t\tthis.cmd(act.delete, jPointerID);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t} else {\n\t\t\t\tfor (let k = i; k < i + pattern.length; k++) {\n\t\t\t\t\tthis.cmd(act.setBackgroundColor, this.comparisonMatrixID[row][k], '#FFFF4D');\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tif (i < text.length - pattern.length) {\n\t\t\t\ttextHash =\n\t\t\t\t\ttextHash -\n\t\t\t\t\t(text.charCodeAt(i) - 97) +\n\t\t\t\t\t(text.charCodeAt(i + pattern.length) - 97);\n\t\t\t\ttextCalculation = '';\n\t\t\t\tfor (let k = 0; k < pattern.length; k++) {\n\t\t\t\t\ttextCalculation += text.charAt(k + i + 1) + ' + ';\n\t\t\t\t}\n\t\t\t\ttextCalculation =\n\t\t\t\t\ttextCalculation.substring(0, textCalculation.length - 2) + ' = ' + textHash;\n\t\t\t\tthis.cmd(act.setText, this.textHashCalculationID, textCalculation);\n\t\t\t}\n\t\t\trow++;\n\t\t}\n\n\t\treturn this.commands;\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tif (this.textRowID.length !== 0) {\n\t\t\tthis.cmd(act.delete, this.baseLabelID);\n\t\t\tthis.cmd(act.delete, this.characterValuesLabelID);\n\t\t\tthis.cmd(act.delete, this.textHashLabelID);\n\t\t\tthis.cmd(act.delete, this.textHashCalculationID);\n\t\t\tthis.cmd(act.delete, this.patternHashLabelID);\n\t\t\tthis.cmd(act.delete, this.patternHashCalculationID);\n\t\t}\n\t\tfor (let i = 0; i < this.textRowID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.textRowID[i]);\n\t\t}\n\t\tthis.textRowID = [];\n\t\tfor (let i = 0; i < this.comparisonMatrixID.length; i++) {\n\t\t\tfor (let j = 0; j < this.comparisonMatrixID[i].length; j++) {\n\t\t\t\tthis.cmd(act.delete, this.comparisonMatrixID[i][j]);\n\t\t\t}\n\t\t}\n\t\tthis.comparisonMatrixID = [];\n\n\t\treturn this.commands;\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, { addControlToAlgorithmBar, addLabelToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 200;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\n// const ARRRAY_ELEMS_PER_LINE = 15;\n// const ARRAY_LINE_SPACING = 130;\n\n// const TOP_POS_X = 180;\n// const TOP_POS_Y = 100;\n// const TOP_LABEL_X = 130;\n// const TOP_LABEL_Y = 100;\n\n// const PUSH_LABEL_X = 50;\n// const PUSH_LABEL_Y = 30;\n// const PUSH_ELEMENT_X = 120;\n// const PUSH_ELEMENT_Y = 30;\n\n// const SIZE = 10;\n\nexport default class SelectionSort extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Comma separated list (e.g. \"3,1,2\", max 18 elements)');\n\n\t\t// List text field\n\t\tthis.listField = addControlToAlgorithmBar('Text', '');\n\t\tthis.listField.onkeydown = this.returnSubmit(\n\t\t\tthis.listField,\n\t\t\tthis.sortCallback.bind(this),\n\t\t\t60,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.listField);\n\n\t\t// Sort button\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Sort');\n\t\tthis.findButton.onclick = this.sortCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tsetup() {\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\n\t\tthis.animationManager.startNewAnimation();\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\t}\n\n\tsortCallback() {\n\t\tif (this.listField.value !== '') {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst list = this.listField.value;\n\t\t\tthis.listField.value = '';\n\t\t\tthis.implementAction(this.sort.bind(this), list);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.arrayID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t}\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\treturn this.commands;\n\t}\n\n\tsort(params) {\n\t\tthis.commands = [];\n\n\t\tthis.arrayID = [];\n\t\tthis.arrayData = params\n\t\t\t.split(',')\n\t\t\t.map(Number)\n\t\t\t.filter(x => !Number.isNaN(x))\n\t\t\t.slice(0, 18);\n\t\tconst length = this.arrayData.length;\n\t\tthis.displayData = new Array(length);\n\n\t\tconst elemCounts = new Map();\n\t\tconst letterMap = new Map();\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst count = elemCounts.has(this.arrayData[i]) ? elemCounts.get(this.arrayData[i]) : 0;\n\t\t\tif (count > 0) {\n\t\t\t\tletterMap.set(this.arrayData[i], 'a');\n\t\t\t}\n\t\t\telemCounts.set(this.arrayData[i], count + 1);\n\t\t}\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tconst xpos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = ARRAY_START_Y;\n\n\t\t\tlet displayData = this.arrayData[i].toString();\n\t\t\tif (letterMap.has(this.arrayData[i])) {\n\t\t\t\tconst currChar = letterMap.get(this.arrayData[i]);\n\t\t\t\tdisplayData += currChar;\n\t\t\t\tletterMap.set(this.arrayData[i], String.fromCharCode(currChar.charCodeAt(0) + 1));\n\t\t\t}\n\t\t\tthis.displayData[i] = displayData;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\tdisplayData,\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t}\n\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.iPointerID,\n\t\t\t'#FF0000',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y,\n\t\t);\n\t\tthis.cmd(act.setHighlight, this.iPointerID, 1);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.jPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X + ARRAY_ELEM_WIDTH,\n\t\t\tARRAY_START_Y,\n\t\t);\n\t\tthis.cmd(act.setHighlight, this.jPointerID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = 0; i < this.arrayData.length - 1; i++) {\n\t\t\tlet smallest = i;\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[smallest], '#FFFF00');\n\t\t\tfor (let j = i + 1; j < this.arrayData.length; j++) {\n\t\t\t\tthis.movePointers(smallest, j);\n\t\t\t\tif (this.arrayData[j] < this.arrayData[smallest]) {\n\t\t\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[smallest], '#FFFFFF');\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tsmallest = j;\n\t\t\t\t\tthis.movePointers(smallest, j);\n\t\t\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[smallest], '#FFFF00');\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.swap(i, smallest);\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[smallest], '#FFFFFF');\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#2ECC71');\n\t\t\tthis.cmd(act.step);\n\t\t}\n\n\t\tthis.cmd(act.delete, this.iPointerID);\n\t\tthis.cmd(act.delete, this.jPointerID);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setBackgroundColor, this.arrayID[this.arrayID.length - 1], '#2ECC71');\n\n\t\treturn this.commands;\n\t}\n\n\tmovePointers(i, j) {\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst iYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.move, this.iPointerID, iXPos, iYPos);\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.move, this.jPointerID, jXPos, jYPos);\n\t\tthis.cmd(act.step);\n\t}\n\n\tswap(i, j) {\n\t\tconst iLabelID = this.nextIndex++;\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst iYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.createLabel, iLabelID, this.displayData[i], iXPos, iYPos);\n\t\tconst jLabelID = this.nextIndex++;\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.createLabel, jLabelID, this.displayData[j], jXPos, jYPos);\n\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\tthis.cmd(act.setText, this.arrayID[j], '');\n\t\tthis.cmd(act.move, iLabelID, jXPos, jYPos);\n\t\tthis.cmd(act.move, jLabelID, iXPos, iYPos);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.arrayID[i], this.displayData[j]);\n\t\tthis.cmd(act.setText, this.arrayID[j], this.displayData[i]);\n\t\tthis.cmd(act.delete, iLabelID);\n\t\tthis.cmd(act.delete, jLabelID);\n\t\t// Swap data in backend array\n\t\tlet temp = this.arrayData[i];\n\t\tthis.arrayData[i] = this.arrayData[j];\n\t\tthis.arrayData[j] = temp;\n\t\t// Swap data in display array\n\t\ttemp = this.displayData[i];\n\t\tthis.displayData[i] = this.displayData[j];\n\t\tthis.displayData[j] = temp;\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst SKIP_LIST_START_X = 100;\nconst SKIP_LIST_START_Y = 400;\nconst SKIP_LIST_ELEM_SIZE = 40;\n\nconst SKIP_LIST_SPACING = 80;\n\nconst VALUE_LABEL_X = 50;\nconst VALUE_LABEL_Y = 23;\nconst VALUE_STRING_X = 120;\nconst VALUE_STRING_Y = 23;\n\nconst CF_LABEL_X = 50;\nconst CF_LABEL_Y = 37;\nconst CF_STRING_X = 120;\nconst CF_STRING_Y = 37;\n\nconst NINF = '\\u2212\\u221E'; // Negative infinity\nconst PINF = '\\u221E'; // Positive infinity\n\nexport default class SkipList extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tconst verticalGroup = addGroupToAlgorithmBar(false);\n\t\tconst topHorizontalGroup = addGroupToAlgorithmBar(true, verticalGroup);\n\t\tconst bottomHorizontalGroup = addGroupToAlgorithmBar(true, verticalGroup);\n\n\t\taddLabelToAlgorithmBar('Add', topHorizontalGroup);\n\n\t\t// Add's value text field\n\t\tthis.addValueField = addControlToAlgorithmBar('Text', '', topHorizontalGroup);\n\t\tthis.addValueField.onkeydown = this.returnSubmit(\n\t\t\tthis.addValueField,\n\t\t\tthis.addRandomlyCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.addValueField);\n\n\t\taddLabelToAlgorithmBar('with', topHorizontalGroup);\n\n\t\t// Heads' text field\n\t\tthis.headsField = addControlToAlgorithmBar('Text', '', topHorizontalGroup);\n\t\tthis.headsField.onkeydown = this.returnSubmit(\n\t\t\tthis.headsField,\n\t\t\tthis.addWithHeadsCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.headsField);\n\n\t\taddLabelToAlgorithmBar('heads', topHorizontalGroup);\n\n\t\t// Add randomly button\n\t\tthis.addRandomlyButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add randomly',\n\t\t\tbottomHorizontalGroup,\n\t\t);\n\t\tthis.addRandomlyButton.onclick = this.addRandomlyCallback.bind(this);\n\t\tthis.controls.push(this.addRandomlyButton);\n\n\t\taddLabelToAlgorithmBar('or', bottomHorizontalGroup);\n\n\t\t// Add with heads button\n\t\tthis.addWithHeadsButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add with heads',\n\t\t\tbottomHorizontalGroup,\n\t\t);\n\t\tthis.addWithHeadsButton.onclick = this.addWithHeadsCallback.bind(this);\n\t\tthis.controls.push(this.addWithHeadsButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Remove's text field\n\t\tthis.removeField = addControlToAlgorithmBar('Text', '');\n\t\tthis.removeField.onkeydown = this.returnSubmit(\n\t\t\tthis.removeField,\n\t\t\tthis.removeCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.removeField);\n\n\t\t// Remove button\n\t\tthis.removeButton = addControlToAlgorithmBar('Button', 'Remove');\n\t\tthis.removeButton.onclick = this.removeCallback.bind(this);\n\t\tthis.controls.push(this.removeButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Get's index text field\n\t\tthis.getField = addControlToAlgorithmBar('Text', '');\n\t\tthis.getField.onkeydown = this.returnSubmit(\n\t\t\tthis.getField,\n\t\t\tthis.getCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.getField);\n\n\t\t// Get button\n\t\tthis.getButton = addControlToAlgorithmBar('Button', 'Get');\n\t\tthis.getButton.onclick = this.getCallback.bind(this);\n\t\tthis.controls.push(this.getButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.commands = [];\n\n\t\tthis.nodeID = [[this.nextIndex++], [this.nextIndex++]];\n\t\tthis.data = [[Number.NEGATIVE_INFINITY], [Number.POSITIVE_INFINITY]];\n\t\tthis.size = 0;\n\n\t\tthis.cmd(\n\t\t\tact.createSkipListNode,\n\t\t\tthis.nodeID[0][0],\n\t\t\tNINF,\n\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\tSKIP_LIST_START_X,\n\t\t\tSKIP_LIST_START_Y,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createSkipListNode,\n\t\t\tthis.nodeID[1][0],\n\t\t\tPINF,\n\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING,\n\t\t\tSKIP_LIST_START_Y,\n\t\t);\n\t\tthis.cmd(act.connectSkipList, this.nodeID[0][0], this.nodeID[1][0], 3);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.nodeID = [[this.nextIndex++], [this.nextIndex++]];\n\t\tthis.data = [[Number.NEGATIVE_INFINITY], [Number.POSITIVE_INFINITY]];\n\t\tthis.size = 0;\n\t}\n\n\taddRandomlyCallback() {\n\t\tif (this.addValueField.value !== '') {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tthis.addValueField.value = '';\n\t\t\tthis.headsField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal);\n\t\t}\n\t}\n\n\taddWithHeadsCallback() {\n\t\tif (this.addValueField.value !== '' && this.headsField.value !== '') {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tthis.addValueField.value = '';\n\t\t\tconst heads = parseInt(this.headsField.value);\n\t\t\tthis.headsField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, heads);\n\t\t}\n\t}\n\n\tremoveCallback() {\n\t\tif (this.removeField.value !== '') {\n\t\t\tconst value = parseInt(this.removeField.value);\n\t\t\tthis.removeField.value = '';\n\t\t\tthis.implementAction(this.remove.bind(this), value);\n\t\t}\n\t}\n\n\tgetCallback() {\n\t\tif (this.getField.value !== '') {\n\t\t\tconst value = parseInt(this.getField.value);\n\t\t\tthis.getField.value = '';\n\t\t\tthis.implementAction(this.get.bind(this), value);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearAll.bind(this));\n\t}\n\n\tadd(value, heads) {\n\t\tthis.commands = [];\n\n\t\tif (heads === undefined) {\n\t\t\theads = Math.floor(Math.random() * (this.size + 1));\n\t\t}\n\t\theads = Math.min(heads, 4);\n\n\t\tconst valueLabelId = this.nextIndex++;\n\t\tconst valueStringId = this.nextIndex++;\n\n\t\tconst cfLabelId = this.nextIndex++;\n\t\tconst cfStringId = this.nextIndex++;\n\n\t\tlet headsString = '';\n\t\tfor (let i = 0; i < heads; i++) {\n\t\t\theadsString += 'H';\n\t\t}\n\t\theadsString += 'T';\n\n\t\tthis.cmd(act.createLabel, valueLabelId, 'Value to add:', VALUE_LABEL_X, VALUE_LABEL_Y);\n\t\tthis.cmd(act.createLabel, valueStringId, value, VALUE_STRING_X, VALUE_STRING_Y);\n\t\tthis.cmd(act.createLabel, cfLabelId, 'Coin Flipper:', CF_LABEL_X, CF_LABEL_Y);\n\t\tthis.cmd(act.createLabel, cfStringId, headsString, CF_STRING_X, CF_STRING_Y);\n\t\tthis.cmd(act.step);\n\n\t\t// Add levels\n\t\tfor (let row = this.nodeID[0].length; row <= heads; row++) {\n\t\t\tconst rightPhantomsCol = this.nodeID.length - 1;\n\t\t\tthis.data[0][row] = Number.NEGATIVE_INFINITY;\n\t\t\tthis.nodeID[0][row] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createSkipListNode,\n\t\t\t\tthis.nodeID[0][row],\n\t\t\t\tNINF,\n\t\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\t\tSKIP_LIST_START_X,\n\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t);\n\t\t\tthis.data[rightPhantomsCol][row] = Number.POSITIVE_INFINITY;\n\t\t\tthis.nodeID[rightPhantomsCol][row] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createSkipListNode,\n\t\t\t\tthis.nodeID[rightPhantomsCol][row],\n\t\t\t\tPINF,\n\t\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * rightPhantomsCol,\n\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.connectSkipList,\n\t\t\t\tthis.nodeID[0][row],\n\t\t\t\tthis.nodeID[rightPhantomsCol][row],\n\t\t\t\t3,\n\t\t\t);\n\t\t\tthis.cmd(act.connectSkipList, this.nodeID[0][row - 1], this.nodeID[0][row], 0);\n\t\t\tthis.cmd(\n\t\t\t\tact.connectSkipList,\n\t\t\t\tthis.nodeID[rightPhantomsCol][row - 1],\n\t\t\t\tthis.nodeID[rightPhantomsCol][row],\n\t\t\t\t0,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\n\t\t// Find column where new element will be inserted\n\t\tlet newCol = 1;\n\t\twhile (value > this.data[newCol][0]) {\n\t\t\tnewCol++;\n\t\t}\n\n\t\t// Move IDs and data in next columns to the right\n\t\tfor (let col = this.nodeID.length - 1; col >= newCol; col--) {\n\t\t\tthis.nodeID[col + 1] = this.nodeID[col];\n\t\t\tthis.data[col + 1] = this.data[col];\n\t\t}\n\t\tthis.nodeID[newCol] = [];\n\t\tthis.data[newCol] = [];\n\n\t\t// Traverse and add\n\t\tlet col = 0;\n\t\tlet row = this.nodeID[0].length - 1;\n\n\t\tconst highlightID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\thighlightID,\n\t\t\t'#FF0000',\n\t\t\tSKIP_LIST_START_X,\n\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t);\n\t\tthis.cmd(act.setHighlight, highlightID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tlet foundDuplicate = false;\n\t\twhile (row >= 0) {\n\t\t\t// Move right until next element is greater or equal\n\t\t\tlet nextCol = this.getNextCol(col, row);\n\t\t\tif (value === this.data[nextCol][row]) {\n\t\t\t\tfoundDuplicate = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\twhile (value > this.data[nextCol][row]) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\thighlightID,\n\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * nextCol,\n\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tcol = nextCol;\n\t\t\t\tnextCol = this.getNextCol(col, row);\n\t\t\t}\n\n\t\t\t// Move highlight circle downward\n\t\t\trow--;\n\t\t\tif (row >= 0) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\thighlightID,\n\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * col,\n\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t}\n\n\t\t// Add nodes bottom-up to the new column if no duplicate has been found\n\t\tif (!foundDuplicate) {\n\t\t\tthis.shiftColumns(newCol);\n\t\t\trow++;\n\t\t\t// Having a highlight circle in the previous ID causes an object to look weird (this\n\t\t\t// seems to be an already existing bug) Creating a random object before it is a workaround\n\t\t\tthis.cmd(act.createCircle, this.nextIndex++, '', -100, -100, 0);\n\n\t\t\twhile (row <= heads) {\n\t\t\t\tthis.data[newCol][row] = value;\n\t\t\t\tthis.nodeID[newCol][row] = this.nextIndex++;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createSkipListNode,\n\t\t\t\t\tthis.nodeID[newCol][row],\n\t\t\t\t\tvalue,\n\t\t\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * newCol,\n\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t);\n\t\t\t\tconst prevCol = this.getPrevCol(newCol, row);\n\t\t\t\tconst nextCol = this.getNextCol(newCol, row);\n\t\t\t\tthis.cmd(act.disconnect, this.nodeID[prevCol][row], this.nodeID[nextCol][row]);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectSkipList,\n\t\t\t\t\tthis.nodeID[prevCol][row],\n\t\t\t\t\tthis.nodeID[newCol][row],\n\t\t\t\t\t3,\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectSkipList,\n\t\t\t\t\tthis.nodeID[newCol][row],\n\t\t\t\t\tthis.nodeID[nextCol][row],\n\t\t\t\t\t3,\n\t\t\t\t);\n\t\t\t\tif (row !== 0) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.connectSkipList,\n\t\t\t\t\t\tthis.nodeID[newCol][row - 1],\n\t\t\t\t\t\tthis.nodeID[newCol][row],\n\t\t\t\t\t\t0,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\thighlightID,\n\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * newCol,\n\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\trow++;\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.delete, valueLabelId);\n\t\tthis.cmd(act.delete, valueStringId);\n\t\tthis.cmd(act.delete, cfLabelId);\n\t\tthis.cmd(act.delete, cfStringId);\n\t\tthis.cmd(act.delete, highlightID);\n\n\t\tthis.size++;\n\n\t\treturn this.commands;\n\t}\n\n\tremove(params) {\n\t\tthis.commands = [];\n\n\t\tconst value = parseInt(params);\n\n\t\tconst valueLabelId = this.nextIndex++;\n\t\tconst valueStringId = this.nextIndex++;\n\n\t\tthis.cmd(act.createLabel, valueLabelId, 'Value to remove:', VALUE_LABEL_X, VALUE_LABEL_Y);\n\t\tthis.cmd(act.createLabel, valueStringId, value, VALUE_STRING_X, VALUE_STRING_Y);\n\t\tthis.cmd(act.step);\n\n\t\t// Traverse and remove\n\t\tlet col = 0;\n\t\tlet row = this.nodeID[0].length - 1;\n\t\tlet removedCol = -1;\n\n\t\tconst highlightID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\thighlightID,\n\t\t\t'#FF0000',\n\t\t\tSKIP_LIST_START_X,\n\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\twhile (row >= 0) {\n\t\t\t// Move right until next element is greater or equal\n\t\t\tlet nextCol = this.getNextCol(col, row);\n\t\t\twhile (value > this.data[nextCol][row]) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\thighlightID,\n\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * nextCol,\n\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tcol = nextCol;\n\t\t\t\tnextCol = this.getNextCol(col, row);\n\t\t\t}\n\n\t\t\tif (value === this.data[nextCol][row]) {\n\t\t\t\tremovedCol = nextCol;\n\t\t\t\tcol = nextCol;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\thighlightID,\n\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * col,\n\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\twhile (row >= 0) {\n\t\t\t\t\tnextCol = this.getNextCol(col, row);\n\t\t\t\t\tconst prevCol = this.getPrevCol(col, row);\n\t\t\t\t\tthis.cmd(act.disconnect, this.nodeID[prevCol][row], this.nodeID[col][row]);\n\t\t\t\t\tthis.cmd(act.disconnect, this.nodeID[col][row], this.nodeID[nextCol][row]);\n\t\t\t\t\tif (this.nodeID[col][row + 1] != null) {\n\t\t\t\t\t\tthis.cmd(act.disconnect, this.nodeID[col][row + 1], this.nodeID[col][row]);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.connectSkipList,\n\t\t\t\t\t\tthis.nodeID[prevCol][row],\n\t\t\t\t\t\tthis.nodeID[nextCol][row],\n\t\t\t\t\t\t3,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.delete, this.nodeID[col][row]);\n\t\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t\trow--;\n\t\t\t\t\tif (row !== -1) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\thighlightID,\n\t\t\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * col,\n\t\t\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\trow--;\n\t\t\t\tif (row !== -1) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\thighlightID,\n\t\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * col,\n\t\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.delete, valueLabelId);\n\t\tthis.cmd(act.delete, valueStringId);\n\t\tthis.cmd(act.delete, highlightID);\n\n\t\tif (removedCol !== -1) {\n\t\t\t// Shift ID and data columns to the left (already erases last column)\n\t\t\tfor (let col = removedCol; col < this.nodeID.length - 1; col++) {\n\t\t\t\tthis.nodeID[col] = this.nodeID[col + 1];\n\t\t\t\tthis.data[col] = this.data[col + 1];\n\t\t\t}\n\t\t\tthis.nodeID.pop();\n\t\t\tthis.data.pop();\n\n\t\t\tthis.shiftColumns(removedCol);\n\t\t}\n\n\t\t// Remove empty rows\n\t\t// Find tallest column of actual values (not phantoms)\n\t\tlet maxHeight = 1;\n\t\tfor (let col = 1; col < this.nodeID.length - 1; col++) {\n\t\t\tmaxHeight = Math.max(maxHeight, this.nodeID[col].length);\n\t\t}\n\t\t// Remove rows above tallest column (so empty rows)\n\t\tfor (let row = this.nodeID[0].length - 1; row >= maxHeight; row--) {\n\t\t\tthis.data[0].pop();\n\t\t\tconst leftPhantomID = this.nodeID[0].pop();\n\t\t\tthis.cmd(act.delete, leftPhantomID);\n\t\t\tconst rightPhantomsCol = this.nodeID.length - 1;\n\t\t\tthis.data[rightPhantomsCol].pop();\n\t\t\tconst rightPhantomID = this.nodeID[rightPhantomsCol].pop();\n\t\t\tthis.cmd(act.delete, rightPhantomID);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tthis.size--;\n\n\t\treturn this.commands;\n\t}\n\n\tget(params) {\n\t\tthis.commands = [];\n\n\t\tconst value = parseInt(params);\n\n\t\tlet col = 0;\n\t\tlet row = this.nodeID[0].length - 1;\n\t\t// let nextCol = this.getNextCol(col, row);\n\n\t\tconst highlightID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\thighlightID,\n\t\t\t'#FF0000',\n\t\t\tSKIP_LIST_START_X,\n\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t);\n\t\tthis.cmd(act.setHighlight, highlightID, 1);\n\t\tthis.cmd(act.step);\n\n\t\twhile (row >= 0 && value !== this.data[col][row]) {\n\t\t\t// Move right until next element is greater or equal\n\t\t\tlet nextCol = this.getNextCol(col, row);\n\t\t\twhile (value >= this.data[nextCol][row]) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\thighlightID,\n\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * nextCol,\n\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tcol = nextCol;\n\t\t\t\tnextCol = this.getNextCol(col, row);\n\t\t\t}\n\n\t\t\t// Move highlight circle downward if data has not been found\n\t\t\tif (value !== this.data[col][row]) {\n\t\t\t\trow--;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\thighlightID,\n\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * col,\n\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.delete, highlightID);\n\n\t\treturn this.commands;\n\t}\n\n\t// Shifts columns on screen\n\tshiftColumns(col) {\n\t\tfor (; col < this.nodeID.length; col++) {\n\t\t\tfor (let row = 0; row < this.nodeID[col].length; row++) {\n\t\t\t\tif (this.nodeID[col][row] != null) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tthis.nodeID[col][row],\n\t\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * col,\n\t\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.step);\n\t}\n\n\t// Gets the column of the next node (\"right pointer\")\n\tgetNextCol(col, row) {\n\t\tcol++;\n\t\twhile (this.data[col][row] == null) {\n\t\t\tcol++;\n\t\t}\n\t\treturn col;\n\t}\n\n\t// Gets the column of the previous node (\"left pointer\")\n\tgetPrevCol(col, row) {\n\t\tcol--;\n\t\twhile (this.data[col][row] == null) {\n\t\t\tcol--;\n\t\t}\n\t\treturn col;\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\n\t\tfor (let col = 0; col < this.nodeID.length; col++) {\n\t\t\tfor (let row = 0; row < this.nodeID[col].length; row++) {\n\t\t\t\tthis.cmd(act.delete, this.nodeID[col][row]);\n\t\t\t}\n\t\t}\n\n\t\tthis.nodeID = [[this.nextIndex++], [this.nextIndex++]];\n\t\tthis.data = [[Number.NEGATIVE_INFINITY], [Number.POSITIVE_INFINITY]];\n\t\tthis.size = 0;\n\n\t\tthis.cmd(\n\t\t\tact.createSkipListNode,\n\t\t\tthis.nodeID[0][0],\n\t\t\tNINF,\n\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\tSKIP_LIST_START_X,\n\t\t\tSKIP_LIST_START_Y,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createSkipListNode,\n\t\t\tthis.nodeID[1][0],\n\t\t\tPINF,\n\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING,\n\t\t\tSKIP_LIST_START_Y,\n\t\t);\n\t\tthis.cmd(act.connectSkipList, this.nodeID[0][0], this.nodeID[1][0], 3);\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, { addControlToAlgorithmBar, addDivisorToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst LINK_COLOR = '#007700';\nconst HIGHLIGHT_CIRCLE_COLOR = '#007700';\nconst FOREGROUND_COLOR = '#007700';\nconst BACKGROUND_COLOR = '#EEFFEE';\nconst PRINT_COLOR = FOREGROUND_COLOR;\n\nconst WIDTH_DELTA = 50;\nconst HEIGHT_DELTA = 50;\nconst STARTING_Y = 50;\n\nconst FIRST_PRINT_POS_X = 50;\nconst PRINT_VERTICAL_GAP = 20;\nconst PRINT_HORIZONTAL_GAP = 50;\n\nexport default class SplayTree extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.startingX = w / 2;\n\t\tthis.first_print_pos_y = h - 2 * PRINT_VERTICAL_GAP;\n\t\tthis.print_max = w - 10;\n\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.commands = [];\n\t\tthis.cmd(act.createLabel, 0, '', 20, 10, 0);\n\t\tthis.nextIndex = 1;\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tthis.insertField = addControlToAlgorithmBar('Text', '');\n\t\tthis.insertField.onkeydown = this.returnSubmit(\n\t\t\tthis.insertField,\n\t\t\tthis.insertCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.insertField);\n\n\t\tthis.insertButton = addControlToAlgorithmBar('Button', 'Insert');\n\t\tthis.insertButton.onclick = this.insertCallback.bind(this);\n\t\tthis.controls.push(this.insertButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.deleteField = addControlToAlgorithmBar('Text', '');\n\t\tthis.deleteField.onkeydown = this.returnSubmit(\n\t\t\tthis.deleteField,\n\t\t\tthis.deleteCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.deleteField);\n\n\t\tthis.deleteButton = addControlToAlgorithmBar('Button', 'Delete');\n\t\tthis.deleteButton.onclick = this.deleteCallback.bind(this);\n\t\tthis.controls.push(this.deleteButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.findField = addControlToAlgorithmBar('Text', '');\n\t\tthis.findField.onkeydown = this.returnSubmit(\n\t\t\tthis.findField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.findField);\n\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Find');\n\t\tthis.findButton.onclick = this.findCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.printButton = addControlToAlgorithmBar('Button', 'Print');\n\t\tthis.printButton.onclick = this.printCallback.bind(this);\n\t\tthis.controls.push(this.printButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 1;\n\t\tthis.treeRoot = null;\n\t}\n\n\tinsertCallback() {\n\t\tlet insertedValue = this.insertField.value;\n\t\t// Get text value\n\t\tinsertedValue = this.normalizeNumber(insertedValue, 4);\n\t\tif (insertedValue !== '') {\n\t\t\t// set text value\n\t\t\tthis.insertField.value = '';\n\t\t\tthis.implementAction(this.insertElement.bind(this), parseInt(insertedValue));\n\t\t}\n\t}\n\n\tdeleteCallback() {\n\t\tlet deletedValue = this.deleteField.value;\n\t\tif (deletedValue !== '') {\n\t\t\tdeletedValue = this.normalizeNumber(deletedValue, 4);\n\t\t\tthis.deleteField.value = '';\n\t\t\tthis.implementAction(this.deleteElement.bind(this), parseInt(deletedValue));\n\t\t}\n\t}\n\n\t//  TODO:  This top-down version is broken.  Don't use\n\tsplay(value) {\n\t\tif (this.treeRoot == null) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this.treeRoot.data === value) {\n\t\t\treturn true;\n\t\t}\n\t\tif (value < this.treeRoot.data) {\n\t\t\tif (this.treeRoot.left == null) {\n\t\t\t\treturn false;\n\t\t\t} else if (this.treeRoot.left.data === value) {\n\t\t\t\tthis.singleRotateRight(this.treeRoot);\n\t\t\t\treturn true;\n\t\t\t} else if (value < this.treeRoot.left.data) {\n\t\t\t\tif (this.treeRoot.left.left == null) {\n\t\t\t\t\tthis.singleRotateRight(this.treeRoot);\n\t\t\t\t\treturn this.splay(value);\n\t\t\t\t} else {\n\t\t\t\t\tthis.zigZigRight(this.treeRoot);\n\t\t\t\t\treturn this.splay(value);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this.treeRoot.left.right == null) {\n\t\t\t\t\tthis.singleRotateRight(this.treeRoot);\n\t\t\t\t\treturn this.splay(value);\n\t\t\t\t} else {\n\t\t\t\t\tthis.doubleRotateRight(this.treeRoot);\n\t\t\t\t\treturn this.splay(value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.treeRoot.right == null) {\n\t\t\t\treturn false;\n\t\t\t} else if (this.treeRoot.right.data === value) {\n\t\t\t\tthis.singleRotateLeft(this.treeRoot);\n\t\t\t\treturn true;\n\t\t\t} else if (value > this.treeRoot.right.data) {\n\t\t\t\tif (this.treeRoot.right.right == null) {\n\t\t\t\t\tthis.singleRotateLeft(this.treeRoot);\n\t\t\t\t\treturn this.splay(value);\n\t\t\t\t} else {\n\t\t\t\t\tthis.zigZigLeft(this.treeRoot);\n\t\t\t\t\treturn this.splay(value);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this.treeRoot.right.left == null) {\n\t\t\t\t\tthis.singleRotateLeft(this.treeRoot);\n\t\t\t\t\treturn this.splay(value);\n\t\t\t\t} else {\n\t\t\t\t\tthis.doubleRotateLeft(this.treeRot);\n\t\t\t\t\treturn this.splay(value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprintCallback() {\n\t\tthis.implementAction(this.printTree.bind(this));\n\t}\n\n\tprintTree() {\n\t\tthis.commands = [];\n\n\t\tif (this.treeRoot != null) {\n\t\t\tthis.highlightID = this.nextIndex++;\n\t\t\tconst firstLabel = this.nextIndex;\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\tthis.highlightID,\n\t\t\t\tHIGHLIGHT_CIRCLE_COLOR,\n\t\t\t\tthis.treeRoot.x,\n\t\t\t\tthis.treeRoot.y,\n\t\t\t);\n\t\t\tthis.xPosOfNextLabel = FIRST_PRINT_POS_X;\n\t\t\tthis.yPosOfNextLabel = this.first_print_pos_y;\n\t\t\tthis.printTreeRec(this.treeRoot);\n\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tfor (let i = firstLabel; i < this.nextIndex; i++) {\n\t\t\t\tthis.cmd(act.delete, i);\n\t\t\t}\n\t\t\tthis.nextIndex = this.highlightID; /// Reuse objects.  Not necessary.\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tprintTreeRec(tree) {\n\t\tthis.cmd(act.step);\n\t\tif (tree.left != null) {\n\t\t\tthis.cmd(act.move, this.highlightID, tree.left.x, tree.left.y);\n\t\t\tthis.printTreeRec(tree.left);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.x, tree.y);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tconst nextLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, nextLabelID, tree.data, tree.x, tree.y);\n\t\tthis.cmd(act.setForegroundColor, nextLabelID, PRINT_COLOR);\n\t\tthis.cmd(act.move, nextLabelID, this.xPosOfNextLabel, this.yPosOfNextLabel);\n\t\tthis.cmd(act.step);\n\n\t\tthis.xPosOfNextLabel += PRINT_HORIZONTAL_GAP;\n\t\tif (this.xPosOfNextLabel > this.print_max) {\n\t\t\tthis.xPosOfNextLabel = FIRST_PRINT_POS_X;\n\t\t\tthis.yPosOfNextLabel += PRINT_VERTICAL_GAP;\n\t\t}\n\t\tif (tree.right != null) {\n\t\t\tthis.cmd(act.move, this.highlightID, tree.right.x, tree.right.y);\n\t\t\tthis.printTreeRec(tree.right);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.x, tree.y);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\treturn;\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tthis.recClear(this.treeRoot);\n\t\tthis.treeRoot = null;\n\t\treturn this.commands;\n\t}\n\n\trecClear(curr) {\n\t\tif (curr != null) {\n\t\t\tthis.cmd(act.delete, curr.graphicID);\n\t\t\tthis.recClear(curr.left);\n\t\t\tthis.recClear(curr.right);\n\t\t}\n\t}\n\n\tfindCallback() {\n\t\tconst findValue = this.normalizeNumber(this.findField.value, 4);\n\t\tthis.findField.value = '';\n\t\tthis.implementAction(this.findElement.bind(this), parseInt(findValue));\n\t}\n\n\tfindElement(findValue) {\n\t\tthis.commands = [];\n\n\t\tthis.highlightID = this.nextIndex++;\n\n\t\tconst found = this.doFind(this.treeRoot, findValue);\n\n\t\tif (found) {\n\t\t\tthis.cmd(act.setText, 0, 'Element ' + findValue + ' found.');\n\t\t} else {\n\t\t\tthis.cmd(act.setText, 0, 'Element ' + findValue + ' not found.');\n\t\t}\n\n\t\treturn this.commands;\n\t}\n\n\tdoFind(tree, value) {\n\t\tthis.cmd(act.setText, 0, 'Searching for ' + value);\n\t\tif (tree != null) {\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\t\tif (tree.data === value) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\t0,\n\t\t\t\t\t'Searching for ' + value + ' : ' + value + ' = ' + value + ' (Element found!)',\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setText, 0, 'Splaying found node to root of tree');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\tthis.splayUp(tree);\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tif (tree.data > value) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t'Searching for ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' : ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' < ' +\n\t\t\t\t\t\t\ttree.data +\n\t\t\t\t\t\t\t' (look to left subtree)',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tif (tree.left != null) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createHighlightCircle,\n\t\t\t\t\t\t\tthis.highlightID,\n\t\t\t\t\t\t\tHIGHLIGHT_CIRCLE_COLOR,\n\t\t\t\t\t\t\ttree.x,\n\t\t\t\t\t\t\ttree.y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.move, this.highlightID, tree.left.x, tree.left.y);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\t\t\t\treturn this.doFind(tree.left, value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.splayUp(tree);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t'Searching for ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' : ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' > ' +\n\t\t\t\t\t\t\ttree.data +\n\t\t\t\t\t\t\t' (look to right subtree)',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tif (tree.right != null) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createHighlightCircle,\n\t\t\t\t\t\t\tthis.highlightID,\n\t\t\t\t\t\t\tHIGHLIGHT_CIRCLE_COLOR,\n\t\t\t\t\t\t\ttree.x,\n\t\t\t\t\t\t\ttree.y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.move, this.highlightID, tree.right.x, tree.right.y);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\t\t\t\treturn this.doFind(tree.right, value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.splayUp(tree);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\t0,\n\t\t\t\t'Searching for ' + value + ' : < Empty Tree > (Element not found)',\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, 0, 'Searching for ' + value + ' :  (Element not found)');\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tinsertElement(insertedValue) {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, 0, 'Inserting ' + insertedValue);\n\t\tthis.highlightID = this.nextIndex++;\n\n\t\tif (this.treeRoot == null) {\n\t\t\tthis.cmd(act.createCircle, this.nextIndex, insertedValue, this.startingX, STARTING_Y);\n\t\t\tthis.cmd(act.setForegroundColor, this.nextIndex, FOREGROUND_COLOR);\n\t\t\tthis.cmd(act.setBackgroundColor, this.nextIndex, BACKGROUND_COLOR);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.treeRoot = new BSTNode(insertedValue, this.nextIndex, this.startingX, STARTING_Y);\n\t\t\tthis.nextIndex += 1;\n\t\t} else {\n\t\t\tthis.cmd(act.createCircle, this.nextIndex, insertedValue, 100, 100);\n\t\t\tthis.cmd(act.setForegroundColor, this.nextIndex, FOREGROUND_COLOR);\n\t\t\tthis.cmd(act.setBackgroundColor, this.nextIndex, BACKGROUND_COLOR);\n\t\t\tthis.cmd(act.step);\n\t\t\tconst insertElem = new BSTNode(insertedValue, this.nextIndex, 100, 100);\n\n\t\t\tthis.nextIndex += 1;\n\t\t\tthis.cmd(act.setHighlight, insertElem.graphicID, 1);\n\t\t\tthis.insert(insertElem, this.treeRoot);\n\t\t\tthis.resizeTree();\n\t\t\tthis.cmd(act.setText, 0, 'Splay inserted element to root of tree');\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.splayUp(insertElem);\n\t\t}\n\t\tthis.cmd(act.setText, 0, '');\n\t\treturn this.commands;\n\t}\n\n\tinsert(elem, tree) {\n\t\tlet foundDuplicate = false;\n\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\tthis.cmd(act.setHighlight, elem.graphicID, 1);\n\n\t\tif (elem.data < tree.data) {\n\t\t\tthis.cmd(act.setText, 0, elem.data + ' < ' + tree.data + '.  Looking at left subtree');\n\t\t} else if (elem.data > tree.data) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\t0,\n\t\t\t\telem.data + ' >= ' + tree.data + '.  Looking at right subtree',\n\t\t\t);\n\t\t} else {\n\t\t\tthis.cmd(act.setText, 0, elem.data + ' = ' + tree.data + '. Ignoring duplicate');\n\t\t\tfoundDuplicate = true;\n\t\t}\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\tthis.cmd(act.setHighlight, elem.graphicID, 0);\n\n\t\tif (foundDuplicate) {\n\t\t\tthis.cmd(act.delete, elem.graphicID, 0);\n\t\t\treturn;\n\t\t}\n\n\t\tif (elem.data < tree.data) {\n\t\t\tif (tree.left == null) {\n\t\t\t\tthis.cmd(act.setText, 0, 'Found null tree, inserting element');\n\n\t\t\t\tthis.cmd(act.setHighlight, elem.graphicID, 0);\n\t\t\t\ttree.left = elem;\n\t\t\t\telem.parent = tree;\n\t\t\t\tthis.cmd(act.connect, tree.graphicID, elem.graphicID, LINK_COLOR);\n\t\t\t} else {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createHighlightCircle,\n\t\t\t\t\tthis.highlightID,\n\t\t\t\t\tHIGHLIGHT_CIRCLE_COLOR,\n\t\t\t\t\ttree.x,\n\t\t\t\t\ttree.y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.move, this.highlightID, tree.left.x, tree.left.y);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\t\tthis.insert(elem, tree.left);\n\t\t\t}\n\t\t} else {\n\t\t\tif (tree.right == null) {\n\t\t\t\tthis.cmd(act.setText, 0, 'Found null tree, inserting element');\n\t\t\t\tthis.cmd(act.setHighlight, elem.graphicID, 0);\n\t\t\t\ttree.right = elem;\n\t\t\t\telem.parent = tree;\n\t\t\t\tthis.cmd(act.connect, tree.graphicID, elem.graphicID, LINK_COLOR);\n\t\t\t\telem.x = tree.x + WIDTH_DELTA / 2;\n\t\t\t\telem.y = tree.y + HEIGHT_DELTA;\n\t\t\t\tthis.cmd(act.move, elem.graphicID, elem.x, elem.y);\n\t\t\t} else {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createHighlightCircle,\n\t\t\t\t\tthis.highlightID,\n\t\t\t\t\tHIGHLIGHT_CIRCLE_COLOR,\n\t\t\t\t\ttree.x,\n\t\t\t\t\ttree.y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.move, this.highlightID, tree.right.x, tree.right.y);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\t\tthis.insert(elem, tree.right);\n\t\t\t}\n\t\t}\n\t}\n\n\tdeleteElement(deletedValue) {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, 0, 'Deleting ' + deletedValue);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, 0, '');\n\t\tthis.highlightID = this.nextIndex++;\n\t\tthis.treeDelete(this.treeRoot, deletedValue);\n\t\tthis.cmd(act.setText, 0, '');\n\t\t// Do delete\n\t\treturn this.commands;\n\t}\n\n\ttreeDelete(tree, valueToDelete) {\n\t\tthis.cmd(act.setText, 0, 'Finding ' + valueToDelete + ' and splaying to rooot');\n\t\tthis.cmd(act.step);\n\n\t\tconst inTree = this.doFind(this.treeRoot, valueToDelete);\n\t\tthis.cmd(act.setText, 0, 'Removing root, leaving left and right trees');\n\t\tthis.cmd(act.step);\n\t\tif (inTree) {\n\t\t\tif (this.treeRoot.right == null) {\n\t\t\t\tthis.cmd(act.delete, this.treeRoot.graphicID);\n\t\t\t\tthis.cmd(act.setText, 0, 'No right tree, make left tree the root.');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.treeRoot = this.treeRoot.left;\n\t\t\t\tthis.treeRoot.parent = null;\n\t\t\t\tthis.resizeTree();\n\t\t\t} else if (this.treeRoot.left == null) {\n\t\t\t\tthis.cmd(act.delete, this.treeRoot.graphicID);\n\t\t\t\tthis.cmd(act.setText, 0, 'No left tree, make right tree the root.');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.treeRoot = this.treeRoot.right;\n\t\t\t\tthis.treeRoot.parent = null;\n\t\t\t\tthis.resizeTree();\n\t\t\t} else {\n\t\t\t\tconst right = this.treeRoot.right;\n\t\t\t\tconst left = this.treeRoot.left;\n\t\t\t\tconst oldGraphicID = this.treeRoot.graphicID;\n\t\t\t\tthis.cmd(act.disconnect, this.treeRoot.graphicID, left.graphicID);\n\t\t\t\tthis.cmd(act.disconnect, this.treeRoot.graphicID, right.graphicID);\n\t\t\t\tthis.cmd(act.setAlpha, this.treeRoot.graphicID, 0);\n\t\t\t\tthis.cmd(act.setText, 0, 'Splay largest element in left tree to root');\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tleft.parent = null;\n\t\t\t\tconst largestLeft = this.findMax(left);\n\t\t\t\tthis.splayUp(largestLeft);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\t0,\n\t\t\t\t\t'Left tree now has no right subtree, connect left and right trees',\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.connect, largestLeft.graphicID, right.graphicID, LINK_COLOR);\n\t\t\t\tlargestLeft.parent = null;\n\t\t\t\tlargestLeft.right = right;\n\t\t\t\tright.parent = largestLeft;\n\t\t\t\tthis.treeRoot = largestLeft;\n\t\t\t\tthis.cmd(act.delete, oldGraphicID);\n\t\t\t\tthis.resizeTree();\n\t\t\t}\n\t\t}\n\t}\n\n\tsingleRotateRight(tree) {\n\t\tconst B = tree;\n\t\t// const t3 = B.right;\n\t\tconst A = tree.left;\n\t\t// const t1 = A.left;\n\t\tconst t2 = A.right;\n\n\t\tthis.cmd(act.setText, 0, 'Zig Right');\n\t\tthis.cmd(act.setEdgeHighlight, B.graphicID, A.graphicID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tif (t2 != null) {\n\t\t\tthis.cmd(act.disconnect, A.graphicID, t2.graphicID);\n\t\t\tthis.cmd(act.connect, B.graphicID, t2.graphicID, LINK_COLOR);\n\t\t\tt2.parent = B;\n\t\t}\n\t\tthis.cmd(act.disconnect, B.graphicID, A.graphicID);\n\t\tthis.cmd(act.connect, A.graphicID, B.graphicID, LINK_COLOR);\n\t\tA.parent = B.parent;\n\t\tif (B.parent == null) {\n\t\t\tthis.treeRoot = A;\n\t\t} else {\n\t\t\tthis.cmd(act.disconnect, B.parent.graphicID, B.graphicID, LINK_COLOR);\n\t\t\tthis.cmd(act.connect, B.parent.graphicID, A.graphicID, LINK_COLOR);\n\t\t\tif (B.isLeftChild()) {\n\t\t\t\tB.parent.left = A;\n\t\t\t} else {\n\t\t\t\tB.parent.right = A;\n\t\t\t}\n\t\t}\n\t\tA.right = B;\n\t\tB.parent = A;\n\t\tB.left = t2;\n\t\tthis.resizeTree();\n\t}\n\n\tzigZigRight(tree) {\n\t\tconst C = tree;\n\t\tconst B = tree.left;\n\t\tconst A = tree.left.left;\n\t\t// const t1 = A.left;\n\t\tconst t2 = A.right;\n\t\tconst t3 = B.right;\n\t\t// const t4 = C.right;\n\n\t\tthis.cmd(act.setText, 0, 'Zig-Zig Right');\n\t\tthis.cmd(act.setEdgeHighlight, C.graphicID, B.graphicID, 1);\n\t\tthis.cmd(act.setEdgeHighlight, B.graphicID, A.graphicID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setEdgeHighlight, C.graphicID, B.graphicID, 0);\n\t\tthis.cmd(act.setEdgeHighlight, B.graphicID, A.graphicID, 0);\n\n\t\tif (C.parent != null) {\n\t\t\tthis.cmd(act.disconnect, C.parent.graphicID, C.graphicID);\n\t\t\tthis.cmd(act.connect, C.parent.graphicID, A.graphicID, LINK_COLOR);\n\t\t\tif (C.isLeftChild()) {\n\t\t\t\tC.parent.left = A;\n\t\t\t} else {\n\t\t\t\tC.parent.right = A;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.treeRoot = A;\n\t\t}\n\n\t\tif (t2 != null) {\n\t\t\tthis.cmd(act.disconnect, A.graphicID, t2.graphicID);\n\t\t\tthis.cmd(act.connect, B.graphicID, t2.graphicID, LINK_COLOR);\n\t\t\tt2.parent = B;\n\t\t}\n\t\tif (t3 != null) {\n\t\t\tthis.cmd(act.disconnect, B.graphicID, t3.graphicID);\n\t\t\tthis.cmd(act.connect, C.graphicID, t3.graphicID, LINK_COLOR);\n\t\t\tt3.parent = C;\n\t\t}\n\t\tthis.cmd(act.disconnect, B.graphicID, A.graphicID);\n\t\tthis.cmd(act.connect, A.graphicID, B.graphicID, LINK_COLOR);\n\t\tthis.cmd(act.disconnect, C.graphicID, B.graphicID);\n\t\tthis.cmd(act.connect, B.graphicID, C.graphicID, LINK_COLOR);\n\n\t\tA.right = B;\n\t\tA.parent = C.parent;\n\t\tB.parent = A;\n\t\tB.left = t2;\n\t\tB.right = C;\n\t\tC.parent = B;\n\t\tC.left = t3;\n\t\tthis.resizeTree();\n\t}\n\n\tzigZigLeft(tree) {\n\t\tconst A = tree;\n\t\tconst B = tree.right;\n\t\tconst C = tree.right.right;\n\t\t// const t1 = A.left;\n\t\tconst t2 = B.left;\n\t\tconst t3 = C.left;\n\t\t// const t4 = C.right;\n\n\t\tthis.cmd(act.setText, 0, 'Zig-Zig Left');\n\t\tthis.cmd(act.setEdgeHighlight, A.graphicID, B.graphicID, 1);\n\t\tthis.cmd(act.setEdgeHighlight, B.graphicID, C.graphicID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setEdgeHighlight, A.graphicID, B.graphicID, 0);\n\t\tthis.cmd(act.setEdgeHighlight, B.graphicID, C.graphicID, 0);\n\n\t\tif (A.parent != null) {\n\t\t\tthis.cmd(act.disconnect, A.parent.graphicID, A.graphicID);\n\t\t\tthis.cmd(act.connect, A.parent.graphicID, C.graphicID, LINK_COLOR);\n\t\t\tif (A.isLeftChild()) {\n\t\t\t\tA.parent.left = C;\n\t\t\t} else {\n\t\t\t\tA.parent.right = C;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.treeRoot = C;\n\t\t}\n\n\t\tif (t2 != null) {\n\t\t\tthis.cmd(act.disconnect, B.graphicID, t2.graphicID);\n\t\t\tthis.cmd(act.connect, A.graphicID, t2.graphicID, LINK_COLOR);\n\t\t\tt2.parent = A;\n\t\t}\n\t\tif (t3 != null) {\n\t\t\tthis.cmd(act.disconnect, C.graphicID, t3.graphicID);\n\t\t\tthis.cmd(act.connect, B.graphicID, t3.graphicID, LINK_COLOR);\n\t\t\tt3.parent = B;\n\t\t}\n\t\tthis.cmd(act.disconnect, A.graphicID, B.graphicID);\n\t\tthis.cmd(act.disconnect, B.graphicID, C.graphicID);\n\t\tthis.cmd(act.connect, C.graphicID, B.graphicID, LINK_COLOR);\n\t\tthis.cmd(act.connect, B.graphicID, A.graphicID, LINK_COLOR);\n\t\tC.parent = A.parent;\n\t\tA.right = t2;\n\t\tB.left = A;\n\t\tA.parent = B;\n\t\tB.right = t3;\n\t\tC.left = B;\n\t\tB.parent = C;\n\n\t\tthis.resizeTree();\n\t}\n\n\tsingleRotateLeft(tree) {\n\t\tconst A = tree;\n\t\tconst B = tree.right;\n\t\t// const t1 = A.left;\n\t\tconst t2 = B.left;\n\t\t// const t3 = B.right;\n\n\t\tthis.cmd(act.setText, 0, 'Zig Left');\n\t\tthis.cmd(act.setEdgeHighlight, A.graphicID, B.graphicID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tif (t2 != null) {\n\t\t\tthis.cmd(act.disconnect, B.graphicID, t2.graphicID);\n\t\t\tthis.cmd(act.connect, A.graphicID, t2.graphicID, LINK_COLOR);\n\t\t\tt2.parent = A;\n\t\t}\n\t\tthis.cmd(act.disconnect, A.graphicID, B.graphicID);\n\t\tthis.cmd(act.connect, B.graphicID, A.graphicID, LINK_COLOR);\n\t\tB.parent = A.parent;\n\t\tif (A.parent == null) {\n\t\t\tthis.treeRoot = B;\n\t\t} else {\n\t\t\tthis.cmd(act.disconnect, A.parent.graphicID, A.graphicID, LINK_COLOR);\n\t\t\tthis.cmd(act.connect, A.parent.graphicID, B.graphicID, LINK_COLOR);\n\n\t\t\tif (A.isLeftChild()) {\n\t\t\t\tA.parent.left = B;\n\t\t\t} else {\n\t\t\t\tA.parent.right = B;\n\t\t\t}\n\t\t}\n\t\tB.left = A;\n\t\tA.parent = B;\n\t\tA.right = t2;\n\n\t\tthis.resizeTree();\n\t}\n\n\tsplayUp(tree) {\n\t\tif (tree.parent == null) {\n\t\t\treturn;\n\t\t} else if (tree.parent.parent == null) {\n\t\t\tif (tree.isLeftChild()) {\n\t\t\t\tthis.singleRotateRight(tree.parent);\n\t\t\t} else {\n\t\t\t\tthis.singleRotateLeft(tree.parent);\n\t\t\t}\n\t\t} else if (tree.isLeftChild() && !tree.parent.isLeftChild()) {\n\t\t\tthis.doubleRotateLeft(tree.parent.parent);\n\t\t\tthis.splayUp(tree);\n\t\t} else if (!tree.isLeftChild() && tree.parent.isLeftChild()) {\n\t\t\tthis.doubleRotateRight(tree.parent.parent);\n\t\t\tthis.splayUp(tree);\n\t\t} else if (tree.isLeftChild()) {\n\t\t\tthis.zigZigRight(tree.parent.parent);\n\t\t\tthis.splayUp(tree);\n\t\t} else {\n\t\t\tthis.zigZigLeft(tree.parent.parent);\n\t\t\tthis.splayUp(tree);\n\t\t}\n\t}\n\n\tfindMax(tree) {\n\t\tif (tree.right != null) {\n\t\t\tthis.highlightID = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\tthis.highlightID,\n\t\t\t\tHIGHLIGHT_CIRCLE_COLOR,\n\t\t\t\ttree.x,\n\t\t\t\ttree.y,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\twhile (tree.right != null) {\n\t\t\t\tthis.cmd(act.move, this.highlightID, tree.right.x, tree.right.y);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\ttree = tree.right;\n\t\t\t}\n\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\treturn tree;\n\t\t} else {\n\t\t\treturn tree;\n\t\t}\n\t}\n\n\tdoubleRotateRight(tree) {\n\t\tthis.cmd(act.setText, 0, 'Zig-Zag Right');\n\t\tconst A = tree.left;\n\t\tconst B = tree.left.right;\n\t\tconst C = tree;\n\t\t// const t1 = A.left;\n\t\tconst t2 = B.left;\n\t\tconst t3 = B.right;\n\t\t// const t4 = C.right;\n\n\t\tthis.cmd(act.setEdgeHighlight, C.graphicID, A.graphicID, 1);\n\t\tthis.cmd(act.setEdgeHighlight, A.graphicID, B.graphicID, 1);\n\n\t\tthis.cmd(act.step);\n\n\t\tif (t2 != null) {\n\t\t\tthis.cmd(act.disconnect, B.graphicID, t2.graphicID);\n\t\t\tt2.parent = A;\n\t\t\tA.right = t2;\n\t\t\tthis.cmd(act.connect, A.graphicID, t2.graphicID, LINK_COLOR);\n\t\t}\n\t\tif (t3 != null) {\n\t\t\tthis.cmd(act.disconnect, B.graphicID, t3.graphicID);\n\t\t\tt3.parent = C;\n\t\t\tC.left = t2;\n\t\t\tthis.cmd(act.connect, C.graphicID, t3.graphicID, LINK_COLOR);\n\t\t}\n\t\tif (C.parent == null) {\n\t\t\tB.parent = null;\n\t\t\tthis.treeRoot = B;\n\t\t} else {\n\t\t\tthis.cmd(act.disconnect, C.parent.graphicID, C.graphicID);\n\t\t\tthis.cmd(act.connect, C.parent.graphicID, B.graphicID, LINK_COLOR);\n\t\t\tif (C.isLeftChild()) {\n\t\t\t\tC.parent.left = B;\n\t\t\t} else {\n\t\t\t\tC.parent.right = B;\n\t\t\t}\n\t\t\tB.parent = C.parent;\n\t\t\tC.parent = B;\n\t\t}\n\t\tthis.cmd(act.disconnect, C.graphicID, A.graphicID);\n\t\tthis.cmd(act.disconnect, A.graphicID, B.graphicID);\n\t\tthis.cmd(act.connect, B.graphicID, A.graphicID, LINK_COLOR);\n\t\tthis.cmd(act.connect, B.graphicID, C.graphicID, LINK_COLOR);\n\t\tB.left = A;\n\t\tA.parent = B;\n\t\tB.right = C;\n\t\tC.parent = B;\n\t\tA.right = t2;\n\t\tC.left = t3;\n\n\t\tthis.resizeTree();\n\t}\n\n\tdoubleRotateLeft(tree) {\n\t\tthis.cmd(act.setText, 0, 'Zig-Zag Left');\n\t\tconst A = tree;\n\t\tconst B = tree.right.left;\n\t\tconst C = tree.right;\n\t\t// const t1 = A.left;\n\t\tconst t2 = B.left;\n\t\tconst t3 = B.right;\n\t\t// const t4 = C.right;\n\n\t\tthis.cmd(act.setEdgeHighlight, A.graphicID, C.graphicID, 1);\n\t\tthis.cmd(act.setEdgeHighlight, C.graphicID, B.graphicID, 1);\n\n\t\tthis.cmd(act.step);\n\n\t\tif (t2 != null) {\n\t\t\tthis.cmd(act.disconnect, B.graphicID, t2.graphicID);\n\t\t\tt2.parent = A;\n\t\t\tA.right = t2;\n\t\t\tthis.cmd(act.connect, A.graphicID, t2.graphicID, LINK_COLOR);\n\t\t}\n\t\tif (t3 != null) {\n\t\t\tthis.cmd(act.disconnect, B.graphicID, t3.graphicID);\n\t\t\tt3.parent = C;\n\t\t\tC.left = t2;\n\t\t\tthis.cmd(act.connect, C.graphicID, t3.graphicID, LINK_COLOR);\n\t\t}\n\n\t\tif (A.parent == null) {\n\t\t\tB.parent = null;\n\t\t\tthis.treeRoot = B;\n\t\t} else {\n\t\t\tthis.cmd(act.disconnect, A.parent.graphicID, A.graphicID);\n\t\t\tthis.cmd(act.connect, A.parent.graphicID, B.graphicID, LINK_COLOR);\n\t\t\tif (A.isLeftChild()) {\n\t\t\t\tA.parent.left = B;\n\t\t\t} else {\n\t\t\t\tA.parent.right = B;\n\t\t\t}\n\t\t\tB.parent = A.parent;\n\t\t\tA.parent = B;\n\t\t}\n\t\tthis.cmd(act.disconnect, A.graphicID, C.graphicID);\n\t\tthis.cmd(act.disconnect, C.graphicID, B.graphicID);\n\t\tthis.cmd(act.connect, B.graphicID, A.graphicID, LINK_COLOR);\n\t\tthis.cmd(act.connect, B.graphicID, C.graphicID, LINK_COLOR);\n\t\tB.left = A;\n\t\tA.parent = B;\n\t\tB.right = C;\n\t\tC.parent = B;\n\t\tA.right = t2;\n\t\tC.left = t3;\n\n\t\tthis.resizeTree();\n\t}\n\n\tresizeTree() {\n\t\tlet startingPoint = this.startingX;\n\t\tthis.resizeWidths(this.treeRoot);\n\t\tif (this.treeRoot != null) {\n\t\t\tif (this.treeRoot.leftWidth > startingPoint) {\n\t\t\t\tstartingPoint = this.treeRoot.leftWidth;\n\t\t\t} else if (this.treeRoot.rightWidth > startingPoint) {\n\t\t\t\tstartingPoint = Math.max(\n\t\t\t\t\tthis.treeRoot.leftWidth,\n\t\t\t\t\t2 * startingPoint - this.treeRoot.rightWidth,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.setNewPositions(this.treeRoot, startingPoint, STARTING_Y, 0);\n\t\t\tthis.animateNewPositions(this.treeRoot);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t}\n\n\tsetNewPositions(tree, xPosition, yPosition, side) {\n\t\tif (tree != null) {\n\t\t\ttree.y = yPosition;\n\t\t\tif (side === -1) {\n\t\t\t\txPosition = xPosition - tree.rightWidth;\n\t\t\t} else if (side === 1) {\n\t\t\t\txPosition = xPosition + tree.leftWidth;\n\t\t\t}\n\t\t\ttree.x = xPosition;\n\t\t\tthis.setNewPositions(tree.left, xPosition, yPosition + HEIGHT_DELTA, -1);\n\t\t\tthis.setNewPositions(tree.right, xPosition, yPosition + HEIGHT_DELTA, 1);\n\t\t}\n\t}\n\n\tanimateNewPositions(tree) {\n\t\tif (tree != null) {\n\t\t\tthis.cmd(act.move, tree.graphicID, tree.x, tree.y);\n\t\t\tthis.animateNewPositions(tree.left);\n\t\t\tthis.animateNewPositions(tree.right);\n\t\t}\n\t}\n\n\tresizeWidths(tree) {\n\t\tif (tree == null) {\n\t\t\treturn 0;\n\t\t}\n\t\ttree.leftWidth = Math.max(this.resizeWidths(tree.left), WIDTH_DELTA / 2);\n\t\ttree.rightWidth = Math.max(this.resizeWidths(tree.right), WIDTH_DELTA / 2);\n\t\treturn tree.leftWidth + tree.rightWidth;\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n\nclass BSTNode {\n\tconstructor(val, id, initialX, initialY) {\n\t\tthis.data = val;\n\t\tthis.x = initialX;\n\t\tthis.y = initialY;\n\t\tthis.graphicID = id;\n\t\tthis.left = null;\n\t\tthis.right = null;\n\t\tthis.parent = null;\n\t}\n\n\tisLeftChild() {\n\t\tif (this.parent == null) {\n\t\t\treturn true;\n\t\t}\n\t\treturn this.parent.left === this;\n\t}\n}\n","import * as algos from './algo';\n\n// After adding the export in algos/index.js, add new algorithms in the following format:\n// AlgorithmName: ['Menu Display Name', algos.ClassName, 'Verbose Display Name (optional)']\nexport const algoMap = {\n\tArrayList: ['ArrayList', algos.ArrayList],\n\tLinkedList: ['Singly LinkedList', algos.LinkedList],\n\tDoublyLinkedList: ['Doubly LinkedList', algos.DoublyLinkedList],\n\tCircularlyLinkedList: ['Circularly LinkedList', algos.CircularlyLinkedList],\n\tStackArray: ['Stack (Array)', algos.StackArray],\n\tStackLL: ['Stack (LinkedList)', algos.StackLL],\n\tQueueArray: ['Queue (Array)', algos.QueueArray],\n\tQueueLL: ['Queue (LinkedList)', algos.QueueLL],\n\tDequeArray: ['Deque (Array)', algos.DequeArray],\n\tDequeLL: ['Deque (LinkedList)', algos.DequeLL],\n\tBST: ['Binary Search Tree', algos.BST],\n\tHeap: ['Heaps / PQs', algos.Heap],\n\tSkipList: ['SkipList', algos.SkipList],\n\tClosedHash: ['HashMap (Probing)', algos.ClosedHash],\n\tOpenHash: ['HashMap (Chaining)', algos.OpenHash],\n\tSplayTree: ['SplayTree', algos.SplayTree],\n\tAVL: ['AVL', algos.AVL],\n\tBTree: ['2-4 Tree', algos.BTree],\n\tBubbleSort: ['Bubble Sort', algos.BubbleSort],\n\tCocktailSort: ['Cocktail Shaker Sort', algos.CocktailSort],\n\tInsertionSort: ['Insertion Sort', algos.InsertionSort],\n\tSelectionSort: ['Selection Sort', algos.SelectionSort],\n\tQuickSort: ['QuickSort', algos.QuickSort],\n\tQuickSelect: ['QuickSelect / kᵗʰ Select', algos.QuickSelect],\n\tMergeSort: ['MergeSort', algos.MergeSort],\n\tLSDRadix: ['LSD Radix Sort', algos.LSDRadix],\n\tBruteForce: ['Brute Force', algos.BruteForce],\n\tBoyerMoore: ['Boyer-Moore', algos.BoyerMoore],\n\tKMP: ['KMP', algos.KMP],\n\tRabinKarp: ['Rabin-Karp', algos.RabinKarp],\n\tBFS: ['Breadth-First Search', algos.BFS],\n\tDFS: ['Depth-First Search', algos.DFS],\n\tDijkstra: [\"Dijkstra's\", algos.Dijkstras],\n\tPrim: [\"Prim's\", algos.Prims],\n\tKruskal: [\"Kruskal's\", algos.Kruskals],\n\tLCS: ['LCS', algos.LCS, 'Longest Common Subsequence'],\n\tFloyd: ['Floyd-Warshall', algos.Floyd],\n};\n\nexport const algoList = [\n\t'Lists',\n\t'ArrayList',\n\t'LinkedList',\n\t'DoublyLinkedList',\n\t'CircularlyLinkedList',\n\t'Stacks, Queues and Deques',\n\t'StackArray',\n\t'StackLL',\n\t'QueueArray',\n\t'QueueLL',\n\t'DequeArray',\n\t'DequeLL',\n\t'Trees and SkipList',\n\t'BST',\n\t'Heap',\n\t'AVL',\n\t'BTree',\n\t'SplayTree',\n\t'SkipList',\n\t'HashMaps',\n\t'ClosedHash',\n\t'OpenHash',\n\t'Sorting and QuickSelect',\n\t'BubbleSort',\n\t'CocktailSort',\n\t'InsertionSort',\n\t'SelectionSort',\n\t'QuickSort',\n\t'QuickSelect',\n\t'MergeSort',\n\t'LSDRadix',\n\t'String Searching',\n\t'BruteForce',\n\t'BoyerMoore',\n\t'KMP',\n\t'RabinKarp',\n\t'Graph Algorithms',\n\t'BFS',\n\t'DFS',\n\t'Dijkstra',\n\t'Prim',\n\t'Kruskal',\n\t'Dynamic Programming',\n\t'LCS',\n\t'Floyd',\n];\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, { addControlToAlgorithmBar, addDivisorToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 200;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nconst ARRRAY_ELEMS_PER_LINE = 15;\nconst ARRAY_LINE_SPACING = 130;\n\nconst TOP_POS_X = 180;\nconst TOP_POS_Y = 100;\nconst TOP_LABEL_X = 130;\nconst TOP_LABEL_Y = 100;\n\nconst PUSH_LABEL_X = 50;\nconst PUSH_LABEL_Y = 30;\nconst PUSH_ELEMENT_X = 120;\nconst PUSH_ELEMENT_Y = 30;\n\nconst SIZE = 30;\n\nexport default class StackArray extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.commands = [];\n\t\tthis.setup();\n\t\tthis.initialIndex = this.nextIndex;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\t\tthis.pushField = addControlToAlgorithmBar('Text', '');\n\t\tthis.pushField.onkeydown = this.returnSubmit(\n\t\t\tthis.pushField,\n\t\t\tthis.pushCallback.bind(this),\n\t\t\t4,\n\t\t);\n\n\t\tthis.pushButton = addControlToAlgorithmBar('Button', 'Push');\n\t\tthis.pushButton.onclick = this.pushCallback.bind(this);\n\t\tthis.controls.push(this.pushField);\n\t\tthis.controls.push(this.pushButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.popButton = addControlToAlgorithmBar('Button', 'Pop');\n\t\tthis.popButton.onclick = this.popCallback.bind(this);\n\t\tthis.controls.push(this.popButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.nextIndex = 0;\n\n\t\tthis.arrayID = new Array(SIZE);\n\t\tthis.arrayLabelID = new Array(SIZE);\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelID[i] = this.nextIndex++;\n\t\t}\n\t\tthis.topID = this.nextIndex++;\n\t\tthis.topLabelID = this.nextIndex++;\n\n\t\tthis.arrayData = new Array(SIZE);\n\t\tthis.top = 0;\n\t\tthis.leftoverLabelID = this.nextIndex++;\n\t\tthis.commands = [];\n\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tconst xpos = (i % ARRRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = Math.floor(i / ARRRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.createLabel, this.arrayLabelID[i], i, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\t\tthis.cmd(act.setForegroundColor, this.arrayLabelID[i], '#0000FF');\n\t\t}\n\t\tthis.cmd(act.createLabel, this.topLabelID, 'top', TOP_LABEL_X, TOP_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.topID,\n\t\t\t0,\n\t\t\tARRAY_ELEM_WIDTH,\n\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\tTOP_POS_X,\n\t\t\tTOP_POS_Y,\n\t\t);\n\n\t\tthis.cmd(act.createLabel, this.leftoverLabelID, '', PUSH_LABEL_X, PUSH_LABEL_Y);\n\n\t\tthis.highlight1ID = this.nextIndex++;\n\t\tthis.highlight2ID = this.nextIndex++;\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.top = 0;\n\t\tthis.nextIndex = this.initialIndex;\n\t}\n\n\tpushCallback() {\n\t\tif (this.top < SIZE && this.pushField.value !== '') {\n\t\t\tconst pushVal = this.pushField.value;\n\t\t\tthis.pushField.value = '';\n\t\t\tthis.implementAction(this.push.bind(this), pushVal);\n\t\t}\n\t}\n\n\tpopCallback() {\n\t\tif (this.top > 0) {\n\t\t\tthis.implementAction(this.pop.bind(this));\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearData.bind(this));\n\t}\n\n\tclearData() {\n\t\tthis.commands = [];\n\t\tthis.clearAll();\n\t\treturn this.commands;\n\t}\n\n\tpush(elemToPush) {\n\t\tthis.commands = [];\n\n\t\tconst labPushID = this.nextIndex++;\n\t\tconst labPushValID = this.nextIndex++;\n\t\tthis.arrayData[this.top] = elemToPush;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(act.createLabel, labPushID, 'Pushing Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPushValID, elemToPush, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.createHighlightCircle, this.highlight1ID, '#0000FF', TOP_POS_X, TOP_POS_Y);\n\t\tthis.cmd(act.step);\n\n\t\tconst xpos = (this.top % ARRRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(this.top / ARRRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, labPushValID, xpos, ypos);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.arrayID[this.top], elemToPush);\n\t\tthis.cmd(act.delete, labPushValID);\n\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\n\t\tthis.cmd(act.setHighlight, this.topID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.top = this.top + 1;\n\t\tthis.cmd(act.setText, this.topID, this.top);\n\t\tthis.cmd(act.delete, labPushID);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.topID, 0);\n\n\t\treturn this.commands;\n\t}\n\n\tpop() {\n\t\tthis.commands = [];\n\n\t\tconst labPopID = this.nextIndex++;\n\t\tconst labPopValID = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(act.createLabel, labPopID, 'Popped Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\n\t\tthis.cmd(act.setHighlight, this.topID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.top = this.top - 1;\n\t\tthis.cmd(act.setText, this.topID, this.top);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.topID, 0);\n\n\t\tthis.cmd(act.createHighlightCircle, this.highlight1ID, '#0000FF', TOP_POS_X, TOP_POS_Y);\n\t\tthis.cmd(act.step);\n\n\t\tconst xpos = (this.top % ARRRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(this.top / ARRRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.createLabel, labPopValID, this.arrayData[this.top], xpos, ypos);\n\t\tthis.cmd(act.setText, this.arrayID[this.top], '');\n\t\tthis.cmd(act.move, labPopValID, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, labPopValID);\n\t\tthis.cmd(act.delete, labPopID);\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\t\tthis.cmd(act.setText, this.leftoverLabelID, 'Popped Value: ' + this.arrayData[this.top]);\n\n\t\treturn this.commands;\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.top; i++) {\n\t\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\t}\n\t\tthis.top = 0;\n\t\tthis.cmd(act.setText, this.topID, '0');\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, { addControlToAlgorithmBar, addDivisorToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst LINKED_LIST_START_X = 100;\nconst LINKED_LIST_START_Y = 200;\nconst LINKED_LIST_ELEM_WIDTH = 70;\nconst LINKED_LIST_ELEM_HEIGHT = 30;\n\nconst LINKED_LIST_INSERT_X = 250;\nconst LINKED_LIST_INSERT_Y = 50;\n\nconst LINKED_LIST_ELEMS_PER_LINE = 8;\nconst LINKED_LIST_ELEM_SPACING = 100;\nconst LINKED_LIST_LINE_SPACING = 100;\n\nconst TOP_POS_X = 180;\nconst TOP_POS_Y = 100;\nconst TOP_LABEL_X = 130;\nconst TOP_LABEL_Y = 100;\n\nconst TOP_ELEM_WIDTH = 30;\nconst TOP_ELEM_HEIGHT = 30;\n\nconst PUSH_LABEL_X = 50;\nconst PUSH_LABEL_Y = 30;\nconst PUSH_ELEMENT_X = 120;\nconst PUSH_ELEMENT_Y = 30;\n\nconst SIZE = 32;\n\nexport default class StackLL extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.commands = [];\n\t\tthis.setup();\n\t\tthis.initialIndex = this.nextIndex;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\t\tthis.pushField = addControlToAlgorithmBar('Text', '');\n\t\tthis.pushField.onkeydown = this.returnSubmit(\n\t\t\tthis.pushField,\n\t\t\tthis.pushCallback.bind(this),\n\t\t\t4,\n\t\t);\n\n\t\tthis.pushButton = addControlToAlgorithmBar('Button', 'Push');\n\t\tthis.pushButton.onclick = this.pushCallback.bind(this);\n\t\tthis.controls.push(this.pushField);\n\t\tthis.controls.push(this.pushButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.popButton = addControlToAlgorithmBar('Button', 'Pop');\n\t\tthis.popButton.onclick = this.popCallback.bind(this);\n\t\tthis.controls.push(this.popButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.linkedListElemID = new Array(SIZE);\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.linkedListElemID[i] = this.nextIndex++;\n\t\t}\n\t\tthis.topID = this.nextIndex++;\n\t\tthis.topLabelID = this.nextIndex++;\n\n\t\tthis.arrayData = new Array(SIZE);\n\t\tthis.top = 0;\n\t\tthis.leftoverLabelID = this.nextIndex++;\n\n\t\tthis.cmd(act.createLabel, this.topLabelID, 'Top', TOP_LABEL_X, TOP_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.topID,\n\t\t\t'',\n\t\t\tTOP_ELEM_WIDTH,\n\t\t\tTOP_ELEM_HEIGHT,\n\t\t\tTOP_POS_X,\n\t\t\tTOP_POS_Y,\n\t\t);\n\t\tthis.cmd(act.setNull, this.topID, 1);\n\n\t\tthis.cmd(act.createLabel, this.leftoverLabelID, '', PUSH_LABEL_X, PUSH_LABEL_Y);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\tresetLinkedListPositions() {\n\t\tfor (let i = this.top - 1; i >= 0; i--) {\n\t\t\tconst nextX =\n\t\t\t\t((this.top - 1 - i) % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING +\n\t\t\t\tLINKED_LIST_START_X;\n\t\t\tconst nextY =\n\t\t\t\tMath.floor((this.top - 1 - i) / LINKED_LIST_ELEMS_PER_LINE) *\n\t\t\t\t\tLINKED_LIST_LINE_SPACING +\n\t\t\t\tLINKED_LIST_START_Y;\n\t\t\tthis.cmd(act.move, this.linkedListElemID[i], nextX, nextY);\n\t\t}\n\t}\n\n\treset() {\n\t\tthis.top = 0;\n\t\tthis.nextIndex = this.initialIndex;\n\t}\n\n\tpushCallback() {\n\t\tif (this.top < SIZE && this.pushField.value !== '') {\n\t\t\tconst pushVal = this.pushField.value;\n\t\t\tthis.pushField.value = '';\n\t\t\tthis.implementAction(this.push.bind(this), pushVal);\n\t\t}\n\t}\n\n\tpopCallback() {\n\t\tif (this.top > 0) {\n\t\t\tthis.implementAction(this.pop.bind(this));\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearAll.bind(this));\n\t}\n\n\tpush(elemToPush) {\n\t\tthis.commands = [];\n\n\t\tconst labPushID = this.nextIndex++;\n\t\tconst labPushValID = this.nextIndex++;\n\t\tthis.arrayData[this.top] = elemToPush;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(\n\t\t\tact.createLinkedListNode,\n\t\t\tthis.linkedListElemID[this.top],\n\t\t\t'',\n\t\t\tLINKED_LIST_ELEM_WIDTH,\n\t\t\tLINKED_LIST_ELEM_HEIGHT,\n\t\t\tLINKED_LIST_INSERT_X,\n\t\t\tLINKED_LIST_INSERT_Y,\n\t\t\t0.25,\n\t\t\t0,\n\t\t\t1,\n\t\t);\n\n\t\tthis.cmd(act.createLabel, labPushID, 'Pushing Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPushValID, elemToPush, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, labPushValID, LINKED_LIST_INSERT_X, LINKED_LIST_INSERT_Y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.linkedListElemID[this.top], elemToPush);\n\t\tthis.cmd(act.delete, labPushValID);\n\n\t\tif (this.top === 0) {\n\t\t\tthis.cmd(act.setNull, this.topID, 0);\n\t\t\tthis.cmd(act.setNull, this.linkedListElemID[this.top], 1);\n\t\t} else {\n\t\t\tthis.cmd(\n\t\t\t\tact.connect,\n\t\t\t\tthis.linkedListElemID[this.top],\n\t\t\t\tthis.linkedListElemID[this.top - 1],\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.disconnect, this.topID, this.linkedListElemID[this.top - 1]);\n\t\t}\n\t\tthis.cmd(act.connect, this.topID, this.linkedListElemID[this.top]);\n\n\t\tthis.cmd(act.step);\n\t\tthis.top = this.top + 1;\n\t\tthis.resetLinkedListPositions();\n\t\tthis.cmd(act.delete, labPushID);\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tpop() {\n\t\tthis.commands = [];\n\n\t\tconst labPopID = this.nextIndex++;\n\t\tconst labPopValID = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(act.createLabel, labPopID, 'Popped Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tlabPopValID,\n\t\t\tthis.arrayData[this.top - 1],\n\t\t\tLINKED_LIST_START_X,\n\t\t\tLINKED_LIST_START_Y,\n\t\t);\n\n\t\tthis.cmd(act.move, labPopValID, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.disconnect, this.topID, this.linkedListElemID[this.top - 1]);\n\n\t\tif (this.top === 1) {\n\t\t\tthis.cmd(act.setNull, this.topID, 1);\n\t\t} else {\n\t\t\tthis.cmd(act.connect, this.topID, this.linkedListElemID[this.top - 2]);\n\t\t}\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, this.linkedListElemID[this.top - 1]);\n\t\tthis.top = this.top - 1;\n\t\tthis.resetLinkedListPositions();\n\n\t\tthis.cmd(act.delete, labPopValID);\n\t\tthis.cmd(act.delete, labPopID);\n\t\tthis.cmd(act.setText, this.leftoverLabelID, 'Popped Value: ' + this.arrayData[this.top]);\n\n\t\treturn this.commands;\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.top; i++) {\n\t\t\tthis.cmd(act.delete, this.linkedListElemID[i]);\n\t\t}\n\t\tthis.top = 0;\n\t\tthis.cmd(act.setNull, this.topID, 1);\n\t\treturn this.commands;\n\t}\n}\n","import React from 'react';\n\n// Include the ClassName of algorithms that should have an example modal\nexport default {\n\tAVL: (\n\t\t<ul>\n\t\t\t<li>To cause a left rotation, add 1, 2 and 3, in that order</li>\n\t\t\t<li>To cause a right rotation, add 3, 2 and 1, in that order</li>\n\t\t\t<li>To cause a left-right rotation, add 3, 1 and 2, in that order</li>\n\t\t\t<li>To cause a right-left rotation, add 1, 3 and 2, in that order</li>\n\t\t</ul>\n\t),\n\tBoyerMoore: (\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\tThe worst case is when we have a text with only one letter and a pattern with that\n\t\t\t\tsame letter, but a different first letter (for example, &quot;aaaaaaaaa&quot; for\n\t\t\t\ttext and &quot;baaaa&quot; for pattern), since we will only mismatch on the last\n\t\t\t\tcomparison\n\t\t\t</li>\n\t\t</ul>\n\t),\n\tBruteForce: (\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\tThe worst case is when we have a text with only one letter and a pattern with that\n\t\t\t\tsame letter, but a different last letter (for example, &quot;aaaaaaaaa&quot; for\n\t\t\t\ttext and &quot;aaaab&quot; for pattern), since we will only mismatch on the last\n\t\t\t\tcomparison\n\t\t\t</li>\n\t\t</ul>\n\t),\n\tBST: (\n\t\t<ul>\n\t\t\t<li>To get a degenerate BST, you can add ascending data, such as 1, 2, 3, ...</li>\n\t\t\t<li>To get a full BST, you can add 2, 1, 4, 3, 5, in that order</li>\n\t\t\t<li>To get a complete BST, you can add 3, 2, 4, 1, in that order</li>\n\t\t\t<li>To get a full and complete BST, you can add 4, 2, 5, 1, 3, in that order</li>\n\t\t</ul>\n\t),\n\tBTree: (\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\tTo cause overflow and trigger a promotion, add more than 3 data (for example 1, 2, 3\n\t\t\t\tand 4)\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\tTo remove from a leaf node, add 1, 2, 3 and 4, in that order, then remove 3 or 4\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\tTo remove from an inner node and use the predecessor, add 1, 3, 4, 5 and 2, in that\n\t\t\t\torder, then remove 3\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\tTo cause underflow and trigger a rotation/transfer, add 1, 2, 3 and 4, in that\n\t\t\t\torder, then remove 1\n\t\t\t</li>\n\t\t\t<li>To cause underflow and trigger a fusion, follow the steps above then remove 2</li>\n\t\t</ul>\n\t),\n\tBubbleSort: (\n\t\t<ul>\n\t\t\t<li>The best case is when we have a sorted array (terminates if no swaps are made)</li>\n\t\t\t<li>\n\t\t\t\tThe worst case is when we have a reverse sorted array (we perform\n\t\t\t\t<p className=\"equation\">\n\t\t\t\t\tn + (n - 1) + (n - 2) + ... = n<sup>2</sup>\n\t\t\t\t</p>\n\t\t\t\tcomparisons)\n\t\t\t</li>\n\t\t</ul>\n\t),\n\tCocktailSort: (\n\t\t<ul>\n\t\t\t<li>The best case is when we have a sorted array (terminates if no swaps are made)</li>\n\t\t\t<li>\n\t\t\t\tThe worst case is when we have a reverse sorted array (we perform\n\t\t\t\t<p className=\"equation\">\n\t\t\t\t\tn + (n - 1) + (n - 2) + ... = n<sup>2</sup>\n\t\t\t\t</p>\n\t\t\t\tcomparisons)\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\tEven though Cocktail Shaker Sort has the same big-O as Bubble Sort, it is still\n\t\t\t\tfaster; one case where it significantly outperforms Bubble Sort is when we have a\n\t\t\t\tsorted array, except for the last element which is the smallest, for example [2, 3,\n\t\t\t\t4, 5, 6, 7, 8, 9, 1]\n\t\t\t</li>\n\t\t</ul>\n\t),\n\tInsertionSort: (\n\t\t<ul>\n\t\t\t<li>The best case is when we have a sorted array (terminates if no swaps are made)</li>\n\t\t\t<li>\n\t\t\t\tThe worst case is when we have a reverse sorted array (we perform\n\t\t\t\t<p className=\"equation\">\n\t\t\t\t\tn + (n - 1) + (n - 2) + ... = n<sup>2</sup>\n\t\t\t\t</p>\n\t\t\t\tcomparisons)\n\t\t\t</li>\n\t\t</ul>\n\t),\n\tQuickSelect: (\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\tThe worst case occurs when we pick a bad pivot everytime (for example, the smallest\n\t\t\t\tor largest element), since we can no longer subvide the array\n\t\t\t</li>\n\t\t</ul>\n\t),\n\tQuickSort: (\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\tThe worst case occurs when we pick a bad pivot everytime (for example, the smallest\n\t\t\t\tor largest element), since we can no longer subvide the array and the algorithms\n\t\t\t\tbecomes similar to Selection Sort\n\t\t\t</li>\n\t\t</ul>\n\t),\n\tSkipList: (\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\tYou can get a degenerate SkipList by always adding with a constant amount of heads,\n\t\t\t\tfor example 0 or 4.\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\tNote that in a real SkipList, you would have an{' '}\n\t\t\t\t<span className=\"inline-eq\">O(log n) </span>\n\t\t\t\tcap to the number of levels, so we wouldn't be able to add the first element with 4\n\t\t\t\theads, for example.\n\t\t\t</li>\n\t\t</ul>\n\t),\n};\n","import '../css/AlgoScreen.css';\nimport '../css/App.css';\nimport AnimationManager from '../anim/AnimationMain';\nimport Footer from '../components/Footer';\nimport Header from '../components/Header';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { algoMap } from '../AlgoList';\nimport modals from '../examples/ExampleModals';\n\nclass AlgoScreen extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tconst algoName = props.location.pathname.slice(1);\n\t\tthis.canvasRef = React.createRef();\n\t\tthis.animBarRef = React.createRef();\n\n\t\tthis.state = {\n\t\t\talgoName: algoName,\n\t\t\texamplesEnabled: false,\n\t\t\twidth: 0,\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tif (algoMap[this.state.algoName]) {\n\t\t\tthis.animManag = new AnimationManager(this.canvasRef, this.animBarRef);\n\n\t\t\tthis.currentAlg = new algoMap[this.state.algoName][1](\n\t\t\t\tthis.animManag,\n\t\t\t\tthis.canvasRef.current.width,\n\t\t\t\tthis.canvasRef.current.height,\n\t\t\t);\n\t\t\twindow.addEventListener('resize', this.updateDimensions);\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('resize', this.updateDimensions);\n\t}\n\n\tupdateDimensions = () => {\n\t\tconsole.log(this.state.width);\n\t\tthis.animManag.changeSize(window.innerWidth);\n\t};\n\n\trender() {\n\t\tconst algoName = this.state.algoName;\n\t\tif (!algoMap[algoName]) {\n\t\t\treturn (\n\t\t\t\t<div className=\"container\">\n\t\t\t\t\t<Header />\n\t\t\t\t\t<div className=\"content\">\n\t\t\t\t\t\t<div className=\"four-o-four\">\n\t\t\t\t\t\t\t<h1>404!</h1>\n\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\tAlgorithm not found! Click <Link to=\"/\">here</Link> to return to the\n\t\t\t\t\t\t\t\thome screen and choose another algorithm.\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Footer />\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tconst header = algoMap[algoName][2] ? algoMap[algoName][2] : algoMap[algoName][0];\n\t\treturn (\n\t\t\t<div className=\"VisualizationMainPage\">\n\t\t\t\t<div id=\"container\">\n\t\t\t\t\t<div id=\"header\">\n\t\t\t\t\t\t<h1>\n\t\t\t\t\t\t\t<Link to=\"/\">&#x3008;</Link>&nbsp;&nbsp;{header}\n\t\t\t\t\t\t</h1>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div id=\"mainContent\">\n\t\t\t\t\t\t<div id=\"algoControlSection\">\n\t\t\t\t\t\t\t<table id=\"AlgorithmSpecificControls\"></table>\n\t\t\t\t\t\t\t{modals[algoName] && (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName={this.state.examplesEnabled ? 'selected' : ''}\n\t\t\t\t\t\t\t\t\tid=\"examplesButton\"\n\t\t\t\t\t\t\t\t\tonClick={this.toggleExamples}\n\t\t\t\t\t\t\t\t></button>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"viewport\">\n\t\t\t\t\t\t\t<canvas\n\t\t\t\t\t\t\t\tid=\"canvas\"\n\t\t\t\t\t\t\t\twidth={this.state.width}\n\t\t\t\t\t\t\t\theight=\"505\"\n\t\t\t\t\t\t\t\tref={this.canvasRef}\n\t\t\t\t\t\t\t></canvas>\n\t\t\t\t\t\t\t{this.state.examplesEnabled && (\n\t\t\t\t\t\t\t\t<div className=\"modal\">\n\t\t\t\t\t\t\t\t\t<div className=\"modal-content\">{modals[algoName]}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div id=\"generalAnimationControlSection\">\n\t\t\t\t\t\t\t<table id=\"GeneralAnimationControls\" ref={this.animBarRef}></table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div id=\"footer\">\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<Link to=\"/\">Return to Home Page</Link>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\ttoggleExamples = () => this.setState(state => ({ examplesEnabled: !state.examplesEnabled }));\n}\n\nAlgoScreen.propTypes = {\n\tlocation: PropTypes.object,\n};\n\nexport default AlgoScreen;\n","import React from 'react';\n\nconst AboutScreen = () => (\n\t<div className=\"about\">\n\t\t<p>\n\t\t\tThis is a tool to help you visualize and understand the data structures and algorithms\n\t\t\tcovered in Georgia Tech's CS1332 course. It is based on the{' '}\n\t\t\t<a href=\"https://www.cs.usfca.edu/~galles/visualization/about.html\">\n\t\t\t\tData Structures Visualizations website\n\t\t\t</a>{' '}\n\t\t\tby David Gales.\n\t\t</p>\n\t\t<p>\n\t\t\tThe CS1332 Visualization Tool was adapted and expanded by{' '}\n\t\t\t<a href=\"https://rodrigodlpontes.github.io/website/\">Rodrigo Pontes</a>, with the help\n\t\t\tof Miguel de los Reyes and Alex McQuilkin and under the supervision of Prof. Mary\n\t\t\tHudachek-Buswell, to include data structures and algorithms covered in the course.\n\t\t</p>\n\t\t<p>\n\t\t\tIt also includes icons from{' '}\n\t\t\t<a href=\"https://material.io/resources/icons/?style=baseline\">\n\t\t\t\tGoogle&#39;s Material Icons\n\t\t\t</a>\n\t\t\t, and components from <a href=\"https://material-ui.com/\">Material UI</a>.\n\t\t</p>\n\t</div>\n);\n\nexport default AboutScreen;\n","import '../css/App.css';\nimport { Link, Route, Switch } from 'react-router-dom';\nimport { algoList, algoMap } from '../AlgoList';\nimport AboutScreen from './AboutScreen';\nimport Footer from '../components/Footer';\nimport Header from '../components/Header';\nimport React from 'react';\n\nconst HomeScreen = () => (\n\t<div className=\"container\">\n\t\t<Header />\n\t\t<div className=\"content\">\n\t\t\t<Switch>\n\t\t\t\t<Route exact path=\"/\">\n\t\t\t\t\t<div className=\"outer-flex\">\n\t\t\t\t\t\t<div className=\"inner-flex\">\n\t\t\t\t\t\t\t{algoList.map((name, idx) =>\n\t\t\t\t\t\t\t\talgoMap[name] ? (\n\t\t\t\t\t\t\t\t\t<Link to={`/${name}`} key={idx}>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"button\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={algoMap[name][0]}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<div key={idx} className=\"divider\">\n\t\t\t\t\t\t\t\t\t\t<span>{name}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Route>\n\t\t\t\t<Route path=\"/about\">\n\t\t\t\t\t<AboutScreen />\n\t\t\t\t</Route>\n\t\t\t</Switch>\n\t\t</div>\n\t\t<Footer />\n\t</div>\n);\n\nexport default HomeScreen;\n","import './css/App.css';\nimport { Route, BrowserRouter as Router, Switch } from 'react-router-dom';\nimport AlgoScreen from './screens/AlgoScreen';\nimport HomeScreen from './screens/HomeScreen';\nimport React from 'react';\n\nconst App = () => (\n\t<Router basename={process.env.PUBLIC_URL + '/'}>\n\t\t<Switch>\n\t\t\t<Route exact path={['/', '/about']} component={HomeScreen} />\n\t\t\t<Route component={AlgoScreen} />\n\t\t</Switch>\n\t</Router>\n);\n\nexport default App;\n","import * as serviceWorker from './serviceWorker';\nimport App from './App';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}